
!function(){try{var e="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:{},n=(new e.Error).stack;n&&(e._sentryDebugIds=e._sentryDebugIds||{},e._sentryDebugIds[n]="251b2b70-bf60-553f-a76f-061611582d61")}catch(e){}}();
(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,2332376,e=>{e.v({container:"percentile-bar-module__uS0wMW__container",target:"percentile-bar-module__uS0wMW__target"})},1113594,e=>{"use strict";var t=e.i(6468255),n=e.i(5255926),i=e.i(3896684),r=e.i(6143247),o=e.i(6696646),a=e.i(1772761),l=e.i(2457794),s=e.i(6065693),c=e.i(9463365),u=e.i(931197),d=e.i(6238632),f=e.i(5326961),p=e.i(3617058),h=e.i(9722978),m=e.i(9508212),g=e.i(1344973),x=e.i(5468328),v=e.i(2332376);let{Poor:y,Improvable:j,Good:b}=u.Rating;function S(e){let{active:n,className:i,style:r,percent:o,tooltipText:a,tooltipDelay:l,disabled:s}=e;return(0,t.jsx)(x.Tooltip,{className:(0,p.twMerge)("relative h-full w-full bg-gray-200 transition-all duration-200","first:rounded-l last:rounded-r",i,s&&"pointer-events-none",n?"opacity-100":(0,p.twMerge)("opacity-80 grayscale",!s&&"hover:gray hover:grayscale-0")),delayTime:l,style:{width:`${o}%`,...r},text:a,children:(0,t.jsx)("div",{className:"absolute top-0 h-3 w-full"})})}function w(e){let{distribution:n,targetPercentile:i,showPercentileLabel:r,metricLabel:a,isLoading:l}=e,{good:s=80,improvable:c=15,poor:u=5}=n||{},d=function(){if(!l)return i<=s?b:i<=s+c?j:y}(),f="large"===e.size?4:3,w=(0,o.useMemo)(()=>({disabled:l,tooltipDelay:e.tooltipDelay}),[l,e.tooltipDelay]);return(0,t.jsxs)("div",{className:(0,h.clsx)(v.default.container,"tailwind"),children:[(0,t.jsxs)("div",{className:"relative w-full",children:[(0,t.jsxs)("div",{className:"flex w-full space-x-0.5",style:{height:`${f}px`},children:[s>0&&(0,t.jsx)(S,{...w,active:d===b,className:"bg-green-700",percent:s,tooltipText:`${Math.round(s)}% of visits had a great ${a}`}),c>0&&(0,t.jsx)(S,{...w,active:d===j,className:"bg-amber-700",percent:c,tooltipDelay:e.tooltipDelay,tooltipText:`${Math.round(c)}% of visits scored "needs improvement" on ${a}`}),u>0&&(0,t.jsx)(S,{...w,active:d===y,className:"bg-red-700",percent:u,tooltipDelay:e.tooltipDelay,tooltipText:`${Math.round(u)}% of visits had a poor ${a}`})]}),(0,t.jsx)("div",{className:(0,p.twMerge)(v.default.target,r&&"bg-gray-700",(0,h.clsx)({"bg-green-700":d===b,"bg-amber-700":d===j,"bg-red-700":d===y})),style:{left:`${i}%`}})]}),r?(0,t.jsx)("div",{className:"h-6",children:(0,t.jsx)("div",{className:"absolute mt-1 flex w-0 flex-col items-center justify-center",style:{left:`${i}%`},children:(0,t.jsx)(x.Tooltip,{delayTime:e.tooltipDelay,text:`The score is given on the ${a} most visits (75%) had.`,children:(0,t.jsx)(m.Stack,{className:"cursor-default rounded-sm border bg-background-100 px-1.5 py-0.5",children:(0,t.jsxs)(g.Text,{color:"gray-900",size:12,weight:500,children:["P",i.toString()]})})})})}):null]})}let N={[u.Rating.Good]:"text-green-700",[u.Rating.Improvable]:"text-amber-700",[u.Rating.Poor]:"text-red-700"},M={0:"var(--ds-red-700)",50:"var(--ds-amber-700)",90:"var(--ds-green-700)"};function k(e){let{metric:u,metricDefinitions:p,className:h,size:m,device:g,values:x,isLoading:v,hasData:y,disabled:j}=e,{state:b}=(0,d.useSpeedInsightsUrlState)(),{isEnabled:S}=(0,f.useSpeedInsightsStatus)(),{value:k,rating:E,metricDefinition:T}=(0,o.useMemo)(()=>{let e=p[u].thresholds[g],t=x?.[u]?.p75??0;return{metricDefinition:p[u],value:t,rating:(0,c.getRatingForThresholds)(e,t)}},[x,u,p,g]),C=(0,d.canMetricBeFiltered)(T.type,(0,d.useSpeedInsightsUrlState)().state)&&(y||j)&&k>=0;return"RES"!==u?(0,t.jsxs)("span",{className:(0,r.cn)("flex flex-col gap-2 justify-start",h,j&&"grayscale"),children:[(0,t.jsxs)("span",{className:(0,r.cn)("flex flex-row items-baseline","large"===m?"gap-1":"gap-0.5"),children:[(0,t.jsx)(n.Skeleton,{show:v,children:(0,t.jsx)("p",{className:(0,r.cn)("text-left font-medium font-sans",N[E],"large"===m?"text-[32px]":"text-[20px]"),children:C?(0,t.jsx)(a.AnimatedNumber,{value:(0,c.formatMetric)(k,T).value}):(0,t.jsx)("span",{className:"text-gray-800",children:"â€“"})})}),(0,t.jsx)("p",{className:(0,r.cn)("align-text-bottom text-gray-800 font-normal font-sans","large"===m?"text-[16px]":"text-[12px]"),children:C?T.unit:null})]}),(0,t.jsx)(w,{distribution:x?.[u]?.distribution,isLoading:v||!C,metricLabel:T.type,showPercentileLabel:"large"===m&&C,size:m,targetPercentile:75,tooltipDelay:e.tooltipDelay})]}):(0,t.jsx)("span",{className:"flex flex-row justify-start",children:(0,t.jsx)("div",{children:(0,t.jsx)(n.Skeleton,{pill:!0,show:v,children:(0,t.jsx)(l.default,{colors:M,showValue:!0,size:"large"===m?"medium":"small",value:C?k:null,children:C?null:(0,c.isDisplayingRecentData)(b)&&S?(0,t.jsx)(s.NoData,{size:"large"===m?24:14}):(0,t.jsx)(i.ChartActivity,{className:"!text-gray-700",color:"gray-700",size:"large"===m?22:14})})})})})}e.s(["MetricDisplay",()=>k],1113594)},5948355,e=>{"use strict";var t=e.i(6468255),n=e.i(8412040),i=e.i(7300),r=e.i(931197),o=e.i(2504781),a=e.i(6143247),l=e.i(6696646),s=e.i(7344877),c=e.i(6238632),u=e.i(5326961),d=e.i(1108511),f=e.i(7791712),p=e.i(1113594);let h={[r.MetricType.FCP]:{p75:1160,p90:0,p95:0,p99:0,distribution:{good:84,improvable:10,poor:6}},[r.MetricType.LCP]:{p75:1240,p90:0,p95:0,p99:0,distribution:{good:90,improvable:3,poor:7}},[r.MetricType.INP]:{p75:268,p90:0,p95:0,p99:0,distribution:{good:72,improvable:26,poor:2}},[r.MetricType.CLS]:{p75:.2,p90:0,p95:0,p99:0,distribution:{good:50,improvable:30,poor:20}},[r.MetricType.FID]:{p75:240,p90:0,p95:0,p99:0,distribution:{good:70,improvable:20,poor:10}},[r.MetricType.TTFB]:{p75:530,p90:0,p95:0,p99:0,distribution:{good:95,improvable:5,poor:0}}};function m(e){let{children:n}=e;return(0,t.jsx)("div",{className:"flex flex-row lg:flex-col overflow-hidden rounded-md shadow-md enable-vertical group divide-x lg:divide-x-0 lg:divide-y",children:n})}function g(e){let{children:n}=e;return(0,t.jsx)("div",{className:"flex flex-col lg:flex-row p-3 pt-3.5 lg:p-2 lg:pt-2 gap-2 items-stretch lg:items-center bg-background-100",children:n})}function x(e){let{metricDefinitions:i}=e,{EnableModal:a,openEnableModal:s}=(0,f.useOpenEnableModal)(),{supportsPlus:p,hasSpeedInsightsPlus:x,hasSpeedInsightsPlusOrRemainingDays:y,isLoading:j}=(0,u.useSpeedInsightsStatus)(),{set:b,state:S}=(0,c.useSpeedInsightsUrlState)(),{data:w}=(0,d.useTimeseriesWithQueryParams)(),N=(0,l.useMemo)(()=>{if(w)return p?p?{...h,...w.overview}:void 0:w.overview},[p,w]),M=(0,l.useMemo)(()=>!!p&&!y,[y,p]);(0,l.useEffect)(()=>{M&&S.metric!==r.MetricType.RES&&b({metric:r.MetricType.RES})},[M,S.metric,b]);let k=(0,t.jsx)(v,{metric:r.MetricType.RES,metricDefinitions:i,overview:N}),E=(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(v,{disabled:M,metric:r.MetricType.FCP,metricDefinitions:i,overview:N}),(0,t.jsx)(v,{disabled:M,metric:r.MetricType.LCP,metricDefinitions:i,overview:N}),(0,t.jsx)(v,{disabled:M,metric:r.MetricType.INP,metricDefinitions:i,overview:N}),(0,t.jsx)(v,{disabled:M,metric:r.MetricType.CLS,metricDefinitions:i,overview:N})]}),T=j||!p||x?(0,t.jsxs)(m,{children:[k,E]}):(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(m,{children:k}),(0,t.jsxs)(m,{children:[(0,t.jsxs)(g,{children:[(0,t.jsx)("span",{className:"font-medium font-sans flex-1 lg:pl-1",children:"Available in Plus"}),(0,t.jsx)(o.Button,{size:"small",type:"secondary",onClick:s,children:"Upgrade"}),a]}),E]})]});return(0,t.jsx)(n.MobileScrollWrapper,{className:"-mx-6 -my-2 max-w-[100vw] flex-1",contentClassName:"py-2 px-6",children:(0,t.jsxs)("div",{className:"flex flex-row lg:flex-col gap-2",children:[T,(0,t.jsxs)(m,{children:[(0,t.jsx)(v,{disabled:M,metric:r.MetricType.FID,metricDefinitions:i,overview:N}),(0,t.jsx)(v,{disabled:M,metric:r.MetricType.TTFB,metricDefinitions:i,overview:N})]})]})})}function v(e){let{metricDefinitions:n,metric:r,disabled:o,overview:l}=e,{set:d,state:{period:f,device:h}}=(0,c.useSpeedInsightsUrlState)(),{metric:m}=(0,s.useApiParams)(),{hasData:g}=(0,u.useSpeedInsightsStatus)();return(0,t.jsx)(i.Tab,{active:m===r,className:(0,a.cn)("px-4","first-child:rounded-tl last-child:rounded-bl","lg:first-child:rounded-tl-0 lg:last-child:rounded-bl-0"),disabled:o,label:n[r].name,loading:!1,onClick:()=>{d({metric:r})},period:f,value:(0,t.jsx)(p.MetricDisplay,{className:"flex-1",device:h,disabled:o,hasData:g,isLoading:!l,metric:r,metricDefinitions:n,size:"small",tooltipDelay:600,values:l})},r)}e.s(["VerticalTabs",()=>x])},8901547,e=>{e.v({"slide-up":"graph-module__4Q3shW__slide-up",slideUpAnimation:"graph-module__4Q3shW__slideUpAnimation","tooltip-bottom":"graph-module__4Q3shW__tooltip-bottom"})},5835580,e=>{"use strict";var t,n,i,r,o=e.i(6468255),a=e.i(57106),l=e.i(931197),s=e.i(9100551),c=e.i(5657713),u=e.i(9722978),d=e.i(5255926),f=e.i(9508212),p=e.i(1344973),h=e.i(6696646);e.i(7286972);var m=e.i(5693388),g=e.i(4826595),x=e.i(6060673),v=e.i(5771992),y=e.i(8172689),j=e.i(8412040),b=e.i(7105856),S=e.i(5018524),w=e.i(9463365),N=e.i(7946377),M=e.i(4833050),k=e.i(277234),E=e.i(5269510),T=e.i(6238632);let C=e=>{let t=(0,E.stringify)(e),{state:n}=(0,T.useSpeedInsightsUrlState)(),{data:i,error:r,isLoading:o}=(0,M.default)(`/api/v0/speed-insights/breakdown?${t}`,t=>(0,T.canMetricBeFiltered)(e.metric,n)?(0,k.fetchAPI)(t):{breakdown:[],notSupported:!0},{revalidateOnFocus:!1,shouldRetryOnError:e=>403!==(e.statusCode||e.status)});return{data:i?.breakdown&&!i.notSupported?function(e){let t={[l.Rating.Good]:[],[l.Rating.Improvable]:[],[l.Rating.Poor]:[]};for(let{ratings:n}of e)for(let[e,i]of Object.entries(n))for(let{group:n,value:r,datapoints:o}of i)t[e].push({key:"undefined"===n||""===n?"Unknown":n,values:[o,r]});return t}(i.breakdown):void 0,isLoading:o,isError:!!r}};var R=e.i(7344877),D=e.i(8545185),P=e.i(4254226),_=e.i(8264458),I=e.i(2304153),A=["top","left","transform","className","children","innerRef"];function O(){return(O=Object.assign.bind()).apply(this,arguments)}function L(e){var t=e.top,n=e.left,i=e.transform,r=e.className,o=e.children,a=e.innerRef,l=function(e,t){if(null==e)return{};var n,i,r={},o=Object.keys(e);for(i=0;i<o.length;i++)n=o[i],t.indexOf(n)>=0||(r[n]=e[n]);return r}(e,A);return h.default.createElement("g",O({ref:a,className:(0,_.default)("visx-group",r),transform:i||"translate("+(void 0===n?0:n)+", "+(void 0===t?0:t)+")"},l),o)}L.propTypes={top:I.default.number,left:I.default.number,transform:I.default.string,className:I.default.string,children:I.default.node,innerRef:I.default.oneOfType([I.default.string,I.default.func,I.default.object])};var F=Math.PI,z=F/2,$=F/4,W=2*F,G=180/F,U=F/180,H=Math.abs,B=Math.atan,V=Math.atan2,Q=Math.cos,K=Math.ceil,q=Math.exp,Z=Math.log,Y=Math.sin,J=Math.sign||function(e){return e>0?1:e<0?-1:0},X=Math.sqrt,ee=Math.tan;function et(e){return e>1?z:e<-1?-z:Math.asin(e)}function en(){}function ei(){var e,t=[];return{point:function(t,n,i){e.push([t,n,i])},lineStart:function(){t.push(e=[])},lineEnd:en,rejoin:function(){t.length>1&&t.push(t.pop().concat(t.shift()))},result:function(){var n=t;return t=[],e=null,n}}}function er(e,t){return 1e-6>H(e[0]-t[0])&&1e-6>H(e[1]-t[1])}function eo(e,t,n,i){this.x=e,this.z=t,this.o=n,this.e=i,this.v=!1,this.n=this.p=null}function ea(e,t,n,i,r){var o,a,l=[],s=[];if(e.forEach(function(e){if(!((t=e.length-1)<=0)){var t,n,i=e[0],a=e[t];if(er(i,a)){if(!i[2]&&!a[2]){for(r.lineStart(),o=0;o<t;++o)r.point((i=e[o])[0],i[1]);r.lineEnd();return}a[0]+=2e-6}l.push(n=new eo(i,e,null,!0)),s.push(n.o=new eo(i,null,n,!1)),l.push(n=new eo(a,e,null,!1)),s.push(n.o=new eo(a,null,n,!0))}}),l.length){for(s.sort(t),el(l),el(s),o=0,a=s.length;o<a;++o)s[o].e=n=!n;for(var c,u,d=l[0];;){for(var f=d,p=!0;f.v;)if((f=f.n)===d)return;c=f.z,r.lineStart();do{if(f.v=f.o.v=!0,f.e){if(p)for(o=0,a=c.length;o<a;++o)r.point((u=c[o])[0],u[1]);else i(f.x,f.n.x,1,r);f=f.n}else{if(p)for(o=(c=f.p.z).length-1;o>=0;--o)r.point((u=c[o])[0],u[1]);else i(f.x,f.p.x,-1,r);f=f.p}c=(f=f.o).z,p=!p}while(!f.v)r.lineEnd()}}}function el(e){if(t=e.length){for(var t,n,i=0,r=e[0];++i<t;)r.n=n=e[i],n.p=r,r=n;r.n=n=e[0],n.p=r}}function es(){this.reset()}es.prototype={constructor:es,reset:function(){this.s=this.t=0},add:function(e){eu(ec,e,this.t),eu(this,ec.s,this.s),this.s?this.t+=ec.t:this.s=ec.t},valueOf:function(){return this.s}};var ec=new es;function eu(e,t,n){var i=e.s=t+n,r=i-t;e.t=t-(i-r)+(n-r)}function ed(e){return[V(e[1],e[0]),et(e[2])]}function ef(e){var t=e[0],n=e[1],i=Q(n);return[i*Q(t),i*Y(t),Y(n)]}function ep(e,t){return e[0]*t[0]+e[1]*t[1]+e[2]*t[2]}function eh(e,t){return[e[1]*t[2]-e[2]*t[1],e[2]*t[0]-e[0]*t[2],e[0]*t[1]-e[1]*t[0]]}function em(e,t){e[0]+=t[0],e[1]+=t[1],e[2]+=t[2]}function eg(e,t){return[e[0]*t,e[1]*t,e[2]*t]}function ex(e){var t=X(e[0]*e[0]+e[1]*e[1]+e[2]*e[2]);e[0]/=t,e[1]/=t,e[2]/=t}var ev=new es;function ey(e){return H(e[0])<=F?e[0]:J(e[0])*((H(e[0])+F)%W-F)}function ej(e,t){return e<t?-1:e>t?1:e>=t?0:NaN}var eb=(1===(ta=ej).length&&(to=ta,ta=function(e,t){return ej(to(e),t)}),{left:function(e,t,n,i){for(null==n&&(n=0),null==i&&(i=e.length);n<i;){var r=n+i>>>1;0>ta(e[r],t)?n=r+1:i=r}return n},right:function(e,t,n,i){for(null==n&&(n=0),null==i&&(i=e.length);n<i;){var r=n+i>>>1;ta(e[r],t)>0?i=r:n=r+1}return n}});eb.right,eb.left;var eS=Array.prototype;function ew(e,t,n){e*=1,t*=1,n=(r=arguments.length)<2?(t=e,e=0,1):r<3?1:+n;for(var i=-1,r=0|Math.max(0,Math.ceil((t-e)/n)),o=Array(r);++i<r;)o[i]=e+i*n;return o}function eN(e){for(var t,n,i,r=e.length,o=-1,a=0;++o<r;)a+=e[o].length;for(n=Array(a);--r>=0;)for(t=(i=e[r]).length;--t>=0;)n[--a]=i[t];return n}function eM(e,t,n,i){return function(r){var o,a,l,s=t(r),c=ei(),u=t(c),d=!1,f={point:p,lineStart:m,lineEnd:g,polygonStart:function(){f.point=x,f.lineStart=v,f.lineEnd=y,a=[],o=[]},polygonEnd:function(){f.point=p,f.lineStart=m,f.lineEnd=g,a=eN(a);var e=function(e,t){var n=ey(t),i=t[1],r=Y(i),o=[Y(n),-Q(n),0],a=0,l=0;ev.reset(),1===r?i=z+1e-6:-1===r&&(i=-z-1e-6);for(var s=0,c=e.length;s<c;++s)if(d=(u=e[s]).length)for(var u,d,f=u[d-1],p=ey(f),h=f[1]/2+$,m=Y(h),g=Q(h),x=0;x<d;++x,p=y,m=b,g=S,f=v){var v=u[x],y=ey(v),j=v[1]/2+$,b=Y(j),S=Q(j),w=y-p,N=w>=0?1:-1,M=N*w,k=M>F,E=m*b;if(ev.add(V(E*N*Y(M),g*S+E*Q(M))),a+=k?w+N*W:w,k^p>=n^y>=n){var T=eh(ef(f),ef(v));ex(T);var C=eh(o,T);ex(C);var R=(k^w>=0?-1:1)*et(C[2]);(i>R||i===R&&(T[0]||T[1]))&&(l+=k^w>=0?1:-1)}}return(a<-1e-6||a<1e-6&&ev<-1e-6)^1&l}(o,i);a.length?(d||(r.polygonStart(),d=!0),ea(a,eE,e,n,r)):e&&(d||(r.polygonStart(),d=!0),r.lineStart(),n(null,null,1,r),r.lineEnd()),d&&(r.polygonEnd(),d=!1),a=o=null},sphere:function(){r.polygonStart(),r.lineStart(),n(null,null,1,r),r.lineEnd(),r.polygonEnd()}};function p(t,n){e(t,n)&&r.point(t,n)}function h(e,t){s.point(e,t)}function m(){f.point=h,s.lineStart()}function g(){f.point=p,s.lineEnd()}function x(e,t){l.push([e,t]),u.point(e,t)}function v(){u.lineStart(),l=[]}function y(){x(l[0][0],l[0][1]),u.lineEnd();var e,t,n,i,s=u.clean(),f=c.result(),p=f.length;if(l.pop(),o.push(l),l=null,p){if(1&s){if((t=(n=f[0]).length-1)>0){for(d||(r.polygonStart(),d=!0),r.lineStart(),e=0;e<t;++e)r.point((i=n[e])[0],i[1]);r.lineEnd()}return}p>1&&2&s&&f.push(f.pop().concat(f.shift())),a.push(f.filter(ek))}}return f}}function ek(e){return e.length>1}function eE(e,t){return((e=e.x)[0]<0?e[1]-z-1e-6:z-e[1])-((t=t.x)[0]<0?t[1]-z-1e-6:z-t[1])}eS.slice,eS.map;let eT=eM(function(){return!0},function(e){var t,n=NaN,i=NaN,r=NaN;return{lineStart:function(){e.lineStart(),t=1},point:function(o,a){var l,s,c,u,d,f,p,h=o>0?F:-F,m=H(o-n);1e-6>H(m-F)?(e.point(n,i=(i+a)/2>0?z:-z),e.point(r,i),e.lineEnd(),e.lineStart(),e.point(h,i),e.point(o,i),t=0):r!==h&&m>=F&&(1e-6>H(n-r)&&(n-=1e-6*r),1e-6>H(o-h)&&(o-=1e-6*h),l=n,s=i,c=o,u=a,i=H(p=Y(l-c))>1e-6?B((Y(s)*(f=Q(u))*Y(c)-Y(u)*(d=Q(s))*Y(l))/(d*f*p)):(s+u)/2,e.point(r,i),e.lineEnd(),e.lineStart(),e.point(h,i),t=0),e.point(n=o,i=a),r=h},lineEnd:function(){e.lineEnd(),n=i=NaN},clean:function(){return 2-t}}},function(e,t,n,i){var r;if(null==e)r=n*z,i.point(-F,r),i.point(0,r),i.point(F,r),i.point(F,0),i.point(F,-r),i.point(0,-r),i.point(-F,-r),i.point(-F,0),i.point(-F,r);else if(H(e[0]-t[0])>1e-6){var o=e[0]<t[0]?F:-F;r=n*o/2,i.point(-o,r),i.point(0,r),i.point(o,r)}else i.point(t[0],t[1])},[-F,-z]);function eC(e,t){function n(n,i){return t((n=e(n,i))[0],n[1])}return e.invert&&t.invert&&(n.invert=function(n,i){return(n=t.invert(n,i))&&e.invert(n[0],n[1])}),n}function eR(e,t){return[H(e)>F?e+Math.round(-e/W)*W:e,t]}function eD(e,t,n){return(e%=W)?t||n?eC(e_(e),eI(t,n)):e_(e):t||n?eI(t,n):eR}function eP(e){return function(t,n){return[(t+=e)>F?t-W:t<-F?t+W:t,n]}}function e_(e){var t=eP(e);return t.invert=eP(-e),t}function eI(e,t){var n=Q(e),i=Y(e),r=Q(t),o=Y(t);function a(e,t){var a=Q(t),l=Q(e)*a,s=Y(e)*a,c=Y(t),u=c*n+l*i;return[V(s*r-u*o,l*n-c*i),et(u*r+s*o)]}return a.invert=function(e,t){var a=Q(t),l=Q(e)*a,s=Y(e)*a,c=Y(t),u=c*r-s*o;return[V(s*r+c*o,l*n+u*i),et(u*n-l*i)]},a}function eA(e,t){t=ef(t),t[0]-=e,ex(t);var n,i=(n=-t[1])>1?0:n<-1?F:Math.acos(n);return((0>-t[2]?-i:i)+W-1e-6)%W}eR.invert=eR;function eO(e){return e}function eL(e){return function(t){var n=new eF;for(var i in e)n[i]=e[i];return n.stream=t,n}}function eF(){}function ez(e,t){e&&eW.hasOwnProperty(e.type)&&eW[e.type](e,t)}eF.prototype={constructor:eF,point:function(e,t){this.stream.point(e,t)},sphere:function(){this.stream.sphere()},lineStart:function(){this.stream.lineStart()},lineEnd:function(){this.stream.lineEnd()},polygonStart:function(){this.stream.polygonStart()},polygonEnd:function(){this.stream.polygonEnd()}};var e$={Feature:function(e,t){ez(e.geometry,t)},FeatureCollection:function(e,t){for(var n=e.features,i=-1,r=n.length;++i<r;)ez(n[i].geometry,t)}},eW={Sphere:function(e,t){t.sphere()},Point:function(e,t){e=e.coordinates,t.point(e[0],e[1],e[2])},MultiPoint:function(e,t){for(var n=e.coordinates,i=-1,r=n.length;++i<r;)e=n[i],t.point(e[0],e[1],e[2])},LineString:function(e,t){eG(e.coordinates,t,0)},MultiLineString:function(e,t){for(var n=e.coordinates,i=-1,r=n.length;++i<r;)eG(n[i],t,0)},Polygon:function(e,t){eU(e.coordinates,t)},MultiPolygon:function(e,t){for(var n=e.coordinates,i=-1,r=n.length;++i<r;)eU(n[i],t)},GeometryCollection:function(e,t){for(var n=e.geometries,i=-1,r=n.length;++i<r;)ez(n[i],t)}};function eG(e,t,n){var i,r=-1,o=e.length-n;for(t.lineStart();++r<o;)i=e[r],t.point(i[0],i[1],i[2]);t.lineEnd()}function eU(e,t){var n=-1,i=e.length;for(t.polygonStart();++n<i;)eG(e[n],t,1);t.polygonEnd()}function eH(e,t){e&&e$.hasOwnProperty(e.type)?e$[e.type](e,t):ez(e,t)}var eB=1/0,eV=1/0,eQ=-1/0,eK=eQ;let eq={point:function(e,t){e<eB&&(eB=e),e>eQ&&(eQ=e),t<eV&&(eV=t),t>eK&&(eK=t)},lineStart:en,lineEnd:en,polygonStart:en,polygonEnd:en,result:function(){var e=[[eB,eV],[eQ,eK]];return eQ=eK=-(eV=eB=1/0),e}};function eZ(e,t,n){var i=e.clipExtent&&e.clipExtent();return e.scale(150).translate([0,0]),null!=i&&e.clipExtent(null),eH(n,e.stream(eq)),t(eq.result()),null!=i&&e.clipExtent(i),e}function eY(e,t,n){return eZ(e,function(n){var i=t[1][0]-t[0][0],r=t[1][1]-t[0][1],o=Math.min(i/(n[1][0]-n[0][0]),r/(n[1][1]-n[0][1])),a=+t[0][0]+(i-o*(n[1][0]+n[0][0]))/2,l=+t[0][1]+(r-o*(n[1][1]+n[0][1]))/2;e.scale(150*o).translate([a,l])},n)}function eJ(e,t,n){return eY(e,[[0,0],t],n)}function eX(e,t,n){return eZ(e,function(n){var i=+t,r=i/(n[1][0]-n[0][0]),o=(i-r*(n[1][0]+n[0][0]))/2,a=-r*n[0][1];e.scale(150*r).translate([o,a])},n)}function e0(e,t,n){return eZ(e,function(n){var i=+t,r=i/(n[1][1]-n[0][1]),o=-r*n[0][0],a=(i-r*(n[1][1]+n[0][1]))/2;e.scale(150*r).translate([o,a])},n)}var e1=Q(30*U);function e2(e,t){var n;return+t?function(e,t){function n(i,r,o,a,l,s,c,u,d,f,p,h,m,g){var x=c-i,v=u-r,y=x*x+v*v;if(y>4*t&&m--){var j=a+f,b=l+p,S=s+h,w=X(j*j+b*b+S*S),N=et(S/=w),M=1e-6>H(H(S)-1)||1e-6>H(o-d)?(o+d)/2:V(b,j),k=e(M,N),E=k[0],T=k[1],C=E-i,R=T-r,D=v*C-x*R;(D*D/y>t||H((x*C+v*R)/y-.5)>.3||a*f+l*p+s*h<e1)&&(n(i,r,o,a,l,s,E,T,M,j/=w,b/=w,S,m,g),g.point(E,T),n(E,T,M,j,b,S,c,u,d,f,p,h,m,g))}}return function(t){var i,r,o,a,l,s,c,u,d,f,p,h,m={point:g,lineStart:x,lineEnd:y,polygonStart:function(){t.polygonStart(),m.lineStart=j},polygonEnd:function(){t.polygonEnd(),m.lineStart=x}};function g(n,i){n=e(n,i),t.point(n[0],n[1])}function x(){u=NaN,m.point=v,t.lineStart()}function v(i,r){var o=ef([i,r]),a=e(i,r);n(u,d,c,f,p,h,u=a[0],d=a[1],c=i,f=o[0],p=o[1],h=o[2],16,t),t.point(u,d)}function y(){m.point=g,t.lineEnd()}function j(){x(),m.point=b,m.lineEnd=S}function b(e,t){v(i=e,t),r=u,o=d,a=f,l=p,s=h,m.point=v}function S(){n(u,d,c,f,p,h,r,o,i,a,l,s,16,t),m.lineEnd=y,y()}return m}}(e,t):(n=e,eL({point:function(e,t){e=n(e,t),this.stream.point(e[0],e[1])}}))}var e5=eL({point:function(e,t){this.stream.point(e*U,t*U)}});function e6(e,t,n,i,r,o){var a=Q(o),l=Y(o),s=a*e,c=l*e,u=a/e,d=l/e,f=(l*n-a*t)/e,p=(l*t+a*n)/e;function h(e,o){return[s*(e*=i)-c*(o*=r)+t,n-c*e-s*o]}return h.invert=function(e,t){return[i*(u*e-d*t+f),r*(p-d*e-u*t)]},h}function e9(e){return e3(function(){return e})()}function e3(e){var t,n,i,r,o,a,l,s,c,u,d=150,f=480,p=250,h=0,m=0,g=0,x=0,v=0,y=0,j=1,b=1,S=null,w=eT,N=null,M=eO,k=.5;function E(e){return s(e[0]*U,e[1]*U)}function T(e){return(e=s.invert(e[0],e[1]))&&[e[0]*G,e[1]*G]}function C(){var e=e6(d,0,0,j,b,y).apply(null,t(h,m)),i=(y?e6:function(e,t,n,i,r){function o(o,a){return[t+e*(o*=i),n-e*(a*=r)]}return o.invert=function(o,a){return[(o-t)/e*i,(n-a)/e*r]},o})(d,f-e[0],p-e[1],j,b,y);return n=eD(g,x,v),l=eC(t,i),s=eC(n,l),a=e2(l,k),R()}function R(){return c=u=null,E}return E.stream=function(e){var t;return c&&u===e?c:c=e5((t=n,eL({point:function(e,n){var i=t(e,n);return this.stream.point(i[0],i[1])}}))(w(a(M(u=e)))))},E.preclip=function(e){return arguments.length?(w=e,S=void 0,R()):w},E.postclip=function(e){return arguments.length?(M=e,N=i=r=o=null,R()):M},E.clipAngle=function(e){return arguments.length?(w=+e?function(e){var t=Q(e),n=6*U,i=t>0,r=H(t)>1e-6;function o(e,n){return Q(e)*Q(n)>t}function a(e,n,i){var r=ef(e),o=ef(n),a=[1,0,0],l=eh(r,o),s=ep(l,l),c=l[0],u=s-c*c;if(!u)return!i&&e;var d=eh(a,l),f=eg(a,t*s/u);em(f,eg(l,-t*c/u));var p=ep(f,d),h=ep(d,d),m=p*p-h*(ep(f,f)-1);if(!(m<0)){var g=X(m),x=eg(d,(-p-g)/h);if(em(x,f),x=ed(x),!i)return x;var v,y=e[0],j=n[0],b=e[1],S=n[1];j<y&&(v=y,y=j,j=v);var w=j-y,N=1e-6>H(w-F);if(!N&&S<b&&(v=b,b=S,S=v),N||w<1e-6?N?b+S>0^x[1]<(1e-6>H(x[0]-y)?b:S):b<=x[1]&&x[1]<=S:w>F^(y<=x[0]&&x[0]<=j)){var M=eg(d,(-p+g)/h);return em(M,f),[x,ed(M)]}}}function l(t,n){var r=i?e:F-e,o=0;return t<-r?o|=1:t>r&&(o|=2),n<-r?o|=4:n>r&&(o|=8),o}return eM(o,function(e){var t,n,s,c,u;return{lineStart:function(){c=s=!1,u=1},point:function(d,f){var p,h,m=[d,f],g=o(d,f),x=i?g?0:l(d,f):g?l(d+(d<0?F:-F),f):0;!t&&(c=s=g)&&e.lineStart(),g!==s&&(!(h=a(t,m))||er(t,h)||er(m,h))&&(m[2]=1),g!==s?(u=0,g?(e.lineStart(),h=a(m,t),e.point(h[0],h[1])):(h=a(t,m),e.point(h[0],h[1],2),e.lineEnd()),t=h):r&&t&&i^g&&!(x&n)&&(p=a(m,t,!0))&&(u=0,i?(e.lineStart(),e.point(p[0][0],p[0][1]),e.point(p[1][0],p[1][1]),e.lineEnd()):(e.point(p[1][0],p[1][1]),e.lineEnd(),e.lineStart(),e.point(p[0][0],p[0][1],3))),!g||t&&er(t,m)||e.point(m[0],m[1]),t=m,s=g,n=x},lineEnd:function(){s&&e.lineEnd(),t=null},clean:function(){return u|(c&&s)<<1}}},function(t,i,r,o){!function(e,t,n,i,r,o){if(n){var a=Q(t),l=Y(t),s=i*n;null==r?(r=t+i*W,o=t-s/2):(r=eA(a,r),o=eA(a,o),(i>0?r<o:r>o)&&(r+=i*W));for(var c,u=r;i>0?u>o:u<o;u-=s)c=ed([a,-l*Q(u),-l*Y(u)]),e.point(c[0],c[1])}}(o,e,n,r,t,i)},i?[0,-e]:[-F,e-F])}(S=e*U):(S=null,eT),R()):S*G},E.clipExtent=function(e){return arguments.length?(M=null==e?(N=i=r=o=null,eO):function(e,t,n,i){function r(r,o){return e<=r&&r<=n&&t<=o&&o<=i}function o(r,o,l,c){var u=0,d=0;if(null==r||(u=a(r,l))!==(d=a(o,l))||0>s(r,o)^l>0)do c.point(0===u||3===u?e:n,u>1?i:t);while((u=(u+l+4)%4)!==d)else c.point(o[0],o[1])}function a(i,r){return 1e-6>H(i[0]-e)?r>0?0:3:1e-6>H(i[0]-n)?r>0?2:1:1e-6>H(i[1]-t)?+(r>0):r>0?3:2}function l(e,t){return s(e.x,t.x)}function s(e,t){var n=a(e,1),i=a(t,1);return n!==i?n-i:0===n?t[1]-e[1]:1===n?e[0]-t[0]:2===n?e[1]-t[1]:t[0]-e[0]}return function(a){var s,c,u,d,f,p,h,m,g,x,v,y=a,j=ei(),b={point:S,lineStart:function(){b.point=w,c&&c.push(u=[]),x=!0,g=!1,h=m=NaN},lineEnd:function(){s&&(w(d,f),p&&g&&j.rejoin(),s.push(j.result())),b.point=S,g&&y.lineEnd()},polygonStart:function(){y=j,s=[],c=[],v=!0},polygonEnd:function(){var t=function(){for(var t=0,n=0,r=c.length;n<r;++n)for(var o,a,l=c[n],s=1,u=l.length,d=l[0],f=d[0],p=d[1];s<u;++s)o=f,a=p,f=(d=l[s])[0],p=d[1],a<=i?p>i&&(f-o)*(i-a)>(p-a)*(e-o)&&++t:p<=i&&(f-o)*(i-a)<(p-a)*(e-o)&&--t;return t}(),n=v&&t,r=(s=eN(s)).length;(n||r)&&(a.polygonStart(),n&&(a.lineStart(),o(null,null,1,a),a.lineEnd()),r&&ea(s,l,t,o,a),a.polygonEnd()),y=a,s=c=u=null}};function S(e,t){r(e,t)&&y.point(e,t)}function w(o,a){var l=r(o,a);if(c&&u.push([o,a]),x)d=o,f=a,p=l,x=!1,l&&(y.lineStart(),y.point(o,a));else if(l&&g)y.point(o,a);else{var s=[h=Math.max(-1e9,Math.min(1e9,h)),m=Math.max(-1e9,Math.min(1e9,m))],j=[o=Math.max(-1e9,Math.min(1e9,o)),a=Math.max(-1e9,Math.min(1e9,a))];!function(e,t,n,i,r,o){var a,l=e[0],s=e[1],c=t[0],u=t[1],d=0,f=1,p=c-l,h=u-s;if(a=n-l,!p&&a>0)return;if(a/=p,p<0){if(a<d)return;a<f&&(f=a)}else if(p>0){if(a>f)return;a>d&&(d=a)}if(a=r-l,p||!(a<0)){if(a/=p,p<0){if(a>f)return;a>d&&(d=a)}else if(p>0){if(a<d)return;a<f&&(f=a)}if(a=i-s,h||!(a>0)){if(a/=h,h<0){if(a<d)return;a<f&&(f=a)}else if(h>0){if(a>f)return;a>d&&(d=a)}if(a=o-s,h||!(a<0)){if(a/=h,h<0){if(a>f)return;a>d&&(d=a)}else if(h>0){if(a<d)return;a<f&&(f=a)}return d>0&&(e[0]=l+d*p,e[1]=s+d*h),f<1&&(t[0]=l+f*p,t[1]=s+f*h),!0}}}}(s,j,e,t,n,i)?l&&(y.lineStart(),y.point(o,a),v=!1):(g||(y.lineStart(),y.point(s[0],s[1])),y.point(j[0],j[1]),l||y.lineEnd(),v=!1)}h=o,m=a,g=l}return b}}(N=+e[0][0],i=+e[0][1],r=+e[1][0],o=+e[1][1]),R()):null==N?null:[[N,i],[r,o]]},E.scale=function(e){return arguments.length?(d=+e,C()):d},E.translate=function(e){return arguments.length?(f=+e[0],p=+e[1],C()):[f,p]},E.center=function(e){return arguments.length?(h=e[0]%360*U,m=e[1]%360*U,C()):[h*G,m*G]},E.rotate=function(e){return arguments.length?(g=e[0]%360*U,x=e[1]%360*U,v=e.length>2?e[2]%360*U:0,C()):[g*G,x*G,v*G]},E.angle=function(e){return arguments.length?(y=e%360*U,C()):y*G},E.reflectX=function(e){return arguments.length?(j=e?-1:1,C()):j<0},E.reflectY=function(e){return arguments.length?(b=e?-1:1,C()):b<0},E.precision=function(e){return arguments.length?(a=e2(l,k=e*e),R()):X(k)},E.fitExtent=function(e,t){return eY(E,e,t)},E.fitSize=function(e,t){return eJ(E,e,t)},E.fitWidth=function(e,t){return eX(E,e,t)},E.fitHeight=function(e,t){return e0(E,e,t)},function(){return t=e.apply(this,arguments),E.invert=t.invert&&T,C()}}function e7(e,t){return[Q(t)*Y(e),Y(t)]}function e4(e,t){var n=Y(e),i=(n+Y(t))/2;if(1e-6>H(i)){var r=Q(e);function o(e,t){return[e*r,Y(t)/r]}return o.invert=function(e,t){return[e/r,et(t*r)]},o}var a=1+n*(2*i-n),l=X(a)/i;function s(e,t){var n=X(a-2*i*Y(t))/i;return[n*Y(e*=i),l-n*Q(e)]}return s.invert=function(e,t){var n=l-t,r=V(e,H(n))*J(n);return n*i<0&&(r-=F*J(e)*J(n)),[r/i,et((a-(e*e+n*n)*i*i)/(2*i))]},s}function e8(){var e,t,n,i;return(e=0,t=F/3,(i=(n=e3(e4))(e,t)).parallels=function(i){return arguments.length?n(e=i[0]*U,t=i[1]*U):[e*G,t*G]},i).scale(155.424).center([0,33.6442])}function te(){return e8().parallels([29.5,45.5]).scale(1070).translate([480,250]).rotate([96,0]).center([-.6,38.7])}function tt(e,t){return[e,Z(ee((z+t)/2))]}function tn(e,t){var n=t*t,i=n*n;return[e*(.8707-.131979*n+i*(-.013791+i*(.003971*n-.001529*i))),t*(1.007226+n*(.015085+i*(-.044475+.028874*n-.005916*i)))]}e7.invert=function(e,t){var n=X(e*e+t*t),i=et(n),r=Y(i);return[V(e*r,n*Q(i)),et(n&&t*r/n)]},tt.invert=function(e,t){return[e,2*B(q(t))-z]},tn.invert=function(e,t){var n,i=t,r=25;do{var o=i*i,a=o*o;i-=n=(i*(1.007226+o*(.015085+a*(-.044475+.028874*o-.005916*a)))-t)/(1.007226+o*(.045255+a*(-.311325+.259866*o-.005916*11*a)))}while(H(n)>1e-6&&--r>0)return[e/(.8707+(o=i*i)*(-.131979+o*(-.013791+o*o*o*(.003971-.001529*o)))),i]};var ti=X(3)/2;function tr(e,t){var n=et(ti*Y(t)),i=n*n,r=i*i*i;return[e*Q(n)/(ti*(1.340264+-.24331799999999998*i+r*(.0062510000000000005+.034164*i))),n*(1.340264+-.081106*i+r*(893e-6+.003796*i))]}tr.invert=function(e,t){for(var n,i,r=t,o=r*r,a=o*o*o,l=0;l<12&&(i=r*(1.340264+-.081106*o+a*(893e-6+.003796*o))-t,r-=n=i/(1.340264+-.24331799999999998*o+a*(.0062510000000000005+.034164*o)),a=(o=r*r)*o*o,!(1e-12>H(n)));++l);return[ti*e*(1.340264+-.24331799999999998*o+a*(.0062510000000000005+.034164*o))/Q(r),et(Y(r)/ti)]};var to,ta,tl,ts,tc,tu,td=new es,tf=new es,tp={point:en,lineStart:en,lineEnd:en,polygonStart:function(){tp.lineStart=th,tp.lineEnd=tx},polygonEnd:function(){tp.lineStart=tp.lineEnd=tp.point=en,td.add(H(tf)),tf.reset()},result:function(){var e=td/2;return td.reset(),e}};function th(){tp.point=tm}function tm(e,t){tp.point=tg,tl=tc=e,ts=tu=t}function tg(e,t){tf.add(tu*e-tc*t),tc=e,tu=t}function tx(){tg(tl,ts)}var tv,ty,tj,tb,tS=0,tw=0,tN=0,tM=0,tk=0,tE=0,tT=0,tC=0,tR=0,tD={point:tP,lineStart:t_,lineEnd:tO,polygonStart:function(){tD.lineStart=tL,tD.lineEnd=tF},polygonEnd:function(){tD.point=tP,tD.lineStart=t_,tD.lineEnd=tO},result:function(){var e=tR?[tT/tR,tC/tR]:tE?[tM/tE,tk/tE]:tN?[tS/tN,tw/tN]:[NaN,NaN];return tS=tw=tN=tM=tk=tE=tT=tC=tR=0,e}};function tP(e,t){tS+=e,tw+=t,++tN}function t_(){tD.point=tI}function tI(e,t){tD.point=tA,tP(tj=e,tb=t)}function tA(e,t){var n=e-tj,i=t-tb,r=X(n*n+i*i);tM+=r*(tj+e)/2,tk+=r*(tb+t)/2,tE+=r,tP(tj=e,tb=t)}function tO(){tD.point=tP}function tL(){tD.point=tz}function tF(){t$(tv,ty)}function tz(e,t){tD.point=t$,tP(tv=tj=e,ty=tb=t)}function t$(e,t){var n=e-tj,i=t-tb,r=X(n*n+i*i);tM+=r*(tj+e)/2,tk+=r*(tb+t)/2,tE+=r,tT+=(r=tb*e-tj*t)*(tj+e),tC+=r*(tb+t),tR+=3*r,tP(tj=e,tb=t)}function tW(e){this._context=e}tW.prototype={_radius:4.5,pointRadius:function(e){return this._radius=e,this},polygonStart:function(){this._line=0},polygonEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){0===this._line&&this._context.closePath(),this._point=NaN},point:function(e,t){switch(this._point){case 0:this._context.moveTo(e,t),this._point=1;break;case 1:this._context.lineTo(e,t);break;default:this._context.moveTo(e+this._radius,t),this._context.arc(e,t,this._radius,0,W)}},result:en};var tG,tU,tH,tB,tV,tQ=new es,tK={point:en,lineStart:function(){tK.point=tq},lineEnd:function(){tG&&tZ(tU,tH),tK.point=en},polygonStart:function(){tG=!0},polygonEnd:function(){tG=null},result:function(){var e=+tQ;return tQ.reset(),e}};function tq(e,t){tK.point=tZ,tU=tB=e,tH=tV=t}function tZ(e,t){tB-=e,tV-=t,tQ.add(X(tB*tB+tV*tV)),tB=e,tV=t}function tY(){this._string=[]}function tJ(e){return"m0,"+e+"a"+e+","+e+" 0 1,1 0,"+-2*e+"a"+e+","+e+" 0 1,1 0,"+2*e+"z"}function tX(e,t,n){var i=ew(e,t-1e-6,n).concat(t);return function(e){return i.map(function(t){return[e,t]})}}function t0(e,t,n){var i=ew(e,t-1e-6,n).concat(t);return function(e){return i.map(function(t){return[t,e]})}}tY.prototype={_radius:4.5,_circle:tJ(4.5),pointRadius:function(e){return(e*=1)!==this._radius&&(this._radius=e,this._circle=null),this},polygonStart:function(){this._line=0},polygonEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){0===this._line&&this._string.push("Z"),this._point=NaN},point:function(e,t){switch(this._point){case 0:this._string.push("M",e,",",t),this._point=1;break;case 1:this._string.push("L",e,",",t);break;default:null==this._circle&&(this._circle=tJ(this._radius)),this._string.push("M",e,",",t,this._circle)}},result:function(){if(!this._string.length)return null;var e=this._string.join("");return this._string=[],e}};var t1=["graticule","lines","outline","extent","extentMajor","extentMinor","step","stepMajor","stepMinor","precision","children"];function t2(){return(t2=Object.assign.bind()).apply(this,arguments)}function t5(e){var t=e.graticule,n=e.lines,i=e.outline,r=e.extent,o=e.extentMajor,a=e.extentMinor,l=e.step,s=e.stepMajor,c=e.stepMinor,u=e.precision,d=e.children,f=function(e,t){if(null==e)return{};var n,i,r={},o=Object.keys(e);for(i=0;i<o.length;i++)n=o[i],t.indexOf(n)>=0||(r[n]=e[n]);return r}(e,t1),p=function(){var e,t,n,i,r,o,a,l,s,c,u,d,f=10,p=10,h=90,m=360,g=2.5;function x(){return{type:"MultiLineString",coordinates:v()}}function v(){return ew(K(i/h)*h,n,h).map(u).concat(ew(K(l/m)*m,a,m).map(d)).concat(ew(K(t/f)*f,e,f).filter(function(e){return H(e%h)>1e-6}).map(s)).concat(ew(K(o/p)*p,r,p).filter(function(e){return H(e%m)>1e-6}).map(c))}return x.lines=function(){return v().map(function(e){return{type:"LineString",coordinates:e}})},x.outline=function(){return{type:"Polygon",coordinates:[u(i).concat(d(a).slice(1),u(n).reverse().slice(1),d(l).reverse().slice(1))]}},x.extent=function(e){return arguments.length?x.extentMajor(e).extentMinor(e):x.extentMinor()},x.extentMajor=function(e){return arguments.length?(i=+e[0][0],n=+e[1][0],l=+e[0][1],a=+e[1][1],i>n&&(e=i,i=n,n=e),l>a&&(e=l,l=a,a=e),x.precision(g)):[[i,l],[n,a]]},x.extentMinor=function(n){return arguments.length?(t=+n[0][0],e=+n[1][0],o=+n[0][1],r=+n[1][1],t>e&&(n=t,t=e,e=n),o>r&&(n=o,o=r,r=n),x.precision(g)):[[t,o],[e,r]]},x.step=function(e){return arguments.length?x.stepMajor(e).stepMinor(e):x.stepMinor()},x.stepMajor=function(e){return arguments.length?(h=+e[0],m=+e[1],x):[h,m]},x.stepMinor=function(e){return arguments.length?(f=+e[0],p=+e[1],x):[f,p]},x.precision=function(f){return arguments.length?(g=+f,s=tX(o,r,90),c=t0(t,e,g),u=tX(l,a,90),d=t0(i,n,g),x):g},x.extentMajor([[-180,-89.999999],[180,89.999999]]).extentMinor([[-180,-80.000001],[180,80.000001]])}();return(r&&p.extent(r),o&&p.extentMajor(o),a&&p.extentMinor(a),l&&p.step(l),s&&p.stepMajor(s),c&&p.stepMinor(c),u&&p.precision(u),d)?h.default.createElement(h.default.Fragment,null,d({graticule:p})):h.default.createElement(L,{className:"visx-geo-graticule"},t&&h.default.createElement("path",t2({d:t(p()),fill:"none",stroke:"black"},f)),n&&p.lines().map(function(e,t){return h.default.createElement("g",{key:t},h.default.createElement("path",t2({d:n(e),fill:"none",stroke:"black"},f)))}),i&&h.default.createElement("path",t2({d:i(p.outline()),fill:"none",stroke:"black"},f)))}t5.propTypes={graticule:P.default.func,lines:P.default.func,outline:P.default.func,children:P.default.func,precision:P.default.number};var t6=["data","projection","projectionFunc","clipAngle","clipExtent","scale","translate","center","rotate","precision","fitExtent","fitSize","centroid","graticule","graticuleLines","graticuleOutline","className","innerRef","pointRadius","children"];function t9(){return(t9=Object.assign.bind()).apply(this,arguments)}var t3={orthographic:function(){return e9(e7).scale(249.5).clipAngle(90.000001)},albers:function(){return te()},albersUsa:function(){return function(){var e,t,n,i,r,o,a=te(),l=e8().rotate([154,0]).center([-2,58.5]).parallels([55,65]),s=e8().rotate([157,0]).center([-3,19.9]).parallels([8,18]),c={point:function(e,t){o=[e,t]}};function u(e){var t=e[0],a=e[1];return o=null,n.point(t,a),o||(i.point(t,a),o)||(r.point(t,a),o)}function d(){return e=t=null,u}return u.invert=function(e){var t=a.scale(),n=a.translate(),i=(e[0]-n[0])/t,r=(e[1]-n[1])/t;return(r>=.12&&r<.234&&i>=-.425&&i<-.214?l:r>=.166&&r<.234&&i>=-.214&&i<-.115?s:a).invert(e)},u.stream=function(n){var i,r;return e&&t===n?e:(r=(i=[a.stream(t=n),l.stream(n),s.stream(n)]).length,e={point:function(e,t){for(var n=-1;++n<r;)i[n].point(e,t)},sphere:function(){for(var e=-1;++e<r;)i[e].sphere()},lineStart:function(){for(var e=-1;++e<r;)i[e].lineStart()},lineEnd:function(){for(var e=-1;++e<r;)i[e].lineEnd()},polygonStart:function(){for(var e=-1;++e<r;)i[e].polygonStart()},polygonEnd:function(){for(var e=-1;++e<r;)i[e].polygonEnd()}})},u.precision=function(e){return arguments.length?(a.precision(e),l.precision(e),s.precision(e),d()):a.precision()},u.scale=function(e){return arguments.length?(a.scale(e),l.scale(.35*e),s.scale(e),u.translate(a.translate())):a.scale()},u.translate=function(e){if(!arguments.length)return a.translate();var t=a.scale(),o=+e[0],u=+e[1];return n=a.translate(e).clipExtent([[o-.455*t,u-.238*t],[o+.455*t,u+.238*t]]).stream(c),i=l.translate([o-.307*t,u+.201*t]).clipExtent([[o-.425*t+1e-6,u+.12*t+1e-6],[o-.214*t-1e-6,u+.234*t-1e-6]]).stream(c),r=s.translate([o-.205*t,u+.212*t]).clipExtent([[o-.214*t+1e-6,u+.166*t+1e-6],[o-.115*t-1e-6,u+.234*t-1e-6]]).stream(c),d()},u.fitExtent=function(e,t){return eY(u,e,t)},u.fitSize=function(e,t){return eJ(u,e,t)},u.fitWidth=function(e,t){return eX(u,e,t)},u.fitHeight=function(e,t){return e0(u,e,t)},u.scale(1070)}()},mercator:function(){return(function(e){var t,n,i,r=e9(e),o=r.center,a=r.scale,l=r.translate,s=r.clipExtent,c=null;function u(){var o=F*a(),l=r((function(e){function t(t){return t=e(t[0]*U,t[1]*U),t[0]*=G,t[1]*=G,t}return e=eD(e[0]*U,e[1]*U,e.length>2?e[2]*U:0),t.invert=function(t){return t=e.invert(t[0]*U,t[1]*U),t[0]*=G,t[1]*=G,t},t})(r.rotate()).invert([0,0]));return s(null==c?[[l[0]-o,l[1]-o],[l[0]+o,l[1]+o]]:e===tt?[[Math.max(l[0]-o,c),t],[Math.min(l[0]+o,n),i]]:[[c,Math.max(l[1]-o,t)],[n,Math.min(l[1]+o,i)]])}return r.scale=function(e){return arguments.length?(a(e),u()):a()},r.translate=function(e){return arguments.length?(l(e),u()):l()},r.center=function(e){return arguments.length?(o(e),u()):o()},r.clipExtent=function(e){return arguments.length?(null==e?c=t=n=i=null:(c=+e[0][0],t=+e[0][1],n=+e[1][0],i=+e[1][1]),u()):null==c?null:[[c,t],[n,i]]},u()})(tt).scale(961/W)},naturalEarth:function(){return e9(tn).scale(175.295)},equalEarth:function(){return e9(tr).scale(177.158)}};function t7(e){var t=e.data,n=e.projection,i=void 0===n?"mercator":n,r=e.projectionFunc,o=e.clipAngle,a=e.clipExtent,l=e.scale,s=e.translate,c=e.center,u=e.rotate,d=e.precision,f=e.fitExtent,p=e.fitSize,m=e.centroid,g=e.graticule,x=e.graticuleLines,v=e.graticuleOutline,y=e.className,j=e.innerRef,b=e.pointRadius,S=e.children,w=function(e,t){if(null==e)return{};var n,i,r={},o=Object.keys(e);for(i=0;i<o.length;i++)n=o[i],t.indexOf(n)>=0||(r[n]=e[n]);return r}(e,t6),N=("string"==typeof i?t3[i]:i)();o&&N.clipAngle&&N.clipAngle(o),a&&N.clipExtent&&N.clipExtent(a),l&&N.scale&&N.scale(l),s&&N.translate&&N.translate(s),c&&N.center&&N.center(c),u&&N.rotate&&N.rotate(u),d&&N.precision&&N.precision(d),f&&N.fitExtent&&N.fitExtent.apply(N,f),p&&N.fitSize&&N.fitSize.apply(N,p);var M=(function(e,t){var n,i,r=4.5;function o(e){return e&&("function"==typeof r&&i.pointRadius(+r.apply(this,arguments)),eH(e,n(i))),i.result()}return o.area=function(e){return eH(e,n(tp)),tp.result()},o.measure=function(e){return eH(e,n(tK)),tK.result()},o.bounds=function(e){return eH(e,n(eq)),eq.result()},o.centroid=function(e){return eH(e,n(tD)),tD.result()},o.projection=function(t){return arguments.length?(n=null==t?(e=null,eO):(e=t).stream,o):e},o.context=function(e){return arguments.length?(i=null==e?(t=null,new tY):new tW(t=e),"function"!=typeof r&&i.pointRadius(r),o):t},o.pointRadius=function(e){return arguments.length?(r="function"==typeof e?e:(i.pointRadius(+e),+e),o):r},o.projection(e).context(t)})().projection(N);b&&M.pointRadius(b);var k=t.map(function(e,t){return{feature:e,type:i,projection:N,index:t,centroid:M.centroid(e),path:M(e)}});return S?h.default.createElement(h.default.Fragment,null,S({path:M,features:k,projection:N})):h.default.createElement(L,{className:"visx-geo"},g&&!g.foreground&&h.default.createElement(t5,t9({graticule:function(e){return M(e)||""}},g)),x&&!x.foreground&&h.default.createElement(t5,t9({lines:function(e){return M(e)||""}},x)),v&&!v.foreground&&h.default.createElement(t5,t9({outline:function(e){return M(e)||""}},v)),k.map(function(e,t){return h.default.createElement("g",{key:i+"-"+t},h.default.createElement("path",t9({className:(0,_.default)("visx-geo-"+i,y),d:e.path||"",ref:null==j?void 0:j(e,t)},w)),null==m?void 0:m(e.centroid,e))}),null==r?void 0:r(N),(null==g?void 0:g.foreground)&&h.default.createElement(t5,t9({graticule:function(e){return M(e)||""}},g)),(null==x?void 0:x.foreground)&&h.default.createElement(t5,t9({lines:function(e){return M(e)||""}},x)),(null==v?void 0:v.foreground)&&h.default.createElement(t5,t9({outline:function(e){return M(e)||""}},v)))}function t4(e){return h.default.createElement(t7,e)}t7.propTypes={data:P.default.array.isRequired,projectionFunc:P.default.func,clipAngle:P.default.number,scale:P.default.number,precision:P.default.number,centroid:P.default.func,className:P.default.string,children:P.default.func,innerRef:P.default.func,pointRadius:P.default.number};var t8=e.i(1987325);e.i(1421629);var ne=e.i(9282859);function nt(){return(nt=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e}).apply(this,arguments)}function nn(e){if(void 0===e)throw ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function ni(e,t){return(ni=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function nr(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var no={width:"100%",height:"100%"},na=e.i(1764746);function nl(){}function ns(){var e,t=[];return{point:function(t,n,i){e.push([t,n,i])},lineStart:function(){t.push(e=[])},lineEnd:nl,rejoin:function(){t.length>1&&t.push(t.pop().concat(t.shift()))},result:function(){var n=t;return t=[],e=null,n}}}var nc=Math.PI,nu=nc/2,nd=nc/4,nf=2*nc,np=180/nc,nh=nc/180,nm=Math.abs,ng=Math.atan,nx=Math.atan2,nv=Math.cos,ny=Math.sin,nj=Math.sign||function(e){return e>0?1:e<0?-1:0},nb=Math.sqrt;function nS(e){return e>1?nu:e<-1?-nu:Math.asin(e)}function nw(e,t){return 1e-6>nm(e[0]-t[0])&&1e-6>nm(e[1]-t[1])}function nN(e,t,n,i){this.x=e,this.z=t,this.o=n,this.e=i,this.v=!1,this.n=this.p=null}function nM(e,t,n,i,r){var o,a,l=[],s=[];if(e.forEach(function(e){if(!((t=e.length-1)<=0)){var t,n,i=e[0],a=e[t];if(nw(i,a)){if(!i[2]&&!a[2]){for(r.lineStart(),o=0;o<t;++o)r.point((i=e[o])[0],i[1]);r.lineEnd();return}a[0]+=2e-6}l.push(n=new nN(i,e,null,!0)),s.push(n.o=new nN(i,null,n,!1)),l.push(n=new nN(a,e,null,!1)),s.push(n.o=new nN(a,null,n,!0))}}),l.length){for(s.sort(t),nk(l),nk(s),o=0,a=s.length;o<a;++o)s[o].e=n=!n;for(var c,u,d=l[0];;){for(var f=d,p=!0;f.v;)if((f=f.n)===d)return;c=f.z,r.lineStart();do{if(f.v=f.o.v=!0,f.e){if(p)for(o=0,a=c.length;o<a;++o)r.point((u=c[o])[0],u[1]);else i(f.x,f.n.x,1,r);f=f.n}else{if(p)for(o=(c=f.p.z).length-1;o>=0;--o)r.point((u=c[o])[0],u[1]);else i(f.x,f.p.x,-1,r);f=f.p}c=(f=f.o).z,p=!p}while(!f.v)r.lineEnd()}}}function nk(e){if(t=e.length){for(var t,n,i=0,r=e[0];++i<t;)r.n=n=e[i],n.p=r,r=n;r.n=n=e[0],n.p=r}}class nE{constructor(){this._partials=new Float64Array(32),this._n=0}add(e){let t=this._partials,n=0;for(let i=0;i<this._n&&i<32;i++){let r=t[i],o=e+r,a=Math.abs(e)<Math.abs(r)?e-(o-r):r-(o-e);a&&(t[n++]=a),e=o}return t[n]=e,this._n=n+1,this}valueOf(){let e=this._partials,t=this._n,n,i,r,o=0;if(t>0){for(o=e[--t];t>0&&(o=(n=o)+(i=e[--t]),!(r=i-(o-n))););t>0&&(r<0&&e[t-1]<0||r>0&&e[t-1]>0)&&(n=o+(i=2*r),i==n-o&&(o=n))}return o}}function nT(e){return[nx(e[1],e[0]),nS(e[2])]}function nC(e){var t=e[0],n=e[1],i=nv(n);return[i*nv(t),i*ny(t),ny(n)]}function nR(e,t){return e[0]*t[0]+e[1]*t[1]+e[2]*t[2]}function nD(e,t){return[e[1]*t[2]-e[2]*t[1],e[2]*t[0]-e[0]*t[2],e[0]*t[1]-e[1]*t[0]]}function nP(e,t){e[0]+=t[0],e[1]+=t[1],e[2]+=t[2]}function n_(e,t){return[e[0]*t,e[1]*t,e[2]*t]}function nI(e){var t=nb(e[0]*e[0]+e[1]*e[1]+e[2]*e[2]);e[0]/=t,e[1]/=t,e[2]/=t}function nA(e){return nm(e[0])<=nc?e[0]:nj(e[0])*((nm(e[0])+nc)%nf-nc)}function nO(e){return Array.from(function*(e){for(let t of e)yield*t}(e))}function nL(e,t,n,i){return function(r){var o,a,l,s=t(r),c=ns(),u=t(c),d=!1,f={point:p,lineStart:m,lineEnd:g,polygonStart:function(){f.point=x,f.lineStart=v,f.lineEnd=y,a=[],o=[]},polygonEnd:function(){f.point=p,f.lineStart=m,f.lineEnd=g,a=nO(a);var e=function(e,t){var n=nA(t),i=t[1],r=ny(i),o=[ny(n),-nv(n),0],a=0,l=0,s=new nE;1===r?i=nu+1e-6:-1===r&&(i=-nu-1e-6);for(var c=0,u=e.length;c<u;++c)if(f=(d=e[c]).length)for(var d,f,p=d[f-1],h=nA(p),m=p[1]/2+nd,g=ny(m),x=nv(m),v=0;v<f;++v,h=j,g=S,x=w,p=y){var y=d[v],j=nA(y),b=y[1]/2+nd,S=ny(b),w=nv(b),N=j-h,M=N>=0?1:-1,k=M*N,E=k>nc,T=g*S;if(s.add(nx(T*M*ny(k),x*w+T*nv(k))),a+=E?N+M*nf:N,E^h>=n^j>=n){var C=nD(nC(p),nC(y));nI(C);var R=nD(o,C);nI(R);var D=(E^N>=0?-1:1)*nS(R[2]);(i>D||i===D&&(C[0]||C[1]))&&(l+=E^N>=0?1:-1)}}return(a<-1e-6||a<1e-6&&s<-1e-12)^1&l}(o,i);a.length?(d||(r.polygonStart(),d=!0),nM(a,nz,e,n,r)):e&&(d||(r.polygonStart(),d=!0),r.lineStart(),n(null,null,1,r),r.lineEnd()),d&&(r.polygonEnd(),d=!1),a=o=null},sphere:function(){r.polygonStart(),r.lineStart(),n(null,null,1,r),r.lineEnd(),r.polygonEnd()}};function p(t,n){e(t,n)&&r.point(t,n)}function h(e,t){s.point(e,t)}function m(){f.point=h,s.lineStart()}function g(){f.point=p,s.lineEnd()}function x(e,t){l.push([e,t]),u.point(e,t)}function v(){u.lineStart(),l=[]}function y(){x(l[0][0],l[0][1]),u.lineEnd();var e,t,n,i,s=u.clean(),f=c.result(),p=f.length;if(l.pop(),o.push(l),l=null,p){if(1&s){if((t=(n=f[0]).length-1)>0){for(d||(r.polygonStart(),d=!0),r.lineStart(),e=0;e<t;++e)r.point((i=n[e])[0],i[1]);r.lineEnd()}return}p>1&&2&s&&f.push(f.pop().concat(f.shift())),a.push(f.filter(nF))}}return f}}function nF(e){return e.length>1}function nz(e,t){return((e=e.x)[0]<0?e[1]-nu-1e-6:nu-e[1])-((t=t.x)[0]<0?t[1]-nu-1e-6:nu-t[1])}let n$=nL(function(){return!0},function(e){var t,n=NaN,i=NaN,r=NaN;return{lineStart:function(){e.lineStart(),t=1},point:function(o,a){var l,s,c,u,d,f,p,h=o>0?nc:-nc,m=nm(o-n);1e-6>nm(m-nc)?(e.point(n,i=(i+a)/2>0?nu:-nu),e.point(r,i),e.lineEnd(),e.lineStart(),e.point(h,i),e.point(o,i),t=0):r!==h&&m>=nc&&(1e-6>nm(n-r)&&(n-=1e-6*r),1e-6>nm(o-h)&&(o-=1e-6*h),l=n,s=i,c=o,u=a,i=nm(p=ny(l-c))>1e-6?ng((ny(s)*(f=nv(u))*ny(c)-ny(u)*(d=nv(s))*ny(l))/(d*f*p)):(s+u)/2,e.point(r,i),e.lineEnd(),e.lineStart(),e.point(h,i),t=0),e.point(n=o,i=a),r=h},lineEnd:function(){e.lineEnd(),n=i=NaN},clean:function(){return 2-t}}},function(e,t,n,i){var r;if(null==e)r=n*nu,i.point(-nc,r),i.point(0,r),i.point(nc,r),i.point(nc,0),i.point(nc,-r),i.point(0,-r),i.point(-nc,-r),i.point(-nc,0),i.point(-nc,r);else if(nm(e[0]-t[0])>1e-6){var o=e[0]<t[0]?nc:-nc;r=n*o/2,i.point(-o,r),i.point(0,r),i.point(o,r)}else i.point(t[0],t[1])},[-nc,-nu]);function nW(e,t){function n(n,i){return t((n=e(n,i))[0],n[1])}return e.invert&&t.invert&&(n.invert=function(n,i){return(n=t.invert(n,i))&&e.invert(n[0],n[1])}),n}function nG(e,t){return nm(e)>nc&&(e-=Math.round(e/nf)*nf),[e,t]}function nU(e){return function(t,n){return nm(t+=e)>nc&&(t-=Math.round(t/nf)*nf),[t,n]}}function nH(e){var t=nU(e);return t.invert=nU(-e),t}function nB(e,t){var n=nv(e),i=ny(e),r=nv(t),o=ny(t);function a(e,t){var a=nv(t),l=nv(e)*a,s=ny(e)*a,c=ny(t),u=c*n+l*i;return[nx(s*r-u*o,l*n-c*i),nS(u*r+s*o)]}return a.invert=function(e,t){var a=nv(t),l=nv(e)*a,s=ny(e)*a,c=ny(t),u=c*r-s*o;return[nx(s*r+c*o,l*n+u*i),nS(u*n-l*i)]},a}function nV(e,t){t=nC(t),t[0]-=e,nI(t);var n,i=(n=-t[1])>1?0:n<-1?nc:Math.acos(n);return((0>-t[2]?-i:i)+nf-1e-6)%nf}nG.invert=nG;let nQ=e=>e;function nK(e){return function(t){var n=new nq;for(var i in e)n[i]=e[i];return n.stream=t,n}}function nq(){}function nZ(e,t){e&&nJ.hasOwnProperty(e.type)&&nJ[e.type](e,t)}nq.prototype={constructor:nq,point:function(e,t){this.stream.point(e,t)},sphere:function(){this.stream.sphere()},lineStart:function(){this.stream.lineStart()},lineEnd:function(){this.stream.lineEnd()},polygonStart:function(){this.stream.polygonStart()},polygonEnd:function(){this.stream.polygonEnd()}};var nY={Feature:function(e,t){nZ(e.geometry,t)},FeatureCollection:function(e,t){for(var n=e.features,i=-1,r=n.length;++i<r;)nZ(n[i].geometry,t)}},nJ={Sphere:function(e,t){t.sphere()},Point:function(e,t){e=e.coordinates,t.point(e[0],e[1],e[2])},MultiPoint:function(e,t){for(var n=e.coordinates,i=-1,r=n.length;++i<r;)e=n[i],t.point(e[0],e[1],e[2])},LineString:function(e,t){nX(e.coordinates,t,0)},MultiLineString:function(e,t){for(var n=e.coordinates,i=-1,r=n.length;++i<r;)nX(n[i],t,0)},Polygon:function(e,t){n0(e.coordinates,t)},MultiPolygon:function(e,t){for(var n=e.coordinates,i=-1,r=n.length;++i<r;)n0(n[i],t)},GeometryCollection:function(e,t){for(var n=e.geometries,i=-1,r=n.length;++i<r;)nZ(n[i],t)}};function nX(e,t,n){var i,r=-1,o=e.length-n;for(t.lineStart();++r<o;)i=e[r],t.point(i[0],i[1],i[2]);t.lineEnd()}function n0(e,t){var n=-1,i=e.length;for(t.polygonStart();++n<i;)nX(e[n],t,1);t.polygonEnd()}var n1=1/0,n2=1/0,n5=-1/0,n6=n5;let n9={point:function(e,t){e<n1&&(n1=e),e>n5&&(n5=e),t<n2&&(n2=t),t>n6&&(n6=t)},lineStart:nl,lineEnd:nl,polygonStart:nl,polygonEnd:nl,result:function(){var e=[[n1,n2],[n5,n6]];return n5=n6=-(n2=n1=1/0),e}};function n3(e,t,n){var i,r=e.clipExtent&&e.clipExtent();return e.scale(150).translate([0,0]),null!=r&&e.clipExtent(null),i=e.stream(n9),n&&nY.hasOwnProperty(n.type)?nY[n.type](n,i):nZ(n,i),t(n9.result()),null!=r&&e.clipExtent(r),e}function n7(e,t,n){return n3(e,function(n){var i=t[1][0]-t[0][0],r=t[1][1]-t[0][1],o=Math.min(i/(n[1][0]-n[0][0]),r/(n[1][1]-n[0][1])),a=+t[0][0]+(i-o*(n[1][0]+n[0][0]))/2,l=+t[0][1]+(r-o*(n[1][1]+n[0][1]))/2;e.scale(150*o).translate([a,l])},n)}var n4=nv(30*nh);function n8(e,t){var n;return+t?function(e,t){function n(i,r,o,a,l,s,c,u,d,f,p,h,m,g){var x=c-i,v=u-r,y=x*x+v*v;if(y>4*t&&m--){var j=a+f,b=l+p,S=s+h,w=nb(j*j+b*b+S*S),N=nS(S/=w),M=1e-6>nm(nm(S)-1)||1e-6>nm(o-d)?(o+d)/2:nx(b,j),k=e(M,N),E=k[0],T=k[1],C=E-i,R=T-r,D=v*C-x*R;(D*D/y>t||nm((x*C+v*R)/y-.5)>.3||a*f+l*p+s*h<n4)&&(n(i,r,o,a,l,s,E,T,M,j/=w,b/=w,S,m,g),g.point(E,T),n(E,T,M,j,b,S,c,u,d,f,p,h,m,g))}}return function(t){var i,r,o,a,l,s,c,u,d,f,p,h,m={point:g,lineStart:x,lineEnd:y,polygonStart:function(){t.polygonStart(),m.lineStart=j},polygonEnd:function(){t.polygonEnd(),m.lineStart=x}};function g(n,i){n=e(n,i),t.point(n[0],n[1])}function x(){u=NaN,m.point=v,t.lineStart()}function v(i,r){var o=nC([i,r]),a=e(i,r);n(u,d,c,f,p,h,u=a[0],d=a[1],c=i,f=o[0],p=o[1],h=o[2],16,t),t.point(u,d)}function y(){m.point=g,t.lineEnd()}function j(){x(),m.point=b,m.lineEnd=S}function b(e,t){v(i=e,t),r=u,o=d,a=f,l=p,s=h,m.point=v}function S(){n(u,d,c,f,p,h,r,o,i,a,l,s,16,t),m.lineEnd=y,y()}return m}}(e,t):(n=e,nK({point:function(e,t){e=n(e,t),this.stream.point(e[0],e[1])}}))}var ie=nK({point:function(e,t){this.stream.point(e*nh,t*nh)}});function it(e,t,n,i,r,o){if(!o){function a(o,a){return[t+e*(o*=i),n-e*(a*=r)]}return a.invert=function(o,a){return[(o-t)/e*i,(n-a)/e*r]},a}var l=nv(o),s=ny(o),c=l*e,u=s*e,d=l/e,f=s/e,p=(s*n-l*t)/e,h=(s*t+l*n)/e;function m(e,o){return[c*(e*=i)-u*(o*=r)+t,n-u*e-c*o]}return m.invert=function(e,t){return[i*(d*e-f*t+p),r*(h-f*e-d*t)]},m}var ii=Math.abs,ir=Math.PI;function io(e){return e>0?Math.sqrt(e):0}function ia(e,t){var n=e*e,i=t*t;return[e*(1-.162388*i)*(.87-952426e-9*n*n),t*(1+i/12)]}io(2),io(ir),ia.invert=function(e,t){var n,i=e,r=t,o=50;do{var a=r*r;r-=n=(r*(1+a/12)-t)/(1+a/4)}while(ii(n)>1e-6&&--o>0)o=50,e/=1-.162388*a;do{var l=(l=i*i)*l;i-=n=(i*(.87-952426e-9*l)-e)/(.87-.00476213*l)}while(ii(n)>1e-6&&--o>0)return[i,r]};var il=e.i(1649751),is=e.i(425902);function ic(e){return function(t,n){var i=e((t=(0,il.hsl)(t)).h,(n=(0,il.hsl)(n)).h),r=(0,is.default)(t.s,n.s),o=(0,is.default)(t.l,n.l),a=(0,is.default)(t.opacity,n.opacity);return function(e){return t.h=i(e),t.s=r(e),t.l=o(e),t.opacity=a(e),t+""}}}let iu=ic(is.hue);ic(is.default);var id=e.i(5257115),id=id,ip=e.i(6280036);function ih(e){return e}function im(e,t){var n=t.id,i=t.bbox,r=null==t.properties?{}:t.properties,o=function(e,t){var n=function(e){if(null==e)return ih;var t,n,i=e.scale[0],r=e.scale[1],o=e.translate[0],a=e.translate[1];return function(e,l){l||(t=n=0);var s=2,c=e.length,u=Array(c);for(u[0]=(t+=e[0])*i+o,u[1]=(n+=e[1])*r+a;s<c;)u[s]=e[s],++s;return u}}(e.transform),i=e.arcs;function r(e){return n(e)}function o(e){for(var t=[],r=0,o=e.length;r<o;++r)!function(e,t){t.length&&t.pop();for(var r=i[e<0?~e:e],o=0,a=r.length;o<a;++o)t.push(n(r[o],o));e<0&&function(e,t){for(var n,i=e.length,r=i-t;r<--i;)n=e[r],e[r++]=e[i],e[i]=n}(t,a)}(e[r],t);return t.length<2&&t.push(t[0]),t}function a(e){for(var t=o(e);t.length<4;)t.push(t[0]);return t}function l(e){return e.map(a)}return function e(t){var n,i=t.type;switch(i){case"GeometryCollection":return{type:i,geometries:t.geometries.map(e)};case"Point":n=r(t.coordinates);break;case"MultiPoint":n=t.coordinates.map(r);break;case"LineString":n=o(t.arcs);break;case"MultiLineString":n=t.arcs.map(o);break;case"Polygon":n=l(t.arcs);break;case"MultiPolygon":n=t.arcs.map(l);break;default:return null}return{type:i,coordinates:n}}(t)}(e,t);return null==n&&null==i?{type:"Feature",properties:r,geometry:o}:null==i?{type:"Feature",id:n,properties:r,geometry:o}:{type:"Feature",id:n,bbox:i,properties:r,geometry:o}}var ig=e.i(3645124),ix=e.i(3757830),iv=e.i(2952713),iy=e.i(3617058),ij=e.i(7489409),ib=e.i(9334638);let iS=(0,ib.withNewIcon)(`<path d="M8.5 10.75C8.5 11.7165 7.7165 12.5 6.75 12.5C5.7835 12.5 5 11.7165 5 10.75C5 9.7835 5.7835 9 6.75 9C7.7165 9 8.5 9.7835 8.5 10.75Z" fill="currentColor"/>
  <path opacity="0.25" fill-rule="evenodd" clip-rule="evenodd" d="M6.75 7C7.7165 7 8.5 6.2165 8.5 5.25C8.5 4.2835 7.7165 3.5 6.75 3.5C5.7835 3.5 5 4.2835 5 5.25C5 6.2165 5.7835 7 6.75 7ZM11.25 9.75C12.2165 9.75 13 8.9665 13 8C13 7.0335 12.2165 6.25 11.25 6.25C10.2835 6.25 9.5 7.0335 9.5 8C9.5 8.9665 10.2835 9.75 11.25 9.75Z" fill="currentColor"/>`),iw=(0,ib.withNewIcon)(`<path fill-rule="evenodd" clip-rule="evenodd" d="M11.25 9.75C12.2165 9.75 13 8.9665 13 8C13 7.0335 12.2165 6.25 11.25 6.25C10.2835 6.25 9.5 7.0335 9.5 8C9.5 8.9665 10.2835 9.75 11.25 9.75ZM6.75 12.5C7.7165 12.5 8.5 11.7165 8.5 10.75C8.5 9.7835 7.7165 9 6.75 9C5.7835 9 5 9.7835 5 10.75C5 11.7165 5.7835 12.5 6.75 12.5Z" fill="currentColor"/>
  <circle opacity="0.25" cx="6.75" cy="5.25" r="1.75" fill="currentColor"/>`),iN=e=>{let t,{className:n,rating:i}=e;switch(i){case"Low":t=(0,o.jsx)(iS,{className:n});break;case"Medium":t=(0,o.jsx)(iw,{className:n});break;case"High":t=(0,o.jsx)(ij.DataPoint,{className:n})}return t},iM=e=>e<50?"Low":e<100?"Medium":"High";function ik(e){let{dataPoints:t}=e,n=(0,h.useMemo)(()=>iM(t),[t]);return(0,o.jsxs)("div",{className:"flex flex-row items-center justify-between rounded bg-background-100 py-1 pl-3 pr-2 text-foreground shadow-tooltip space-x-2",children:[(0,o.jsx)(p.Text,{color:"gray-900",size:12,weight:400,children:"Data points"}),(0,o.jsxs)(f.Stack,{align:"center",className:(0,u.clsx)("High"===n&&"text-green-800","Medium"===n&&"text-amber-800","Low"===n&&"text-red-800"),direction:"row",justify:"flex-end",children:[(0,o.jsx)(p.Text,{color:"inherit",size:12,weight:500,children:(0,N.formatNumberCompact)(t)}),(0,o.jsx)(iN,{rating:n})]})]})}let iE={[l.Rating.Poor]:"text-red-800 border-red-200",[l.Rating.Improvable]:"text-amber-800 border-amber-200",[l.Rating.Good]:"text-green-800 border-green-200"};function iT(e){let{rating:t,children:n,className:i}=e;return(0,o.jsx)("span",{className:(0,iy.twMerge)(i,"inline-block rounded border px-1 font-medium",t?iE[t]:"border-gray-200 text-gray-800"),children:n??"â€“"})}function iC(e){let{name:t,left:n,values:i,dateLabel:r}=e;return(0,o.jsxs)(iv.TooltipWithBounds,{className:"pointer-events-none absolute top-10 space-y-1.5",left:n,style:{background:"auto"},top:40,children:[(0,o.jsxs)("div",{className:"flex min-w-[170px] flex-col rounded-md bg-background-100 px-3 py-2 text-foreground shadow-tooltip",children:[(0,o.jsx)(p.Text,{align:"left",color:"gray-900",size:12,children:r}),(0,o.jsx)(p.Text,{className:"mt-0",color:"gray-1000",weight:600,children:t}),i.length>0?(0,o.jsxs)(f.Stack,{className:"mt-1 border-t pt-1.5 space-y-1",children:[i.map(e=>{let{label:t,unit:n,value:i,rating:r,highlight:a}=e;return(0,o.jsxs)(f.Stack,{align:"center",direction:"row",gap:2,children:[(0,o.jsx)("div",{className:(0,iy.twMerge)("h-2 w-2 rounded-full bg-blue-700",!a&&"border-2 border-blue-700 bg-transparent")}),(0,o.jsx)(p.Text,{weight:500,children:t}),(0,o.jsx)(iT,{className:"-mr-1",rating:r,children:void 0!==i?(0,o.jsxs)(o.Fragment,{children:[i,n]}):"â€“"})]},t)})," "]}):null]}),(0,o.jsx)(ik,{dataPoints:e.dataPoints})]})}function iR(e){let{data:{name:t,score:n,rating:i},metricDefinition:r}=e;return(0,o.jsxs)("div",{className:"flex-start flex flex-col items-start rounded-md bg-background-100 px-3 py-2 shadow-tooltip",children:[(0,o.jsxs)("div",{className:"flex flex-row items-center justify-between font-bold text-gray-1000",children:[t," "]}),(0,o.jsxs)("p",{className:"flex items-center justify-between text-gray-900",children:[(0,o.jsx)("span",{children:r.name}),(0,o.jsxs)(iT,{className:"-mr-1 ml-2",rating:i,children:[(0,w.formatMetric)(n,r).value," ",r.unit]})]})]})}let iD=(t=ix.default,"string"==typeof(n=ix.default.objects.countries)&&(n=t.objects[n]),"GeometryCollection"===n.type?{type:"FeatureCollection",features:n.geometries.map(function(e){return im(t,e)})}:im(t,n));function iP(e){let{isSkeleton:t=!1,metricDefinition:n,scoreData:i,parentHeight:r,parentWidth:a,onClick:s,hoveredCode:c}=e,u=(0,h.useRef)(null),{tooltipData:d,tooltipLeft:f,tooltipTop:p,showTooltip:m,hideTooltip:g}=(0,na.useTooltip)(),{resolvedTheme:x}=(0,ip.useTheme)(),[v,y]=(0,h.useState)(x);(0,h.useEffect)(()=>{setTimeout(()=>y(x),0)},[x,y]);let j=(0,h.useMemo)(()=>(function(e,t){let n=Object.values(t).flatMap(e=>e.map(e=>{let{datapoints:t}=e;return t})).sort(),i=[Math.min(...n),Math.max(...n)],r=(0,id.default)(i,i_(e,l.Rating.Good)),o=(0,id.default)(i,i_(e,l.Rating.Improvable)),a=(0,id.default)(i,i_(e,l.Rating.Poor)),s=new Map;for(let[e,n]of Object.entries(t))for(let t of n)s.set(t.countryCode,{...t,hoverColor:e===l.Rating.Good?"var(--ds-green-800)":e===l.Rating.Poor?"var(--ds-red-800)":"var(--ds-amber-800)",color:e===l.Rating.Good?r(t.datapoints):e===l.Rating.Poor?a(t.datapoints):o(t.datapoints)});return s})(t,i),[i,v]),b=(0,h.useMemo)(()=>a&&r?(function(e){var t,n,i,r,o,a,l,s,c,u,d=150,f=480,p=250,h=0,m=0,g=0,x=0,v=0,y=0,j=1,b=1,S=null,w=n$,N=null,M=nQ,k=.5;function E(e){return s(e[0]*nh,e[1]*nh)}function T(e){return(e=s.invert(e[0],e[1]))&&[e[0]*np,e[1]*np]}function C(){var e,i,r,o=it(d,0,0,j,b,y).apply(null,t(h,m)),c=it(d,f-o[0],p-o[1],j,b,y);return e=g,i=x,r=v,n=(e%=nf)?i||r?nW(nH(e),nB(i,r)):nH(e):i||r?nB(i,r):nG,l=nW(t,c),s=nW(n,l),a=n8(l,k),R()}function R(){return c=u=null,E}return E.stream=function(e){var t;return c&&u===e?c:c=ie((t=n,nK({point:function(e,n){var i=t(e,n);return this.stream.point(i[0],i[1])}}))(w(a(M(u=e)))))},E.preclip=function(e){return arguments.length?(w=e,S=void 0,R()):w},E.postclip=function(e){return arguments.length?(M=e,N=i=r=o=null,R()):M},E.clipAngle=function(e){return arguments.length?(w=+e?function(e){var t=nv(e),n=6*nh,i=t>0,r=nm(t)>1e-6;function o(e,n){return nv(e)*nv(n)>t}function a(e,n,i){var r=nC(e),o=nC(n),a=[1,0,0],l=nD(r,o),s=nR(l,l),c=l[0],u=s-c*c;if(!u)return!i&&e;var d=nD(a,l),f=n_(a,t*s/u);nP(f,n_(l,-t*c/u));var p=nR(f,d),h=nR(d,d),m=p*p-h*(nR(f,f)-1);if(!(m<0)){var g=nb(m),x=n_(d,(-p-g)/h);if(nP(x,f),x=nT(x),!i)return x;var v,y=e[0],j=n[0],b=e[1],S=n[1];j<y&&(v=y,y=j,j=v);var w=j-y,N=1e-6>nm(w-nc);if(!N&&S<b&&(v=b,b=S,S=v),N||w<1e-6?N?b+S>0^x[1]<(1e-6>nm(x[0]-y)?b:S):b<=x[1]&&x[1]<=S:w>nc^(y<=x[0]&&x[0]<=j)){var M=n_(d,(-p+g)/h);return nP(M,f),[x,nT(M)]}}}function l(t,n){var r=i?e:nc-e,o=0;return t<-r?o|=1:t>r&&(o|=2),n<-r?o|=4:n>r&&(o|=8),o}return nL(o,function(e){var t,n,s,c,u;return{lineStart:function(){c=s=!1,u=1},point:function(d,f){var p,h,m=[d,f],g=o(d,f),x=i?g?0:l(d,f):g?l(d+(d<0?nc:-nc),f):0;!t&&(c=s=g)&&e.lineStart(),g!==s&&(!(h=a(t,m))||nw(t,h)||nw(m,h))&&(m[2]=1),g!==s?(u=0,g?(e.lineStart(),h=a(m,t),e.point(h[0],h[1])):(h=a(t,m),e.point(h[0],h[1],2),e.lineEnd()),t=h):r&&t&&i^g&&!(x&n)&&(p=a(m,t,!0))&&(u=0,i?(e.lineStart(),e.point(p[0][0],p[0][1]),e.point(p[1][0],p[1][1]),e.lineEnd()):(e.point(p[1][0],p[1][1]),e.lineEnd(),e.lineStart(),e.point(p[0][0],p[0][1],3))),!g||t&&nw(t,m)||e.point(m[0],m[1]),t=m,s=g,n=x},lineEnd:function(){s&&e.lineEnd(),t=null},clean:function(){return u|(c&&s)<<1}}},function(t,i,r,o){!function(e,t,n,i,r,o){if(n){var a=nv(t),l=ny(t),s=i*n;null==r?(r=t+i*nf,o=t-s/2):(r=nV(a,r),o=nV(a,o),(i>0?r<o:r>o)&&(r+=i*nf));for(var c,u=r;i>0?u>o:u<o;u-=s)c=nT([a,-l*nv(u),-l*ny(u)]),e.point(c[0],c[1])}}(o,e,n,r,t,i)},i?[0,-e]:[-nc,e-nc])}(S=e*nh):(S=null,n$),R()):S*np},E.clipExtent=function(e){return arguments.length?(M=null==e?(N=i=r=o=null,nQ):function(e,t,n,i){function r(r,o){return e<=r&&r<=n&&t<=o&&o<=i}function o(r,o,l,c){var u=0,d=0;if(null==r||(u=a(r,l))!==(d=a(o,l))||0>s(r,o)^l>0)do c.point(0===u||3===u?e:n,u>1?i:t);while((u=(u+l+4)%4)!==d)else c.point(o[0],o[1])}function a(i,r){return 1e-6>nm(i[0]-e)?r>0?0:3:1e-6>nm(i[0]-n)?r>0?2:1:1e-6>nm(i[1]-t)?+(r>0):r>0?3:2}function l(e,t){return s(e.x,t.x)}function s(e,t){var n=a(e,1),i=a(t,1);return n!==i?n-i:0===n?t[1]-e[1]:1===n?e[0]-t[0]:2===n?e[1]-t[1]:t[0]-e[0]}return function(a){var s,c,u,d,f,p,h,m,g,x,v,y=a,j=ns(),b={point:S,lineStart:function(){b.point=w,c&&c.push(u=[]),x=!0,g=!1,h=m=NaN},lineEnd:function(){s&&(w(d,f),p&&g&&j.rejoin(),s.push(j.result())),b.point=S,g&&y.lineEnd()},polygonStart:function(){y=j,s=[],c=[],v=!0},polygonEnd:function(){var t=function(){for(var t=0,n=0,r=c.length;n<r;++n)for(var o,a,l=c[n],s=1,u=l.length,d=l[0],f=d[0],p=d[1];s<u;++s)o=f,a=p,f=(d=l[s])[0],p=d[1],a<=i?p>i&&(f-o)*(i-a)>(p-a)*(e-o)&&++t:p<=i&&(f-o)*(i-a)<(p-a)*(e-o)&&--t;return t}(),n=v&&t,r=(s=nO(s)).length;(n||r)&&(a.polygonStart(),n&&(a.lineStart(),o(null,null,1,a),a.lineEnd()),r&&nM(s,l,t,o,a),a.polygonEnd()),y=a,s=c=u=null}};function S(e,t){r(e,t)&&y.point(e,t)}function w(o,a){var l=r(o,a);if(c&&u.push([o,a]),x)d=o,f=a,p=l,x=!1,l&&(y.lineStart(),y.point(o,a));else if(l&&g)y.point(o,a);else{var s=[h=Math.max(-1e9,Math.min(1e9,h)),m=Math.max(-1e9,Math.min(1e9,m))],j=[o=Math.max(-1e9,Math.min(1e9,o)),a=Math.max(-1e9,Math.min(1e9,a))];!function(e,t,n,i,r,o){var a,l=e[0],s=e[1],c=t[0],u=t[1],d=0,f=1,p=c-l,h=u-s;if(a=n-l,!p&&a>0)return;if(a/=p,p<0){if(a<d)return;a<f&&(f=a)}else if(p>0){if(a>f)return;a>d&&(d=a)}if(a=r-l,p||!(a<0)){if(a/=p,p<0){if(a>f)return;a>d&&(d=a)}else if(p>0){if(a<d)return;a<f&&(f=a)}if(a=i-s,h||!(a>0)){if(a/=h,h<0){if(a<d)return;a<f&&(f=a)}else if(h>0){if(a>f)return;a>d&&(d=a)}if(a=o-s,h||!(a<0)){if(a/=h,h<0){if(a>f)return;a>d&&(d=a)}else if(h>0){if(a<d)return;a<f&&(f=a)}return d>0&&(e[0]=l+d*p,e[1]=s+d*h),f<1&&(t[0]=l+f*p,t[1]=s+f*h),!0}}}}(s,j,e,t,n,i)?l&&(y.lineStart(),y.point(o,a),v=!1):(g||(y.lineStart(),y.point(s[0],s[1])),y.point(j[0],j[1]),l||y.lineEnd(),v=!1)}h=o,m=a,g=l}return b}}(N=+e[0][0],i=+e[0][1],r=+e[1][0],o=+e[1][1]),R()):null==N?null:[[N,i],[r,o]]},E.scale=function(e){return arguments.length?(d=+e,C()):d},E.translate=function(e){return arguments.length?(f=+e[0],p=+e[1],C()):[f,p]},E.center=function(e){return arguments.length?(h=e[0]%360*nh,m=e[1]%360*nh,C()):[h*np,m*np]},E.rotate=function(e){return arguments.length?(g=e[0]%360*nh,x=e[1]%360*nh,v=e.length>2?e[2]%360*nh:0,C()):[g*np,x*np,v*np]},E.angle=function(e){return arguments.length?(y=e%360*nh,C()):y*np},E.reflectX=function(e){return arguments.length?(j=e?-1:1,C()):j<0},E.reflectY=function(e){return arguments.length?(b=e?-1:1,C()):b<0},E.precision=function(e){return arguments.length?(a=n8(l,k=e*e),R()):nb(k)},E.fitExtent=function(e,t){return n7(E,e,t)},E.fitSize=function(e,t){return n7(E,[[0,0],e],t)},E.fitWidth=function(e,t){return n3(E,function(t){var n=+e,i=n/(t[1][0]-t[0][0]),r=(n-i*(t[1][0]+t[0][0]))/2,o=-i*t[0][1];E.scale(150*i).translate([r,o])},t)},E.fitHeight=function(e,t){return n3(E,function(t){var n=+e,i=n/(t[1][1]-t[0][1]),r=-i*t[0][0],o=(n-i*(t[1][1]+t[0][1]))/2;E.scale(150*i).translate([r,o])},t)},function(){return t=e.apply(this,arguments),E.invert=t.invert&&T,C()}})(function(){return ia})().scale(131.747).fitSize([a,r],iD).rotate([-13,0]):null,[a,r]);return(0,o.jsxs)("div",{className:"absolute",ref:u,children:[a&&r&&b?(0,o.jsx)("svg",{height:r,width:a,children:(0,o.jsx)(t4,{data:iD.features,projection:()=>b,children:e=>(0,o.jsxs)("g",{children:[Array.from({length:8},(e,t)=>(0,o.jsx)("path",{d:`M 0 ${.045*r+r*t/8} H ${a}`,fill:"none",stroke:"var(--ds-gray-200)",strokeWidth:.2},t)),e.features.map(e=>{let{feature:t,path:n}=e,i=j.get(t.properties.code),r=!!c||!!d?.countryCode,a=t.properties.code===c||d?.countryCode===t.properties.code;return(0,o.jsx)("path",{className:"transition-all duration-100",d:n||"",onClick:()=>i&&s?.(i),onMouseLeave:g,onMouseMove:e=>{if(!u.current)return;let t=(0,D.localPoint)(u.current,e);t&&i&&m({tooltipData:i,tooltipLeft:t.x,tooltipTop:t.y})},...function(e){let t,{details:n,isHovered:i,hasHovered:r}=e;return i?t=n?.hoverColor:r||(t=n?.color),{fill:t??"var(--ds-gray-100)",stroke:"var(--ds-gray-300)"}}({details:i,isHovered:a,hasHovered:r}),strokeWidth:.2},t.properties.id)})]})})}):null,d?(0,o.jsxs)(ig.TooltipWithBounds,{className:"space-y-1",isPinned:!1,left:f,offsetLeft:10,offsetTop:-40,top:p,unstyled:!0,children:[(0,o.jsx)(iR,{data:d,metricDefinition:n}),(0,o.jsx)(ik,{dataPoints:d.datapoints})]},Math.random()):null]})}function i_(e,t){if(e)return()=>"--ds-gray-400";let n=getComputedStyle(document.documentElement),i=t===l.Rating.Good?"green":t===l.Rating.Poor?"red":"amber";return iu(`hsl(${n.getPropertyValue(`--ds-${i}-200-value`)})`,`hsl(${n.getPropertyValue(`--ds-${i}-800-value`)})`)}let iI=(r=i=function(e){function t(){for(var t,n=arguments.length,i=Array(n),r=0;r<n;r++)i[r]=arguments[r];return nr(nn(t=e.call.apply(e,[this].concat(i))||this),"state",{parentWidth:void 0,parentHeight:void 0}),nr(nn(t),"animationFrameID",0),nr(nn(t),"resizeObserver",void 0),nr(nn(t),"container",null),nr(nn(t),"setRef",function(e){t.container=e}),nr(nn(t),"resize",(0,t8.default)(function(e){var n=e.width,i=e.height;t.setState({parentWidth:n,parentHeight:i})},t.props.debounceTime,{leading:t.props.enableDebounceLeadingCall})),t}t.prototype=Object.create(e.prototype),t.prototype.constructor=t,ni(t,e);var n=t.prototype;return n.componentDidMount=function(){var e=this;this.resizeObserver=new ne.ResizeObserver(function(t){t.forEach(function(t){var n=t.contentRect,i=n.width,r=n.height;e.animationFrameID=window.requestAnimationFrame(function(){e.resize({width:i,height:r})})})}),this.container&&this.resizeObserver.observe(this.container)},n.componentWillUnmount=function(){window.cancelAnimationFrame(this.animationFrameID),this.resizeObserver&&this.resizeObserver.disconnect(),this.resize.cancel()},n.render=function(){var e=this.props,t=e.initialWidth,n=e.initialHeight,i=this.state,r=i.parentWidth,o=void 0===r?t:r,a=i.parentHeight,l=void 0===a?n:a;return h.default.createElement("div",{style:no,ref:this.setRef},null!=o&&null!=l&&h.default.createElement(iP,nt({parentWidth:o,parentHeight:l},this.props)))},t}(h.default.Component),nr(i,"propTypes",{parentWidth:P.default.number,parentHeight:P.default.number,initialWidth:P.default.number,initialHeight:P.default.number}),nr(i,"defaultProps",{debounceTime:300,enableDebounceLeadingCall:!0}),r);var iA=e.i(2504781),iO=e.i(5468328),iL=e.i(455575),iF=e.i(992159),iz=e.i(3896684),i$=e.i(1201436),iW=e.i(6982071),iG=e.i(2590593),iU=e.i(7807066),iH=e.i(5519837);let iB=(0,h.createContext)({isAnAccordion:!0,current:null,onChange:()=>void 0});iB.displayName="CollapseContext";let iV=iB.Provider;function iQ(e){let{id:t,title:n,className:i,children:r}=e,{isAnAccordion:a,current:l,onChange:s}=(0,h.useContext)(iB),c=l===t;return a?(0,o.jsxs)(iH.Root,{className:(0,u.clsx)("flex flex-col",c?"flex-1":"bg-background-200",i),onOpenChange:e=>{e||l!==t?e&&s(t):s(null)},open:c,children:[(0,o.jsxs)(iH.Trigger,{className:(0,u.clsx)("flex cursor-pointer items-center px-4 py-2 text-gray-800 space-x-2",c?"bg-transparent":"bg-background-200"),children:[(0,o.jsx)(iU.ChevronRight,{className:c?"rotate-90":""}),(0,o.jsx)("span",{className:"flex-1",children:n})]}),(0,o.jsx)(iH.Content,{className:"flex flex-1 flex-col",children:r})]}):(0,o.jsxs)("div",{className:(0,u.clsx)("flex w-0 flex-1 flex-col",i),children:[(0,o.jsx)("div",{className:"px-4 py-2",children:n}),r]})}function iK(e){let{initialyExpanded:t,children:n}=e,[i,r]=(0,h.useState)(t??null);return(0,h.useEffect)(()=>r(t??null),[t]),(0,o.jsxs)("div",{className:"tailwind @container",children:[(0,o.jsx)("div",{className:"hidden divide-x @2xl:flex",children:(0,o.jsx)(iV,{value:{current:i,isAnAccordion:!1,onChange:r},children:n})}),(0,o.jsx)("div",{className:(0,u.clsx)("flex flex-col divide-y @2xl:hidden",i&&"h-full",!i&&"-mb-px border-b"),children:(0,o.jsx)(iV,{value:{current:i,isAnAccordion:!0,onChange:r},children:n})})]})}var iq=e.i(5761705),iZ=e.i(6226725),iY=e.i(6143247),iJ=e.i(9584456),iX=e.i(9386557),i0=e.i(8761240);function i1(e){let{rating:t,className:n}=e;return t===l.Rating.Poor?(0,o.jsx)(iJ.StopFill,{className:n,color:"red-900"}):t===l.Rating.Improvable?(0,o.jsx)(iX.WarningFill,{className:n,color:"amber-800"}):(0,o.jsx)(i0.CheckCircleFill,{className:n,color:"green-800"})}let i2={[l.Rating.Poor]:{message:"No poor scores",icon:(0,o.jsx)(iq.CheckCircle,{color:"gray-900",size:20})},[l.Rating.Improvable]:{message:"No needs improvement scores",icon:(0,o.jsx)(iq.CheckCircle,{color:"gray-900",size:20})},[l.Rating.Good]:{message:"No good scores",icon:(0,o.jsx)(iZ.CrossCircle,{color:"gray-900",size:20})}};function i5(e){let{emptyIcon:t,emptyMessage:n,formatKey:i,getPercentages:r,isLoading:a,metricDefinition:l,rowCount:s,rows:c,disabled:u,onRowClick:d,onRowHover:f}=e;return(0,o.jsx)(iG.Table,{className:(0,iY.cn)("mb-2",u&&"pointer-events-none"),data:{rows:c},getColumnClassName:(e,t)=>e.rating?"min-w-[80px]":0===t?"min-w-[30px] ml-2":1===t?"min-w-[45px]":void 0,getPercentages:r,limit:s,onRowClick:d,onRowHover:f,primaryIndex:0,renderEmptyState:()=>(0,o.jsx)("div",{className:"flex flex-1 items-center justify-center p-4",children:(0,o.jsxs)("div",{className:"my-8 flex flex-col items-center justify-center space-y-2",children:[t,(0,o.jsx)(p.Text,{color:"gray-900",size:14,children:n})]})}),renderItemTitle:e=>(0,o.jsx)(o.Fragment,{children:i(e.key)}),renderRowValue:(e,t)=>0===t?(0,o.jsxs)("div",{className:"flex flex-row items-center",children:[(0,o.jsx)("span",{className:"font-normal text-gray-700",children:(0,N.formatNumberCompact)(e.values[0])}),(0,o.jsx)("span",{className:"text-gray-600",children:(0,o.jsx)(iN,{className:"text-gray-700",rating:iM(e.values[0])})})]}):(0,o.jsxs)("span",{className:"-mr-1.5 inline-block",children:[(0,w.formatMetric)(e.values[t],l).value," ",(0,o.jsx)("span",{className:"font-medium",children:l.unit}),e.rating?(0,o.jsx)(i1,{className:"ml-2 inline",rating:e.rating}):null]}),skeleton:a,style:s?{height:40*s}:{}})}var i6=e.i(7791712),i9=e.i(2331152),i3=e.i(8923565),i7=e.i(6891161),i4=e.i(4928763);function i8(e){let{active:t,metricDefinition:n,onClose:i,title:r}=e,[a,s]=(0,h.useState)(""),[c,u]=(0,h.useState)(e.rating);(0,h.useEffect)(()=>u(e.rating),[e.rating]);let d="selector"===e.by;return(0,o.jsx)(i7.Modal,{active:t,onClickOutside:i,style:{overflow:"visible",height:"80vh"},width:600,children:(0,o.jsxs)("div",{className:"tailwind-preflight",style:{display:"contents"},children:[(0,o.jsx)(iG.PanelHeader,{labels:["",n.type],title:r}),(0,o.jsxs)("span",{className:"flex gap-2 p-4",children:[(0,o.jsx)(i4.SearchBar,{className:"flex-1 p-0",initialValue:a,onChangeSearch:e=>s(e.toLocaleLowerCase())}),(0,o.jsx)(i3.Switch,{name:"score",children:[null,...Object.values(l.Rating).filter(e=>e!==l.Rating.Good||!d)].map(e=>(0,o.jsx)(i3.Switch.Control,{defaultChecked:c===e,icon:e?(0,o.jsx)(i1,{rating:e}):void 0,label:e?void 0:"All",onChange:()=>u(e),value:e??"All"},e??"All"))})]}),(0,o.jsx)(i7.Modal.Body,{className:"h-[50vh] flex-1 !overflow-hidden md:h-full [&>:first-child]:h-full",padding:!1,children:(0,o.jsx)(re,{...e,filter:a,rating:c})}),(0,o.jsx)(i7.Modal.Actions,{children:(0,o.jsx)(i7.Modal.Action,{fullWidth:!0,onClick:i,children:"Close"})})]})})}function re(e){let{filter:t,by:n,formatKey:i,getPercentages:r,metricDefinition:a,initialData:l,rating:s,onRowClick:c}=e,u=(0,R.useApiParams)(),{data:d,isLoading:f}=C({type:n,limit:300,tz:(0,N.getClientTimezone)(),...u}),p=(0,h.useMemo)(()=>{let e=(f?l:d)??{},n=(s?e[s]?.map(e=>({...e,rating:s})):(0,w.mergeAllRatings)(d))??[];return""===t?n:n.filter(e=>{let{key:n}=e,r=i(n);return("string"==typeof r?r:n).toLowerCase().includes(t)})},[d,f,l,i,t,s]);return(0,o.jsx)(i5,{emptyIcon:s&&0===t.length?i2[s].icon:(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(i9.MagnifyingGlass,{}),(0,o.jsx)("span",{className:"font-medium",children:"No results found"})]}),emptyMessage:s&&0===t.length?i2[s].message:`Your search for "${t}" did not return any results.`,formatKey:i,getPercentages:r,metricDefinition:a,onRowClick:c,rows:p})}var rt=e.i(9459801),rn=e.i(5326961);let ri={[l.Rating.Poor]:{color:"red-900",text:"Poor"},[l.Rating.Improvable]:{color:"amber-900",text:"Needs Improvement"},[l.Rating.Good]:{color:"green-900",text:"Great"}},rr={default:[{key:"/home",values:[934,35]},{key:"/checkout",values:[500,47]},{key:"/landing",values:[254,32]},{key:"/cart",values:[109,24]},{key:"/product",values:[10,38]}],country:[{key:"DE",values:[934,35]},{key:"JP",values:[500,47]},{key:"BR",values:[254,32]},{key:"KY",values:[109,24]},{key:"KE",values:[10,38]}]};function ro(e){let{rating:t,count:n,thresholds:i,metricDefinition:r}=e,{color:a,text:s}=ri[t],c=(0,w.formatMetric)(i.poor,r),u=(0,w.formatMetric)(i.good,r),d=i.poor<i.good,f=d?["<",">"]:[">","<"],h=d?[c.value,u.value]:[u.value,c.value],m={[l.Rating.Poor]:`${f[0]}${c.full}`,[l.Rating.Improvable]:`${h[0]} - ${h[1]}${u.unit}`,[l.Rating.Good]:`${f[1]}${u.full}`};return(0,o.jsxs)("div",{className:"flex flex-1 items-center justify-between overflow-hidden px-1 py-2 space-x-2",children:[(0,o.jsxs)("div",{className:"flex items-center truncate",children:[(0,o.jsx)(i1,{className:"mr-2 shrink-0",rating:t}),(0,o.jsx)(p.Text,{className:"flex-1 shrink truncate",color:a,children:(0,o.jsx)("span",{className:"truncate font-medium",children:s})}),void 0!==n?(0,o.jsxs)(p.Text,{className:"ml-0.5 inline-block",color:a,children:["(",n,")"]}):null]}),(0,o.jsx)(p.Text,{className:"whitespace-nowrap",color:"gray-800",children:m[t]})]})}function ra(e){let{rating:t,insignificantCount:n,thresholds:i,rowCount:r=7,onShowMore:a,className:l,additionalContent:s,disabled:c,...u}=e,{rows:d,metricDefinition:f}=u,m=d.length<r&&n>0;return(0,o.jsx)(iQ,{className:l,id:t,title:(0,o.jsx)(ro,{metricDefinition:f,rating:t,thresholds:i}),children:(0,o.jsxs)("div",{className:"relative flex flex-1 flex-col",children:[c?(0,o.jsx)(h.Suspense,{children:(0,o.jsx)(rg,{})}):null,(0,o.jsx)(i5,{...u,disabled:c,emptyMessage:u.emptyMessage+(n>0?" Â¹":""),rowCount:r,rows:d}),d.length>r||n?(0,o.jsx)(iG.ViewAllButton,{className:"bottom-4",onClick:c?()=>void 0:a}):null,m?(0,o.jsx)("div",{className:"absolute inset-x-0 bottom-0 flex items-center justify-center pb-2",children:(0,o.jsxs)(p.Text,{color:"gray-800",size:12,weight:500,children:[0===d.length&&"Â¹ ","Some with insignificant traffic"," ","(<0.5%)"]})}):null,s]})})}function rl(e){let{title:t,by:n,metricDefinitions:i,perTableLimit:r,onRowHover:a}=e,[s,c]=(0,h.useState)(null),[u,d]=(0,h.useState)(!1),f="selector"===n;return(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(rd,{by:n,children:[l.Rating.Poor,l.Rating.Improvable,...f?[]:[l.Rating.Good]].map(e=>(0,o.jsx)(rs,{by:n,metricDefinitions:i,onRowHover:a,perTableLimit:r,rating:e,setShowMoreRating:c,setShowMoreVisible:d},e))}),(0,o.jsx)(h.Suspense,{children:(0,o.jsx)(rm,{by:n,metricDefinitions:i,setShowMoreVisible:d,showMoreRating:s,showMoreVisible:u,title:t})})]})}function rs(e){return(0,o.jsx)(h.Suspense,{fallback:(0,o.jsx)(ra,{additionalContent:null,emptyIcon:(0,o.jsx)(d.Skeleton,{}),emptyMessage:"",formatKey:()=>void 0,insignificantCount:0,isLoading:!0,metricDefinition:e.metricDefinitions[l.MetricType.RES],rating:e.rating,rowCount:e.perTableLimit,rows:[],thresholds:e.metricDefinitions[l.MetricType.RES].thresholds[l.DeviceType.Desktop]}),children:(0,o.jsx)(ru,{...e})})}function rc(e){let{by:t,hostname:n,key:i}=e;return"Unknown"===i?(0,o.jsx)(iO.Tooltip,{text:"This data was not collected in the previous version of Speed Insights. Please migrate to the @vercel/speed-insights package.",children:(0,o.jsx)("span",{className:"mr-px inline-block border-b border-dashed border-gray-700",title:"",children:"Unknown"})}):"country"===t?(0,N.getCountryName)(i):"route"===t?(0,o.jsx)(rt.RouteHighlighter,{route:i}):"selector"===t?(0,o.jsxs)("span",{className:"group flex w-full items-center gap-1 border-none py-0.5 leading-5",children:[(0,o.jsx)("span",{className:"flex-1 truncate",children:i}),(0,o.jsx)("button",{"aria-label":"Copy Selector",className:(0,u.clsx)("-translate-x-0.5 rounded-sm bg-transparent p-0.5 opacity-0 transition-transform group-hover:ml-2 group-hover:block group-hover:translate-x-0 group-hover:opacity-75 hover:!opacity-100 focus-visible:ml-2 focus-visible:block focus-visible:translate-x-0 focus-visible:opacity-100"),onClick:e=>{e.preventDefault(),e.stopPropagation(),iL.toasts.message("Copied selector to clipboard"),navigator.clipboard.writeText(i)},type:"button",children:(0,o.jsx)(i$.Copy,{className:"min-h-4 min-w-4 text-gray-800"})})]}):(0,o.jsx)("a",{className:(0,u.clsx)("text-black no-underline ",n&&"hover:underline"),href:n?`https://${n||""}${i}`:"#",target:"_blank noopener noreferrer",children:i})}function ru(e){let{by:t,metricDefinitions:n,onRowHover:i,perTableLimit:r,rating:a,setShowMoreRating:s,setShowMoreVisible:c}=e,u=(0,R.useApiParams)(),{data:d,isLoading:f}=C({type:t,limit:51,tz:(0,N.getClientTimezone)(),...u}),{supportsPlus:p,hasSpeedInsightsPlusOrRemainingDays:m,hasData:g,isLoading:x}=(0,rn.useSpeedInsightsStatus)(),{state:v,set:y}=(0,T.useSpeedInsightsUrlState)(),j=(0,S.useHostname)(),b=rh(d),w=n[u.metric],M=(0,h.useMemo)(()=>!!v[t],[v,t]),k=(0,h.useMemo)(()=>!!(v.country||v.path||v.route),[v]),E=M&&d?.[a]?.length===1,D=M&&d?.[a]?.length===0,{emptyIcon:P,emptyMessage:_}=function(e){let{noData:t,hasFilter:n,rating:i}=e;return t?{emptyIcon:(0,o.jsx)(iz.ChartActivity,{className:"!text-gray-700"}),emptyMessage:"No data available"}:n?{emptyIcon:(0,o.jsx)(iF.Filter,{className:"!text-gray-700"}),emptyMessage:"No results for active filter"}:{emptyIcon:i2[i].icon,emptyMessage:i2[i].message}}({noData:!g&&!f&&!x,hasFilter:k,rating:a}),I=(0,h.useMemo)(()=>p&&!m&&a===l.Rating.Poor,[p,m,a]),{rows:A,insignificantCount:O}=b[a];return(0,o.jsx)(ra,{additionalContent:E?(0,o.jsx)("div",{className:"flex items-center justify-center",children:(0,o.jsx)(iG.FilterTag,{onRemoveTag:()=>{y({[t]:void 0})},value:"Clear Filter"})}):null,className:D?"bg-background-200 text-opacity-50":"",disabled:I,emptyIcon:P,emptyMessage:_,formatKey:e=>rc({by:t,hostname:j,key:e}),insignificantCount:O,isLoading:f,metricDefinition:w,onRowClick:e=>y({[t]:e.key}),onRowHover:i,onShowMore:()=>{s(a),c(!0)},rating:a,rowCount:E?1:r,rows:I?rr[t]??rr.default:A,thresholds:w.thresholds[v.device]},a)}function rd(e){let{by:t,children:n}=e;return(0,o.jsx)(h.Suspense,{fallback:(0,o.jsx)(iK,{initialyExpanded:l.Rating.Good,children:n}),children:(0,o.jsx)(rf,{by:t,children:n})})}function rf(e){let{by:t,children:n}=e,i=(0,R.useApiParams)(),{data:r}=C({type:t,limit:51,tz:(0,N.getClientTimezone)(),...i}),a=rh(r),s=(0,h.useMemo)(()=>a[l.Rating.Poor].rows.length>0?l.Rating.Poor:a[l.Rating.Improvable].rows.length>0?l.Rating.Improvable:l.Rating.Good,[a]);return(0,o.jsx)(iK,{initialyExpanded:s,children:n})}function rp(e){return(0,h.useMemo)(()=>{let t=Object.values(e??{}).flat();return(0,N.createPercentages)(t,e=>e.values[0])},[e])}function rh(e){let t=rp(e),n={[l.Rating.Poor]:{rows:[],insignificantCount:0},[l.Rating.Improvable]:{rows:[],insignificantCount:0},[l.Rating.Good]:{rows:[],insignificantCount:0}};for(let i of[l.Rating.Poor,l.Rating.Improvable,l.Rating.Good]){let r=0,o=[];for(let n of e?.[i]??[]){let{relativeToMax:e}=t(n);e<.005?r++:o.push(n)}n[i]={rows:o,insignificantCount:r}}return n}function rm(e){let{by:t,metricDefinitions:n,setShowMoreVisible:i,showMoreRating:r,showMoreVisible:a,title:l}=e,s=(0,R.useApiParams)(),{data:c}=C({type:t,limit:51,tz:(0,N.getClientTimezone)(),...s}),{set:u}=(0,T.useSpeedInsightsUrlState)(),d=(0,S.useHostname)(),f=rp(c),p=n[s.metric];return(0,o.jsx)(i8,{active:a,by:t,formatKey:e=>rc({by:t,hostname:d,key:e}),getPercentages:f,initialData:c,metricDefinition:p,onClose:()=>i(!1),onRowClick:e=>{i(!1),u({[t]:e.key})},rating:r,title:l})}function rg(){let{openEnableModal:e,EnableModal:t}=(0,i6.useOpenEnableModal)();return(0,o.jsxs)("div",{className:"absolute inset-0 flex flex-col items-center justify-center bg-gradient-to-b from-background-100/50 via-background-100/80 to-background-100 z-10",children:[(0,o.jsx)(iA.Button,{className:"group/lock",shadow:!0,shape:"rounded",size:"small",type:"secondary",onClick:e,prefix:(0,o.jsxs)("span",{className:"relative",children:[(0,o.jsx)("div",{className:"h-[7px] origin-[90%,50%] overflow-hidden transition-transform duration-150 group-hover/lock:translate-x-1 group-hover/lock:-scale-x-100",children:(0,o.jsx)(iW.LockClosedSmall,{className:"size-4"})}),(0,o.jsx)("div",{className:"h-[9px] overflow-hidden",children:(0,o.jsx)(iW.LockClosedSmall,{className:"mt-[-7px]"})})]}),children:"Unlock with Plus"}),t]})}function rx(e){let{metricDefinitions:t}=e,n="Countries",[i,r]=(0,h.useState)(null);return(0,o.jsxs)("div",{children:[(0,o.jsx)("div",{className:"border-b px-6 py-4 font-semibold",children:n}),(0,o.jsxs)("div",{className:"grid border-b divide-y lg:grid-cols-[auto_350px] lg:divide-x lg:divide-y-0",children:[(0,o.jsx)("div",{className:"relative max-h-[400px] min-h-[240px] max-w-full overflow-hidden py-2 md:max-h-[550px] md:min-h-[382px]",children:(0,o.jsx)(rv,{hoveredCode:i?.key,metricDefinitions:t})}),(0,o.jsx)(rl,{by:"country",metricDefinitions:t,onRowHover:r,perTableLimit:5,title:n})]})]})}function rv(e){return(0,o.jsx)(h.Suspense,{fallback:(0,o.jsx)(iP,{isSkeleton:!0,metricDefinition:e.metricDefinitions[l.MetricType.RES],parentHeight:366,parentWidth:622,scoreData:{good:[],improvable:[],poor:[]}}),children:(0,o.jsx)(ry,{...e})})}function ry(e){let{hoveredCode:t,metricDefinitions:n}=e,{set:i}=(0,T.useSpeedInsightsUrlState)(),r=(0,R.useApiParams)(),{data:a}=C({type:"country",limit:200,tz:(0,N.getClientTimezone)(),...r}),s=n[r.metric];return(0,o.jsx)(iI,{hoveredCode:t,metricDefinition:s,onClick:e=>i({country:e.countryCode}),scoreData:function(e){let t={[l.Rating.Good]:[],[l.Rating.Improvable]:[],[l.Rating.Poor]:[]};for(let[n,i]of Object.entries(e??{}))for(let{key:e,values:[r,o]}of i)t[n].push({countryCode:e,score:o,datapoints:r,name:(0,N.getCountryName)(e),rating:n});return t}(a)})}var rj=e.i(1108511),rb=e.i(4237893),rS=e.i(3207969);function rw(e){let{metricDefinitions:t}=e,[n,i]=(0,h.useState)("route"),{state:r}=(0,T.useSpeedInsightsUrlState)(),a=rS.MetricsWithAttributionSelectors.includes(r.metric);return(0,h.useEffect)(()=>{a||"selector"!==n||i("route")},[a,n]),(0,o.jsxs)("div",{className:"border-b",children:[(0,o.jsxs)("div",{className:"flex items-center justify-between border-b px-6",children:[(0,o.jsx)(rb.Tabs,{border:!1,selected:n,setSelected:i,tabs:[{title:"Routes",value:"route"},{title:"Paths",value:"path"},...a?[{title:"Selectors",value:"selector"}]:[]]}),(0,o.jsx)(rN,{metricDefinitions:t})]}),(0,o.jsx)(rl,{by:n,metricDefinitions:t,title:"route"===n?"Routes":"Paths"})]})}function rN(e){let{metricDefinitions:t}=e;return(0,o.jsx)(h.Suspense,{fallback:(0,o.jsx)(iG.HeaderLabels,{labels:[t[l.MetricType.RES].type]}),children:(0,o.jsx)(rM,{metricDefinitions:t})})}function rM(e){let{metricDefinitions:t}=e,n=t[(0,R.useApiParams)().metric];return(0,o.jsx)(iG.HeaderLabels,{labels:[n.type]})}var rk=e.i(1794286),rE=e.i(7917902),rT=e.i(5074502),rC=e.i(188217);function rR(){let{set:e}=(0,T.useSpeedInsightsUrlState)(),{account:t}=(0,rE.useAccount)(),n=t?.billing?.plan||"hobby",i=(0,rC.useTimeSelection)(n,"speedInsightsPlans",!1,"7d"),r=(0,h.useMemo)(()=>(0,rT.findAvailablePresets)(n,"speedInsightsPlans"),[n]),a=new Date;return(0,o.jsx)(rk.Calendar,{compact:!0,minValue:i.minAllowedDate,maxValue:a,onChange:(t,n)=>{let{start:i,end:r}=t;n?e({period:n}):e({from:new Date(i),to:new Date(r)})},presetIndex:Object.values(r).findIndex(e=>e.period===i.period),presets:r,value:{start:i.range.from,end:i.range.to},width:"164px"})}var rD=e.i(7218483);function rP(e){let{dataPoints:t,className:n,lastUpdated:i,isLoading:r}=e,a=(0,rD.useAgo)(Number(i),{justNowThreshold:3e4,justNowLabel:"just now"}),l=iM(t);return(0,o.jsxs)("div",{className:(0,u.clsx)("flex flex-col justify-between gap-4 px-3 align-middle text-sm text-gray-900","text-center md:flex-row md:text-left",n),children:[0!==t||r?(0,o.jsxs)("span",{children:["This report is based on"," ",r?(0,o.jsx)(d.Skeleton,{className:"mx-1 inline-block align-middle",height:18,width:55}):(0,o.jsxs)("span",{className:(0,u.clsx)("whitespace-nowrap","Low"===l&&"text-red-800","Medium"===l&&"text-amber-800"),children:[(0,o.jsx)(iN,{className:"-mt-px mr-px inline ",rating:l}),(0,o.jsx)("span",{className:"font-medium",children:(0,N.formatNumber)(t)})]}),(0,o.jsx)("span",{children:" data points"})]}):(0,o.jsx)("span",{children:"No data points collected"}),a?(0,o.jsxs)("span",{className:"text-gray-800",children:[" Updated ",a||"just now"]}):(0,o.jsx)(d.Skeleton,{autoSize:!1,height:18,style:{height:18},width:90})]})}var r_=e.i(9031150),rI=e.i(3322724),rA=e.i(2798756),rO=e.i(8185979);function rL(e,t,n){var i=e._x1-e._x0,r=t-e._x1,o=(e._y1-e._y0)/(i||r<0&&-0),a=(n-e._y1)/(r||i<0&&-0);return((o<0?-1:1)+(a<0?-1:1))*Math.min(Math.abs(o),Math.abs(a),.5*Math.abs((o*r+a*i)/(i+r)))||0}function rF(e,t){var n=e._x1-e._x0;return n?(3*(e._y1-e._y0)/n-t)/2:t}function rz(e,t,n){var i=e._x0,r=e._y0,o=e._x1,a=e._y1,l=(o-i)/3;e._context.bezierCurveTo(i+l,r+l*t,o-l,a-l*n,o,a)}function r$(e){this._context=e}function rW(e){this._context=e}function rG(e){return new r$(e)}r$.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=this._t0=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x1,this._y1);break;case 3:rz(this,this._t0,rF(this,this._t0))}(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){var n=NaN;if(t*=1,(e*=1)!==this._x1||t!==this._y1){switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;break;case 2:this._point=3,rz(this,rF(this,n=rL(this,e,t)),n);break;default:rz(this,this._t0,n=rL(this,e,t))}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t,this._t0=n}}},((function(e){this._context=new rW(e)}).prototype=Object.create(r$.prototype)).point=function(e,t){r$.prototype.point.call(this,t,e)},rW.prototype={moveTo:function(e,t){this._context.moveTo(t,e)},closePath:function(){this._context.closePath()},lineTo:function(e,t){this._context.lineTo(t,e)},bezierCurveTo:function(e,t,n,i,r,o){this._context.bezierCurveTo(t,e,i,n,o,r)}};var rU=["children","id","from","to","x1","y1","x2","y2","fromOffset","fromOpacity","toOffset","toOpacity","rotate","transform","vertical"];function rH(){return(rH=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e}).apply(this,arguments)}function rB(e){var t=e.children,n=e.id,i=e.from,r=e.to,o=e.x1,a=e.y1,l=e.x2,s=e.y2,c=e.fromOffset,u=e.fromOpacity,d=e.toOffset,f=e.toOpacity,p=e.rotate,m=e.transform,g=e.vertical,x=function(e,t){if(null==e)return{};var n,i,r={},o=Object.keys(e);for(i=0;i<o.length;i++)n=o[i],t.indexOf(n)>=0||(r[n]=e[n]);return r}(e,rU),v=o,y=l,j=a,b=s;return void 0!==g&&!g||v||y||j||b||(v="0",y="0",j="0",b="1"),h.default.createElement("defs",null,h.default.createElement("linearGradient",rH({id:n,x1:v,y1:j,x2:y,y2:b,gradientTransform:p?"rotate("+p+")":m},x),!!t&&t,!t&&h.default.createElement("stop",{offset:void 0===c?"0%":c,stopColor:i,stopOpacity:void 0===u?1:u}),!t&&h.default.createElement("stop",{offset:void 0===d?"100%":d,stopColor:r,stopOpacity:void 0===f?1:f})))}rB.propTypes={id:P.default.string.isRequired,from:P.default.string,to:P.default.string,x1:P.default.oneOfType([P.default.string,P.default.number]),x2:P.default.oneOfType([P.default.string,P.default.number]),y1:P.default.oneOfType([P.default.string,P.default.number]),y2:P.default.oneOfType([P.default.string,P.default.number]),fromOffset:P.default.oneOfType([P.default.string,P.default.number]),fromOpacity:P.default.oneOfType([P.default.string,P.default.number]),toOffset:P.default.oneOfType([P.default.string,P.default.number]),toOpacity:P.default.oneOfType([P.default.string,P.default.number]),rotate:P.default.oneOfType([P.default.string,P.default.number]),transform:P.default.string,children:P.default.node,vertical:P.default.bool};var rV=e.i(7407064),rQ=e.i(9091333),rK=e.i(3489437),rq=e.i(9629316),rZ=e.i(440599),rY=e.i(4322153),rJ=e.i(9275907),rX=e.i(6802161),r0=e.i(7013170),r1=e.i(1246255),r2=e.i(8125826),r5=e.i(4085287),r6=e.i(5076449);function r9(e){return e}var r3=e.i(388027),r7=e.i(9375869),r4=e.i(2982888),r8=e.i(8529990);let oe=(0,h.forwardRef)((e,t)=>{let{deployments:n,dateLabel:i,onMouseEnter:r,onMouseLeave:a,onTitleClick:l,left:s,bottom:c}=e;return(0,o.jsx)(iv.TooltipWithBounds,{className:"tooltip pointer-events-none absolute flex items-end justify-center py-3",left:s,offsetLeft:8,style:{width:300,height:c},top:0,children:(0,o.jsxs)("div",{className:"tooltip pointer-events-auto flex max-h-44 max-w-full flex-col rounded-md bg-background-100 text-foreground shadow-tooltip",onMouseEnter:r,onMouseLeave:a,ref:t,children:[(0,o.jsxs)("div",{className:"py-x flex items-center justify-between border-b p-1 pr-3",children:[(0,o.jsx)(iA.Button,{onClick:l,size:"small",type:"tertiary",children:(0,o.jsxs)(p.Text,{weight:500,children:["Deployments",(0,o.jsx)(p.Text,{as:"span",weight:400,children:n?.length?` (${n.length})`:""})]})}),(0,o.jsx)(p.Text,{color:"gray-800",children:i})]}),(0,o.jsx)("div",{className:"w-full flex-1 overflow-y-auto overflow-x-hidden px-3 py-2 space-y-3",children:n?.length?n.map(e=>(0,o.jsx)(ot,{deployment:e},e.url)):(0,o.jsx)(p.Text,{color:"gray-900",children:"No production deployments"})})]})})});function ot(e){let{deployment:t}=e,n=(0,r8.getGitInfoFromDeployment)(t),i=(0,r7.useDeploymentLink)(t);return n?(0,o.jsxs)("div",{className:"my-1 flex w-full space-x-2",children:[(0,o.jsx)(r4.DeploymentCreatorAvatar,{deployment:t}),(0,o.jsx)(a.Link,{className:"truncate",href:i,title:n.commitMessage,variant:"underline",children:n.commitMessage})]},t.url):null}oe.displayName="DeploymentsTooltip";var on=e.i(8901547);function oi(e){let{value:t,formattedValue:n,x:i,y:r,thresholds:a}=e,l={dominantBaseline:"middle",fontSize:12,textAnchor:"end",x:-16,y:r};return t===a?.good?(0,o.jsxs)("g",{children:[(0,o.jsx)("circle",{cx:i,cy:r,fill:"var(--ds-green-700)",r:3}),(0,o.jsx)(rX.Text,{...l,fill:"var(--ds-green-700)",fontWeight:500,children:n})]}):t===a?.poor?(0,o.jsxs)("g",{children:[(0,o.jsx)(rX.Text,{...l,fill:"var(--ds-amber-800)",fontWeight:500,children:n}),(0,o.jsx)("path",{d:`M${i-3},${r-3} L${i+3},${r-3} L${i},${r+3} Z`,fill:"var(--ds-amber-800)",transform:`rotate(180, ${i}, ${r})`})]}):(0,o.jsx)("g",{children:(0,o.jsx)("text",{...l,fill:"var(--accents-4)",x:-10,children:n})})}function or(e){let{className:t,data:n,width:i,metric:r,activeDevice:a,activePercentiles:s,height:c,hasFilters:d,deployments:f,dateRange:{from:p,to:g},onClickFindDeployments:x,onSelectionChange:v}=e,y=(0,rI.useIsMobile)(),j=(0,h.useRef)(null),b=(0,h.useRef)(null),S=(0,h.useRef)(!1),{resolvedTheme:N}=(0,ip.useTheme)(),[M,k]=(0,h.useState)(null),E=Math.max(i-60-30,0),T=Math.max(c-25-50,0),C=(0,m.getGranularity)(p,g),R=r.type,P=(0,h.useMemo)(()=>f?f.map(e=>({date:new Date(e.createdAt),...e})).filter(e=>e.date>=p&&e.date<=g):[],[f,p,g]),_=(0,h.useMemo)(()=>(function(e){for(var t,n,i,r,o=arguments.length,a=Array(o>1?o-1:0),l=1;l<o;l++)a[l-1]=arguments[l];return t=e,n=r9,i=r9,r=a,function e(t,o){if(o>=r.length)return i(t);let a=new r6.InternMap,l=r[o++],s=-1;for(let e of t){let n=l(e,++s,t),i=a.get(n);i?i.push(e):a.set(n,[e])}for(let[t,n]of a)a.set(t,e(n,o));return n(a)}(t,0)})(P,e=>(0,m.roundDateWithGranularity)(e.date,C).toString()),[P,C]),I=(0,h.useMemo)(()=>Array.from(_.values(),e=>(0,m.roundDateWithGranularity)(e[0].date,C)),[C,_]),A=(0,h.useCallback)(e=>e.date,[]),O=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:75;return e[R]?.[`p${t}`]??NaN},L=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:75;return t=>!isNaN(t[r.type]?.[`p${e}`]??NaN)},F=L(),z=r.thresholds[a]??r.thresholds,$=(0,r2.bisector)(e=>e.date),W=$.left.bind($),[G,U]=(0,r5.extent)(n,A),H=[p<G?p:G,U],B=(0,rq.scaleTime)({range:[0,E],domain:H}),V=Math.max(...s),Q=d?1.05:1,K=(0,rK.scaleLinear)({domain:r.type===l.MetricType.RES?[0,100*Q]:[0,Math.max((0,r3.max)(n,e=>e[r.type]?.[`p${V}`])??1,1.03*z.poor)*Q],range:[T,0],nice:!0}),q=(0,na.useTooltip)(),{tooltipData:Z,tooltipLeft:Y}=q,J=(0,h.useCallback)(()=>{setTimeout(()=>{S.current||q.hideTooltip()},0)},[q]),X=e=>{if(0===n.length||!j.current)return void q.hideTooltip();let t=(0,D.localPoint)(j.current,e)||{x:0,y:0};if(t.y>T+25)return void J();let i=B.invert(t.x-60),r=n[0];if(n.length>1){let e=W(n,i,1),t=n[e-1],o=n[e];if(!o||!A(o))return;r=i.valueOf()-t.date.valueOf()>o.date.valueOf()-i.valueOf()?o:t}r.range=(0,m.formatWithGranularity)(r.date,C);let o=B(A(r)),a=_.get((0,m.roundDateWithGranularity)(r.date,C).toString());r.deployments=a;let l=t.y>K(0)-32;r.inDeploymentArea=l,q.showTooltip({tooltipData:r,tooltipLeft:o})},ee=n.reduce((e,t)=>r.type in t?t:e,void 0),et="dark"===N?"var(--ds-gray-400)":"#D9D9D9",en=Z?.inDeploymentArea&&Z.deployments?.length,ei=Z?en?(0,o.jsx)(oe,{bottom:K(0),dateLabel:(0,m.formatRangeWithGranularity)(Z.date,C),deployments:Z.deployments,left:(Y??0)+60,onMouseEnter:()=>{S.current=!0},onMouseLeave:()=>{S.current=!1},onTitleClick:()=>{let e=(0,m.getDateRangeFromGranularity)(Z.date,C);x?.(e)},ref:b}):(0,o.jsx)(iC,{dataPoints:Z[R]?.datapoints||0,dateLabel:(0,m.formatWithGranularity)(Z.date,C,!0),left:(Y??0)+60,name:r.name,values:L()(Z)?s.map(e=>{let t=O(Z,e);return{value:(0,w.formatMetric)(t,r).value,unit:r.unit,label:`P${e}`,rating:(0,w.getRatingForThresholds)(r.thresholds[a],t),highlight:75===e}}):s.map(e=>({value:void 0,unit:r.unit,rating:void 0,label:`P${e}`,highlight:75===e}))}):null,er=(0,h.useMemo)(()=>24>=(0,r0.differenceInHours)(g,p),[p,g]);return(0,o.jsxs)("div",{className:(0,u.clsx)(t,"relative *:select-none"),children:[(0,o.jsxs)("svg",{height:c,onMouseDown:(0,r_.withAwaitPaint)(()=>{er||y||Z&&k(Z.date)}),onMouseLeave:(0,r_.withAwaitPaint)(()=>{J(),er||k(null)}),onMouseMove:(0,r_.withAwaitPaint)(X),onMouseUp:(0,r_.withAwaitPaint)(()=>{if(er||!M||!Z)return;let e=(0,m.roundDateWithGranularity)(M,C),t=(0,m.roundDateWithGranularity)(Z.date,C);if(e>t&&([e,t]=[t,e]),e.getTime()!==t.getTime()){let n=(0,r1.subMinutes)((0,m.getDateRangeFromGranularity)(t,C).to,1);v?.([e,n])}k(null)}),onTouchMove:(0,r_.withAwaitPaint)(X),onTouchStart:e=>{e.preventDefault()},ref:j,width:"100%",children:[(0,o.jsx)(rB,{from:et,fromOpacity:0,id:"deployment-line-gradient",to:et,toOffset:80,vertical:!0}),(0,o.jsx)(rB,{from:"var(--ds-gray-400)",fromOpacity:.2,id:"deployment-line-active",to:"var(--ds-gray-1000)",vertical:!0}),(0,o.jsx)(rB,{from:"var(--ds-background-100)",id:"deployment-fade-gradient",to:"var(--ds-gray-100)",width:E}),(0,o.jsx)("clipPath",{id:"deployment-circles",children:(0,o.jsx)("rect",{height:32,width:E+20,x:-10,y:K(0)-32})}),(0,o.jsxs)(rQ.Group,{left:60,top:25,children:[0!==I.length&&(0,o.jsx)("rect",{fill:"url('#deployment-fade-gradient')",height:32,opacity:en?1:.5,style:{transition:"opacity 0.2s ease-in-out"},width:E,x:0,y:K(0)-32}),(0,o.jsx)(rO.AxisLeft,{hideTicks:!0,numTicks:2,scale:K,stroke:"var(--accents-2)",tickComponent:oi,tickFormat:e=>{let{value:t,unit:n}=(0,w.formatMetric)(e.valueOf(),r);return`${t}${n}`},tickLabelProps:e=>({dx:"-0.5em",dy:"0.25em",fill:"var(--accents-4)",fontSize:12,textAnchor:"end",thresholds:z,value:Number(e)}),tickValues:[z.good,z.poor,...K.ticks(1)]}),(0,o.jsx)(rV.GridRows,{numTicks:3,pointerEvents:"none",scale:K,stroke:"var(--accents-2)",width:E}),(0,o.jsx)("path",{d:`M 0 ${K(z.poor)} H ${E}`,stroke:"var(--ds-amber-700)",strokeDasharray:4,strokeWidth:1}),(0,o.jsx)("path",{d:`M 0 ${K(z.good)} H ${E}`,stroke:"var(--ds-green-700)",strokeDasharray:4,strokeWidth:1}),M&&Z?.date&&!er?(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)("rect",{fill:"var(--geist-success)",fillOpacity:.1,height:T,pointerEvents:"none",width:Math.abs(B(Z.date)-B(M)),x:Math.min(B(M),B(Z.date)),y:0}),(0,o.jsx)(rY.Line,{from:{x:B(M),y:0},opacity:.2,pointerEvents:"none",stroke:"var(--geist-success)",strokeWidth:1.5,to:{x:B(M),y:T}})]}):null,(0,o.jsx)(rQ.Group,{children:0!==n.length&&0!==I.length&&I.map((e,t)=>{let n=Z&&en&&(0,m.roundDateWithGranularity)(e,C).toString()===(0,m.roundDateWithGranularity)(Z.date,C).toString();return(0,o.jsx)(rQ.Group,{clipPath:"url(#deployment-circles)",children:(0,o.jsxs)("g",{className:on.default.slideUpAnimation,style:{animationDelay:`${25*t}ms`},children:[!n&&(0,o.jsx)("rect",{fill:"url('#deployment-line-gradient')",height:30,width:1.5,x:B(e)-.75,y:K(0)-30}),(0,o.jsx)(rZ.Circle,{cx:B(e),cy:K(0),fill:n?"var(--ds-gray-1000)":"var(--ds-gray-500)",onClick:()=>{let t=(0,m.getDateRangeFromGranularity)(e,C);x?.(t)},r:n?4:3,style:{transition:"all 0.05s ease-in-out"}})]})},`deployments-${e.toString()}`)})}),s.includes(75)&&n.map(e=>F(e)?(0,o.jsx)("circle",{cx:B(A(e)),cy:K(O(e)),fill:"var(--accents-3)",r:2},`p-${A(e).toString()}`):null),s.map(e=>(0,o.jsx)(h.Fragment,{children:(0,o.jsx)(rJ.LinePath,{curve:rG,data:n,defined:L(e),opacity:en?.5:1,stroke:"var(--geist-success)",strokeWidth:75===e?2:1,x:e=>B(A(e)),y:t=>K(O(t,e))})},e)),0!==n.length&&[...s].reverse().map(e=>(0,o.jsxs)(h.Fragment,{children:[s.length>1&&(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)("rect",{height:"20",rx:"5",ry:"5",style:{fill:"var(--geist-background)",opacity:.8,filter:"blur(5px)"},width:"30",x:(ee?B(A(ee)):E)-27,y:K(ee?O(ee,e):0)-20}),(0,o.jsx)(rX.Text,{color:"gray-1000",fill:"var(--geist-success)",fontSize:12,fontWeight:500,textAnchor:"end",x:ee?B(A(ee)):E,y:K(ee?O(ee,e):0)-5,children:`P${e.toString()}`},e)]}),ee?(0,o.jsx)(rZ.Circle,{cx:B(A(ee)),cy:K(O(ee,e)),fill:"var(--geist-success)",r:3}):null]},`active-p-${e}`)),(0,o.jsx)(rA.AxisBottom,{hideAxisLine:!0,hideTicks:!0,numTicks:y||C===l.Granularity.Month?2:6,scale:B,tickFormat:e=>(0,m.formatWithGranularity)(e,0===e.getHours()&&C===l.Granularity.Hour?l.Granularity.Day:C),tickLabelProps:()=>({dy:"0.25em",dx:"0.4em",fill:"var(--accents-4)",fontSize:12,textAnchor:"middle"}),top:T}),Z?(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)("rect",{fill:en?"url(#deployment-line-active)":"var(--ds-gray-1000)",height:T,width:2,x:(Y||0)-1,y:0}),!en&&F(Z)&&s.map(e=>(0,o.jsx)(rZ.Circle,{cx:Y,cy:K(O(Z,e)),fill:"var(--geist-success)",pointerEvents:"none",r:4},e))]}):null]})]}),ei]})}var oo=e.i(1113594);function oa(){let{state:e}=(0,T.useSpeedInsightsUrlState)(),{device:t}=e;return(0,o.jsx)(p.Text,{color:"gray-800",size:14,children:(0,w.getLabelForDevice)(t)})}function ol(){return(0,o.jsx)(h.Suspense,{fallback:(0,o.jsx)(p.Text,{color:"gray-800",size:14,children:(0,w.getLabelForDevice)(l.DeviceType.Desktop)}),children:(0,o.jsx)(oa,{})})}function os(e){let{metricDefinitions:t}=e,{metric:n}=(0,R.useApiParams)(),{state:i}=(0,T.useSpeedInsightsUrlState)(),{device:r}=i,a=t[n];return(0,o.jsx)(p.Text,{color:"gray-900",children:(0,w.getMetricDescription)(a,r)})}function oc(e){return(0,o.jsx)(h.Suspense,{fallback:(0,o.jsx)(p.Text,{color:"gray-900",children:(0,w.getMetricDescription)(e.metricDefinitions[l.MetricType.RES],l.DeviceType.Desktop)}),children:(0,o.jsx)(os,{...e})})}function ou(e){let{metricDefinitions:t}=e,{state:n}=(0,T.useSpeedInsightsUrlState)(),{hasData:i}=(0,rn.useSpeedInsightsStatus)(),{metric:r}=(0,R.useApiParams)(),{data:a,isLoading:l}=(0,rj.useTimeseriesWithQueryParams)(),{device:s}=n;return(0,o.jsx)(oo.MetricDisplay,{className:"h-20",device:s,hasData:i,isLoading:l,metric:r,metricDefinitions:t,size:"large",values:a?.overview},r)}function od(e){return(0,o.jsx)(h.Suspense,{fallback:(0,o.jsx)(oo.MetricDisplay,{className:"h-20",device:l.DeviceType.Desktop,hasData:!1,isLoading:!0,metric:"RES",metricDefinitions:e.metricDefinitions,size:"large"}),children:(0,o.jsx)(ou,{...e})})}function of(e){let{metricDefinitions:t}=e,{state:n}=(0,T.useSpeedInsightsUrlState)(),{data:i}=(0,rj.useTimeseriesWithQueryParams)(),{metric:r}=(0,R.useApiParams)();if(!(0,T.canMetricBeFiltered)(r,n))return(0,o.jsxs)(p.Text,{color:"amber-900",size:14,children:[t[r].name," does not support attribution selectors."]});let{overview:a}=i||{};if(!a)return(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(d.Skeleton,{height:20,width:50}),(0,o.jsx)(d.Skeleton,{height:20,width:80})]});let{device:s}=n,c=a[r]?.p75;if(!c)return null;let u=t[r],h=u.thresholds[s],m=(0,w.getRatingForThresholds)(h,c),g=h.good<h.poor,x={good:(0,w.formatMetric)(h.good,u).full,poor:(0,w.formatMetric)(h.poor,u).full},v={[l.Rating.Poor]:g?`Above ${x.poor}`:`Below ${x.poor}`,[l.Rating.Improvable]:g?`Above ${x.good}`:`Below ${x.good}`,[l.Rating.Good]:g?`Below ${x.good}`:`Above ${x.good}`};return(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(p.Text,{weight:600,children:(0,w.getLabelForRating)(m)}),(0,o.jsxs)(f.Stack,{align:"center",direction:"row",gap:2,children:[(0,o.jsx)(i1,{rating:m}),(0,o.jsx)(p.Text,{color:"gray-900",size:14,children:v[m]})]})]})}function op(e){return(0,o.jsx)(h.Suspense,{fallback:(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(d.Skeleton,{height:20,width:50}),(0,o.jsx)(d.Skeleton,{height:20,width:80})]}),children:(0,o.jsx)(of,{...e})})}function oh(e){let{metricDefinitions:t}=e,{state:n}=(0,T.useSpeedInsightsUrlState)(),{metric:i}=(0,R.useApiParams)(),{data:r,isLoading:s}=(0,rj.useTimeseriesWithQueryParams)(),{isEnabled:c,microfrontendsDataInDefaultApp:u}=(0,rn.useSpeedInsightsStatus)(),{overview:f}=r||{},{device:h}=n,m=f?.[i],g=t[i],x=g.thresholds[h],v=m?.p75||0,y=(0,w.getRatingForThresholds)(x,v),j=(r?.timeseries??[]).some(e=>i in e);if(s)return(0,o.jsx)(d.Skeleton,{animated:s,height:"20px",width:"70%"});if(u)return null;if(!m||!j||!(0,T.canMetricBeFiltered)(i,n)){var b;let e,{color:t,label:i}=(b=n,e="gray-900",c?(0,w.isDisplayingRecentData)(b)?{color:"amber-900",label:(0,o.jsxs)(o.Fragment,{children:["No data available. Make sure you are using the latest @vercel/speed-insights package.",(0,o.jsx)(a.Link,{external:!0,href:"/docs/speed-insights/quickstart#add-@vercel/speed-insights-to-your-project",variant:"highlight",children:"Learn more"})]})}:{color:e,label:"No data available for the selected filters."}:{color:e,label:"No data collected yet."});return(0,o.jsx)(p.Text,{color:t,children:i})}return(0,o.jsxs)(p.Text,{color:"gray-900",children:[y===l.Rating.Good?"More":"Less",g.type===l.MetricType.RES?" than 75% of visits had a great experience.":` than 75% of visits scored a great ${g.type}.`]})}function om(e){return(0,o.jsx)(h.Suspense,{fallback:(0,o.jsx)(d.Skeleton,{animated:!0,height:"20px",width:"70%"}),children:(0,o.jsx)(oh,{...e})})}function og(e){let{metricDefinitions:t}=e,{metric:n}=(0,R.useApiParams)(),i=t[n],{data:r}=(0,rj.useTimeseriesWithQueryParams)(),{state:{device:s}}=(0,T.useSpeedInsightsUrlState)(),c=i.type===l.MetricType.RES?function(e,t,n){if(!t||!e)return e;let i=new URL(e,"http://acme.com");for(let e of["FCP","LCP","CLS","INP"])t[e]&&i.searchParams.append(e,t[e].p75.toString());return i.searchParams.append("device",n?.toString()??"desktop"),i.toString().replace(i.origin,"")}(i.learnMoreLink,r?.overview,s):i.learnMoreLink;return(0,o.jsxs)(a.Link,{external:!0,href:c,variant:"highlight",children:["Learn more about ",i.type]})}function ox(e){return(0,o.jsx)(h.Suspense,{fallback:(0,o.jsxs)(a.Link,{external:!0,href:e.metricDefinitions[l.MetricType.RES].learnMoreLink,variant:"highlight",children:["Learn more about ",e.metricDefinitions[l.MetricType.RES].type]}),children:(0,o.jsx)(og,{...e})})}function ov(e){let{metricDefinitions:t}=e,{metric:n}=(0,R.useApiParams)(),i=t[n];return(0,o.jsx)(p.Text,{size:24,children:i.name})}function oy(e){return(0,o.jsx)(h.Suspense,{fallback:(0,o.jsx)(p.Text,{size:24,children:e.metricDefinitions[l.MetricType.RES].name}),children:(0,o.jsx)(ov,{...e})})}function oj(e){let{isLoading:t}=(0,rj.useTimeseriesWithQueryParams)();return(0,o.jsx)(f.Stack,{className:(0,u.clsx)(!t&&"no-skeleton-animations"),direction:"column",gap:1,...e})}function ob(e){return(0,o.jsx)(h.Suspense,{fallback:(0,o.jsx)(f.Stack,{gap:1,...e}),children:(0,o.jsx)(oj,{...e})})}function oS(e){let{metricDefinitions:t,className:n}=e;return(0,o.jsxs)(f.Stack,{className:n,gap:2,padding:3,children:[(0,o.jsx)(ol,{}),(0,o.jsx)(oy,{metricDefinitions:t}),(0,o.jsx)(od,{metricDefinitions:t}),(0,o.jsxs)("div",{children:[(0,o.jsxs)("div",{className:"space-y-4",children:[(0,o.jsx)(ob,{children:(0,o.jsx)(op,{metricDefinitions:t})}),(0,o.jsx)(om,{metricDefinitions:t})]}),(0,o.jsx)("hr",{className:"my-4 mr-6 border-0 border-b border-gray-100"}),(0,o.jsxs)("div",{className:"space-y-2",children:[(0,o.jsx)(oc,{metricDefinitions:t}),(0,o.jsx)(ox,{metricDefinitions:t})]})]})]})}function ow(e){let{height:t,width:n,metricDefinitions:i}=e,r=(0,s.useRouter)(),{set:a,state:c}=(0,T.useSpeedInsightsUrlState)(),{data:u}=(0,rj.useTimeseriesWithQueryParams)(),d=(0,s.useParams)(),{metric:f}=(0,R.useApiParams)(),{activePercentiles:p}=(0,h.useContext)(S.SpeedInsightsContext),{data:y}=(0,x.useProject)(d?.project),{data:j}=(0,v.default)({limit:function(e){let{period:t,...n}=e,{from:i,to:r}=n.from&&n.to?{from:n.from,to:n.to}:(0,g.getRangeFromPeriod)(t);return(0,m.getGranularity)(i,r)===l.Granularity.Hour?25:100}(c),until:c.to?.getTime()??null,target:"production",projectId:y?.id||""}),b=(0,h.useMemo)(()=>j?.deployments&&"production"===c.environment?j.deployments:[],[j,c.environment]),w=(0,h.useMemo)(()=>T.speedInsightsFilterKeys.some(e=>c[e]),[c]),{timeseries:N}=u||{},{device:M,period:k,from:E,to:C}=c,D=i[f];return(0,o.jsx)(or,{activeDevice:M,activePercentiles:p,data:N??[],dateRange:E&&C?{from:E,to:C}:(0,g.getRangeFromPeriod)(k),deployments:b,hasFilters:w,height:t||400,metric:D,onClickFindDeployments:function(e){let t={start:e.from,end:e.to},n=d?.teamSlug,i=d?.project;n&&i&&r.push(`/${String(n)}/${String(i)}/deployments?range=${encodeURIComponent(JSON.stringify(t))}&environment=production`)},onSelectionChange:e=>{a({from:e[0],to:e[1]})},width:n||573})}function oN(e){let t={from:new Date,to:new Date};return(0,o.jsx)(h.Suspense,{fallback:(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(or,{activeDevice:l.DeviceType.Desktop,activePercentiles:[75],className:"block md:hidden",data:[],dateRange:t,deployments:void 0,hasFilters:!1,height:300,metric:e.metricDefinitions[l.MetricType.RES],width:560}),(0,o.jsx)(or,{activeDevice:l.DeviceType.Desktop,activePercentiles:[75],className:"hidden md:block",data:[],dateRange:t,deployments:void 0,hasFilters:!1,height:400,metric:e.metricDefinitions[l.MetricType.RES],width:600})]}),children:(0,o.jsx)(ow,{...e})})}function oM(){let{metric:e}=(0,R.useApiParams)(),{data:t,isLoading:n}=(0,rj.useTimeseriesWithQueryParams)(),{timeseries:i}=t||{},r=(0,h.useMemo)(()=>{if(!n&&t)return new Date},[n,t]);return(0,o.jsx)(rP,{className:"mt-4",dataPoints:i?.reduce((t,n)=>t+(n[e]?.datapoints??0),0)??0,isLoading:n,lastUpdated:r})}function ok(){return(0,o.jsx)(h.Suspense,{fallback:(0,o.jsx)(rP,{className:"mt-4",dataPoints:0,isLoading:!0}),children:(0,o.jsx)(oM,{})})}function oE(e){let{children:t}=e,{hasData:n}=(0,rn.useSpeedInsightsStatus)(),{isLoading:i}=(0,rj.useTimeseriesWithQueryParams)();return(0,o.jsx)("div",{className:(0,u.clsx)("relative -mx-6 flex h-[300px] md:mx-0 md:h-[400px]",!n&&!i&&"opacity-75 grayscale"),children:t})}function oT(e){return(0,o.jsx)(h.Suspense,{fallback:(0,o.jsx)("div",{className:"relative -mx-6 flex h-[300px] opacity-75 grayscale md:mx-0 md:h-[400px]",...e}),children:(0,o.jsx)(oE,{...e})})}function oC(e){let{metricDefinitions:t}=e,{activePercentiles:n,setActivePercentiles:i}=(0,h.useContext)(S.SpeedInsightsContext),r=(0,s.useParams)(),{data:a}=(0,x.useProject)(r?.project),l=a?.microfrontends?.enabled&&!a.microfrontends.isDefaultApp&&!a.microfrontends.routeObservabilityToThisProject;return(0,o.jsxs)("div",{className:"flex-1 rounded bg-background-100 px-3 py-4 shadow-md",children:[(0,o.jsxs)(f.Stack,{direction:{sm:"column",md:"row"},gap:2,children:[(0,o.jsx)(oS,{className:"mb-2 flex-[4] md:mb-0",metricDefinitions:t}),(0,o.jsxs)("div",{className:"relative flex-[7] px-2",children:[(0,o.jsxs)("div",{className:"flex flex-col-reverse justify-end gap-4 md:flex-row",children:[(0,o.jsx)("div",{className:"flex justify-end",children:[75,90,95,99].map(e=>{let t=n.includes(e);return(0,o.jsxs)("button",{className:(0,u.clsx)("rounded-sm","mx-0 my-1 cursor-pointer border-none bg-transparent text-sm",t?"text-blue-900":"text-gray-700 hover:text-gray-900"),onClick:()=>{i(t?n.filter(t=>t!==e):[...n,e].sort())},children:[(0,o.jsx)("span",{className:(0,u.clsx)("inline-block size-2 rounded-full ",t?"bg-blue-800":"border")})," ","P",e]},e)})}),(0,o.jsx)(rR,{})]}),(0,o.jsx)(oT,{children:(0,o.jsxs)(y.ErrorBoundary,{fallback:(0,o.jsx)("div",{className:"my-2 flex size-full items-center justify-center rounded-md bg-red-100 text-red-900",children:(0,o.jsx)("span",{children:"Error loading graph. Please reload."})}),children:[(0,o.jsx)(c.ParentSize,{children:e=>{let{width:n,height:i}=e;return(0,o.jsx)(oN,{height:i,metricDefinitions:t,width:n})}}),(0,o.jsx)("div",{className:"absolute w-full px-1 md:px-0",children:(0,o.jsx)(j.MobileScrollWrapper,{className:"my-2 w-full",contentClassName:"pb-3 pr-3 px-2 md:px-0 md:pr-px",children:(0,o.jsx)(h.Suspense,{children:(0,o.jsx)(b.SpeedInsightsFilters,{})})})})]})})]})]}),l?null:(0,o.jsxs)("div",{className:"-mx-3",children:[(0,o.jsx)(rw,{metricDefinitions:t}),(0,o.jsx)(rx,{metricDefinitions:t})]}),(0,o.jsx)(ok,{})]})}e.s(["MetricView",()=>oC],5835580)},8638855,e=>{"use strict";var t=e.i(6468255),n=e.i(6696646),i=e.i(5838627),r=e.i(8522580),o=e.i(57106),a=e.i(7808943),l=e.i(2327481),s=e.i(1138941),c=e.i(3969752),u=e.i(5326961);let d={migration:{title:"Migrate to our new package",description:(0,t.jsxs)("p",{children:["Get the most out of Speed Insights by upgrading to our new package."," ",(0,t.jsx)("br",{}),(0,t.jsx)(o.Link,{external:!0,href:"/docs/speed-insights/migrating-from-legacy",variant:"highlight",children:"Learn more about the migration from legacy Speed Insights."})," "]}),dissmisable:!0},new:{title:"Get Started",description:"To start collecting performance metrics, follow these steps.",dissmisable:!1}},f=[{id:"nextjs",name:"Next.js",addStep:{snippet:'import { SpeedInsights } from "@vercel/speed-insights/next"',title:"Add the Next.js component",description:(0,t.jsxs)(t.Fragment,{children:["Import and use the ",(0,t.jsx)(a.default,{children:"<SpeedInsights/>"})," ","Next.js component into your app's layout or your main file."]})}},{id:"sveltekit",name:"SvelteKit",addStep:{snippet:`import { injectSpeedInsights } from '@vercel/speed-insights/sveltekit';

injectSpeedInsights();`,title:"Use Sveltekit function",description:(0,t.jsxs)(t.Fragment,{children:["Import and use the ",(0,t.jsx)(a.default,{children:"injectSpeedInsights"})," ","sveltekit function in your layout file."]})}},{id:"remix",name:"Remix",addStep:{snippet:'import { SpeedInsights } from "@vercel/speed-insights/remix"',title:"Add the Remix component",description:(0,t.jsxs)(t.Fragment,{children:["Import and use the ",(0,t.jsx)(a.default,{children:"<SpeedInsights/>"})," Remix component into your root file."]})}},{id:"astro",name:"Astro",addStep:{snippet:'import  SpeedInsights  from "@vercel/speed-insights/astro"',title:"Add the Astro component",description:(0,t.jsxs)(t.Fragment,{children:["Import and use the ",(0,t.jsx)(a.default,{children:"<SpeedInsights/>"})," Astro component into one of your Astro layout."]})}},{id:"nuxtjs",name:"Nuxt",addStep:{snippet:'import { SpeedInsights } from "@vercel/speed-insights/nuxt"',title:"Add the Nuxt component",description:(0,t.jsxs)(t.Fragment,{children:["Import and use the ",(0,t.jsx)(a.default,{children:"<SpeedInsights/>"})," Nuxt component into your default layout."]})}},{id:"vue",name:"Vue.js",addStep:{snippet:'import { SpeedInsights } from "@vercel/speed-insights/vue"',title:"Add the Vue component",description:(0,t.jsxs)(t.Fragment,{children:["Import and use the ",(0,t.jsx)(a.default,{children:"<SpeedInsights/>"})," Vue component into your main app template."]})}},{id:"create-react-app",name:"React",addStep:{snippet:'import { SpeedInsights } from "@vercel/speed-insights/react"',title:"Add the React component",description:(0,t.jsxs)(t.Fragment,{children:["Import and use the ",(0,t.jsx)(a.default,{children:"<SpeedInsights/>"})," React component into your main file."]})}},{id:"other",name:"Other",addStep:{snippet:`import { injectSpeedInsights } from '@vercel/speed-insights';

injectSpeedInsights();`,title:"Use injectSpeedInsights()",description:(0,t.jsxs)(t.Fragment,{children:["Import and call the ",(0,t.jsx)(a.default,{children:"injectSpeedInsights()"})," ","function once, on the client side."]})}}];function p(){let{isEnabled:e,isLoading:p,hasData:h,receivedDataFromPackage:m,isLegacyEnabled:g,legacySampleRate:x,microfrontendsDataInDefaultApp:v,dsn:y}=(0,u.useSpeedInsightsStatus)(),j=(0,s.useProjectIdOrName)(),b=(0,s.useIsExternal)(j),S=e&&!p&&!h&&!m,w=e&&!p&&g&&!m,N=(0,n.useMemo)(()=>f.map(e=>{let{id:n,name:l,addStep:s}=e;return{id:n,name:l,icon:(0,t.jsx)("div",{}),steps:function(e,n){let{snippet:l,title:s,description:u}=e,{isExternal:d,dsn:f,legacySampleRate:p}=n,h=void 0!==p&&100!==p,m=!l.includes("injectSpeedInsights"),g=m?`<SpeedInsights dsn="${f||""}" />`:`injectSpeedInsights({ dsn: "${f||""}" })`,x=(0,t.jsxs)(r.Note,{className:"mt-4",type:"warning",children:["To keep your sample rate, ",m?"add ":"include the ",(0,t.jsx)(a.default,{children:m?`sampleRate={${(p??0)/100}}`:`sampleRate: ${(p??0)/100}`}),m?" as a prop to the component.":" option when calling the function."]});return[{title:"Install our package",content:(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)("span",{children:"Start by installing @vercel/speed-insights in your existing project."}),(0,t.jsx)(c.DependencySnippet,{dependency:"@vercel/speed-insights"})]})},{title:(0,t.jsx)("span",{className:"whitespace-nowrap",children:s}),content:(0,t.jsxs)("span",{children:[u,(0,t.jsx)(i.CodeBlock,{className:"grid",hideLineNumbers:!0,language:"javascript",textToCopy:l,children:l}),d?(0,t.jsxs)(t.Fragment,{children:[(0,t.jsxs)("span",{children:["Add the ",(0,t.jsx)(a.default,{children:"dsn"})," property when self-hosting."]}),(0,t.jsx)(i.CodeBlock,{className:"grid",hideLineNumbers:!0,language:m?"jsx":"javascript",textToCopy:g,children:g})]}):null,(0,t.jsxs)("span",{children:["For full examples and further reference, please refer to our"," ",(0,t.jsx)(o.Link,{external:!0,href:"/docs/speed-insights/quickstart#add-the-speedinsights-component-to-your-app",variant:"highlight",children:"documentation"})]}),h?x:null]})},{title:"Deploy & Visit your Site",content:(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)("p",{children:"Deploy your changes and visit the deployment to collect your first data points."}),(0,t.jsx)("p",{className:"text-gray-900",children:"If you don't see data after 30 seconds, please check for content blockers and try to navigate between pages on your site."})]})}]}(s,{legacySampleRate:x,isExternal:b,dsn:y})}}),[x,b,y]),M=(0,n.useMemo)(()=>d[w?"migration":"new"],[w]);return(0,t.jsx)(l.Onboarding,{...M,frameworks:N,visible:S||w})}e.s(["Onboarding",()=>p])}]);

//# sourceMappingURL=2103387903807a10.js.map
//# debugId=251b2b70-bf60-553f-a76f-061611582d61
