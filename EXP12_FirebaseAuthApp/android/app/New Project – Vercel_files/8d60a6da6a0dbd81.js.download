
!function(){try{var e="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:{},n=(new e.Error).stack;n&&(e._sentryDebugIds=e._sentryDebugIds||{},e._sentryDebugIds[n]="9e27ffc9-92b0-5086-8c4c-333ccadfd0ee")}catch(e){}}();
(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,5285422,e=>{"use strict";var t=e.i(6468255),r=e.i(6696646),n=e.i(9100551);let i=(0,r.createContext)({hoveredRow:void 0,setHoveredRow:()=>{},hoveredTimestamp:void 0,setHoveredTimestamp:()=>{}});function a(){return(0,r.useContext)(i)}function l(e){let{children:a}=e,[l,o]=(0,r.useState)(void 0),[s,u]=(0,r.useState)(void 0),c=(0,n.usePathname)(),d=(0,r.useMemo)(()=>({hoveredRow:l,setHoveredRow:o,hoveredTimestamp:s,setHoveredTimestamp:u}),[l,s]);return(0,r.useEffect)(()=>{o(void 0),u(void 0)},[c]),(0,t.jsx)(i.Provider,{value:d,children:a})}i.displayName="SonarContext",e.s(["SonarContext",0,i,"SonarContextProvider",()=>l,"useSonarContext",()=>a])},5182595,639493,e=>{"use strict";var t=e.i(6468255),r=e.i(3868422),n=e.i(516467);function i(e){return+(0,n.toDate)(e)}var a=e.i(268049),l=e.i(5421668),o=e.i(2590507),s=e.i(7712782),u=e.i(931197),c=e.i(5285422),d=e.i(5297450),f=e.i(6062041);e.i(7286972);var m=e.i(5693388),h=e.i(6696646),y=e.i(4337458),v=e.i(8151845),x=e.i(7797615),g=e.i(2749380),p=e.i(7917902),b=e.i(2504781),w=e.i(3973638),k=e.i(6143247),j=e.i(7573530),S=e.i(8777790),O=e.i(7363883),C=e.i(1215441),N=e.i(5179835),D=e.i(6969078),A=e.i(3982811),M=e.i(9519090),T=e.i(9909268),E=e.i(1882409),R=["x1","y1","x2","y2","key"],P=["offset"];function z(e){return(z="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function L(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function I(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?L(Object(r),!0).forEach(function(t){var n,i,a;n=e,i=t,a=r[t],(i=function(e){var t=function(e,t){if("object"!=z(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=z(n))return n;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==z(t)?t:t+""}(i))in n?Object.defineProperty(n,i,{value:a,enumerable:!0,configurable:!0,writable:!0}):n[i]=a}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):L(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}function K(){return(K=Object.assign.bind()).apply(this,arguments)}function W(e,t){if(null==e)return{};var r,n,i=function(e,t){if(null==e)return{};var r={};for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){if(t.indexOf(n)>=0)continue;r[n]=e[n]}return r}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(n=0;n<a.length;n++)r=a[n],!(t.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(e,r)&&(i[r]=e[r])}return i}var F=function(e){var t=e.fill;if(!t||"none"===t)return null;var r=e.fillOpacity,n=e.x,i=e.y,a=e.width,l=e.height,o=e.ry;return h.default.createElement("rect",{x:n,y:i,ry:o,width:a,height:l,stroke:"none",fill:t,fillOpacity:r,className:"recharts-cartesian-grid-bg"})};function H(e,t){var r;if(h.default.isValidElement(e))r=h.default.cloneElement(e,t);else if((0,O.default)(e))r=e(t);else{var n=t.x1,i=t.y1,a=t.x2,l=t.y2,o=t.key,s=W(t,R),u=(0,D.filterProps)(s,!1),c=(u.offset,W(u,P));r=h.default.createElement("line",K({},c,{x1:n,y1:i,x2:a,y2:l,fill:"none",key:o}))}return r}function V(e){var t=e.x,r=e.width,n=e.horizontal,i=void 0===n||n,a=e.horizontalPoints;if(!i||!a||!a.length)return null;var l=a.map(function(n,a){return H(i,I(I({},e),{},{x1:t,y1:n,x2:t+r,y2:n,key:"line-".concat(a),index:a}))});return h.default.createElement("g",{className:"recharts-cartesian-grid-horizontal"},l)}function G(e){var t=e.y,r=e.height,n=e.vertical,i=void 0===n||n,a=e.verticalPoints;if(!i||!a||!a.length)return null;var l=a.map(function(n,a){return H(i,I(I({},e),{},{x1:n,y1:t,x2:n,y2:t+r,key:"line-".concat(a),index:a}))});return h.default.createElement("g",{className:"recharts-cartesian-grid-vertical"},l)}function B(e){var t=e.horizontalFill,r=e.fillOpacity,n=e.x,i=e.y,a=e.width,l=e.height,o=e.horizontalPoints,s=e.horizontal;if(!(void 0===s||s)||!t||!t.length)return null;var u=o.map(function(e){return Math.round(e+i-i)}).sort(function(e,t){return e-t});i!==u[0]&&u.unshift(0);var c=u.map(function(e,o){var s=u[o+1]?u[o+1]-e:i+l-e;if(s<=0)return null;var c=o%t.length;return h.default.createElement("rect",{key:"react-".concat(o),y:e,x:n,height:s,width:a,stroke:"none",fill:t[c],fillOpacity:r,className:"recharts-cartesian-grid-bg"})});return h.default.createElement("g",{className:"recharts-cartesian-gridstripes-horizontal"},c)}function $(e){var t=e.vertical,r=e.verticalFill,n=e.fillOpacity,i=e.x,a=e.y,l=e.width,o=e.height,s=e.verticalPoints;if(!(void 0===t||t)||!r||!r.length)return null;var u=s.map(function(e){return Math.round(e+i-i)}).sort(function(e,t){return e-t});i!==u[0]&&u.unshift(0);var c=u.map(function(e,t){var s=u[t+1]?u[t+1]-e:i+l-e;if(s<=0)return null;var c=t%r.length;return h.default.createElement("rect",{key:"react-".concat(t),x:e,y:a,width:s,height:o,stroke:"none",fill:r[c],fillOpacity:n,className:"recharts-cartesian-grid-bg"})});return h.default.createElement("g",{className:"recharts-cartesian-gridstripes-vertical"},c)}var Y=function(e,t){var r=e.xAxis,n=e.width,i=e.height,a=e.offset;return(0,A.getCoordinatesOfGrid)((0,M.getTicks)(I(I(I({},T.CartesianAxis.defaultProps),r),{},{ticks:(0,A.getTicksOfAxis)(r,!0),viewBox:{x:0,y:0,width:n,height:i}})),a.left,a.left+a.width,t)},q=function(e,t){var r=e.yAxis,n=e.width,i=e.height,a=e.offset;return(0,A.getCoordinatesOfGrid)((0,M.getTicks)(I(I(I({},T.CartesianAxis.defaultProps),r),{},{ticks:(0,A.getTicksOfAxis)(r,!0),viewBox:{x:0,y:0,width:n,height:i}})),a.top,a.top+a.height,t)},Q=[],X=[];function U(e){var t,r,n,i,a,l,o=(0,E.useChartWidth)(),s=(0,E.useChartHeight)(),u=(0,E.useOffset)(),c=I(I({},e),{},{stroke:null!=(t=e.stroke)?t:"#ccc",fill:null!=(r=e.fill)?r:"none",horizontal:null==(n=e.horizontal)||n,horizontalFill:null!=(i=e.horizontalFill)?i:X,vertical:null==(a=e.vertical)||a,verticalFill:null!=(l=e.verticalFill)?l:Q,x:(0,N.isNumber)(e.x)?e.x:u.left,y:(0,N.isNumber)(e.y)?e.y:u.top,width:(0,N.isNumber)(e.width)?e.width:u.width,height:(0,N.isNumber)(e.height)?e.height:u.height}),d=c.x,f=c.y,m=c.width,y=c.height,v=c.syncWithTicks,x=c.horizontalValues,g=c.verticalValues,p=(0,E.useArbitraryXAxis)(),b=(0,E.useYAxisWithFiniteDomainOrRandom)();if(!(0,N.isNumber)(m)||m<=0||!(0,N.isNumber)(y)||y<=0||!(0,N.isNumber)(d)||d!==+d||!(0,N.isNumber)(f)||f!==+f)return null;var w=c.verticalCoordinatesGenerator||Y,k=c.horizontalCoordinatesGenerator||q,j=c.horizontalPoints,S=c.verticalPoints;if((!j||!j.length)&&(0,O.default)(k)){var D=x&&x.length,A=k({yAxis:b?I(I({},b),{},{ticks:D?x:b.ticks}):void 0,width:o,height:s,offset:u},!!D||v);(0,C.warn)(Array.isArray(A),"horizontalCoordinatesGenerator should return Array but instead it returned [".concat(z(A),"]")),Array.isArray(A)&&(j=A)}if((!S||!S.length)&&(0,O.default)(w)){var M=g&&g.length,T=w({xAxis:p?I(I({},p),{},{ticks:M?g:p.ticks}):void 0,width:o,height:s,offset:u},!!M||v);(0,C.warn)(Array.isArray(T),"verticalCoordinatesGenerator should return Array but instead it returned [".concat(z(T),"]")),Array.isArray(T)&&(S=T)}return h.default.createElement("g",{className:"recharts-cartesian-grid"},h.default.createElement(F,{fill:c.fill,fillOpacity:c.fillOpacity,x:c.x,y:c.y,width:c.width,height:c.height,ry:c.ry}),h.default.createElement(V,K({},c,{offset:u,horizontalPoints:j,xAxis:p,yAxis:b})),h.default.createElement(G,K({},c,{offset:u,verticalPoints:S,xAxis:p,yAxis:b})),h.default.createElement(B,K({},c,{horizontalPoints:j})),h.default.createElement($,K({},c,{verticalPoints:S})))}U.displayName="CartesianGrid";var Z=e.i(4358754),J=e.i(9713924),_=e.i(8852884),ee=e.i(9840192),et=e.i(4713031),er=e.i(9639095),en=e.i(5092691),ei=e.i(1764537),ea=e.i(9576862),el=e.i(8690335);function eo(e,t){if(!e?.length)return()=>null;let r=e.map(e=>e[t]).filter(e=>"number"==typeof e&&!Number.isNaN(e));return r.length?e=>{switch(e){case"sum":return r.reduce((e,t)=>e+t,0);case"avg":return r.reduce((e,t)=>e+t,0)/r.length;case"max":return Math.max(...r);case"min":return Math.min(...r);case"first":return r[0];case"lastComplete":return r[r.length-2];case"last":return r[r.length-1]}}:()=>null}e.s(["createRollupCalculator",()=>eo],639493);var es=e.i(3351543),eu=e.i(5406549),ec=e.i(4597921);function ed(e){let{value:r,color:n,label:i,highlight:a}=e;return(0,t.jsxs)("div",{className:(0,k.cn)("flex flex-1 items-center gap-x-2 rounded-sm px-2 py-0.5",!1===a?"opacity-50":null),children:[(0,t.jsx)("div",{className:"size-1.5 rounded-full",style:{backgroundColor:n}}),(0,t.jsxs)("div",{className:"flex flex-1 justify-between gap-x-2",children:[(0,t.jsx)("span",{children:i})," ",(0,t.jsx)("span",{className:"font-medium tabular-nums",children:r})]})]})}function ef(e){let r=e.payload?.[0]?.payload?.name,n=new Date(r||"Invalid date"),i=(0,h.useMemo)(()=>{let t=(0,es.filterPayload)(e.payload);return(t.length>=6?t.toSorted((e,t)=>{if("Others"===e.dataKey)return 1;if("Others"===t.dataKey)return -1;let r="number"==typeof e.value?e.value:-1/0,n="number"==typeof t.value?t.value:-1/0;return n!==r?n-r:String(e.name).localeCompare(String(t.name))}):t.toSorted((e,t)=>"Others"===e.dataKey?1:"Others"===t.dataKey?-1:0)).slice(0,15)},[e.payload]),a=e.getColor||f.nameToColor;return i.length?(0,t.jsxs)("div",{className:"pointer-events-none flex max-h-80 max-w-lg min-w-44 flex-col rounded bg-background-100 text-xs shadow-tooltip mt-2",ref:e.ref,children:[(0,t.jsx)("div",{className:"flex-1 overflow-y-hidden p-1.5 pb-0",children:(0,t.jsx)("div",{className:"flex flex-col gap-0.5",children:e.contentOverride??i.map(r=>{let n=e.secondaryYAxisKeys?.includes(r.dataKey)?e.formatSecondaryValue:e.formatValue;return(0,t.jsx)(ed,{color:a(String(r.dataKey))??(0,f.nameToColor)(String(r.dataKey)),highlight:e.hoverValue?e.hoverValue===r.dataKey:null,label:r.dataKey?.toString()||"Not set",value:n&&"number"==typeof r.value?n(r.value,"tooltip"):`${r.value?.toString()}`},r.dataKey)})})}),(0,t.jsx)("div",{className:"shrink-0 p-1.5 pt-1",children:e.formatName?e.formatName(r):(0,t.jsx)("div",{className:"flex flex-col text-center text-gray-800",children:Number.isNaN(n.getTime())?r:(0,l.formatDateRange)(n,new Date(n.getTime()+e.intervalMs))})})]},`ts-${e.label}`):null}function em(e){let{coordinate:r,label:n,viewBox:i,offset:a,ref:l}=e,s=new Date(n).toLocaleString(void 0,{hour:"numeric",minute:"2-digit",second:"numeric",day:"numeric",month:"2-digit",year:"2-digit"});return(0,t.jsx)(o.Tooltip,{className:"pointer-events-none absolute w-[18ch] bg-transparent bg-none",left:r?.x,ref:l,top:(i.top??0)+(i.height??0)-(a??0)-14,unstyled:!0,children:(0,t.jsx)("span",{className:"absolute flex h-[28px] -translate-x-1/2 items-center justify-center rounded-full border bg-gray-1000 px-2 text-xs font-[400] text-white",children:s})})}function eh(e){let{onZoomIn:n,onAnalyze:i,timestampLeft:a,timestampRight:o,ref:s}=e;return(0,t.jsx)("div",{className:"point items-center rounded bg-background-100 px-0.5 py-1 text-xs shadow-tooltip",ref:s,children:(0,t.jsxs)("div",{className:"flex flex-col gap-1.5 p-2",children:[a&&o?(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)("span",{className:"",children:(0,l.formatDateRange)(new Date(a),new Date(o))}),(0,t.jsx)("span",{className:"text-center text-gray-900",children:(0,r.formatDistance)(new Date(a),new Date(o))})]}):null,n?(0,t.jsx)(b.Button,{className:"!h-6 !text-xs",onClick:n,size:"small",children:"Zoom In"}):null,i?(0,t.jsx)(b.Button,{className:"!h-6 !text-xs",onClick:i,size:"small",children:"Analyze"}):null]})})}function ey(){return null}function ev(e){var r;let n,o,{data:b,title:k,isLoading:O,syncId:C="sonar",disableLegend:N,renderCustomLegend:D,getColor:A=f.nameToColor,lineType:M="linear",formatValue:T=x.formatNumberCompact,formatAxisValue:E,formatXAxisValue:R,formatSecondaryValue:P=T,yAxisDomain:z,scale:L="linear",categories:I,showRollup:K=!1,placeholderKeys:W=[],secondaryYAxisKeys:F,rollupConfig:H,headerHeight:V,hideXAxis:G=!1,hideYAxis:B=!1,hideTooltip:$=!1,hideGrid:Y=!1,allowTooltipEscape:q=!1,builderQuery:Q,agentWorkflow:X="observability-investigation",customChartContent:ed,onZoomIn:ev,disableZoom:ep=!1,maxLines:eb=20,xTickCount:ew=2,yTickCount:ek=3,isRelativeTime:ej=!1,tooltipStyle:eS="value-list",granularity:eO,sonarQueryResults:eC,yAxisWidth:eN,marginLeft:eD}=e;if("log"===L&&!z)throw Error("yAxisDomain is required when using a log scale");let eA=(n=(0,ec.useServerFlag)("enable-observability-agent",!1),o=(0,ec.useServerFlag)("enable-firewall-agent",!1),"observability-investigation"===X?n:"firewall-investigation"===X&&o),eM=(0,h.useRef)(null),eT=(0,h.useRef)(null),[,eE]=(0,v.useSonarQueryState)(),eR=(0,c.useSonarContext)(),eP=(0,y.useSonarQueryScope)(),ez=(0,d.useShowDemoDataContext)(),eL=(0,h.useMemo)(()=>!!(Q&&eP&&eA),[Q,eP,eA]),eI=!ep,eK=eI||eL,[eW,eF]=(0,h.useState)(!1),eH=(0,h.useRef)(!1),[eV,eG]=(0,h.useState)([]),[eB,e$]=(0,h.useState)(null),[eY,eq]=(0,h.useState)(null),[eQ,eX]=(0,h.useState)(null),[eU,eZ]=(0,h.useState)(null),eJ=(0,h.useCallback)((e,t)=>e$([e,t]),[e$]),{handleMouseDown:e_,isDragging:e0,refAreaLeft:e1,refAreaRight:e2,mouseX:e5}=function(e,t,r){let[n,i]=(0,h.useState)(!1),a=(0,h.useRef)(!1),[l,o]=(0,h.useState)(null),[s,u]=(0,h.useState)(null),[c,d]=(0,h.useState)(null),f=(0,h.useRef)(null),m=(0,h.useRef)(null),y=(0,h.useRef)(null),v=(0,h.useRef)(null),x=(0,h.useCallback)(r=>{if(!e.current)return null;let n=e.current.getBoundingClientRect(),i=n.left+50,a=n.width-70,l=r-i;return{index:Math.max(0,Math.min(Math.floor(Math.max(0,Math.min(1,(l-l/a*15)/a))*(t-1)),t-1)),mouseX:Math.max(50,Math.min(a+50,l+50))}},[e,t]),g=(0,h.useCallback)(e=>{if(!a.current)return;let t=x(e.clientX);null!==t&&(u(t.index),d(t.mouseX),m.current=t.index)},[x]),p=(0,h.useCallback)(()=>{if(a.current){let e=f.current,t=m.current;if(null===e||null===t)a.current=!1,i(!1),o(null),u(null);else{let n={start:Math.min(e,t),end:Math.max(e,t)};r(n.start,n.end),a.current=!1,i(!1),o(null),u(null)}d(null)}y.current&&(window.removeEventListener("mousemove",y.current),y.current=null),v.current&&(window.removeEventListener("mouseup",v.current),v.current=null)},[r]),b=(0,h.useCallback)(e=>{a.current=!0,i(!0),d(null),o(e?.activeTooltipIndex??null),f.current=e?.activeTooltipIndex??null,m.current=null,y.current=g,v.current=p,window.addEventListener("mousemove",y.current),window.addEventListener("mouseup",v.current)},[g,p]);return(0,h.useEffect)(()=>()=>{y.current&&window.removeEventListener("mousemove",y.current),v.current&&window.removeEventListener("mouseup",v.current)},[]),{handleMouseDown:b,isDragging:n,refAreaLeft:l,refAreaRight:s,mouseX:c}}(eM,b.length,eJ),e6=(0,h.useCallback)(e=>{eK&&(e$(null),e_(e))},[e_,eK]),e9=(0,h.useCallback)(()=>{eq(null),eX(null),eH.current=!1,eF(!1),eR.setHoveredRow?.(void 0),eR.setHoveredTimestamp?.(void 0)},[eR]),e3=null!==e1?b[e1]:eB?b[eB[0]]:null,e4=null!==e2?b[e2]:eB?b[eB[1]]:null,e8=R?e=>R(new Date(e)):e=>{let t=new Date(e);return ej?(0,s.ago)(Date.now()-t.getTime()):(0,m.formatWithGranularity)(t,u.Granularity.Hour,!0)},e7=(0,h.useCallback)(function(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];e&&e$(null)},[]);r=()=>e7(!0),(0,h.useEffect)(()=>{function e(e){"Escape"===e.key&&r()}return window.addEventListener("keydown",e),()=>{window.removeEventListener("keydown",e)}},[r]);let te=(0,h.useCallback)(()=>{if(!e3||!e4)return;let e={from:new Date(e3.name),to:new Date(e4.name)};ev?ev(e):eE(e),e7(!0)},[e3,e4,e7,eE,ev]),tt=(0,h.useMemo)(()=>function(e){if("payload"in e&&null===e.payload[e.dataKey])return null;let r=b[e.index-1]?.[e.dataKey],n=b[e.index+1]?.[e.dataKey];return null==r&&null==n?(0,t.jsx)("circle",{cx:e.cx,cy:e.cy,fill:e.fill,fillOpacity:e.strokeWidth,r:e.strokeWidth},e.key):null},[b]),{marks:tr,emptyMessage:tn}=(0,h.useMemo)(()=>{let r=e.emptyState??"No data in this time range";if(!eC)return{marks:e.marks??[],emptyMessage:r};if(0===b.length&&eC.query){let{startTime:e,endTime:n,excludedIntervals:a}=eC.query,o=i(e),s=i(n),u=a?.find(e=>{let{start:t,end:r}=e;return t<=o&&s<=r});u&&(r=(0,t.jsxs)("span",{className:"flex flex-col items-center gap-2",children:[(0,t.jsx)(w.EyeOff,{color:"gray-900"}),(0,t.jsx)("span",{children:"Observability Plus was disabled"}),(0,t.jsxs)("span",{className:"text-xs",children:["from"," ",(0,l.formatDateRange)(new Date(u.start),new Date(u.end),{separator:" to "})]})]}))}return{marks:(e.marks??[]).concat((0,f.excludedIntervalsToMarks)(eC)),emptyMessage:r}},[eC,e.marks,e.emptyState,b]),ti=(0,h.useMemo)(()=>{let e=new Date,t=b.length-1;for(;t>=0&&new Date(b[t].name)>e;)t--;return t>=0?b.slice(0,t+1):[]},[b]),ta=(0,h.useMemo)(()=>{let e=new Set;return ti.forEach(t=>{Object.keys(t).forEach(t=>{e.add(t)})}),Array.from(e)},[ti]),tl=I||(0!==ti.length?ta:W),to=tl.some(e=>e===eR.hoveredRow?.value),ts=(0,h.useMemo)(()=>tl.filter(e=>!I&&"name"!==e||I).map(e=>{let t=A(e)??(0,f.nameToColor)(e),r=eo(ti,e);return{dataKey:e,yAxisId:+!!F?.includes(e),color:t,shouldFade:to&&void 0!==eR.hoveredRow&&eR.hoveredRow.value!==e,sum:r("sum"),avg:r("avg"),firstValue:r("first"),lastValue:r("lastComplete")}}).toSorted((e,t)=>(e.sum??0)-(t.sum??0)).slice(-eb),[tl,I,F,A,ti,to,eR.hoveredRow,eb]),tu=M.startsWith("step"),tc=tu?S.AreaChart:_.LineChart,td=tu?j.Area:J.Line,tf=40;K||D||V||k?(60===V||K||D)&&(tf=60):tf=1;let tm=!O&&ti.length>0,th=(0,h.useMemo)(()=>({start:new Date(eC?.query?.startTime??ti.at(0)?.name??Date.now()),end:new Date(eC?.query?.endTime??ti.at(-1)?.name??Date.now())}),[eC,ti]),{xTicks:ty,intervalMs:tv}=(0,h.useMemo)(()=>{let e=!!ti[0],{start:t,end:r}=th,n=Math.floor(ti.length/(ew-1)),i=(0,a.milliseconds)(eO??(0,g.getGranularityFromDuration)(r.getTime()-t.getTime(),!1)),l=new Date(r.getTime()-i);return{xTicks:e?[...Array.from({length:ew-1},(e,t)=>new Date(ti[t*n].name).toISOString()),l.toISOString()]:[t.toISOString(),l.toISOString()],intervalMs:i}},[ew,ti,eO,th]),tx=(0,h.useCallback)((e,t)=>{let{clientX:r}=t;eZ(r),eH.current||(eH.current=!0,eF(!0));try{let t=i(e.activeLabel||"");eR.setHoveredTimestamp?.(Number.isNaN(t)?void 0:new Date(t));let r=!1;for(let e of tr)if("timestamp"in e&&e.timestamp){let n=i(e.timestamp),a=Math.max(3e5,Math.min(72e5,2*tv));if(Math.abs(n-t)<=a){eq(e),r=!0;break}}else if("startTime"in e&&e.startTime&&e.endTime){let n=i(e.startTime),a=i(e.endTime);if(n<=t&&t<=a){eX(e),r=!0;break}}r||(eq(null),eX(null))}catch{}},[eR,tr,eQ,tv]),tg=(0,h.useCallback)(e=>tm||z?(E??T)(e,"yaxis").replace(/(?: GB-hrs)/,"").replace(" ",""):"",[E,T,tm,z]),{user:tp,team:tb}=(0,p.useAccount)(),tw=(0,eu.useAIInvestigationsStore)(e=>e.addInvestigation),tk=(0,h.useCallback)(()=>{var e,t,r,n;let i,a;!tp||!tb||Q&&e3&&e4&&eP&&(tw({user:{uid:tp.uid,username:tp.username},teamId:tb.id,workflow:X??"observability-investigation",input:(e=Q,t=new Date(e3.name),r=new Date(e4.name),n=eP,i=(0,el.toSonarQuery)(e),a=(0,f.getRoundedDateRange)({startTime:t,endTime:r}),{...i,...a,scope:n})}),e7(!0))},[tp,tb,X,tw,Q,e3,e4,e7,eP]),tj=(0,h.useMemo)(()=>({left:eD??0,right:0,bottom:+!!B,top:1}),[B,eD]),tS=!!(e0&&e4||eB),tO=(0,h.useMemo)(()=>eT.current&&eU?eU<(window.innerWidth||document.documentElement.clientWidth)-(eT.current.getBoundingClientRect().width+20):null,[eU]);return(0,t.jsxs)("div",{"data-share-dom-copy":"1",className:"relative size-full",children:[(0,t.jsx)(er.ResponsiveContainer,{className:"select-none",height:"100%",ref:eM,width:"100%",children:(0,t.jsxs)(tc,{className:"overflow-visible [&>svg]:overflow-visible",data:O&&0===ti.length?[]:ti,margin:tj,onMouseDown:e6,onMouseMove:tx,onMouseLeave:e9,style:{cursor:$||ep?"default":"crosshair",opacity:O?.35:1,transition:"opacity 0.15s ease-in-out"},...tS?{}:{syncId:C},children:[Y?(0,t.jsx)(et.ReferenceLine,{y:0,stroke:"var(--ds-gray-400)",strokeWidth:1,style:{transform:"translateY(0.25px)"}}):(0,t.jsx)(U,{stroke:"var(--ds-gray-100)",strokeWidth:1,syncWithTicks:!0,vertical:!1}),(0,t.jsx)(ea.YAxis,{axisLine:!1,domain:z||(tm?void 0:[0,10]),hide:B,fontSize:12,scale:L,tickCount:ek,tickFormatter:tg,tickLine:!1,width:eN??50}),void 0!==F?(0,t.jsx)(ea.YAxis,{yAxisId:1,domain:[0,e=>1.4*e],hide:!0}):null,(0,t.jsx)(ei.XAxis,{axisLine:{stroke:"var(--ds-gray-400)"},dataKey:"name",height:"dots"===eS?38:28,hide:G,tick:{fill:"var(--ds-gray-700)",fontSize:"dots"===eS?14:12,fontFamily:"var(--font-sans)"},ticks:ty,tickFormatter:e8,tickLine:!1,tickSize:7,tickMargin:"dots"===eS?15:5}),ez||$?null:(0,t.jsx)(en.Tooltip,{animationDuration:0,content:tS?(0,t.jsx)(eh,{onZoomIn:eI?te:void 0,onAnalyze:eL?tk:void 0,ref:eT,timestampLeft:e3?.name,timestampRight:e4?.name}):eW?"value-list"===eS?(0,t.jsx)(ef,{formatValue:T,formatSecondaryValue:P,getColor:A,hoverValue:to?eR.hoveredRow?.value:null,intervalMs:tv,ref:eT,secondaryYAxisKeys:F,contentOverride:eQ?.tooltipContent}):(0,t.jsx)(em,{ref:eT}):(0,t.jsx)(ey,{}),allowEscapeViewBox:tS?void 0:{x:tO||q,y:tO||q},cursor:{stroke:"dots"===eS?"var(--ds-gray-500)":"var(--ds-gray-1000)",strokeDasharray:"dots"===eS?"6,2":void 0,strokeWidth:+(ti.length>0&&!e0&&!eB)},offset:10,position:{y:tf,x:!tS&&e5&&tO?e5+10:void 0},trigger:eB?"click":"hover",wrapperStyle:{visibility:"visible",pointerEvents:"auto",zIndex:100}}),ts.map(e=>{let{dataKey:r,yAxisId:n,color:i,shouldFade:a}=e,l=Math.floor(1e4*Math.random()),o={animationDuration:0,dataKey:r,fill:i,hide:eV.includes(r),stackId:tu?"a":void 0,strokeWidth:tu?1:1.5,style:{transition:"opacity 0.05s ease-out, background-color 0.05s ease-out",opacity:a?.2:1,backgroundColor:i,fillOpacity:tu&&!a?.15:0},type:M,yAxisId:n};return(0,t.jsxs)(h.Fragment,{children:[ej?(0,t.jsxs)("defs",{children:[eg(`${l}-line`,[o.fill??"","transparent"],ti.length),eg(`${l}-dash`,["transparent",o.fill??""],ti.length)]}):null,(0,t.jsx)(td,{activeDot:{r:5,strokeWidth:2*("dots"===eS&&!tS),fill:"dots"!==eS||tS?"transparent":i,onMouseEnter:()=>{eR.setHoveredRow?.({value:r})},onMouseLeave:()=>{eR.setHoveredRow?.(void 0)}},dot:tt,stroke:!tu&&ej?`url(#${l}-line)`:i,...o}),!tu&&ej?(0,t.jsx)(td,{activeDot:!1,dot:!1,stroke:`url(#${l}-dash)`,strokeDasharray:"2 2",...o},`${r}-dash`):null]},r)}),tu&&ej&&ti.length>=2?(0,t.jsx)(ee.ReferenceArea,{fill:"var(--ds-background-100)",strokeOpacity:.5,x1:ti.at(-2)?.name,x2:ti.at(-1)?.name}):null,N&&!k?null:(0,t.jsx)(Z.Legend,{align:K?"left":"right",content:D??(K?(0,t.jsx)(es.LegendRollupContent,{disableLegend:!0,disabledMetrics:eV,formatValue:T,isLoading:!!O,onClickTag:(e,t)=>{t?eG(Object.keys(b[0]||{}).filter(t=>t!==e)):eG(t=>eV.includes(e)?t.filter(t=>t!==e):[...t,e])},placeholderKeys:W,rollupConfig:H,rollupData:ts,setHoveredKey:e=>{e?eR.setHoveredRow?.({value:e}):eR.setHoveredRow?.(void 0)},title:k}):(0,t.jsx)(es.LegendContent,{disabledMetrics:eV,hide:N,onClickTag:(e,t)=>{t?eG(Object.keys(b[0]||{}).filter(t=>t!==e)):eG(t=>eV.includes(e)?t.filter(t=>t!==e):[...t,e])},setHoveredKey:e=>{e?eR.setHoveredRow?.({value:e}):eR.setHoveredRow?.(void 0)},title:k})),fontSize:12,height:tf,iconSize:6,iconType:"circle",verticalAlign:"top"}),e3&&e4&&eK?(0,t.jsx)(ee.ReferenceArea,{fill:"var(--ds-gray-alpha-500)",strokeOpacity:.3,x1:e3.name,x2:e4.name}):null,tr.length>0&&(0,t.jsx)("g",{children:tr.filter(e=>"timestamp"===e.type).map(e=>{let r=e.color||"var(--ds-red-600)";if(e.timestamp){let n=new Date(Math.round(i(e.timestamp)/tv)*tv).toISOString();return(0,t.jsx)("g",{children:(0,t.jsx)(et.ReferenceLine,{x:n,stroke:r,strokeWidth:1,strokeDasharray:"3,3",strokeOpacity:.6,label:eY?.id===e.id?ex({value:e.label??"Anomaly",fill:r}):void 0,style:{zIndex:1e3}})},e.id)}return null})},"chart-marks"),tr.filter(e=>"area"===e.type).map(e=>{let r=e.color||"var(--ds-red-700)";if(e.startTime&&e.endTime){var n;let a=Math.max(i(e.startTime),th.start.getTime()),l=Math.min(i(e.endTime),th.end.getTime()),o=new Date(Math.round(a/tv)*tv).toISOString(),s=new Date(Math.round(l/tv)*tv).toISOString();return(0,t.jsx)(ee.ReferenceArea,{x1:o,x2:s,fill:r,fillOpacity:.03,radius:5,stroke:r,strokeOpacity:.8,strokeWidth:1,strokeDasharray:"3,3",label:((n=e).children?e=>{let r,{viewBox:i}=e;return i&&"x"in i&&(r=`translate(${(i.x??0)+(i.width??0)/2}, ${(i.y??0)+(i.height??0)/2})`),(0,t.jsx)("g",{transform:r,children:n.children})}:null)??(eQ?.id===e.id?ex({value:e.label||"Anomaly Period",fill:r}):void 0),style:{zIndex:1e3,cursor:"pointer"}},e.id)}return null}),ed||null]})}),!tm&&!O&&(0,t.jsx)(es.EmptyStateWrapper,{topOffset:tf,children:tn}),(0,t.jsx)("div",{className:"duration-[time:50ms] absolute inset-x-0 bottom-0 z-10 flex translate-y-5 justify-center opacity-0 !transition-all focus-within:opacity-100 group-hover/chart:opacity-100 focus:opacity-100",children:Q?(0,t.jsx)(es.DelayedHoverQueryBuilderButton,{builderQuery:Q}):null})]})}function ex(e){return{position:"top",fontSize:10,fontWeight:500,...e}}function eg(e,r,n){let[i,a]=r;if(n<2)return(0,t.jsxs)("linearGradient",{id:e,x1:"0",y1:"0",x2:"100%",y2:"0",children:[(0,t.jsx)("stop",{offset:"0%",stopColor:i}),(0,t.jsx)("stop",{offset:"100%",stopColor:a})]});let l=`${(n-2)*100/(n-1)}%`;return(0,t.jsxs)("linearGradient",{id:e,x1:"0",y1:"0",x2:"100%",y2:"0",children:[(0,t.jsx)("stop",{offset:"0%",stopColor:i}),(0,t.jsx)("stop",{offset:l,stopColor:i}),(0,t.jsx)("stop",{offset:l,stopColor:a}),(0,t.jsx)("stop",{offset:"100%",stopColor:a})]})}e.s(["LineChart",()=>ev],5182595)}]);

//# sourceMappingURL=6b105c58712d62b4.js.map
//# debugId=9e27ffc9-92b0-5086-8c4c-333ccadfd0ee
