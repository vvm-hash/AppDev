
!function(){try{var e="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:{},n=(new e.Error).stack;n&&(e._sentryDebugIds=e._sentryDebugIds||{},e._sentryDebugIds[n]="caf935eb-3dab-5981-909d-6ef451358c6d")}catch(e){}}();
(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,847180,e=>{"use strict";var t=e.i(4603164),r=e.i(6636464),s=e.i(277234),o=e.i(8042625);function n(e){let{teamId:r,projectId:s,blocks:o,enableCiChecksAndPolicies:n}=e,c=(0,t.useTypedSWR)("/v2/projects/{projectIdOrName}/checks",n&&r&&s?{teamId:r,projectIdOrName:s}:null);return{...c,data:c.data?{checks:o?c.data.checks.filter(e=>e.blocks===o):c.data.checks}:void 0}}function c(e){let{teamId:t,projectId:n,checkId:c}=e;return(0,r.default)(`/v2/projects/${n}/checks/${c}`,async(e,r)=>{let{arg:{blocking:n}}=r;return await (0,s.fetchAPI)(`${e}${(0,o.encode)({teamId:t})}`,{method:"PATCH",body:JSON.stringify({blocks:n?"deployment-alias":"none"}),throwOnHTTPError:!0})})}function i(e){let{teamId:t,projectId:n,checkId:c}=e;return(0,r.default)(`/v2/projects/${n}/checks/${c}`,async e=>{await (0,s.fetchAPI)(`${e}${(0,o.encode)({teamId:t})}`,{method:"DELETE",throwOnHTTPError:!0})})}function a(e){let{teamId:t,deploymentId:n,checkRunId:c,onSuccess:i}=e;return(0,r.default)(`/v2/deployments/${n}/check-runs/${c}`,async e=>{let r=await (0,s.fetchAPI)(`${e}${(0,o.encode)({teamId:t})}`,{method:"PATCH",body:JSON.stringify({status:"completed",conclusion:"skipped"}),throwOnHTTPError:!0});return i?.(),r})}function l(e){let{teamId:t,deploymentId:n,checkId:c,onSuccess:i}=e;return(0,r.default)(`/v1/deployments/${n}/checks/${c}/skip`,async e=>{let r=await (0,s.fetchAPI)(`${e}${(0,o.encode)({teamId:t})}`,{method:"POST",throwOnHTTPError:!0});return i?.(),r})}e.s(["useDeleteProjectCheck",()=>i,"useProjectChecks",()=>n,"useSkipCheckRun",()=>a,"useSkipCheckV1",()=>l,"useUpdateProjectCheckBlockingStatus",()=>c])},3938505,e=>{"use strict";var t=e.i(6468255),r=e.i(57106),s=e.i(2504781),o=e.i(6198010),n=e.i(6696646),c=e.i(4325157),i=e.i(7609806),a=e.i(1282571);function l(e){let{size:r=24,limit:s=3}=e,{data:o}=(0,c.useMarketplaceIntegrations)({protocolType:"checks"});if(!o||0===o.length)return null;let n=o.map(e=>({uid:e.id,component:(0,t.jsx)(a.MarketplaceIntegrationCardIcon,{icon:e.icon,name:e.name,size:r})}));return(0,t.jsx)(i.AvatarGroup,{members:n,size:r,limit:s})}e.i(3092247);var d=e.i(397510);e.i(3182268);var u=e.i(7849855),h=e.i(5074599);e.i(5463680);var p=e.i(6356390);e.i(7037808);var m=e.i(7137779),x=e.i(8824424);e.i(8564753);var g=e.i(9584471);e.i(6887680);var f=e.i(1414602);e.i(553769);var k=e.i(3758860),j=e.i(8711152),b=e.i(1017032),y=e.i(6060673),C=e.i(9668517),v=e.i(4245131),S=e.i(6891161),w=e.i(9508212);e.i(8703064);var I=e.i(6798946);function N(e){return(0,t.jsx)("div",{className:"flex flex-col gap-2",children:e.availableProducts.map(r=>{let{product:s,integration:o}=r;return(0,t.jsx)(I.CreateResourceCard,{description:s.shortDescription,icon:{url:s.iconUrl},isDisabled:!e.canCreateResource,isSelected:!!(e.selectedProductOrResource&&"product"===e.selectedProductOrResource.type&&e.selectedProductOrResource.value.product.id===s.id),name:s.name,onClick:()=>{e.setStep({step:"select",productOrResource:{value:{product:s,integration:o},type:"product"}})},showCreateButton:!1,tooltip:{isEnabled:!e.canCreateResource,text:"You do not have permission to create a Checks product."}},s.id)})})}var P=e.i(7218483),_=e.i(1344973);function R(e){let{Badge:r,resource:s,isSelected:o,onSelect:n,isDisabled:c,tooltip:i}=e,a=(0,P.useAgo)(s.createdAt,{formatYearsWeeksMonths:!0});return(0,t.jsx)(I.CreateResourceCard,{Badge:r,RightAction:(0,t.jsxs)(_.Text,{color:"gray-900",children:[(0,t.jsx)("span",{className:"geist-hide-on-mobile",children:"Created "}),a]}),description:s.product.name,icon:{url:s.product.iconUrl},isDisabled:c,isSelected:o,name:s.name,onClick:n,showCreateButton:!1,tooltip:i})}function T(e){return(0,t.jsx)("div",{className:"flex flex-col gap-2",children:e.resources.map(r=>(0,t.jsx)(R,{isDisabled:!e.canUpdateResource,isSelected:!!(e.selectedProductOrResource&&"resource"===e.selectedProductOrResource.type&&e.selectedProductOrResource.value.id===r.id),onSelect:()=>{e.setStep({step:"select",productOrResource:{value:r,type:"resource"}})},resource:r,tooltip:{isEnabled:!e.canUpdateResource,text:"You do not have permission to update a Checks product."}},r.id))})}let B="Add Checks";function O(e){let{active:r,availableList:s,onClose:o}=e,[c,i]=(0,n.useState)({step:"select",productOrResource:null}),a=()=>{i({step:"select",productOrResource:null}),o()};return(0,t.jsx)(S.Modal.Modal,{active:r,onClickOutside:a,children:(0,t.jsx)(E,{availableList:s,modalState:[c,i],onResetStateAndClose:a,onResetState:()=>{i({step:"select",productOrResource:null})}})})}function E(e){let{availableList:r,modalState:s,onResetStateAndClose:o,onResetState:c}=e,{data:i}=(0,b.useConfigurations)({type:"marketplace",skipBillingData:!0}),{mutateResourceListAndProject:a}=(0,g.useMutateResourceCache)(),[l,I]=s,{resources:P,availableProducts:_}=r,{permissions:R}=(0,f.useResourcePermissions)(),{projectSlug:O,hasProject:E}=(0,u.useProjectSlug)(),A=(0,C.useTeamSlug)(),{data:$}=(0,y.useProject)(O),[L,F]=(0,n.useState)(null),M=(E?$:L)??null;if(!A)return null;switch(l.step){case"select":{let{productOrResource:e}=l,r=e?.type==="resource"&&(0,k.isConnectedToProject)(O)(e.value);return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(S.Modal.Body,{children:(0,t.jsxs)(w.Stack,{gap:6,children:[(0,t.jsx)(w.Stack,{gap:2,children:(0,t.jsx)(S.Modal.Title,{center:!0,children:B})}),(0,t.jsx)(w.Stack,{gap:2,children:(0,t.jsxs)("div",{className:"flex flex-col gap-6",children:[P&&P.length>0?(0,t.jsx)(v.Description,{content:(0,t.jsx)(T,{resources:P,selectedProductOrResource:l.productOrResource,canUpdateResource:R.update,projectSlug:O,setStep:I}),title:"Installed Checks"}):null,_&&_.length>0?(0,t.jsx)(v.Description,{content:(0,t.jsx)(N,{availableProducts:_,selectedProductOrResource:l.productOrResource,canCreateResource:R.create,setStep:I}),title:"Available Providers"}):null]})})]})}),(0,t.jsxs)(S.Modal.Actions,{children:[(0,t.jsx)(S.Modal.Action,{onClick:o,type:"secondary",children:"Cancel"}),r?(0,t.jsx)(d.OpenInPartnerDashboardButton,{buttonVariant:"secondary",componentType:"button",integrationConfigurationId:e.value.product.integrationConfigurationId,onClick:o,label:"Configure",productId:e.value.product.id,externalResourceId:e.value.externalResourceId,size:"medium",teamIdOrSlug:e.value.ownerId,projectId:M?.id}):(0,t.jsx)(S.Modal.Action,{buttonType:"button",disabled:!e,onClick:()=>{e&&I({step:"create",productOrResource:e})},type:"secondary",children:"Continue"})]})]})}case"create":{let{productOrResource:e}=l;switch(e.type){case"product":{let{integration:r,product:s}=e.value;return(0,t.jsx)(p.CreateResourceModal,{cancelLabel:"Back",initialConfigurationStatus:(0,j.getConfigurationStatusByIntegrationId)(i,r.id),integration:r,neonIntegrationStatus:{isNeonDisabled:!1,isLoading:!1},onBack:c,onIntegrationResourceCreate:e=>{I({step:"create",productOrResource:{type:"resource",value:e}})},product:(0,k.getProductWithSupportedProtocols)(s),teamSlug:A})}case"resource":{let r=e.value;return(0,t.jsx)(m.CreateResourceConnectionModalStep,{ProjectSelector:O?void 0:(0,t.jsx)(x.ResourceProjectSelector,{account:A,allowSelectConnectedProjects:(0,k.isProtocolSupported)(r.product,"checks"),connectedProjectIds:r.projectsMetadata.map(e=>e.projectId),onProjectSelected:e=>{F(e)},resource:r,resourceTitle:(0,h.getResourceTitleByResource)(r),selectedProject:M}),backOrCancelLabel:"Back",onBack:c,onClickOutside:o,onConnectionCreated:()=>{O&&a(O,"checks")},project:E?$:M,resourceId:r.id,store:r,title:E?`${B} to ${M?.name}`:B})}default:return null}}}}function A(e){let{availableList:c,showLearnMoreLink:i=!0,showPlusSuffix:a=!0}=e,[d,u]=(0,n.useState)(!1);return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsxs)("div",{className:"flex flex-col items-center justify-center gap-2",children:[(0,t.jsx)(s.Button,{onClick:()=>u(!0),typeName:"button",loading:!c.isReady,disabled:!c.isChecksAvailable,type:"secondary",size:"small",prefix:(0,t.jsx)(l,{}),suffix:a?(0,t.jsx)(o.Plus,{}):void 0,children:c.isReady&&!c.isChecksAvailable?"Checks unavailable":"Install Checks Provider"}),i?(0,t.jsx)(r.Link,{href:"/docs/checks",external:!0,children:"Learn more about checks"}):null]}),(0,t.jsx)(O,{active:d,availableList:c,onClose:()=>u(!1)})]})}e.s(["InstallChecksButton",()=>A],3938505)},5838262,9099168,e=>{"use strict";var t=e.i(6468255),r=e.i(3938505),s=e.i(2504781),o=e.i(5468328),n=e.i(6696646),c=e.i(6198010),i=e.i(5255926),a=e.i(1848296),l=e.i(6891161),d=e.i(5806401),u=e.i(119294),h=e.i(6352514),p=e.i(7674801),m=e.i(6942035),x=e.i(109803),g=e.i(9100551),f=e.i(6060673),k=e.i(847180),j=e.i(277234),b=e.i(5338940),y=e.i(6636464),C=e.i(472117),v=e.i(4325157),S=e.i(6143247),w=e.i(4597921),I=e.i(1282571),N=e.i(3869281),P=e.i(8161149),_=e.i(3500331),R=e.i(3306538),T=e.i(5838627),B=e.i(2753950),O=e.i(4788623),E=e.i(7087273),A=e.i(1906681),$=e.i(8522580),L=e.i(455575),F=e.i(57106),M=e.i(818351),z=e.i(2686817);let H="vercel/repository-dispatch/actions/status@v1",D=e=>`Vercel - ${e||"{projectName}"}: `,U=e=>{let{workflowDirectoryUrl:r}=e,{project:s}=(0,g.useParams)()??{},[o,c]=(0,n.useState)(""),i="lint",a=D(s),l=`- name: 'notify vercel'
  uses: '${H}'
  with:
    name: ${a}${o||i}`;return(0,t.jsxs)("section",{className:"flex flex-col gap-y-6 pb-6",children:[(0,t.jsx)(_.Input,{id:"check-name",label:"Check Name",placeholder:`ex. ${i}`,className:"w-full",value:o,onChange:e=>c(e.target.value)}),(0,t.jsxs)("div",{className:"flex flex-col gap-y-2",children:[(0,t.jsxs)("p",{className:"text-label-14 text-gray-900",children:["Add this snippet to a"," ",r?(0,t.jsx)(F.Link,{external:!0,href:r,type:"highlight",children:"GitHub Actions workflow"}):"GitHub Actions workflow"," ","to automatically update workflow checks as deployment checks."]}),(0,t.jsx)(T.CodeBlock,{"aria-label":"GitHub Actions workflow snippet",language:"yaml",className:"my-0",trackCopy:()=>{u.analytics.track(h.AnalyticsEvent.CLICK_EVENT,{click_name:"promotion_requirements_import_github_modal_copy_snippet",click_value:"Clicked on code copy snippet in import github sheet"})},children:l})]})]})},G=e=>{let{check:r}=e,s=r.sha.slice(0,7),o=(0,t.jsx)(R.Badge,{capitalize:!1,size:"sm",variant:"gray-subtle",children:(0,t.jsx)("code",{children:s})});return r.url?(0,t.jsx)(F.Link,{href:r.url,target:"_blank",rel:"noopener noreferrer",children:o}):o};function V(e){let{projectInfo:r,teamSlug:o,checkedItems:c,setCheckedItems:a,isCheckAlreadyPresent:l,onBack:m,onClose:x,trigger:f,refetchChecks:k,isMutating:b,isOpen:y}=e,{project:C}=(0,g.useParams)()??{},[v,w]=(0,n.useState)(""),[I,R]=(0,n.useState)(""),[T,V]=(0,n.useState)(""),[q,K]=(0,n.useState)(!1),W=(0,L.useToasts)();(0,n.useEffect)(()=>{let e=setTimeout(()=>{V(I)},300);return()=>clearTimeout(e)},[I]);let{data:Y,error:J,isLoading:Q}=function(e){let{projectId:t,teamId:r,ref:s,shouldFetch:o=!0}=e,n=`/v1/integrations/${t}/recommended/checks`,c=new URLSearchParams({teamId:r});s&&c.set("ref",s);let i=(0,z.swrRequest)(`${n}?${c.toString()}`);return(0,M.useIsomorphicSWR)(t&&o?i:null,async e=>await (0,j.fetchAPI)(e,{throwOnHTTPError:!0}))}({projectId:r?.id??"",teamId:o??"",shouldFetch:y,ref:T});(0,n.useEffect)(()=>{q&&u.analytics.track(h.AnalyticsEvent.CLICK_EVENT,{click_name:"promotion_requirements_import_github_modal_show_all_checks",click_value:"Clicked on show all checks in import github sheet"})},[q]);let X=D(C),Z=Y?.recent.filter(e=>{let t=e.name.toLowerCase().includes(v.toLowerCase()),r=e.name.startsWith(X),s=l(e.name);return t&&(q||r||s)}).sort((e,t)=>e.name.toLowerCase().localeCompare(t.name.toLowerCase()))??[],ee=Z.filter(e=>!l(e.name)),et=ee.length>0&&ee.every(e=>c[e.name]),er=ee.length>0,es=async()=>{try{await f(),await k(),a({}),W.success("New deployment checks will take effect on your next production deployment."),u.analytics.track(h.AnalyticsEvent.PROMOTION_REQUIREMENTS_CHECKS_ADDED,{numberOfChecks:Object.values(c).filter(Boolean).length,teamId:o,projectId:r?.id,foundBySearchingWithCustomSha:""!==T}),x()}catch(e){W.error(e.message||"Failed to add checks. Please try again.")}},eo=()=>{a({}),m()};return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsxs)(O.CollapseGroup,{children:[(0,t.jsx)(B.Collapse,{title:"Send workflow updates to Vercel",size:"small",className:"[&_[role='region']>div]:overflow-y-clip [&_[role='region']]:overflow-y-clip",defaultExpanded:!er,children:(0,t.jsx)(U,{workflowDirectoryUrl:(e=>{if(e&&"github"===e.type&&e.org&&e.repo&&e.productionBranch)return`https://github.com/${e.org}/${e.repo}/tree/${e.productionBranch}/.github/workflows`})(r?.link)})}),(0,t.jsx)(B.Collapse,{title:"Select checks to add",size:"small",className:"[&_[role='region']>div]:overflow-y-clip [&_[role='region']]:overflow-y-clip",defaultExpanded:er,children:(0,t.jsx)("div",{className:"flex flex-col gap-y-6 pb-6",children:(0,t.jsxs)("div",{className:"flex flex-1 flex-col gap-3 sm:gap-6",children:[(0,t.jsx)(_.Input,{id:"ref-sha",bypassCasing:!0,label:"Enter a GitHub SHA",placeholder:"ex. d94b5f7",value:I,onChange:e=>R(e.target.value),className:"w-full"}),(0,t.jsxs)("div",{className:"flex w-full flex-col gap-4 md:flex-row md:items-center [&>:first-child]:flex-1",children:[(0,t.jsx)(_.Input,{id:"search-checks",bypassCasing:!0,placeholder:"Search...",label:"Search for GitHub Checks",value:v,onChange:e=>w(e.target.value),className:"w-full"}),(0,t.jsx)(N.Checkbox,{checked:et,onChange:()=>{let e=!et;a(t=>{let r={...t};return Z.forEach(t=>{l(t.name)||(r[t.name]=e)}),r})},label:"â€‹",children:"Select all"})]}),(0,t.jsxs)("div",{className:"flex items-center justify-between",children:[(0,t.jsx)("p",{className:"text-copy-13 text-gray-900",children:"Import the Following Checks"}),Y?.recent?.length&&(0,t.jsx)(A.Toggle,{checked:q,onChange:K,children:"Show all checks"})]}),q?(0,t.jsxs)($.Note,{type:"warning",children:["To trigger checks via"," ",(0,t.jsx)(F.Link,{external:!0,href:"https://docs.github.com/en/actions/reference/workflows-and-actions/events-that-trigger-workflows#repository_dispatch",children:(0,t.jsx)("code",{children:"repository_dispatch"})}),", use the ",(0,t.jsx)("code",{children:H})," action to notify Vercel."," ",(0,t.jsx)(F.Link,{href:"/docs/checks/promotion-requirements#limitations",children:"Learn more"}),"."]}):null,(()=>{if(Q)return(0,t.jsx)(i.Skeleton,{className:"h-[359px]",width:"100%"});if(J)return(0,t.jsx)(P.EmptyState.Root,{className:"h-[359px]",icon:(0,t.jsx)(P.EmptyState.Icon,{icon:(0,t.jsx)(p.LogoGithub,{size:32})}),title:"not_connected"===J.code?"GitHub connection required":"Unable to load checks",description:J.message||"Failed to load checks. Please try again",children:J.link?(0,t.jsx)(F.Link,{external:!0,href:J.link,type:"blend",children:J.action??"Learn More"}):null});if(0===Z.length){if(v)return(0,t.jsx)(P.EmptyState.Root,{className:"h-[359px]",title:(0,t.jsxs)(t.Fragment,{children:['No checks found for "',v,'"']}),description:"Try adjusting your search terms or clearing the search to see all checks.",children:(0,t.jsx)(s.Button,{type:"secondary",size:"small",onClick:()=>w(""),children:"Clear search"})});let e=!!Y?.recent?.length;return(0,t.jsx)(P.EmptyState.Root,{className:"h-[359px]",icon:(0,t.jsx)(P.EmptyState.Icon,{icon:(0,t.jsx)(p.LogoGithub,{size:32})}),title:I?(0,t.jsxs)(t.Fragment,{children:["No",e?" configured":""," checks found for commit ",(0,t.jsx)("code",{children:I})]}):`No${e?" configured":""} checks found`,description:I?`This commit may not have any commit checks${e?" configured for Vercel":""}, or they may not have completed yet.`:`No checks${e?" configured for Vercel":""} were found for the latest commit on the default branch. Try entering a specific commit SHA that has CI checks.`,children:(0,t.jsx)(F.Link,{href:"https://vercel.com/docs/checks/requirements",target:"_blank",rel:"noopener noreferrer",children:"Learn more about checks"})})}return(0,t.jsx)(E.Scroller,{height:359,overflow:"y",width:"100%",children:(0,t.jsx)("div",{className:"flex flex-col gap-y-4",children:Z.map(e=>{let r=l(e.name),s=!r;return(0,t.jsxs)(N.Checkbox,{className:"text-[16px]",checked:c[e.name]||r,onChange:()=>{var t;l(t=e.name)||(u.analytics.track(h.AnalyticsEvent.CLICK_EVENT,{click_name:"promotion_requirements_import_github_modal_select_check",click_value:`Clicked to select "${t}"`}),a(e=>({...e,[t]:!e[t]})))},disabled:r,children:[(0,t.jsx)("span",{className:(0,S.cn)({"text-gray-500":r,"mr-2":s}),children:e.name}),s?(0,t.jsx)(G,{check:e}):null]},e.name)})})})})()]})})})]}),(0,t.jsxs)(d.SheetFooter,{className:"flex justify-between gap-4 sm:mt-6 sm:hidden sm:justify-between",children:[(0,t.jsx)(s.Button,{onClick:eo,size:"small",type:"secondary",children:"Back"}),(0,t.jsx)(s.Button,{size:"small",onClick:es,disabled:0===Object.entries(c).filter(e=>{let[t,r]=e;return r&&!l(t)}).length||b,children:b?"Adding...":"Add"})]}),(0,t.jsxs)(d.SheetFooter,{className:"mt-auto bg-background-200 hidden sm:flex sm:justify-between border-t border-solid border-gray-alpha-400 gap-4 px-6 py-4 -mx-6 -mb-6 rounded-b-md sticky bottom-3",children:[(0,t.jsx)(s.Button,{onClick:eo,type:"secondary",children:"Back"}),(0,t.jsx)(s.Button,{onClick:es,disabled:0===Object.entries(c).filter(e=>{let[t,r]=e;return r&&!l(t)}).length||b,children:b?"Adding...":"Add"})]})]})}var q=e.i(9957872);e.i(6887680);var K=e.i(6810699),W=e.i(3584802);e.i(8703064);var Y=e.i(648779);e.i(553769);var J=e.i(3758860),Q=e.i(397510);function X(e,t){if(t)return e.projectsMetadata.find(e=>e.name===t)}function Z(e){let r,c,{integration:a,teamSlug:l,projectSlug:u,onBack:h,onClose:p,onShowConnectionModal:m}=e,[g,k]=(0,n.useState)(""),{data:j}=(0,f.useProject)(u||void 0),{data:b,hasResources:y,isReady:C}=(0,K.useResourceList)({integrationIdOrSlug:a.slug,teamSlug:l}),v=(0,n.useMemo)(()=>b?.stores?b.stores.filter(e=>(0,J.isProtocolSupported)(e.product,"checks")):[],[b]),S=()=>{h()},w=()=>{g&&m(g)},I=v.find(e=>e.id===g),N=I&&(r=X(I,u),!!r?.id),_=I&&(c=X(I,u),c?.id);return C?y?(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)("div",{className:"flex flex-col gap-4",children:(0,t.jsx)(q.ChoiceboxGroup,{type:"radio",label:"Select resource",direction:"row",value:g,onChange:e=>{k(e)},className:"[&>ul]:grid [&>ul]:grid-cols-2 [&>ul]:gap-3 [&_label>div>span:first-child]:overflow-hidden [&_label>div>span:first-child>span]:overflow-hidden",children:v.map(e=>(0,t.jsx)(q.ChoiceboxGroup.Item,{value:e.id,title:(0,t.jsxs)("div",{className:"flex items-center gap-3 min-w-0",children:[(0,t.jsx)("div",{className:"shrink-0",children:(0,t.jsx)(Y.ProductIcon,{icon:e.product.iconUrl,size:"large"})}),(0,t.jsxs)("div",{className:"min-w-0 flex-1 overflow-hidden",children:[(0,t.jsx)(o.Tooltip,{text:e.name,className:"block truncate",children:(0,t.jsx)("span",{className:"truncate text-sm font-medium block",children:e.name})}),(0,t.jsxs)("div",{className:"truncate text-sm text-gray-600",title:`${e.product.name}${e.billingPlan?.name?` - ${e.billingPlan.name}`:""}`,children:[e.product.name,e.billingPlan?.name?` - ${e.billingPlan.name}`:""]})]})]})},e.id))})}),(0,t.jsxs)(d.SheetFooter,{className:"flex justify-between gap-4 sm:mt-6 sm:hidden sm:justify-between",children:[(0,t.jsx)(s.Button,{onClick:S,size:"small",type:"secondary",children:"Back"}),I&&(N?(0,t.jsx)(Q.OpenInPartnerDashboardButton,{label:"Configure",componentType:"button",buttonVariant:"secondary",integrationConfigurationId:I.product.integrationConfigurationId,teamIdOrSlug:l,projectId:j?.id,productId:I.product.id,externalResourceId:I.externalResourceId,checkId:_,size:"small",onClick:()=>p()}):(0,t.jsx)(s.Button,{size:"small",onClick:w,children:"Connect"}))]}),(0,t.jsxs)(d.SheetFooter,{className:"mt-auto bg-background-200 hidden sm:flex sm:justify-between border-t border-solid border-gray-alpha-400 gap-4 px-6 py-4 -mx-6 -mb-6 rounded-b-md sticky bottom-3",children:[(0,t.jsx)(s.Button,{onClick:S,type:"secondary",children:"Back"}),I&&(N?(0,t.jsx)(Q.OpenInPartnerDashboardButton,{label:"Configure",componentType:"button",buttonVariant:"secondary",integrationConfigurationId:I.product.integrationConfigurationId,teamIdOrSlug:l,projectId:j?.id,productId:I.product.id,externalResourceId:I.externalResourceId,checkId:_,size:"medium",onClick:()=>p()}):(0,t.jsx)(s.Button,{onClick:w,children:"Connect"}))]})]}):(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(P.EmptyState.Root,{className:"h-[400px]",title:`No ${a.name} resources`,description:`Install ${a.name} to add checks to your project.`,children:(0,t.jsx)(s.Button,{onClick:()=>{let e=a.products?.find(e=>e.protocols?.checks);if(e){let t=(0,W.getIntegrationCheckoutUrl)({params:{teamSlug:l,integrationSlug:a.slug},searchParams:{productSlug:e.slug,projectSlug:u||void 0,cancelUrl:window.location.href}});window.open(t,"_blank")}},prefix:(0,t.jsx)(x.External,{}),children:"Install"})}),(0,t.jsx)(d.SheetFooter,{className:"flex justify-between gap-4 sm:mt-6 sm:hidden sm:justify-between",children:(0,t.jsx)(s.Button,{onClick:S,size:"small",type:"secondary",children:"Back"})}),(0,t.jsx)(d.SheetFooter,{className:"mt-auto bg-background-200 hidden sm:flex sm:justify-between border-t border-solid border-gray-alpha-400 gap-4 px-6 py-4 -mx-6 -mb-6 rounded-b-md sticky bottom-3",children:(0,t.jsx)(s.Button,{onClick:S,type:"secondary",children:"Back"})})]}):(0,t.jsxs)(t.Fragment,{children:[(0,t.jsxs)("div",{className:"flex flex-col gap-4",children:[(0,t.jsx)(i.Skeleton,{height:100,width:"100%"}),(0,t.jsx)(i.Skeleton,{height:100,width:"100%"})]}),(0,t.jsx)(d.SheetFooter,{className:"flex justify-between gap-4 sm:mt-6 sm:hidden sm:justify-between",children:(0,t.jsx)(s.Button,{onClick:S,size:"small",type:"secondary",children:"Back"})}),(0,t.jsx)(d.SheetFooter,{className:"mt-auto bg-background-200 hidden sm:flex sm:justify-between border-t border-solid border-gray-alpha-400 gap-4 px-6 py-4 -mx-6 -mb-6 rounded-b-md sticky bottom-3",children:(0,t.jsx)(s.Button,{onClick:S,type:"secondary",children:"Back"})})]})}var ee=e.i(7137779);let et=e=>{let{value:r,icon:s,className:o,title:n,description:c,disabled:i}=e,{component:l}=(0,a.useRadio)({value:r,disabled:i??!1});return(0,t.jsx)(t.Fragment,{children:(0,t.jsxs)("label",{className:(0,S.cn)("last-of-type:rounded-b-md first-of-type:rounded-t-md first-of-type:border-t last-of-type:border-b border-x flex items-center gap-x-4 p-4",{"hover:cursor-not-allowed opacity-50":i,"hover:cursor-pointer hover:bg-background-200":!i},o),children:[s,(0,t.jsxs)("div",{className:"flex items-center justify-between w-full gap-x-2",children:[(0,t.jsxs)("div",{className:"flex flex-col gap-y-1",children:[(0,t.jsx)("span",{className:"text-label-14 font-medium",children:n}),c?(0,t.jsx)("p",{className:"text-copy-14 text-gray-900",children:c}):null]}),l]})]})})},er=e=>{let{selectedProvider:r,onProviderChange:s,isProjectLoading:o,isProjectLinkedToGitHub:n,enableIntegrationsInAddCheck:c}=e,{data:l,isLoading:d,error:u}=(0,v.useMarketplaceIntegrations)({protocolType:"checks"}),h=o||!n;return u?(0,t.jsxs)("section",{children:[(0,t.jsx)("h3",{className:"text-heading-16 font-medium",children:"Select Checks Provider"}),(0,t.jsx)("p",{className:"text-gray-900",children:"Error loading integrations. Please try again."})]}):d||!l?(0,t.jsxs)("section",{children:[(0,t.jsx)("h3",{className:"text-heading-16 font-medium",children:"Select Checks Provider"}),(0,t.jsx)(i.Skeleton,{className:"h-[80px]",width:"100%"})]}):(0,t.jsx)("section",{className:"flex flex-col gap-y-4",children:(0,t.jsxs)(a.RadioGroup,{value:r,onChange:s,disabled:h,children:[(0,t.jsx)("h3",{className:"text-heading-16 font-medium mb-3",children:"Import from GitHub"}),(0,t.jsx)(et,{value:"github",className:"border rounded-md",title:"GitHub",disabled:h,description:n?"Import GitHub checks to require before a deployment can be promoted to production.":"Project is not linked to a GitHub repository.",icon:(0,t.jsx)(p.LogoGithub,{size:32})}),c&&l.length>0&&(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)("h3",{className:"text-heading-16 font-medium mb-3 mt-4",children:"Native Integrations"}),(0,t.jsx)("div",{className:"flex flex-col divide-y",children:l.map(e=>{let r=e.products.find(e=>e.protocols?.checks);return(0,t.jsx)(et,{value:e.slug,icon:e.icon?(0,t.jsx)(I.MarketplaceIntegrationCardIcon,{icon:e.icon,name:e.name,size:32}):null,title:e.name,description:e.shortDescription||r?.shortDescription},e.slug)})})]})]})})};function es(e){let{isOpen:r,onClose:o}=e,{project:c,teamSlug:i}=(0,g.useParams)()??{},a=(0,C.useChecksPrivateBetaFlag)(),p=(0,C.useCiChecksAndPoliciesFlagV2)(),S=(0,w.useServerFlag)("enable-integrations-in-add-check",!1),{data:I}=(0,v.useMarketplaceIntegrations)({protocolType:"checks"}),{data:N,mutate:P}=(0,k.useProjectChecks)({teamId:i??"",projectId:c??"",enableCiChecksAndPolicies:a||p}),[_,R]=(0,n.useState)("select-provider"),[T,B]=(0,n.useState)(""),[O,E]=(0,n.useState)(!1),[A,$]=(0,n.useState)(null),L=I?.find(e=>e.slug===T),{data:F}=(0,K.useResourceList)({integrationIdOrSlug:T||"",teamSlug:i??""}),M=(F?.stores?.length??0)>0,z=S&&T&&"github"!==T&&!M,[H,D]=(0,n.useState)(()=>{let e={};return N?.checks.forEach(t=>{"git-provider"===t.source.kind&&t.source.externalCheckName&&(e[t.source.externalCheckName]=!0)}),e}),{data:U,isLoading:G}=(0,f.useProject)(c),q=e=>N?.checks.some(t=>"git-provider"===t.source.kind&&t.source.externalCheckName===e)??!1,{trigger:Y,isMutating:J}=function(e){let{projectId:t,checks:r,swrOptions:s}=e,{team:o}=(0,b.useTeam)();return(0,y.default)(`/v2/projects/${t}/checks-bulk?teamId=${o?.id}`,async e=>await (0,j.fetchAPI)(e,{method:"POST",body:{checks:r},throwOnHTTPError:!0}),s)}({projectId:U?.id??"",checks:Object.entries(H).filter(e=>{let[t,r]=e;return r&&!q(t)}).map(e=>{let[t]=e;return{name:t,requires:"none",source:{kind:"git-provider",provider:"github",externalCheckName:t}}})}),Q=async()=>{await Y()},X=async()=>{await P()},et=e=>{let{fromUser:t=!1}=e;t&&u.analytics.track(h.AnalyticsEvent.CLICK_EVENT,{click_name:"promotion_requirements_import_github_modal_close",click_value:"Clicked to close import checks sheet"}),R("select-provider"),B(""),D({}),E(!1),$(null),o()},es=()=>{E(!1),$(null)},eo=()=>{if(u.analytics.track(h.AnalyticsEvent.CLICK_EVENT,{click_name:"promotion_requirements_import_github_modal_next",click_value:"Clicked to go to next step in import checks sheet"}),z&&L){let e=L.products?.find(e=>e.protocols?.checks);if(e){let t=(0,W.getIntegrationCheckoutUrl)({params:{teamSlug:i??"",integrationSlug:L.slug},searchParams:{productSlug:e.slug,projectSlug:c||void 0,cancelUrl:window.location.href}});window.open(t,"_blank")}return}R("import")},en=U?.link?.type==="github",ec=()=>{u.analytics.track(h.AnalyticsEvent.CLICK_EVENT,{click_name:"promotion_requirements_import_github_modal_back",click_value:"Clicked to go back to select provider in import checks sheet"}),R("select-provider")},ei={initial:{title:"Add checks",description:"Select a checks provider to get started with import.",content:(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(er,{selectedProvider:T,onProviderChange:B,isProjectLoading:G,isProjectLinkedToGitHub:!!en,enableIntegrationsInAddCheck:S}),(0,t.jsxs)(d.SheetFooter,{className:"flex justify-between gap-4 sm:mt-6 sm:hidden sm:justify-between",children:[(0,t.jsx)(s.Button,{onClick:()=>et({fromUser:!0}),size:"small",type:"secondary",children:"Cancel"}),(0,t.jsx)(s.Button,{size:"small",onClick:eo,disabled:!T,prefix:z?(0,t.jsx)(x.External,{}):void 0,children:z?"Install":"Next"})]}),(0,t.jsxs)(d.SheetFooter,{className:"mt-auto bg-background-200 hidden sm:flex sm:justify-between border-t border-solid border-gray-alpha-400 gap-4 px-6 py-4 -mx-6 -mb-6 rounded-b-md sticky bottom-3",children:[(0,t.jsx)(s.Button,{onClick:()=>et({fromUser:!0}),type:"secondary",children:"Cancel"}),(0,t.jsx)(s.Button,{onClick:eo,disabled:!T,prefix:z?(0,t.jsx)(x.External,{}):void 0,children:z?"Install":"Next"})]})]})},"import-github-step":{title:"Connect GitHub Actions",description:"Add the checks you want to require before a deployment can be promoted to production. You can also add from a GitHub SHA.",content:(0,t.jsx)(V,{projectInfo:U,teamSlug:i??"",checkedItems:H,setCheckedItems:D,isCheckAlreadyPresent:q,onBack:ec,onClose:()=>et({fromUser:!1}),trigger:Q,refetchChecks:X,isMutating:J,isOpen:r})},"configure-integration-step":L?{title:`Connect ${L.name}`,description:`Select ${L.name} resources to configure as checks.`,content:(0,t.jsx)(Z,{integration:L,teamSlug:i??"",projectSlug:c??null,onBack:ec,onClose:()=>et({fromUser:!1}),onShowConnectionModal:e=>{o(),$(e),E(!0)}})}:null}["select-provider"===_?"initial":"github"===T?"import-github-step":"configure-integration-step"];if(!ei)return(0,t.jsx)(d.Sheet,{open:r,onOpenChange:()=>et({fromUser:!0})});let ea=A&&F?.stores?F.stores.find(e=>e.id===A):null;return(0,t.jsxs)(t.Fragment,{children:[!O&&(0,t.jsx)(d.Sheet,{open:r,onOpenChange:()=>et({fromUser:!0}),children:(0,t.jsxs)(d.SheetContent,{onClick:e=>e.stopPropagation(),className:"m-3 flex h-[calc(100%-1.5rem)] gap-y-6 flex-col rounded-md bg-background-100 w-full max-w-full md:max-w-screen-md",children:[(0,t.jsxs)(d.SheetHeader,{className:"flex flex-col gap-y-1",children:[(0,t.jsxs)("div",{className:"flex items-center justify-between gap-2 mb-3",children:[(0,t.jsx)(d.SheetTitle,{className:"text-heading-20 font-medium",children:ei.title}),(0,t.jsx)(d.SheetClose,{asChild:!0,children:(0,t.jsx)(s.Button,{"aria-label":"Close",shape:"square",size:"tiny",svgOnly:!0,type:"tertiary",children:(0,t.jsx)(m.Cross,{})})})]}),(0,t.jsx)(d.SheetDescription,{className:"text-label-14 text-gray-900",children:ei.description})]}),ei.content]})}),O&&ea&&U&&"integration"===ea.type&&(0,t.jsx)(l.Modal,{active:!0,allowOverflow:!0,onClickOutside:es,width:540,children:(0,t.jsx)(ee.CreateResourceConnectionModalStep,{store:ea,project:U,onClickOutside:es,onConnectionCreated:()=>{E(!1),$(null)},title:`Connect ${ea.name}`,backOrCancelLabel:"Cancel",onBack:es,resourceId:ea.id})})]})}function eo(e){let{disabled:r=!1,disabledTooltipText:i}=e,[a,l]=(0,n.useState)(!1);return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(o.Tooltip,{text:i,forceHide:!r||!i,children:(0,t.jsx)(s.Button,{"aria-label":"Add Checks",onClick:()=>{u.analytics.track(h.AnalyticsEvent.CLICK_EVENT,{click_name:"promotion_requirements_add_checks_button_click",click_value:"Clicked on add checks button"}),l(!0)},prefix:(0,t.jsx)(c.Plus,{}),disabled:r,size:"small",type:"secondary",children:"Add Checks"})}),(0,t.jsx)(es,{isOpen:a,onClose:()=>l(!1)})]})}e.s(["AddChecksButton",()=>eo],9099168),e.i(3092247),e.i(3182268);var en=e.i(7849855),ec=e.i(6798946),ei=e.i(1017032),ea=e.i(1991452),el=e.i(9668517),ed=e.i(9508212),eu=e.i(1344973),eh=e.i(6159310),ep=e.i(8525850);function em(e){let{children:r}=e;return(0,t.jsxs)(ed.Stack,{align:"center",gap:6,padding:6,children:[(0,t.jsx)(eu.Text,{color:"gray-1000",size:16,weight:500,children:"No checks configured"}),(0,t.jsx)("div",{className:"flex  flex-col gap-6",children:r})]})}function ex(){let e=eg(),{projectSlug:s}=(0,en.useProjectSlug)(),{data:o}=(0,f.useProject)(s),n=(0,C.useCiChecksAndPoliciesFlagV2)(),c=(0,C.useChecksPrivateBetaFlag)(),a=(0,C.useChecksSettingsFlag)(),l=(0,w.useServerFlag)("enable-integrations-in-add-check",!1),d=(0,g.usePathname)(),u=(0,ea.useRouter)(),h=(0,el.useTeamSlug)(),p=d?.includes("/settings/"),m=n&&(0,t.jsxs)("div",{className:"flex flex-col items-center justify-center gap-3 sm:flex-row",children:[p||!a?(0,t.jsx)(eo,{}):(0,t.jsx)(eh.DashboardButtonLink,{route:"/[teamSlug]/[project]/settings/build-and-deployment",hash:"#deployment-checks",size:"small",type:"secondary",prefix:(0,t.jsx)(x.External,{color:"gray-900"}),target:"_blank",children:"Add Checks"}),c&&!l&&(0,t.jsx)(r.InstallChecksButton,{availableList:e,showLearnMoreLink:!1})]});if(!e.resources||!h)return(0,t.jsx)(em,{children:(0,t.jsxs)("div",{className:"flex flex-col gap-6",children:[(0,t.jsx)(i.Skeleton,{height:20,width:300}),m]})});let k=e.resources.filter(e=>e.projectsMetadata.some(e=>e.name===s));return k.length?(0,t.jsxs)(em,{children:[(0,t.jsx)(eu.Text,{color:"gray-900",children:`You have ${k.length} Checks Products installed for this project, but no checks configured.`}),(0,t.jsx)("div",{className:"flex flex-col gap-2",children:k.map(e=>(0,t.jsx)(ec.CreateResourceCard,{RightAction:(0,t.jsx)(Q.OpenInPartnerDashboardButton,{buttonVariant:"secondary",componentType:"button",integrationConfigurationId:e.product.integrationConfigurationId,label:"Configure",productId:e.product.id,externalResourceId:e.externalResourceId,size:"small",teamIdOrSlug:e.ownerId,projectId:o?.id}),description:e.product.name,icon:{url:e.product.iconUrl},isDisabled:!1,isSelected:!1,name:e.name,onClick:()=>{u.push((0,ep.getResourceDetailsPath)(e,h,s))},showCreateButton:!1},e.id))}),(0,t.jsxs)("div",{className:"flex w-full flex-col items-center justify-center gap-6",children:[(0,t.jsx)(eu.Text,{color:"gray-900",children:"or"}),m]})]}):(0,t.jsx)(t.Fragment,{children:(0,t.jsx)(em,{children:(0,t.jsxs)("div",{className:"flex max-w-[340px] flex-col items-center gap-6 text-center",children:[(0,t.jsx)(eu.Text,{color:"gray-900",children:"Use events or statuses from your checks provider to determine when a deployment is promoted to Production."}),m]})})})}function eg(){let{projectSlug:e}=(0,en.useProjectSlug)(),{data:t}=(0,ei.useConfigurations)({skipBillingData:!0}),{data:r,isReady:s}=(0,K.useResourceList)({protocolType:"checks"}),o=r?.stores.filter(e=>(0,J.isProtocolSupported)(e.product,"checks")),{data:n}=(0,v.useMarketplaceIntegrations)({protocolType:"checks"}),c=n?.flatMap(e=>e.products.filter(e=>(0,J.isProtocolSupported)(e,"checks")).map(t=>({product:t,integration:e})));return{marketplaceConfigurations:t?.filter(e=>"marketplace"===e.installationType),resources:o,availableProducts:c,resourcesForProject:o?.filter((0,J.isConnectedToProject)(e)),isReady:!!n&&s,isChecksAvailable:null!=o&&null!=c&&(o.length>0||c.length>0)}}e.s(["EmptyChecksCard",()=>ex,"useChecksData",()=>eg],5838262)}]);

//# sourceMappingURL=b90266a548b212e2.js.map
//# debugId=caf935eb-3dab-5981-909d-6ef451358c6d
