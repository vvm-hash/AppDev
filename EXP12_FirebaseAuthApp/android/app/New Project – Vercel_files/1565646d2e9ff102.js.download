
!function(){try{var e="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:{},n=(new e.Error).stack;n&&(e._sentryDebugIds=e._sentryDebugIds||{},e._sentryDebugIds[n]="f675f58b-0fda-537e-9a59-3121c5ff0b41")}catch(e){}}();
(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,4147070,e=>{"use strict";var t=e.i(6696646),i=e.i(287495);function r(e){let{loading:r,resolvedTheme:a}=function(){let e=(0,i.default)(),[r,a]=(0,t.useState)(!1);return(0,t.useEffect)(()=>a(!0),[]),{loading:!r,resolvedTheme:e?"light":"dark"}}();return r?e.logo:"dark"===a&&e.darkModeLogo?e.darkModeLogo:e.logo}e.s(["useFrameworkLogo",()=>r])},7175084,e=>{e.v({frameworkIconGroup:"index-module__Cg7LzG__frameworkIconGroup",numProjects:"index-module__Cg7LzG__numProjects"})},6509836,e=>{"use strict";var t=e.i(6468255),i=e.i(6696646),r=e.i(5255926),a=e.i(4585051),n=e.i(5614970),o=e.i(4147070),s=e.i(7175084);function l(e){let{projects:i,error:a,gitType:o}=e,l=(i?.length??0)>1?11:24;return a?(0,t.jsx)("div",{className:s.default.frameworkIconGroup,children:(0,t.jsx)(n.default,{gitType:o,height:24,width:24})}):i?(0,t.jsx)("div",{className:s.default.frameworkIconGroup,children:i.length<5?i.map(e=>e.framework.logo?(0,t.jsx)(u,{framework:e.framework,size:l},e.name):null):(0,t.jsx)("div",{className:s.default.numProjects,children:i.length<9?i.length:"9+"})}):(0,t.jsx)("div",{className:s.default.frameworkIconGroup,children:(0,t.jsx)(r.Skeleton,{height:24,rounded:!0,width:24})})}let u=(0,i.memo)(function(e){let{framework:i,size:r,style:n,className:s}=e,l=(0,o.useFrameworkLogo)({logo:i.logo,darkModeLogo:i.darkModeLogo});return(0,t.jsx)(a.Avatar,{className:s,size:r,style:n,title:i.name,url:l})});e.s(["FrameworkIcon",0,u,"FrameworkIconGroup",()=>l])},7045101,e=>{"use strict";var t=e.i(4833050),i=e.i(8042625),r=e.i(277234),a=e.i(4244280),n=e.i(5140444);function o(e){let{user:o}=(0,n.useUser)(),{data:s,isLoading:l,isValidating:u,mutate:c,error:d}=(0,t.default)(()=>o&&!o.limited&&e?`${a.API_INTEGRATION_CONTROLLER_V2}/detect-eligible-projects${(0,i.encode)({url:e})}`:null,e=>(0,r.fetchAPI)(e,{throwOnHTTPError:!0}));return{data:s,error:d,isValidating:u,isLoading:l,mutate:e=>c(e)}}e.s(["useDetectEligibleProjects",()=>o])},1348804,2071958,7357255,e=>{"use strict";var t=e.i(9070994),i=e.i(4244280);async function r(e){let r=await (0,t.default)(`${i.API_REGISTRATION}/github-token`,{throwOnHTTPError:!0});return r.verified?e.github={...r,verified:!0}:e.github={},e}e.s(["withGitHubData",()=>r],1348804);var a=e.i(8042625);async function n(e){let{user:r,team:n}=e,o=n||r,s={};n&&(s.teamId=n.id);let l=`${i.API_INTEGRATION_CONTROLLER}/gitlab/verify${(0,a.encode)(s)}`,u=await (0,t.default)(l);return o.gitlab={...u,connected:u.verified&&!u.disconnected},o}async function o(e){let{user:r,team:n}=e,o=n||r,s={};n&&(s.teamId=n.id);let l=`${i.API_INTEGRATION_CONTROLLER}/bitbucket/verify${(0,a.encode)(s)}`,u=await (0,t.default)(l);return o.bitbucket={...u,connected:u.verified&&!u.disconnected},o}e.s(["withGitLabData",()=>n],2071958),e.s(["withBitbucketData",()=>o],7357255)},4586231,e=>{"use strict";var t=e.i(6696646),i=e.i(3911483),r=e.i(8042625),a=e.i(9070994),n=e.i(4244280);async function o(e){let{user:t,team:i}=e,o=i||t,s={};i&&(s.teamId=i.id);let l=`${n.API_INTEGRATION_CONTROLLER}/google/verify${(0,r.encode)(s)}`,u=await (0,a.default)(l);return o.google={...u,login:u.email,createdAt:u.createdAt},o}async function s(e){let{user:t,team:i}=e,o=i||t,s={};i&&(s.teamId=i.id);let l=`${n.API_INTEGRATION_CONTROLLER}/apple/verify${(0,r.encode)(s)}`;try{let e=await (0,a.default)(l);o.apple={...e,login:e.email,createdAt:e.createdAt}}catch{}return o}var l=e.i(1348804),u=e.i(2071958),c=e.i(7357255);async function d(e){let{account:t,customHost:i}=e;if(!i)return t;let o=await (0,a.default)(`${n.API_REGISTRATION}/github-custom-host/token${(0,r.encode)({host:i})}`,{throwOnHTTPError:!0});return o.verified?t["github-custom-host"]={...o,verified:!0}:t["github-custom-host"]={},t}async function h(e){let t=await (0,a.default)(`${n.API_REGISTRATION}/github-limited`,{throwOnHTTPError:!0});return t.verified?e["github-limited"]={...t,verified:!0}:e["github-limited"]={},e}function g(e){let{account:r,opts:a,type:n="both",customHost:g}=e,p=(0,t.useRef)(null);p.current=r;let{data:f,mutate:m,isLoading:b}=(0,i.default)(()=>`integration-data-${n}-${p.current?.uid||""}-${g??""}`,async()=>{if(void 0===p.current)return;let e=JSON.parse(JSON.stringify(p.current));switch(n){case"google":await o({user:e});break;case"apple":await s({user:e});break;case"github":await (0,l.withGitHubData)(e);break;case"github-limited":await h(e);break;case"gitlab":await (0,u.withGitLabData)({user:e});break;case"bitbucket":await (0,c.withBitbucketData)({user:e});break;case"github-custom-host":await d({account:e,customHost:g});break;case"github-gitlab-bitbucket":await Promise.all([(0,l.withGitHubData)(e),(0,c.withBitbucketData)({user:e}),(0,u.withGitLabData)({user:e})]);break;default:await Promise.all([o({user:e}),s({user:e}),(0,l.withGitHubData)(e),h(e),(0,c.withBitbucketData)({user:e}),(0,u.withGitLabData)({user:e}),d({account:e,customHost:g})])}return e},a);return{account:f,isLoading:b,mutate:m}}e.s(["default",()=>g],4586231)},5614970,e=>{"use strict";var t=e.i(6468255),i=e.i(3959677),r=e.i(5371931),a=e.i(9222994);function n(e){let{gitType:n,...o}=e;switch(n){case"github":case"github-custom-host":case"ghes":return(0,t.jsx)(i.default,{...o});case"github-limited":return(0,t.jsx)(i.default,{...o,fill:"red"});case"gitlab":return(0,t.jsx)(r.default,{...o});case"bitbucket":return(0,t.jsx)(a.default,{...o});default:throw Error(`gitType ${n} not defined in GitLogo`)}}e.s(["default",()=>n])},7628870,e=>{"use strict";function t(e){return"github"===e||"gitlab"===e||"bitbucket"===e||"github-limited"===e}e.s(["ORIGINS",0,{github:"GitHub","github-limited":"GitHub (Limited)",gitlab:"GitLab",bitbucket:"Bitbucket",saml:"SAML",google:"Google",apple:"Apple","github-custom-host":"GitHub",email:"Email",otp:"One-Time Password","otp-link":"One-Time Password",passkey:"Passkey",unknown:"Unknown",manual:"Manual"},"isGitOrigin",()=>t])},2160483,e=>{"use strict";var t=e.i(3911483),i=e.i(9429645),r=e.i(8042625),a=e.i(277234),n=e.i(4244280),o=e.i(818351),s=e.i(2686817);function l(e,i){let{provider:r,host:n}=e;return(0,t.default)(()=>r?c({provider:r,host:n}):"",e=>(0,a.fetchAPI)(e,{throwOnHTTPError:!0}),i)}function u(e,t){let{provider:i,host:r}=e;return(0,o.useIsomorphicSWR)((0,s.swrRequest)(i?c({provider:i,host:r}):""),{revalidateOnMount:!0,ssr:{timeout:1e4},...t})}function c(e){let{provider:t,host:i}=e;return`${n.API_INTEGRATION_CONTROLLER}/git-namespaces${(0,r.encode)({provider:t,host:i})}`}async function d(e,t){let r=c({provider:e,host:t});return(0,i.mutate)(r,(0,a.fetchAPI)(r,{throwOnHTTPError:!0}),!1)}e.s(["default",()=>l,"mutateGitNamespaces",()=>d,"useIsomorphicGitNamspaces",()=>u])},5591369,e=>{"use strict";var t=e.i(3911483),i=e.i(8042625),r=e.i(277234),a=e.i(4244280),n=e.i(818351),o=e.i(2686817);function s(e,i){let{requireReauth:a,...n}=e;return(0,t.default)(()=>a?null:u(n),e=>(0,r.fetchAPI)(e,{throwOnHTTPError:!1}),i)}function l(e,t){return(0,n.useIsomorphicSWR)((0,o.swrRequest)(u(e)),{revalidateOnMount:!0,ssr:{timeout:1e4},...t})}function u(e){let{provider:t,host:r,query:n,namespaceId:o,s}=e;return`${a.API_INTEGRATION_CONTROLLER}/search-repo${(0,i.encode)({provider:t,host:r,query:n,namespaceId:o,s})}`}e.s(["useIsomorphicRepoSearch",()=>l,"useRepoSearch",()=>s])},3264803,e=>{e.v({box:"saml-indication-module__Lb3mXG__box",icon:"saml-indication-module__Lb3mXG__icon",small:"saml-indication-module__Lb3mXG__small"})},1565534,e=>{"use strict";var t=e.i(6468255),i=e.i(9722978),r=e.i(4345845),a=e.i(2504781),n=e.i(9318197),o=e.i(9508212),s=e.i(1344973),l=e.i(9100551),u=e.i(6228447),c=e.i(5140444),d=e.i(5338940),h=e.i(3264803);function g(e){let{small:g}=e,{user:p}=(0,c.useUser)(),{team:f}=(0,d.useTeam)(),m=(0,l.useRouter)(),b=()=>(0,u.requireAuthentication)({slug:p?.username,push:e=>m.push(e)});return g?(0,t.jsxs)(o.Stack,{align:"center",className:(0,i.clsx)(h.default.box,{[h.default.small]:g}),direction:"row",children:[(0,t.jsx)(o.Stack,{className:h.default.icon,flex:"0 0 auto",children:(0,t.jsxs)(o.Stack,{align:"center",direction:"row",children:[(0,t.jsx)(r.GitBranch,{}),(0,t.jsx)(n.Spacer,{x:.5})]})}),(0,t.jsx)(o.Stack,{children:(0,t.jsx)(s.Text,{color:"gray-900",size:14,children:"To access your Git Login Connections, please authenticate with your Personal Vercel Account."})}),(0,t.jsx)(n.Spacer,{x:.5}),(0,t.jsx)(o.Stack,{flex:"0 0 auto",children:(0,t.jsx)(a.Button,{onClick:b,typeName:"button",children:"Authenticate"})})]}):(0,t.jsxs)(o.Stack,{align:"center",className:(0,i.clsx)(h.default.box),direction:"column",gap:7,justify:"center",children:[(0,t.jsx)(o.Stack,{children:(0,t.jsx)(s.Text,{align:"center",color:"gray-900",size:14,children:"To access your Git Login Connections, please authenticate with your Personal Vercel Account."})}),(0,t.jsx)(o.Stack,{children:(0,t.jsxs)(s.Text,{align:"center",color:"gray-900",size:14,children:["At the moment, your SAML session only grants you access to"," ",f?`the ${f.name||f.slug} team`:"your current team","."]})}),(0,t.jsx)(o.Stack,{flex:"0 0 auto",children:(0,t.jsx)(a.Button,{onClick:b,typeName:"button",children:"Authenticate"})})]})}e.s(["default",()=>g])},1792778,e=>{"use strict";var t=e.i(6468255),i=e.i(6696646),r=e.i(3225905),a=e.i(5614970);let n={github:{normal:{foreground:"#fff",background:"#24292e",border:"#24292e"},hover:{foreground:"#fff",background:"#555",border:"#555"}},"github-limited":{normal:{foreground:"#fff",background:"#24292e",border:"#24292e"},hover:{foreground:"#fff",background:"#555",border:"#555"}},gitlab:{normal:{foreground:"#fff",background:"#6b4fbb",border:"#6b4fbb"},hover:{foreground:"#fff",background:"#8367D3",border:"#8367D3"}},bitbucket:{normal:{foreground:"#fff",background:"#0052CC",border:"#0052CC"},hover:{foreground:"#fff",background:"#1668E2",border:"#1668E2"}}},o={github:{fill:"currentColor"},"github-limited":{fill:"red"},gitlab:{monochrome:!0},bitbucket:{color:"currentColor"}};function s(e){let{gitType:s,children:l,...u}=e,c=(0,i.useMemo)(()=>n[s],[s]),d=(0,i.useMemo)(()=>o[s],[s]);return(0,t.jsx)(r.CustomButton,{...c,...u,children:(0,t.jsxs)("span",{style:{display:"flex"},children:[(0,t.jsx)(a.default,{gitType:s,height:20,style:{marginRight:"var(--geist-gap-quarter)",transform:"translateY(-1px)"},width:20,...d}),l]})})}e.s(["default",()=>s])},7249340,e=>{"use strict";var t=e.i(6696646),i=e.i(455575),r=e.i(8042625),a=e.i(4244280),n=e.i(4418317),o=e.i(7628870);function s(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},s=(0,t.useRef)(null),l=(0,i.useToasts)(),u=(0,t.useRef)(e);return u.current=e,{open:(0,t.useCallback)(async function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(s.current)return void s.current.open();let i=`${window.location.origin}/new/git/connected`,c=(0,r.encode)({mode:"connect",next:i,...t}),d="saml"===e?`${a.API_SSO}${c}`:`${a.API_REGISTRATION}${"github"===e?"/login-with-github":`/${e}/connect`}${c}`,h=u.current;s.current=new n.default({id:`connection:${e}:${Math.random().toString(36).slice(2)}`,url:d,callbacks:{onBlocked:()=>{s.current=null,l.error(`The popup to connect ${o.ORIGINS[e]} could not be opened.`),h.onBlocked?.()},onPoll:t=>{t.location.origin+t.location.pathname===i&&(s.current?.close(),h.onSuccess?.(e))},onClose:()=>{s.current=null,h.onClose?.()},onAbort:()=>{s.current=null,h.onAbort?.()},onOpen:()=>h.onOpen?.(e)}}),await s.current.open()},[l])}}e.s(["useConnectPopup",()=>s])},8210056,e=>{"use strict";var t=e.i(6696646),i=e.i(4244280),r=e.i(4418317);function a(){let{onSuccess:e,provider:a}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{provider:"github"},n=(0,t.useRef)(null);return{open:(0,t.useCallback)(()=>{var t;if(n.current)return void n.current.open();let o=(t=JSON.stringify({from:"/new",next:`${window.location.origin}/github/installed`}),window.btoa(t).replace(/=/g,"").replace(/\+/g,"-").replace(/\//g,"_")),s="github-limited"===a?i.GITHUB_APP_LIMTED_INSTALLATION_URL:i.GITHUB_APP_INSTALLATION_URL;n.current=new r.default({id:`add-github-installation:${Math.random().toString(36).slice(2)}`,url:`${s}?state=${encodeURIComponent(o)}`,callbacks:{onBlocked:()=>{n.current=null},onPoll:t=>{let i=new URL(t.location.href);i.origin===window.location.origin&&"/github/installed"===i.pathname&&(n.current?.close(),e?.({installationId:Number(i.searchParams.get("installationId"))}))},onClose:()=>{n.current=null},onAbort:()=>{n.current=null}}}),n.current.open()},[a,e])}}e.s(["default",()=>a])},4093282,e=>{e.v({continueWithText:"index-module__gQ5Ota__continueWithText",emptyResult:"index-module__gQ5Ota__emptyResult",entityName:"index-module__gQ5Ota__entityName",entityStack:"index-module__gQ5Ota__entityStack",gitPill:"index-module__gQ5Ota__gitPill",loadingResult:"index-module__gQ5Ota__loadingResult",providerBtn:"index-module__gQ5Ota__providerBtn",providerBtnMobile:"index-module__gQ5Ota__providerBtnMobile",repoDescription:"index-module__gQ5Ota__repoDescription",repoList:"index-module__gQ5Ota__repoList",repoTitle:"index-module__gQ5Ota__repoTitle",selectProvider:"index-module__gQ5Ota__selectProvider",small:"index-module__gQ5Ota__small",suggestionBox:"index-module__gQ5Ota__suggestionBox",suggestionDescription:"index-module__gQ5Ota__suggestionDescription",suggestionHighlight:"index-module__gQ5Ota__suggestionHighlight",suggestionList:"index-module__gQ5Ota__suggestionList",suggestionListBorder:"index-module__gQ5Ota__suggestionListBorder",turborepoBadgeContainer:"index-module__gQ5Ota__turborepoBadgeContainer",turborepoLogoContainer:"index-module__gQ5Ota__turborepoLogoContainer"})},7591419,2867523,e=>{"use strict";var t,i=e.i(6468255),r=e.i(6696646),a=e.i(9722978),n=e.i(6198010),o=e.i(9550268),s=e.i(6881349),l=e.i(5255926),u=e.i(9318197),c=e.i(9508212),d=e.i(57106),h=e.i(4004502),g=e.i(277234),p=e.i(4244280),f=e.i(5140444),m=e.i(5338940),b=e.i(4597921),x=e.i(9716741),j=e.i(4450569),y=e.i(8835183),v=e.i(5614970),_=e.i(1792778),w=e.i(1565534),S=e.i(7628870),k=e.i(7249340),I=e.i(8210056),T=e.i(5591369),A=e.i(4586231),N=e.i(2160483),G=e.i(4093282),C=e.i(4633952),R=e.i(5756088),L=e.i(8735244),E=e.i(3306538),O=e.i(7218483),P=e.i(5819220),M=e.i(979715),B=e.i(4712634),$=e.i(7045101),D=e.i(4147070),H=e.i(6509836);function U(e){let{framework:t}=e,r=(0,D.useFrameworkLogo)({logo:t.logo,darkModeLogo:t.darkModeLogo});return(0,i.jsx)(C.default,{alt:"Framework logo",height:20,src:r,width:20})}function F(e){let{repo:t,gitType:n,search:o,renderButton:s,repoSkeletonWidthPercentage:u=100,currentNamespace:d}=e,{data:g,error:p,isLoading:f}=(0,$.useDetectEligibleProjects)(t?.url),b=(0,O.useAgo)(t?.updatedAt),x=(0,r.useMemo)(()=>t?o?t.name.split(o).reduce((e,t,r)=>(0!==r&&e.push((0,i.jsx)("mark",{className:G.default.suggestionHighlight,children:o},e.length)),t&&e.push((0,i.jsx)("span",{children:t},e.length)),e),[]):[(0,i.jsx)("span",{children:t.name},t.id)]:null,[t,o]),j=!t||f,{team:y}=(0,m.useTeam)(),v=y?`${y.slug}/`:"",_=(0,r.useMemo)(()=>s(t,n,v,d,g?.projects[0],g?.projects.length,!y||y.billing?.plan==="hobby"),[t,n,v,g]);return(0,i.jsx)(P.Entity,{actions:(0,i.jsx)(c.Stack,{direction:"row",children:_}),"data-testid":(0,h.tid)("import-flow-layout","suggestion-card","suggestion"),placeholder:j,thumbnail:(0,i.jsx)(B.EntityThumbnail,{size:24,children:f?(0,i.jsx)(L.Spinner,{size:24}):(0,i.jsx)(H.FrameworkIconGroup,{error:p,gitType:n,projects:g?.projects})}),children:(0,i.jsx)(M.EntityField,{children:t?(0,i.jsxs)(c.Stack,{align:"center",className:G.default.entityStack,direction:"row",gap:1,children:[(0,i.jsx)(c.Stack,{className:G.default.entityName,flex:"0 1 auto",children:(0,i.jsx)("span",{className:(0,a.clsx)(G.default.repoTitle,"geist-ellipsis"),title:t.name,children:x})}),g?.monorepoManager?.slug==="turbo"?(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)("div",{className:G.default.turborepoBadgeContainer,children:(0,i.jsx)(E.Badge,{variant:"turbo",children:"Turbo"})}),(0,i.jsx)("div",{className:G.default.turborepoLogoContainer,children:(0,i.jsx)(U,{framework:g.monorepoManager})})]}):null,t?.private?(0,i.jsx)(c.Stack,{as:"span",flex:"0 0 auto",title:"Private Git Repository",children:(0,i.jsx)(R.LockClosed,{color:"gray-700"})}):null,(0,i.jsx)(c.Stack,{className:"geist-hide-on-mobile",flex:"0 0 auto",children:(0,i.jsx)("span",{className:G.default.repoDescription,children:"·"})}),(0,i.jsx)(c.Stack,{className:"geist-hide-on-mobile",flex:"0 0 auto",children:(0,i.jsx)("span",{className:G.default.repoDescription,children:b})})]}):(0,i.jsx)(l.Skeleton,{height:20,width:`${u}%`})})})}var q=e.i(1344973),z=e.i(2504781),Q=e.i(4030453),V=e.i(3500331),W=e.i(6891161);async function J(e){let t=`/v1/integrations/github-does-ghes-app-exist?host=${e}`;return(await (0,g.fetchAPI)(t,{throwOnHTTPError:!0})).exists}var K=((t=K||{}).Default="Default",t.NeedsInstallation="NeedsInstallation",t);function Y(e){let{teamSlug:t,webhookUrl:a,open:n,onClose:o,onSetHostname:s,flowKind:l}=e,u=(0,r.useRef)(null),[d,h]=(0,r.useState)(""),[g,p]=(0,r.useState)(""),[f,m]=(0,r.useState)(!1),[b,x]=(0,r.useState)(""),[j,y]=(0,r.useState)("Default"),v={name:"Vercel",url:"https://vercel.com/github",redirect_url:(e=>{let{domain:t,organization:i,teamSlug:r,flowKind:a}=e;try{let e=new URL(t).host,n=new URL("https://vercel.com/api/v1/integrations/github-create-ghes-callback");return n.searchParams.set("host",e),n.searchParams.set("organization",i),n.searchParams.set("team",r),a&&n.searchParams.set("flowKind",a),n.toString()}catch{return""}})({domain:d,organization:g,teamSlug:t,flowKind:l}),callback_urls:["https://vercel.com/api/now/registration/github-custom-host/callback"],default_permissions:{actions:"write",administration:"write",checks:"write",contents:"write",deployments:"write",emails:"read",issues:"write",members:"read",metadata:"read",pull_requests:"write",repository_hooks:"write",statuses:"write"},hook_attributes:{active:!0,url:a},default_events:["branch_protection_rule","check_run","deployment","membership","pull_request","pull_request_review","push","repository","status","team"],public:!0},_=(0,r.useCallback)(()=>{h(""),p(""),y("Default"),o()},[o]),w=(0,r.useCallback)(async function(){let e;if(x(""),u.current?.reportValidity()){try{e=new URL(d).hostname}catch{x("The provided domain is not valid");return}m(!0);try{if(await J(e)){if("NeedsInstallation"===j)return void x("There is already a Spaces GitHub App installed for this GitHub Enterprise Server domain.");m(!1),s(e),_();return}if("NeedsInstallation"===j)return void u.current?.submit();y("NeedsInstallation"),m(!1)}catch{x("There was an unexpected error from the server.")}}},[d,j,_,s]);return(0,r.useEffect)(()=>{let e=e=>{n&&"Enter"===e.key&&(e.preventDefault(),w())};return document.addEventListener("keydown",e),()=>{document.removeEventListener("keydown",e)}},[w,n]),(0,i.jsx)(W.Modal.Modal,{active:n,onClickOutside:_,children:(0,i.jsxs)("form",{action:function(e,t){try{let i=new URL(e).origin;return`${i}/organizations/${t}/settings/apps/new`}catch{return""}}(d,g),method:"post",ref:u,children:[(0,i.jsxs)(W.Modal.Body,{children:[(0,i.jsxs)(W.Modal.Header,{children:[(0,i.jsx)(W.Modal.Title,{children:"GitHub Enterprise Server"}),(0,i.jsx)(W.Modal.Subtitle,{children:"Enter your GitHub Enterprise Server domain to connect a Git Repository from your GitHub Enterprise Server."})]}),(0,i.jsxs)(c.Stack,{gap:4,children:[(0,i.jsx)(V.Input,{id:"domain",label:"GitHub Enterprise Server Domain",name:"domain",onChange:e=>h(e.target.value),placeholder:"https://github.acme.com",required:!0,value:d}),"NeedsInstallation"===j?(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(V.Input,{id:"organization",label:"GitHub Enterprise Server Organization Name",name:"organization",onChange:e=>p(e.target.value),placeholder:"organization-name",required:!0,value:g}),(0,i.jsx)(c.Stack,{className:"geist-sr-only",children:(0,i.jsx)(V.Input,{id:"manifest",label:"Manifest",name:"manifest",readOnly:!0,value:JSON.stringify(v)})})]}):null,(0,i.jsx)(c.Stack,{children:b?(0,i.jsx)(Q.Error,{error:b}):null})]})]}),(0,i.jsxs)(W.Modal.Actions,{children:[(0,i.jsx)(W.Modal.Action,{onClick:_,type:"secondary",children:"Cancel"}),(0,i.jsx)(W.Modal.Action,{buttonType:"submit",loading:f,passthroughOnClick:e=>{e.preventDefault(),n&&w()},children:"Continue"})]})]})})}function X(e){let{teamSlug:t,webhookUrl:a,dispatch:n,flowKind:o}=e,[s,l]=(0,r.useState)(!1),{user:u}=(0,f.useUser)(),[c,d]=(0,r.useState)(""),{account:h,mutate:g,isLoading:p}=(0,A.default)({account:u??null,type:"github-custom-host",customHost:c}),[m,b]=(0,r.useState)(!1),x=(0,r.useCallback)(()=>{n({type:"SET_GIT_ACCOUNT",gitAccount:{provider:"github-custom-host",host:c}})},[n,c]),j=(0,k.useConnectPopup)({onOpen:()=>{l(!0)},onAbort:()=>{l(!1),d("")},onSuccess:()=>{x(),g(),l(!1)}}),y=(0,r.useCallback)(e=>{d(e),b(!1)},[]);return(0,r.useEffect)(()=>{if(h&&c&&!p){if(!h["github-custom-host"])return void g();h["github-custom-host"].verified?x():j.open("github-custom-host",{host:c})}},[h,p,c,j,g,x]),(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(z.Button,{loading:s,onClick:()=>b(!0),type:"tertiary",children:(0,i.jsxs)("span",{style:{display:"flex"},children:[(0,i.jsx)(v.default,{fill:"currentColor",gitType:"github",height:20,style:{marginRight:"var(--geist-gap-quarter)",transform:"translateY(-1px)"},width:20}),(0,i.jsx)(q.Text,{as:"span",color:"inherit",weight:500,children:"Continue with GitHub Enterprise"})]})}),(0,i.jsx)(Y,{onClose:()=>b(!1),onSetHostname:y,open:m,teamSlug:t,webhookUrl:a,flowKind:o})]})}e.s(["GithubEnterpriseButton",()=>X],2867523);var Z=e.i(7722264),ee=e.i(4422059);function et(e){let{"data-testid":t,gitType:a,dispatch:n,shouldUpdatePreferredGitAccount:o,size:s,requireReauth:l,namespaceId:u}=e,[c,d]=(0,r.useState)(!1),[h,g]=(0,r.useState)(!1),{user:p}=(0,f.useUser)(),{account:m,mutate:b}=(0,A.default)({account:p??null});(0,r.useEffect)(()=>{m&&h&&(g(!1),y())},[m]);let x=(0,r.useCallback)(async()=>{d(!0);let e=await (0,N.mutateGitNamespaces)(a);d(!1);let t=e?.find(e=>String(e.id)===String(u))??e?.[0];n({type:"SET_GIT_ACCOUNT",gitAccount:{provider:a,namespaceId:t?.id,requireReauth:t?.requireReauth}}),o&&eu({provider:a,namespaceId:t?.id})},[n,a,u,o]),j=(0,k.useConnectPopup)({onOpen:()=>{d(!0)},onAbort:()=>{d(!1)},onSuccess:()=>{x(),b(),d(!1)}}),y=(0,r.useCallback)(()=>{if(!m){g(!0),d(!0);return}!l&&m[a]?.verified?x():j.open(a)},[m,l,a,x,j]);return(0,i.jsxs)(_.default,{align:"grow","data-testid":t,gitType:a,loading:c,onClick:y,size:s,width:"100%",children:[(0,i.jsx)("span",{className:G.default.continueWithText,children:"Continue with "}),S.ORIGINS[a]]})}function ei(e){let{search:t,gitAccount:n,configureGithubInstallation:o}=e,s=n?.provider,{data:l}=(0,N.default)({provider:s}),c=(0,r.useMemo)(()=>n&&l?l.find(e=>e.id===n?.namespaceId)?.name:null,[l,n]);return(0,i.jsx)(j.default,{center:!0,className:(0,a.clsx)(G.default.selectProvider,G.default.emptyResult),children:(0,i.jsxs)(j.default,{flex:"0 0 auto",gap:0,children:[(0,i.jsxs)(x.default,{center:!0,"data-testid":(0,h.tid)("import-flow-layout","no-results-found-text"),noMargin:!0,preset:"body-2",weight:500,children:["No ",t?"Results":"Git Repositories"," Found"]}),(0,i.jsx)(u.Spacer,{y:.25}),t?(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(x.default,{center:!0,noMargin:!0,preset:"body-2",style:{color:"var(--accents-6)",wordBreak:"break-word"},children:(0,i.jsxs)(j.default,{center:!0,row:!0,children:["Your search ",t?`for "${t}"`:null," ",n&&c?(0,i.jsxs)(i.Fragment,{children:["in"," ",(0,i.jsxs)(j.default,{center:!0,flex:"0 0 auto",noWrap:!0,row:!0,children:[(0,i.jsx)(u.Spacer,{x:.2}),(0,i.jsx)(j.default,{flex:"0 0 auto",children:(0,i.jsx)(v.default,{gitType:n.provider})}),(0,i.jsx)(u.Spacer,{x:.2}),(0,i.jsx)(x.default,{className:"geist-ellipsis",span:!0,weight:500,children:c}),(0,i.jsx)(u.Spacer,{x:.2})]})]}):null," ","did not return any results."]})}),(0,i.jsx)(u.Spacer,{y:.25})]}):null,o?(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(x.default,{center:!0,noMargin:!0,preset:"body-2",style:{color:"var(--accents-6)"},children:"Make sure to grant Vercel access to the Git repositories you’d like to import."}),(0,i.jsx)(u.Spacer,{y:1}),(0,i.jsx)(_.default,{"data-testid":(0,h.tid)("import-flow-layout","configure-github-app-button"),gitType:"github",loading:!1,onClick:o,children:"Configure GitHub App"})]}):(0,i.jsx)(x.default,{center:!0,noMargin:!0,preset:"body-2",style:{color:"var(--accents-6)"},children:"Try selecting a different Git account or organization on the top left."})]})})}function er(e){let{gitAccount:t,dispatch:r}=e;return(0,i.jsx)(j.default,{center:!0,className:(0,a.clsx)(G.default.selectProvider,G.default.emptyResult),children:(0,i.jsxs)(j.default,{flex:"0 0 auto",gap:0,children:[(0,i.jsx)(x.default,{center:!0,"data-testid":(0,h.tid)("import-flow-layout","no-results-found-text"),noMargin:!0,preset:"body-2",weight:500,children:"No Git Repositories Found"}),(0,i.jsx)(u.Spacer,{y:.25}),(0,i.jsxs)(x.default,{center:!0,"data-testid":(0,h.tid)("import-flow-layout","no-results-found-text"),noMargin:!0,preset:"body-2",style:{color:"var(--accents-6)"},children:["Your ",S.ORIGINS[t.provider]," account requires re-authentication to see your repositories."]}),(0,i.jsx)(u.Spacer,{y:1}),(0,i.jsx)(et,{dispatch:r,gitType:t.provider,namespaceId:t.namespaceId,requireReauth:!0})]})})}function ea(e){let{openGithubInstallation:t}=e;return(0,i.jsx)(j.default,{center:!0,className:(0,a.clsx)(G.default.selectProvider,G.default.emptyResult),children:(0,i.jsxs)(c.Stack,{align:"center",children:[(0,i.jsx)(x.default,{center:!0,"data-testid":(0,h.tid)("import-flow-layout","almost-done"),noMargin:!0,preset:"body-2",weight:500,children:"Install the GitHub application for the accounts you wish to Import from to continue"}),(0,i.jsx)(u.Spacer,{y:1.3}),(0,i.jsx)(c.Stack,{align:"center",flex:1,gap:2,justify:"center",children:(0,i.jsx)(_.default,{gitType:"github",onClick:t,children:"Install"})})]})})}function en(e){let{renderButton:t}=e;return(0,i.jsx)(i.Fragment,{children:[84,30,75,68,32].map((e,r)=>(0,i.jsx)(F,{renderButton:t,repoSkeletonWidthPercentage:e},`${r}_${e}`))})}function eo(e){let{repos:t,repoSearchIsLoading:c,search:g,debouncedSearch:p,gitAccount:f,dispatch:b,renderButton:_,shouldUpdatePreferredGitAccount:w,small:S,onChangeGitSelector:k,isInstallationNotFound:T}=e,A=f?.provider,C=f?.host,{isLoading:R,data:L,mutate:E}=(0,N.useIsomorphicGitNamspaces)({provider:A,host:C}),[O,P]=(0,r.useState)(!1),{team:M}=(0,m.useTeam)(),[B,$]=(0,r.useState)(!1);(0,r.useEffect)(()=>{O&&!c&&P(!1)},[O,c]);let D=(0,r.useCallback)(async e=>{let{installationId:t}=e,i=await E(),r=Array.isArray(i)&&i.length>0&&(i.find(e=>e.installationId===t)?.id||i[0].id)||null;b({type:"SET_GIT_NAMESPACE",namespaceId:r}),w&&eu({provider:"github",namespaceId:r}),P(!0),b({type:"REVALIDATE_REPOS"})},[b,E,w]),{open:H}=(0,I.default)({onSuccess:D,provider:"github-limited"===A?"github-limited":"github"}),U=(0,r.useMemo)(()=>{if(("github"===A||"github-limited"===A)&&L?.length){let e=L.find(e=>Number(e.id)===Number(f?.namespaceId));if(e?.isAccessRestricted)return H}},[A,H,L,f]),q=(0,r.useMemo)(()=>!R&&!!B&&(!f||"github"===f.provider&&(!f.namespaceId||!L?.length)),[f,L,R,B]),z=(0,r.useMemo)(()=>{if(f?.requireReauth||T&&f&&!q)return{ui:(0,i.jsx)(er,{dispatch:b,gitAccount:f}),suggestionListBorder:!1};if(q)return{ui:(0,i.jsx)(ea,{openGithubInstallation:H}),suggestionListBorder:!1};if(!t||!L||O||!B)return{ui:(0,i.jsx)(en,{renderButton:_}),suggestionListBorder:!1};if(0===t.length)return g!==p||p&&c?{ui:(0,i.jsx)(en,{renderButton:_}),suggestionListBorder:!1}:null===g?{ui:(0,i.jsx)(ei,{configureGithubInstallation:U,gitAccount:f}),suggestionListBorder:!1}:{ui:(0,i.jsx)(ei,{configureGithubInstallation:U,gitAccount:f,search:p}),suggestionListBorder:!1};let e=!1;f?.provider==="github"||f?.provider==="github-limited"?e=t.length<5&&!!U:(f?.provider==="gitlab"||f?.provider==="bitbucket")&&(e=t.length<5);let r=L.find(e=>String(e.id)===String(f?.namespaceId));return{ui:(0,i.jsxs)(i.Fragment,{children:[t.slice(0,5).map(e=>(0,i.jsx)(F,{currentNamespace:r,gitType:f?.provider,renderButton:_,repo:e,search:p},e.id)),e?(0,i.jsxs)(x.default,{preset:"body-2",style:{color:"var(--accents-6)",textAlign:"left"},children:["Missing Git repository?"," ",f?.provider==="github"?(0,i.jsx)(d.Link,{href:"",onClick:U,variant:"highlight",children:"Adjust GitHub App Permissions →"}):(0,i.jsx)(d.Link,{external:!0,href:`/docs/git/vercel-for-${f?.provider}#missing-git-repository`,variant:"highlight",children:"Learn More"})]}):null]}),suggestionListBorder:t.length<5}},[b,g,p,t,L,B,O,q,f,H,U,_,T,c]),Q=(0,r.useCallback)(e=>{if("select-different-git-provider"===e)b({type:"SET_GIT_ACCOUNT",gitAccount:null}),w&&eu({provider:null,namespaceId:null});else if("install-github"===e)H();else{let t=L?.find(t=>String(t.id)===String(e));b({type:"SET_GIT_NAMESPACE",namespaceId:t?.id??null,requireReauth:t?.requireReauth}),w&&eu({namespaceId:e})}k?.()},[b,L,H,w,k]),V=L&&[...L.map(e=>({"data-testid":(0,h.tid)("git-scope-combobox",`namespace-${e.provider}`),value:String(e.id),label:e.name||"",prefix:(0,i.jsx)(v.default,{gitType:e.provider}),isMenu:!1})),..."github"===A||"github-limited"===A?[{"data-testid":(0,h.tid)("import-flow-layout","git-scope-combobox","add-github-account"),value:"install-github",label:"Add GitHub Account",prefix:(0,i.jsx)(n.Plus,{size:14}),isMenu:!0}]:[],{"data-testid":(0,h.tid)("import-flow-layout","git-scope-combobox","switch-git-provider"),value:"select-different-git-provider",label:"Switch Git Provider",prefix:(0,i.jsx)(o.ListUnordered,{size:14}),isMenu:!0}],W=L?.find(e=>String(e.id)===String(f?.namespaceId)),J=W?.id||L?.[0]?.id||null;return(0,r.useEffect)(()=>{if(f&&Array.isArray(L)){if(!L.find(e=>String(e.id)===String(f.namespaceId))){let e=L[0],t=e?.id??null;(t||J)&&(f.namespaceId?Q(t?String(t):null):b({type:"SET_GIT_NAMESPACE",namespaceId:t,requireReauth:e?.requireReauth}))}$(!0)}},[b,Q,f,L,J]),(0,i.jsxs)(j.default,{className:(0,a.clsx)(G.default.suggestionList,{[G.default.suggestionListBorder]:!S&&z.suggestionListBorder}),gap:!1,children:[(0,i.jsx)(j.default,{flex:"0 0 auto",children:(0,i.jsxs)(j.default,{className:G.default.suggestionDescription,direction:["column","row","row"],gap:!1,noWrap:!0,children:[(0,i.jsx)(j.default,{flex:"50%",children:(0,i.jsx)(l.Skeleton,{show:void 0===f||!B||!Array.isArray(L),children:(0,i.jsxs)(s.Combobox,{clearable:!1,"data-git-namespace-combobox":!0,"data-testid":(0,h.tid)("import-flow-layout","git-scope-combobox"),noRawSelectedValue:!0,onChange:Q,placeholder:"Select a Git Namespace",value:J?String(J):null,children:[(0,i.jsx)(s.Combobox.Input,{"data-git-namespace-combobox-input":!0,"data-testid":(0,h.tid)("import-flow-layout","git-scope-combobox","input"),loading:"github"===A&&!B}),(0,i.jsx)(s.Combobox.List,{children:V?.map(e=>(0,i.jsx)(s.Combobox.Option,{"data-testid":e["data-testid"],isMenu:e.isMenu,prefix:e.prefix,value:e.value,children:e.label},e.value))})]})})}),(0,i.jsx)(u.Spacer,{x:1/3,y:1/3}),(0,i.jsx)(j.default,{flex:"50%",children:(0,i.jsx)(l.Skeleton,{show:!T&&!(W?.ownerType==="team"&&!M)&&(!!(!t&&null===g&&!q)||!B||!Array.isArray(L)||O),children:(0,i.jsx)(y.SearchInput,{"data-testid":(0,h.tid)("import-flow-layout","search-input"),disabled:t?.length===0&&null===g,onChange:e=>b({type:"SET_SEARCH",search:e.target.value}),placeholder:"Search…",value:g??"",width:"100%",loading:g!==p||!!(p&&c)})})})]})}),(0,i.jsx)(u.Spacer,{y:2/3}),(0,i.jsx)(j.default,{flex:"1 0 auto",children:(0,i.jsx)(j.default,{className:G.default.repoList,"data-testid":(0,h.tid)("import-flow-layout","repository-list"),gap:!1,children:z.ui})})]})}function es(e){let{dispatch:t,small:n,shouldUpdatePreferredGitAccount:o}=e,{teamSlug:s}=(0,m.useTeam)(),l=(0,b.useServerFlag)("enable-github-onprem-project-creation-flow",!1),c=(0,b.useServerFlag)("enable-github-limited",!1)?["github","github-limited","gitlab","bitbucket"]:["github","gitlab","bitbucket"];return n?(0,i.jsxs)("div",{className:(0,a.clsx)(G.default.selectProvider,G.default.small),children:[c.map(e=>(0,i.jsxs)(r.default.Fragment,{children:[(0,i.jsx)("span",{className:G.default.providerBtn,children:(0,i.jsx)(et,{"data-testid":(0,h.tid)("select-git-repository","choose-provider",e),dispatch:t,gitType:e,shouldUpdatePreferredGitAccount:o})}),(0,i.jsx)("span",{className:(0,a.clsx)(G.default.providerBtn,G.default.providerBtnMobile),children:(0,i.jsx)(et,{"data-testid":(0,h.tid)("select-git-repository","choose-provider",e),dispatch:t,gitType:e,shouldUpdatePreferredGitAccount:o,size:"small"})}),(0,i.jsx)(u.Spacer,{x:.5,y:.25})]},e)),(0,i.jsx)(u.Spacer,{expand:!0,y:.5}),(0,i.jsx)(x.default,{span:!0,type:"success",weight:500,children:(0,i.jsx)(d.Link,{external:!0,href:"/account/authentication",variant:"highlight",children:"Manage Login Connections"})})]}):(0,i.jsx)(j.default,{center:!0,className:G.default.selectProvider,children:(0,i.jsxs)(j.default,{center:!0,flex:"0 0 auto",children:[(0,i.jsx)(x.default,{center:!0,preset:"body-2",style:{color:"var(--accents-6)"},children:"Select a Git provider to import an existing project from a Git Repository."}),(0,i.jsx)(u.Spacer,{}),(0,i.jsxs)(j.default,{direction:"column",gap:1/3,style:{width:320},children:[s&&l?(0,i.jsx)(j.default,{children:(0,i.jsx)(X,{dispatch:t,teamSlug:s,webhookUrl:"https://api.vercel.com/v1/incoming/github",flowKind:"new-project"})}):null,c.map(e=>(0,i.jsx)(j.default,{children:(0,i.jsx)(et,{"data-testid":(0,h.tid)("select-git-repository","choose-provider",e),dispatch:t,gitType:e,shouldUpdatePreferredGitAccount:o})},e))]}),(0,i.jsx)(u.Spacer,{}),(0,i.jsx)(x.default,{center:!0,preset:"body-2",type:"success",weight:500,children:(0,i.jsx)(d.Link,{external:!0,href:"/account/authentication",children:"Manage Login Connections"})})]})})}function el(e,t){switch(t.type){case"INIT_GIT_ACCOUNT":return{...e,preferredGitAccount:t.preferredGitAccount};case"SET_SEARCH":return{...e,search:t.search};case"SET_DEBOUNCED_SEARCH":return{...e,debouncedSearch:t.debouncedSearch,ts:e.debouncedSearch!==e.search?Date.now():e.ts};case"SET_GIT_ACCOUNT":return{...e,search:null,localGitAccount:t.gitAccount};case"SET_GIT_NAMESPACE":{let i=e.localGitAccount??e.preferredGitAccount;return i?{...e,localGitAccount:{...i,namespaceId:t.namespaceId,requireReauth:t.requireReauth??!1}}:e}case"REVALIDATE_REPOS":return{...e,ts:Date.now()};default:return e}}let eu=async e=>{let{namespaceId:t,provider:i}=e;await (0,g.fetchAPI)(p.API_USER,{method:"PATCH",body:JSON.stringify({importFlowGitNamespaceId:t,importFlowGitProvider:i})})};function ec(e){let{renderButton:t,renderConnections:n,small:o,shouldUpdatePreferredGitAccount:s,onChangeGitSelector:l}=e,{user:u,isLoading:c}=(0,f.useUser)(),[{search:d,debouncedSearch:h,localGitAccount:g,preferredGitAccount:p},m]=(0,r.useReducer)(el,{search:null,debouncedSearch:null,ts:Date.now()}),b=p||(u?.importFlowGitProvider&&u.importFlowGitNamespaceId?{provider:u.importFlowGitProvider,namespaceId:u.importFlowGitNamespaceId}:null),x=void 0!==g?g:b,{account:j,isLoading:y}=(0,A.default)({account:u,customHost:g?.provider==="github-custom-host"?g.host:void 0});(0,r.useEffect)(()=>{let e=setTimeout(()=>m({type:"SET_DEBOUNCED_SEARCH",debouncedSearch:d}),300);return()=>clearTimeout(e)},[d]);let v=(0,ee.usePrevious)(h),{data:_,isLoading:S,error:k}=(0,T.useIsomorphicRepoSearch)({query:h,provider:x?.provider||void 0,host:x?.host,namespaceId:x?.namespaceId,requireReauth:x?.requireReauth},{keepPreviousData:v!==h}),I=(0,Z.isError)(k),N=I&&"code"in k&&"installation_not_found"===k.code;(0,r.useEffect)(()=>{(_||!S)&&s&&m({type:"INIT_GIT_ACCOUNT",preferredGitAccount:!_||"error"in _?null:_.gitAccount})},[_,g,s,S]);let C=(0,r.useMemo)(()=>{let e=s&&void 0===p,r=j?.github?.verified??!1,a=j?.gitlab?.verified??!1,g=j?.bitbucket?.verified??!1,f=j?.["github-custom-host"]?.verified??!1;return(!I||N)&&(e||y||c||(r||f||a||g)&&x)?(0,i.jsx)(eo,{debouncedSearch:h,dispatch:m,gitAccount:x,isInstallationNotFound:N,onChangeGitSelector:l,renderButton:t,repoSearchIsLoading:S,repos:_&&"repos"in _?_.repos:void 0,search:d,shouldUpdatePreferredGitAccount:s,small:o}):u?.limited?(0,i.jsx)(w.default,{small:o}):n?n({dispatch:m}):(0,i.jsx)(es,{dispatch:m,shouldUpdatePreferredGitAccount:!0,small:o})},[p,s,j,y,u?.limited,n,o,h,l,t,S,_,d,c,x,I,N]);return(0,i.jsx)("div",{className:(0,a.clsx)(G.default.suggestionBox,{[G.default.small]:o}),children:C})}e.s(["ConnectGitButton",()=>et,"SelectGitRepository",()=>ec,"reducer",()=>el,"updatePreferredGitAccount",0,eu],7591419)}]);

//# sourceMappingURL=5a23be69335138b7.js.map
//# debugId=f675f58b-0fda-537e-9a59-3121c5ff0b41
