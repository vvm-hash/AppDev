
!function(){try{var e="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:{},n=(new e.Error).stack;n&&(e._sentryDebugIds=e._sentryDebugIds||{},e._sentryDebugIds[n]="d659af8a-1e45-5079-8ec1-c5125c410baa")}catch(e){}}();
(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,3467212,e=>{e.v({locked:"index-module__8QoHLa__locked",tooltip:"index-module__8QoHLa__tooltip"})},8719390,e=>{e.v({"auto-visibility":"chart-container-module__ANdnOW__auto-visibility",container:"chart-container-module__ANdnOW__container",figure:"chart-container-module__ANdnOW__figure"})},2892045,e=>{e.v({colorDot:"legend-module__1rStOa__colorDot",title:"legend-module__1rStOa__title"})},2593092,e=>{e.v({bar:"bar-chart-module__h5ayfW__bar","bar-overlay":"bar-chart-module__h5ayfW__bar-overlay",chartContent:"bar-chart-module__h5ayfW__chartContent",chartWrapper:"bar-chart-module__h5ayfW__chartWrapper"})},2815631,1091997,5225151,2800132,e=>{"use strict";var t=e.i(6468255),a=e.i(6696646),i=e.i(9508212),r=e.i(1344973),n=e.i(6881349),s=e.i(8161149),l=e.i(57106),o=e.i(5338940),c=e.i(7275883),d=e.i(4011256),u=e.i(3911483),h=e.i(277234),f=e.i(4244280),p=e.i(5779481),x=e.i(5580480),g=e.i(4322153),m=e.i(9275907),v=e.i(8125826),y=e.i(9499865),j=e.i(8545185),k=e.i(5158601),b=e.i(8295952),_=e.i(3489437),S=e.i(2480776),T=e.i(157972);function M(e){let{data:t=[],width:i,range:r,keys:n,colors:s,granularity:l}=e,o=t.map(e=>{let{date:t}=e;return t}),{valueScale:c,tickXValues:d,tickYValues:u}=(0,a.useMemo)(()=>{let e=Math.round(o.length/(i<480?3:i<720||"hour"===l?4:8));return{valueScale:(0,_.scaleLinear)({domain:[0,r],range:[200,0],clamp:!0}),tickXValues:o.length<=3?o:o.filter((t,a)=>a%e==e>>1),tickYValues:0===r?[0]:[0,r/5,2*r/5,3*r/5,4*r/5,r]}},[o,l,r,i]);return{valueScale:c,colorScale:(0,a.useMemo)(()=>(0,S.scaleOrdinal)({domain:n,range:s}),[s,n]),tickYValues:u,tickXValues:d}}var w=e.i(3513482),O=e.i(1764746),N=e.i(550542),C=e.i(6499772),L=e.i(3467212);let I=e=>{let{left:a,top:i,containerWidth:r,children:n}=e,s="-50%",l="0",o="0";if(void 0!==a){let{innerWidth:e}=window,t=a+(e<741?-150:0)+(e-r)/2,i=e-t-300;t<0&&(s=-t/3-50+"%",l=`calc(${t/3+50}% - 8px)`,o="unset"),i<0&&(s=i/3-50+"%",l="unset",o=`calc(${i/3+50}% - 8px)`)}let c=(0,C.useSpring)({left:a,top:i,transform:`translate3d(${s}, -100%, 0)`,config:{mass:.05,tension:400,friction:30}});return(0,t.jsx)(N.animated.div,{className:L.default.tooltip,style:{...c,"--arrow-left":l,"--arrow-right":o},children:n})};var P=e.i(3851902);function D(){let{tooltipOpen:e,tooltipLeft:t,tooltipTop:i,tooltipData:r,hideTooltip:n,showTooltip:s}=(0,O.useTooltip)(),l=(0,a.useRef)(null),o=(0,a.useCallback)(()=>{l.current=window.setTimeout(()=>{n()},200)},[n]);return{tooltipData:r,showTooltip:s,hideTooltip:o,cancelHideTooltip:(0,a.useCallback)(()=>{l.current&&(clearTimeout(l.current),l.current=null)},[]),usageTooltipProps:{isOpen:e,left:t,top:i,data:r,hide:o}}}let B=(0,a.memo)(function(e){let{isOpen:a,width:n,left:s,top:l,data:o,formatter:c}=e;if(!a||!o)return null;let{date:d,records:u}=o.data;return(0,t.jsx)(I,{containerWidth:n,left:s,top:l,children:(0,t.jsxs)(i.Stack,{direction:"column",padding:4,children:[Object.keys(u).map(e=>(0,t.jsxs)(r.Text,{weight:500,children:[e," - ",c(u[e])]},e)),(0,t.jsx)(r.Text,{children:(0,P.formatFullDateWithRange)(d)})]})})});var R=e.i(9091333),$=e.i(2798756),F=e.i(8185979),H=e.i(7407064),A=e.i(9722978),W=e.i(5255926);function E(){return(0,t.jsx)(W.Skeleton,{height:234,style:{marginTop:5},width:"100%"})}var V=e.i(8719390);function z(e){let{chartRef:i,chartScales:{dateScale:r,valueScale:n},children:s,formatter:l,loading:o,tickXValues:c,tickYValues:d,usageTooltip:{cancelHideTooltip:u,hideTooltip:h,usageTooltipProps:f},width:p}=e,x=(0,a.useRef)(null),g=(0,a.useRef)(null);return o?(0,t.jsx)(E,{}):(0,t.jsxs)("figure",{className:V.default.figure,onMouseEnter:u,onMouseLeave:h,ref:i,style:{visibility:p?"visible":"hidden"},children:[(0,t.jsxs)("div",{className:(0,A.clsx)(V.default.container,V.default["auto-visibility"]),children:[(0,t.jsx)("svg",{height:227,width:g.current?g.current.getBBox().width:50,ref:g,children:(0,t.jsx)(F.AxisLeft,{hideAxisLine:!0,hideTicks:!0,left:8,scale:n,tickFormat:e=>l(e),tickLabelProps:()=>({fill:"var(--accents-5)",fontSize:14,textAnchor:"start"}),tickValues:d,top:5})}),(0,t.jsxs)("svg",{height:227,ref:x,width:"calc(100% - 50px)",children:[(0,t.jsx)($.AxisBottom,{hideAxisLine:!0,hideTicks:!0,scale:r,tickFormat:e=>(0,P.formatDate)(e),tickLabelProps:()=>({fill:"var(--accents-5)",fontSize:14,textAnchor:"middle"}),tickValues:c,top:200}),(0,t.jsx)(H.GridRows,{scale:n,stroke:"var(--accents-2)",tickValues:d,width:x.current?x.current.clientWidth-20:400,left:20}),(0,t.jsx)(R.Group,{children:s})]})]}),(0,t.jsx)(B,{...f,formatter:l,width:p})]})}var U=e.i(2892045);function G(e){let{title:a,color:n,value:s,formatter:o,suffix:c,linkMapper:d}=e;return(0,t.jsxs)(i.Stack,{direction:"row",justify:"space-between",children:[(0,t.jsxs)(r.Text,{className:U.default.title,title:a,weight:600,children:[(0,t.jsx)("span",{className:U.default.colorDot,style:{background:n}}),d?(0,t.jsx)(l.Link,{href:d(a),children:a}):a]}),s?(0,t.jsx)(r.Text,{title:a,children:`${c??""}: ${o(s)}`}):null]})}var q=e.i(2593092);function Q(e){let n,{chartData:s=[],formatter:l,title:o,description:c,legendSuffix:d,linkMapper:u}=e,[h,{width:f}]=(0,y.default)(),{range:p,keys:b}=(0,a.useMemo)(()=>{let e=Object.keys(s[0].records),t=s.reduce((t,a)=>[...t,e.reduce((e,t)=>Math.max(e,Number(a.records[t]??0)),0)],[]);return{keys:e,range:Math.max(...t)}},[s]),{colorScale:_,dateScale:S,valueScale:O,tickYValues:N,tickXValues:C}=function(e){let{data:t=[],width:i}=e;return{dateScale:(0,a.useMemo)(()=>{let e=t.map(e=>{let{date:t}=e;return t});return(0,T.scalePoint)({domain:e,range:[0,i-36],padding:.3})},[t,i]),...M(e)}}({data:s,width:f,range:p,keys:b,colors:w.defaultMetricColors}),{usageTooltipProps:L,tooltipData:I,showTooltip:P,hideTooltip:B,cancelHideTooltip:R}=D(),$=(0,a.useMemo)(()=>{let e,t,a;return e=S.domain(),t=S(e[0])??0,a=S.step(),i=>Math.max(0,Math.min(Math.round((i-t)/a),e.length-1))},[S]),F=(0,a.useMemo)(()=>Object.fromEntries(b.map(e=>{let t=s.map(t=>t.records[e]).filter(e=>void 0!==e);return[e,t.at(-1)]})),[b,s]),H=(0,a.useCallback)(e=>{let t;R();let{x:a,y:i}=(0,j.localPoint)(e)||{x:0,y:0},r=$(a),n=s[r],l=Object.values(n.records).filter(e=>"number"==typeof e).sort((e,t)=>e-t);if(!l.length)return;let o=O.invert(i),c=(t=l.length-1,(0,v.bisector)(e=>e).left(l,o,0,t));if(I&&r===I.index&&c===I.yIndex)return;let d=(O(l[c])||0)-22,u=(S(n.date)||0)+50;P({tooltipData:{data:n,index:r,yIndex:c},tooltipLeft:u,tooltipTop:d})},[R,s,S,$,P,I,O]);return void 0!==L.left&&(n=$(L.left-50)),(0,t.jsxs)(i.Stack,{className:q.default.chartWrapper,children:[(0,t.jsxs)(i.Stack,{gap:1,padding:6,children:[(0,t.jsx)(r.Text,{className:"capitalize",lineHeight:24,size:16,weight:600,children:o}),(0,t.jsx)(r.Text,{children:c})]}),(0,t.jsx)(i.Stack,{className:q.default.chartContent,padding:6,children:(0,t.jsxs)(z,{chartRef:h,chartScales:{dateScale:S,valueScale:O},formatter:l,loading:!1,tickXValues:C,tickYValues:N,usageTooltip:{cancelHideTooltip:R,hideTooltip:B,usageTooltipProps:L},width:f,children:[void 0!==L.left&&(0,t.jsx)(g.Line,{from:{x:L.left-50,y:0},pointerEvents:"none",stroke:"var(--accents-2)",strokeWidth:1,to:{x:L.left-50,y:200}}),b.map(e=>{let a=_(e),i=s.map(t=>({date:t.date,value:t.records[e]})),r="number"==typeof n?i[n]?.value:void 0,l=void 0!==r?O(r):void 0;return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(m.LinePath,{curve:k.curveLinear,data:s,stroke:a,strokeWidth:2,x:e=>{let{date:t}=e;return S(t)??0},y:t=>O(t.records[e]??0)}),void 0!==L.left&&void 0!==l&&(0,t.jsx)("circle",{cx:L.left-50,cy:l,fill:a,pointerEvents:"none",r:4,stroke:"white",strokeWidth:2}),(0,t.jsx)(x.Bar,{fill:"transparent",height:200,onMouseMove:H,onTouchMove:H,rx:0,width:f,x:0,y:0})]})})]})}),(0,t.jsx)(i.Stack,{gap:2,padding:6,children:b.map(e=>(0,t.jsx)(G,{color:_(e),formatter:l,linkMapper:u,suffix:d,title:e,value:F[e]},e))})]})}e.s(["MarketplaceLineChart",()=>Q],1091997);var X=e.i(4110640);function Y(e){let{chartData:n=[],formatter:s,title:l,description:o,legendSuffix:c,linkMapper:d}=e,[u,{width:h}]=(0,y.default)(),{range:f,keys:p}=(0,a.useMemo)(()=>{let e=Object.keys(n[0].records),t=n.reduce((t,a)=>[...t,e.reduce((e,t)=>e+a.records[t]?Number(a.records[t]):0,0)],[]);return{keys:e,range:Math.max(...t)}},[n]),{valueScale:x,dateScale:g,tickYValues:m,tickXValues:v,colorScale:k}=function(e){let{data:t=[],width:i}=e;return{dateScale:(0,a.useMemo)(()=>{let e=t.map(e=>{let{date:t}=e;return t});return(0,b.scaleBand)({domain:e,range:[0,i-36],padding:.4375,paddingOuter:.3})},[t,i]),...M(e)}}({data:n,width:h,range:f,keys:p,colors:w.defaultMetricColors}),{usageTooltipProps:_,tooltipData:S,showTooltip:T,hideTooltip:O,cancelHideTooltip:N}=D();return(0,t.jsxs)(i.Stack,{className:q.default.chartWrapper,children:[(0,t.jsxs)(i.Stack,{gap:1,padding:6,children:[(0,t.jsx)(r.Text,{className:"capitalize",lineHeight:24,size:16,weight:600,children:l}),(0,t.jsx)(r.Text,{children:o})]}),(0,t.jsx)(i.Stack,{className:q.default.chartContent,padding:6,children:(0,t.jsx)(z,{chartRef:u,chartScales:{dateScale:g,valueScale:x},formatter:s,tickXValues:v,tickYValues:m,usageTooltip:{cancelHideTooltip:N,hideTooltip:O,usageTooltipProps:_},width:h,children:(0,t.jsx)(X.BarStack,{color:k,data:n,keys:p,value:(e,t)=>e.records[t]??0,x:e=>{let{date:t}=e;return t},xScale:g,yScale:x,children:e=>[e[e.length-1]?.bars.map(a=>(0,t.jsx)("rect",{className:q.default["bar-overlay"],height:x(0),onMouseMove:()=>{if(!S||a.index!==S.index){let e=Math.round((x(a.bar[1])||0)-22),t=Math.round(a.x+50+a.width/2);T({tooltipData:{data:a.bar.data,index:a.index,yIndex:0},tooltipTop:e,tooltipLeft:t})}},onTouchMove:t=>{N();let{x:i}=(0,j.localPoint)(t)||{x:0},r=~~(i/(a.width/.5625)),n=e[e.length-1].bars[r];if(n&&(!S||n.index!==S.index)){let e=Math.round((x(n.bar[1])||0)-22),t=Math.round(n.x+50+n.width/2);T({tooltipData:{data:n.bar.data,index:r,yIndex:0},tooltipTop:e,tooltipLeft:t})}},width:a.width/.5625,x:a.x-.4375*a.width*.5/.5625,y:0},`bar-stack-${a.index}-overlay`)),...e.map(e=>e.bars.map(a=>(0,t.jsx)("rect",{className:q.default.bar,fill:a.color,height:a.height,width:a.width,x:a.x,y:a.y},`bar-stack-${e.index}-${a.index}`)))]})})}),(0,t.jsx)(i.Stack,{gap:2,padding:6,children:p.map(e=>(0,t.jsx)(G,{color:w.defaultMetricColors[p.indexOf(e)],formatter:s,linkMapper:d,suffix:c,title:e,value:n.reduce((t,a)=>t+a.records[e],0)},e))})]})}function K(e){return(0,t.jsxs)(i.Stack,{className:q.default.chartWrapper,children:[(0,t.jsxs)(i.Stack,{gap:1,padding:6,children:[e.title?(0,t.jsx)(r.Text,{className:"capitalize",lineHeight:24,size:16,weight:600,children:e.title}):(0,t.jsx)(W.Skeleton,{boxHeight:24,height:24,width:120}),e.description?(0,t.jsx)(r.Text,{children:e.description}):(0,t.jsx)(W.Skeleton,{boxHeight:20,height:20,width:220})]}),(0,t.jsx)(i.Stack,{className:q.default.chartContent,padding:6,children:(0,t.jsx)(i.Stack,{paddingBottom:3,paddingTop:6,children:(0,t.jsx)(W.Skeleton,{height:227,width:"calc(100% - 50px)"})})}),(0,t.jsx)(i.Stack,{gap:2,padding:6,children:[...Array(e.dimensions).keys()].map(e=>(0,t.jsx)(W.Skeleton,{boxHeight:20,height:16,width:180},e))})]})}e.s(["MarketplaceBarChart",()=>Y,"MarketplaceChartPlaceholder",()=>K],5225151);var Z=e.i(266062),J=e.i(5074599);e.i(3092247);var ee=e.i(397510);function et(e){var x;let{resourceId:g}=e,{data:m}=(0,p.useResourceItem)({resourceId:g}),v=m?.store,y=!v||v.product.integration.supportsInstallationBillingPlans,{team:j}=(0,o.useTeam)(),[k,b]=(0,a.useState)("week"),{data:_}=(x=v&&j?{integrationConfigurationId:v.product.integrationConfigurationId,resourceId:v.id,teamId:j.id,period:k}:null,(0,u.default)(()=>{if(!x)return null;let{integrationConfigurationId:e,resourceId:t,teamId:a,period:i}=x,r=new URLSearchParams;return r.append("teamId",a),r.append("period",i),`${f.API_INTEGRATION_CONTROLLER}/installations/${e}/resources/${t}/billing/data/series?${r.toString()}`},h.fetchAPI)),S=(0,a.useMemo)(()=>{if(!v||!_)return;let e=_.credit?.balanceTotalCent.length?_.credit.balanceTotalCent.map(e=>({records:{[v.name]:e.value/100},date:new Date(e.timestamp).getTime()})):void 0,t=_.spending?.totalCent.length?_.spending.totalCent.map(e=>({records:{[v.name]:e.value/100},date:new Date(e.timestamp).getTime()})):void 0,a=_.usage?_.usage.byMetrics.map(e=>({metric:e,data:e.usageItems.map(e=>({records:{[v.name]:e.value},date:new Date(e.timestamp).getTime()}))})):void 0;return{noData:!e&&!t&&!a,prepayment:e,subscription:t,usageByMetric:a}},[v,_]);return v&&S?S.noData?y?(0,t.jsx)(s.EmptyState.Root,{description:(0,t.jsxs)(t.Fragment,{children:["Usage tracking is available at the organization level."," ",(0,t.jsxs)(l.Link,{variant:"primary",href:j?(0,d.getInstallationDetailsLink)({teamSlug:j.slug,configurationId:v.product.integrationConfigurationId,integrationSlug:v.product.integration.slug,isMarketplace:!0,path:"usage"}):"",children:["See"," ",(0,J.getInstallationTitleBySlug)({slug:v.product.integration.slug})]})]}),icon:(0,t.jsx)(s.EmptyState.Icon,{icon:(0,t.jsx)(c.ChartBarPeak,{size:32})})}):(0,t.jsx)(s.EmptyState.Root,{description:"edgedb"===v.product.integration.slug?"There are no data available yet for this period.":"Usage tracking is not yet available for this service.",icon:(0,t.jsx)(s.EmptyState.Icon,{icon:(0,t.jsx)(c.ChartBarPeak,{size:32})}),title:"No data available",children:(0,t.jsx)(ee.OpenInPartnerDashboardButton,{componentType:"button",buttonVariant:"secondary",integrationConfigurationId:v.product.integrationConfigurationId,label:`See usage in ${v.product.integration.name}`,teamIdOrSlug:j?.id,path:"usage"})}):(0,t.jsxs)(i.Stack,{gap:5,children:[(0,t.jsxs)(i.Stack,{align:"center",direction:"row",gap:2,justify:"space-between",children:[(0,t.jsx)(r.Text,{lineHeight:24,size:20,weight:600,children:"Usage Report"}),(0,t.jsxs)(n.Combobox,{clearable:!1,noInputPrefix:!0,onChange:e=>{e&&b(e)},value:k,width:140,children:[(0,t.jsx)(n.Combobox.Input,{}),(0,t.jsxs)(n.Combobox.List,{children:[(0,t.jsx)(n.Combobox.Option,{value:"week",children:"Last 7 days"}),(0,t.jsx)(n.Combobox.Option,{value:"month",children:"Last month"}),(0,t.jsx)(n.Combobox.Option,{value:"year",children:"Last year"})]})]})]}),v.product.integration.supportsInstallationBillingPlans?null:(0,t.jsxs)(t.Fragment,{children:[S.prepayment?(0,t.jsx)(Q,{chartData:S.prepayment,description:"This chart shows the balance over time.",formatter:d.formatMarketplaceBillingTotal,legendSuffix:"Balance",title:"Balance"}):null,S.subscription?(0,t.jsx)(Q,{chartData:S.subscription,description:"This chart shows the cost over time.",formatter:d.formatMarketplaceBillingTotal,legendSuffix:"Total Cost",title:"Total Cost"}):null]}),S.usageByMetric?.map(e=>"total"===e.metric.type?(0,t.jsx)(Q,{chartData:e.data,description:`This chart shows the ${e.metric.name} over time.`,formatter:(0,Z.formatUsageValueByUnit)(e.metric.units),legendSuffix:`Total ${e.metric.name}`,title:e.metric.name},e.metric.name):(0,t.jsx)(Y,{chartData:e.data,description:`This chart shows the ${e.metric.name} over time.`,formatter:(0,Z.formatUsageValueByUnit)(e.metric.units),legendSuffix:`Total ${e.metric.name}`,title:e.metric.name},e.metric.name))]}):(0,t.jsxs)(i.Stack,{gap:5,children:[(0,t.jsxs)(i.Stack,{align:"center",direction:"row",gap:2,justify:"space-between",children:[(0,t.jsx)(r.Text,{lineHeight:24,size:20,weight:600,children:"Usage Report"}),(0,t.jsxs)(n.Combobox,{clearable:!1,noInputPrefix:!0,value:"week",width:140,children:[(0,t.jsx)(n.Combobox.Input,{}),(0,t.jsx)(n.Combobox.List,{children:(0,t.jsx)(n.Combobox.Option,{value:"week",children:"Last 7 days"})})]})]}),y?null:(0,t.jsx)(K,{dimensions:1})]})}e.s(["ResourceUsageCharts",()=>et],2800132),e.i(7752924),e.s([],2815631)},157972,e=>{"use strict";var t=e.i(7338866);e.s(["scalePoint",()=>t.default])},3513482,e=>{"use strict";e.s(["defaultMetricColors",0,["var(--ds-blue-700)","var(--ds-amber-700)","var(--ds-green-700)","var(--ds-teal-700)","var(--ds-purple-700)","var(--ds-pink-700)","var(--ds-red-700)","var(--ds-gray-700)","var(--ds-blue-600)","var(--ds-red-600)","var(--ds-amber-600)","var(--ds-green-600)","var(--ds-teal-600)","var(--ds-purple-600)","var(--ds-pink-600)","var(--ds-red-600)","var(--ds-gray-600)","var(--ds-blue-400)","var(--ds-red-400)","var(--ds-amber-400)","var(--ds-green-400)","var(--ds-teal-400)","var(--ds-purple-400)","var(--ds-pink-400)","var(--ds-red-400)","var(--ds-gray-400)"]])},4006531,e=>{"use strict";var t=e.i(991605),a=e.i(4405391);e.s(["sizeFormatter",0,function(e){let i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"short",r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:2;if(!(0,a.isNumber)(e))return"–";let n=(0,t.default)(e,{maximumFractionDigits:"short"===i?0:r,minimumFractionDigits:2!==r?r:void 0});return"short"===i&&n.length<5?(0,t.default)(e,{maximumFractionDigits:r}):n}])},5158601,e=>{"use strict";var t=e.i(7546294);e.s(["curveLinear",()=>t.default])},7338866,e=>{"use strict";var t=e.i(4741191),t=t,a=(0,e.i(8777499).default)("domain","range","reverse","align","padding","round");function i(e){return a((0,t.point)(),e)}e.s(["default",()=>i],7338866)},467111,e=>{"use strict";var t=e.i(6696646),a=e.i(8264458),i=["className","innerRef"];function r(){return(r=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var i in a)Object.prototype.hasOwnProperty.call(a,i)&&(e[i]=a[i])}return e}).apply(this,arguments)}function n(e){var n=e.className,s=e.innerRef,l=function(e,t){if(null==e)return{};var a,i,r={},n=Object.keys(e);for(i=0;i<n.length;i++)a=n[i],t.indexOf(a)>=0||(r[a]=e[a]);return r}(e,i);return t.default.createElement("rect",r({ref:s,className:(0,a.default)("visx-bar",n)},l))}e.s(["default",()=>n])},730247,8903572,e=>{"use strict";function t(e){return null==e?void 0:e[0]}function a(e){return null==e?void 0:e[1]}function i(e){if("bandwidth"in e)return e.bandwidth();var t=e.range(),a=e.domain();return Math.abs(t[t.length-1]-t[0])/a.length}e.s(["getFirstItem",()=>t,"getSecondItem",()=>a],730247),e.s(["default",()=>i],8903572)},4110640,e=>{"use strict";var t=e.i(6696646),a=e.i(8264458),i=e.i(1377254),r=e.i(9091333),n=e.i(730247),s=e.i(8903572),l=e.i(1699947),o=e.i(3030299),c=e.i(2620110),d=e.i(467111),u=["data","className","top","left","x","y0","y1","xScale","yScale","color","keys","value","order","offset","children"];function h(){return(h=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var i in a)Object.prototype.hasOwnProperty.call(a,i)&&(e[i]=a[i])}return e}).apply(this,arguments)}function f(e){var f=e.data,p=e.className,x=e.top,g=e.left,m=e.x,v=e.y0,y=void 0===v?n.getFirstItem:v,j=e.y1,k=void 0===j?n.getSecondItem:j,b=e.xScale,_=e.yScale,S=e.color,T=e.keys,M=e.value,w=e.order,O=e.offset,N=e.children,C=function(e,t){if(null==e)return{};var a,i,r={},n=Object.keys(e);for(i=0;i<n.length;i++)a=n[i],t.indexOf(a)>=0||(r[a]=e[a]);return r}(e,u),L=(0,i.stack)();T&&L.keys(T),M&&(0,l.default)(L.value,M),w&&L.order((0,o.default)(w)),O&&L.offset((0,c.default)(O));var I=L(f),P=(0,s.default)(b),D=I.map(function(e,t){var a=e.key;return{index:t,key:a,bars:e.map(function(t,i){var r=(_(y(t))||0)-(_(k(t))||0),n=_(k(t)),s="bandwidth"in b?b(m(t.data)):Math.max((b(m(t.data))||0)-P/2);return{bar:t,key:a,index:i,height:r,width:P,x:s||0,y:n||0,color:S(e.key,i)}})}});return N?t.default.createElement(t.default.Fragment,null,N(D)):t.default.createElement(r.Group,{className:(0,a.default)("visx-bar-stack",p),top:x,left:g},D.map(function(e){return e.bars.map(function(a){return t.default.createElement(d.default,h({key:"bar-stack-"+e.index+"-"+a.index,x:a.x,y:a.y,height:a.height,width:a.width,fill:a.color},C))})}))}e.s(["BarStack",()=>f],4110640)},5580480,e=>{"use strict";var t=e.i(467111);e.s(["Bar",()=>t.default])},1878918,e=>{"use strict";var t=e.i(6468255),a=e.i(9508212),i=e.i(6401841),r=e.i(6696646);function n(e){let{value:n}=e,s=(0,r.useMemo)(()=>0===n?0:n<.05?.05:n>1?1:n,[n]);return(0,r.useMemo)(()=>n>1,[n])?(0,t.jsx)(a.Stack,{align:"center",as:"span",justify:"center",style:{width:18,height:18},children:(0,t.jsx)(i.Stop,{color:"red-700",size:16})}):(0,t.jsx)(a.Stack,{align:"center",as:"span",justify:"center",style:{width:18,height:18},children:(0,t.jsxs)("svg",{height:16,viewBox:"0 0 20 20",width:16,children:[(0,t.jsx)("circle",{cx:"10",cy:"10",fill:"var(--accents-1)",r:"9",stroke:"var(--accents-4)",strokeWidth:1.25}),(0,t.jsx)("circle",{cx:"10",cy:"10",fill:"transparent",r:"5",stroke:"var(--accents-4)",strokeDasharray:`calc(${s} * 31.415) 31.415`,strokeWidth:"8.5",transform:"rotate(-90) translate(-20)"})]})})}e.s(["PieChart",()=>n])},7752924,266062,e=>{"use strict";var t=e.i(6468255),a=e.i(9508212),i=e.i(5255926),r=e.i(1344973),n=e.i(5468328),s=e.i(5169576),l=e.i(57106),o=e.i(9668517),c=e.i(4011256),d=e.i(7712782),u=e.i(1878918),h=e.i(5074599),f=e.i(4006531),p=e.i(6493958);let x=e=>t=>"bytes"===e.trim().toLowerCase()?(0,f.sizeFormatter)(t):["$","usd","us dollars","dollars","dollar","us$"].includes(e.trim().toLowerCase())?`$ ${(0,p.countFormatter)(Math.round(100*t)/100,"long")}`:`${(0,p.countFormatter)(Math.round(100*t)/100,"short-precision")} ${e}`;function g(e){return(0,t.jsx)(r.Text,{color:"gray-900",lineHeight:16,size:13,weight:500,children:e.children})}function m(e){var i,n;let s=e.usage.periodValue/(e.usage.planValue??1),l=0===s?0:Math.max(s,.02);return(0,t.jsxs)(a.Stack,{className:"shrink-0",gap:1.5,children:[(0,t.jsx)(a.Stack,{align:"center",direction:"row",gap:1.5,children:(0,t.jsx)(r.Text,{className:"capitalize",color:"gray-900",lineHeight:16,size:13,weight:500,children:e.usage.name})}),(0,t.jsxs)(a.Stack,{className:"items-center gap-1",direction:"row",children:[e.usage.planValue?(0,t.jsx)(u.PieChart,{value:l}):null,(0,t.jsx)(r.Text,{children:(i=e.usage.periodValue,x(e.usage.units)(i))}),e.usage.planValue?(0,t.jsx)(r.Text,{color:"gray-800",children:`/ ${(n=e.usage.planValue,x(e.usage.units)(n))}`}):null]})]})}function v(e){let r=e.resource?.billingDataV2,n=r?.usage?.items;return(0,t.jsxs)(t.Fragment,{children:[e.resource?(0,t.jsx)(y,{resource:e.resource,settingsLink:e.settingsLink,usagePath:e.usagePath}):(0,t.jsx)(t.Fragment,{children:(0,t.jsx)(a.Stack,{className:"shrink-0",gap:1.5,children:(0,t.jsx)(i.Skeleton,{boxHeight:20,height:16,vcenter:!0,width:200})})}),n?.map(e=>(0,t.jsx)(m,{usage:e},`${e.name}_${e.units}`))]})}function y(e){let i=(0,o.useTeamSlug)();if(e.resource.capabilities?.billable===!1)return(0,t.jsx)(t.Fragment,{});let u=e.resource.billingPlan,f=e.resource.billingDataV2,p=f?.credit,x=f?.spending;if(p||u?.type==="prepayment")return(0,t.jsx)(t.Fragment,{children:e.resource.product.integration.supportsInstallationBillingPlans?(0,t.jsxs)(a.Stack,{className:"shrink-0",gap:1.5,children:[(0,t.jsx)(g,{children:"Balance"}),(0,t.jsxs)(l.Link,{href:(0,c.getInstallationDetailsLink)({teamSlug:i??"",configurationId:e.resource.product.integrationConfigurationId,integrationSlug:e.resource.product.integration.slug,isMarketplace:!0,path:"usage"}),children:["See ",(0,h.getInstallationTitleBySlug)(e.resource.product)]})]}):(0,t.jsxs)(a.Stack,{className:"shrink-0",gap:1.5,children:[(0,t.jsxs)(a.Stack,{direction:"row",gap:1.5,children:[(0,t.jsx)(g,{children:"Balance"}),(0,t.jsx)(n.Tooltip,{text:(0,t.jsxs)(r.Text,{children:["See"," ",(0,t.jsx)(l.Link,{href:e.usagePath,underline:!0,children:"Usage"})," ","for details"]}),children:(0,t.jsx)(s.Information,{color:"gray-900"})})]}),p?(0,t.jsxs)(a.Stack,{direction:"row",gap:.5,children:[(0,t.jsxs)(r.Text,{className:"inline",children:[(0,c.formatMarketplaceBillingTotal)(p.balanceTotalCent/100),(0,t.jsxs)(r.Text,{className:"inline",color:"gray-800",children:[" ","as of"," ",(0,d.ago)(Date.now()-new Date(p.timestamp).getTime())]})]}),(0,t.jsx)(r.Text,{color:"gray-800",children:" / "}),(0,t.jsx)(l.Link,{href:`${e.settingsLink}#credit-balance`,children:(0,t.jsx)("div",{className:"rounded-md border border-solid border-gray-500 px-[6px] py-0 text-sm ",children:(0,t.jsx)(r.Text,{as:"span",color:"gray-900",children:"Add funds"})})})]}):(0,t.jsx)(l.Link,{href:`${e.settingsLink}#credit-balance`,children:(0,t.jsx)("div",{className:"rounded-md border border-solid border-gray-500 px-[6px] py-0 text-sm ",children:(0,t.jsx)(r.Text,{as:"span",color:"gray-900",children:"Add funds"})})})]})});return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsxs)(a.Stack,{className:"shrink-0",gap:1.5,children:[(0,t.jsx)(g,{children:"Plan"}),(0,t.jsx)(r.Text,{children:e.resource.billingPlan?.name})]}),e.resource.product.integration.supportsInstallationBillingPlans?(0,t.jsx)(t.Fragment,{children:m()}):(0,t.jsxs)(t.Fragment,{children:[(0,t.jsxs)(a.Stack,{className:"shrink-0",gap:1.5,children:[(0,t.jsx)(g,{children:"Current Period"}),(0,t.jsx)(r.Text,{children:x?(0,c.formatMarketplacePeriod)(x.periodStart,x.periodEnd):"-"})]}),(0,t.jsxs)(a.Stack,{className:"shrink-0",gap:1.5,children:[m(),(0,t.jsx)(r.Text,{children:x?(0,c.formatMarketplaceBillingTotal)(x.totalCent/100):"-"})]})]})]});function m(){return e.resource.product.integration.supportsInstallationBillingPlans?(0,t.jsxs)(a.Stack,{className:"shrink-0",gap:1.5,children:[(0,t.jsx)(g,{children:"Period Total"}),(0,t.jsxs)(l.Link,{className:"leading-[20px]",href:(0,c.getInstallationDetailsLink)({teamSlug:i??"",configurationId:e.resource.product.integrationConfigurationId,integrationSlug:e.resource.product.integration.slug,isMarketplace:!0,path:"settings"}),children:["See ",(0,h.getInstallationTitleBySlug)(e.resource.product)]})]}):(0,t.jsx)(t.Fragment,{children:(0,t.jsxs)(a.Stack,{direction:"row",gap:1.5,children:[(0,t.jsx)(g,{children:"Period Total"}),(0,t.jsx)(n.Tooltip,{text:x?(0,t.jsx)(r.Text,{children:(0,t.jsx)(l.Link,{className:"leading-[20px]",href:e.usagePath,children:"See Usage for details"})}):(0,t.jsx)(r.Text,{children:"No data available yet for the current period"}),children:(0,t.jsx)(s.Information,{color:"gray-900"})})]})})}}e.s(["formatUsageValueByUnit",0,x],266062),e.s(["ResourceUsageMetrics",()=>v],7752924)},7619856,e=>{"use strict";var t=Math.PI,a=2*t,i=a-1e-6;function r(){this._x0=this._y0=this._x1=this._y1=null,this._=""}function n(){return new r}r.prototype=n.prototype={constructor:r,moveTo:function(e,t){this._+="M"+(this._x0=this._x1=+e)+","+(this._y0=this._y1=+t)},closePath:function(){null!==this._x1&&(this._x1=this._x0,this._y1=this._y0,this._+="Z")},lineTo:function(e,t){this._+="L"+(this._x1=+e)+","+(this._y1=+t)},quadraticCurveTo:function(e,t,a,i){this._+="Q"+ +e+","+ +t+","+(this._x1=+a)+","+(this._y1=+i)},bezierCurveTo:function(e,t,a,i,r,n){this._+="C"+ +e+","+ +t+","+ +a+","+ +i+","+(this._x1=+r)+","+(this._y1=+n)},arcTo:function(e,a,i,r,n){e*=1,a*=1,i*=1,r*=1,n*=1;var s=this._x1,l=this._y1,o=i-e,c=r-a,d=s-e,u=l-a,h=d*d+u*u;if(n<0)throw Error("negative radius: "+n);if(null===this._x1)this._+="M"+(this._x1=e)+","+(this._y1=a);else if(h>1e-6)if(Math.abs(u*o-c*d)>1e-6&&n){var f=i-s,p=r-l,x=o*o+c*c,g=Math.sqrt(x),m=Math.sqrt(h),v=n*Math.tan((t-Math.acos((x+h-(f*f+p*p))/(2*g*m)))/2),y=v/m,j=v/g;Math.abs(y-1)>1e-6&&(this._+="L"+(e+y*d)+","+(a+y*u)),this._+="A"+n+","+n+",0,0,"+ +(u*f>d*p)+","+(this._x1=e+j*o)+","+(this._y1=a+j*c)}else this._+="L"+(this._x1=e)+","+(this._y1=a)},arc:function(e,r,n,s,l,o){e*=1,r*=1,n*=1,o=!!o;var c=n*Math.cos(s),d=n*Math.sin(s),u=e+c,h=r+d,f=1^o,p=o?s-l:l-s;if(n<0)throw Error("negative radius: "+n);null===this._x1?this._+="M"+u+","+h:(Math.abs(this._x1-u)>1e-6||Math.abs(this._y1-h)>1e-6)&&(this._+="L"+u+","+h),n&&(p<0&&(p=p%a+a),p>i?this._+="A"+n+","+n+",0,1,"+f+","+(e-c)+","+(r-d)+"A"+n+","+n+",0,1,"+f+","+(this._x1=u)+","+(this._y1=h):p>1e-6&&(this._+="A"+n+","+n+",0,"+ +(p>=t)+","+f+","+(this._x1=e+n*Math.cos(l))+","+(this._y1=r+n*Math.sin(l))))},rect:function(e,t,a,i){this._+="M"+(this._x0=this._x1=+e)+","+(this._y0=this._y1=+t)+"h"+ +a+"v"+ +i+"h"+-a+"Z"},toString:function(){return this._}},e.s(["path",0,n],7619856)},7828106,e=>{"use strict";e.s(["default",0,function(e){return function(){return e}}])},4354043,e=>{"use strict";function t(e){return e[0]}function a(e){return e[1]}e.s(["x",()=>t,"y",()=>a])},8054867,e=>{"use strict";var t=Array.prototype.slice;e.s(["slice",()=>t])},4322153,e=>{"use strict";var t=e.i(6696646),a=e.i(8264458),i=["from","to","fill","className","innerRef"];function r(){return(r=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var i in a)Object.prototype.hasOwnProperty.call(a,i)&&(e[i]=a[i])}return e}).apply(this,arguments)}function n(e){var n=e.from,s=void 0===n?{x:0,y:0}:n,l=e.to,o=void 0===l?{x:1,y:1}:l,c=e.fill,d=e.className,u=e.innerRef,h=function(e,t){if(null==e)return{};var a,i,r={},n=Object.keys(e);for(i=0;i<n.length;i++)a=n[i],t.indexOf(a)>=0||(r[a]=e[a]);return r}(e,i),f=s.x===o.x||s.y===o.y;return t.default.createElement("line",r({ref:u,className:(0,a.default)("visx-line",d),x1:s.x,y1:s.y,x2:o.x,y2:o.y,fill:void 0===c?"transparent":c,shapeRendering:f?"crispEdges":"auto"},h))}e.s(["Line",()=>n],4322153)},1699947,3030299,2620110,e=>{"use strict";function t(e,t){e(t)}e.s(["default",()=>t],1699947);var a=e.i(6469467),i=e.i(7448903),r=e.i(2004754),n=e.i(1219720),s=e.i(9824722),l={ascending:a.stackOrderAscending,descending:i.stackOrderDescending,insideout:r.stackOrderInsideOut,none:n.stackOrderNone,reverse:s.stackOrderReverse};function o(e){return e&&l[e]||l.none}Object.keys(l),e.s(["default",()=>o],3030299);var c=e.i(1089043),d=e.i(1360520),u=e.i(3729955),h=e.i(9422769),f=e.i(5141407),p={expand:c.stackOffsetExpand,diverging:d.stackOffsetDiverging,none:u.stackOffsetNone,silhouette:h.stackOffsetSilhouette,wiggle:f.stackOffsetWiggle};function x(e){return e&&p[e]||p.none}Object.keys(p),e.s(["default",()=>x],2620110)},8116461,e=>{"use strict";e.i(5863530);var t=e.i(337747),a=e.i(6854195);e.i(8975432),e.i(3455935),e.i(1377254);var i=e.i(1699947);function r(e){var a=void 0===e?{}:e,r=a.x,n=a.x0,s=a.x1,l=a.y,o=a.y0,c=a.y1,d=a.defined,u=a.curve,h=(0,t.area)();return r&&(0,i.default)(h.x,r),n&&(0,i.default)(h.x0,n),s&&(0,i.default)(h.x1,s),l&&(0,i.default)(h.y,l),o&&(0,i.default)(h.y0,o),c&&(0,i.default)(h.y1,c),d&&h.defined(d),u&&h.curve(u),h}function n(e){var t=void 0===e?{}:e,r=t.x,n=t.y,s=t.defined,l=t.curve,o=(0,a.line)();return r&&(0,i.default)(o.x,r),n&&(0,i.default)(o.y,n),s&&o.defined(s),l&&o.curve(l),o}e.i(3030299),e.i(2620110),e.s(["area",()=>r,"line",()=>n])},9275907,e=>{"use strict";var t=e.i(6696646),a=e.i(8264458),i=e.i(8116461),r=["children","data","x","y","fill","className","curve","innerRef","defined"];function n(){return(n=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var i in a)Object.prototype.hasOwnProperty.call(a,i)&&(e[i]=a[i])}return e}).apply(this,arguments)}function s(e){var s=e.children,l=e.data,o=e.x,c=e.y,d=e.fill,u=e.className,h=e.curve,f=e.innerRef,p=e.defined,x=function(e,t){if(null==e)return{};var a,i,r={},n=Object.keys(e);for(i=0;i<n.length;i++)a=n[i],t.indexOf(a)>=0||(r[a]=e[a]);return r}(e,r),g=(0,i.line)({x:o,y:c,defined:void 0===p?function(){return!0}:p,curve:h});return s?t.default.createElement(t.default.Fragment,null,s({path:g})):t.default.createElement("path",n({ref:f,className:(0,a.default)("visx-linepath",u),d:g(void 0===l?[]:l)||"",fill:void 0===d?"transparent":d,strokeLinecap:"round"},x))}e.s(["LinePath",()=>s],9275907)},1764746,e=>{"use strict";var t=e.i(6696646),a=["tooltipOpen"];function i(){return(i=Object.assign.bind()).apply(this,arguments)}function r(e){var r=(0,t.useState)(i({tooltipOpen:!1},e)),n=r[0],s=r[1],l=(0,t.useCallback)(function(e){return s("function"==typeof e?function(t){t.tooltipOpen;var r=function(e,t){if(null==e)return{};var a,i,r={},n=Object.keys(e);for(i=0;i<n.length;i++)a=n[i],t.indexOf(a)>=0||(r[a]=e[a]);return r}(t,a);return i({},e(r),{tooltipOpen:!0})}:{tooltipOpen:!0,tooltipLeft:e.tooltipLeft,tooltipTop:e.tooltipTop,tooltipData:e.tooltipData})},[s]),o=(0,t.useCallback)(function(){return s({tooltipOpen:!1,tooltipLeft:void 0,tooltipTop:void 0,tooltipData:void 0})},[s]);return{tooltipOpen:n.tooltipOpen,tooltipLeft:n.tooltipLeft,tooltipTop:n.tooltipTop,tooltipData:n.tooltipData,updateTooltip:s,showTooltip:l,hideTooltip:o}}e.s(["useTooltip",()=>r],1764746)},3851902,e=>{"use strict";var t=e.i(1230902),a=e.i(9107401),i=e.i(9598279),r=e.i(1736425),n=e.i(4495794),s=e.i(4405391);function l(e,s,l,o){let c,d=new Date(e),u=!l||d>=l?d:l;switch(s){case"hour":return c=(0,a.addHours)(d,1),c=!o||c<=o?c:o,(0,t.format)(u,"MMM d HH:mm")+" – "+(0,t.format)(c,"MMM d HH:mm");case"week":c=(0,r.addWeeks)(d,1),c=!o||c<=o?c:o;break;case"month":c=(0,n.addMonths)(d,1),c=!o||c<=o?c:o;break;default:c=(0,i.addDays)(d,1),c=!o||c<=o?c:o}return c||=(0,i.addDays)(d,1),(0,t.format)(u,"MMM d, y HH:mm")+" – "+(0,t.format)(c,"MMM d, y HH:mm")}e.s(["formatDate",0,(e,a)=>{let i=new Date(e);switch(a){case"hour":return(0,t.format)(i,"MMM d HH:mm");case"week":default:return(0,t.format)(i,"MMM d");case"month":return(0,t.format)(i,"MMM d, y")}},"formatFullDateWithRange",()=>l,"formatPercentage",0,(e,t)=>{if(0===t||!(0,s.isNumber)(e))return"0%";let a=e/t*100;return a.toFixed(+(a%1!=0))+"%"}])}]);

//# sourceMappingURL=db540dfcd7c7ab3b.js.map
//# debugId=d659af8a-1e45-5079-8ec1-c5125c410baa
