
!function(){try{var e="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:{},n=(new e.Error).stack;n&&(e._sentryDebugIds=e._sentryDebugIds||{},e._sentryDebugIds[n]="041bdee9-cc5c-5e2e-a021-25f2e5fd8f5a")}catch(e){}}();
(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,6459358,e=>{"use strict";var t=e.i(4439612),r=(0,t.createServerReference)("60d5b90c684eafd417a9e9047986dc9d4d02c0ae72",t.callServer,void 0,t.findSourceMapURL,"cancelRun");e.s(["cancelRun",()=>r])},4329866,5638944,4183286,4252548,4456514,850149,963298,e=>{"use strict";function t(e,t){if("string"!=typeof t)return null;let[r,a,...n]=t.split("//");return r===e&&a&&0!==n.length?{shortName:n.at(-1)??"",path:a,functionName:n.join("//")}:null}function r(e){return t("workflow",e)}function a(e){return t("step",e)}e.s(["parseStepName",()=>a,"parseWorkflowName",()=>r],4329866);var n=e.i(3007284),s=e.i(9167245);function i(){for(var e=arguments.length,t=Array(e),r=0;r<e;r++)t[r]=arguments[r];return(0,s.twMerge)((0,n.clsx)(t))}function o(e,t,r){return r?`Page ${e} of ${t}+`:`Page ${e} of ${t}`}e.s(["cn",()=>i,"getPaginationDisplay",()=>o],5638944);var l=e.i(4439612),d=(0,l.createServerReference)("70e64106c1a917ef9baa67000c4b074f64c95c0074",l.callServer,void 0,l.findSourceMapURL,"fetchEvents");e.s(["fetchEvents",()=>d],4183286);var c=(0,l.createServerReference)("701935e278faddef65819dd14c18ba56f7292b2999",l.callServer,void 0,l.findSourceMapURL,"fetchEventsByCorrelationId");e.s(["fetchEventsByCorrelationId",()=>c],4252548);var u=(0,l.createServerReference)("70c951979462aaff5c91cba7286a4d4b5826681943",l.callServer,void 0,l.findSourceMapURL,"fetchHook");e.s(["fetchHook",()=>u],4456514);var m=(0,l.createServerReference)("602f3c9afaa4b2250dcc48d08a43bd8cbc108c880d",l.callServer,void 0,l.findSourceMapURL,"fetchHooks");e.s(["fetchHooks",()=>m],850149);var f=(0,l.createServerReference)("7025d3bbcb6ce63e429e9c8e485bdb0287c1da0ebe",l.callServer,void 0,l.findSourceMapURL,"fetchRun");e.s(["fetchRun",()=>f],963298)},5363369,e=>{"use strict";var t=e.i(4439612),r=(0,t.createServerReference)("604f637f54baa2a33770d9619c401b1a21e129388f",t.callServer,void 0,t.findSourceMapURL,"fetchRuns");e.s(["fetchRuns",()=>r])},9633219,e=>{e.v({alignEnd:"trace-viewer-module__fvrNma__alignEnd",alignStart:"trace-viewer-module__fvrNma__alignStart",ancestorDuration:"trace-viewer-module__fvrNma__ancestorDuration",ancestorLine:"trace-viewer-module__fvrNma__ancestorLine",ancestorLineContainer:"trace-viewer-module__fvrNma__ancestorLineContainer",ancestorName:"trace-viewer-module__fvrNma__ancestorName",ancestorNode:"trace-viewer-module__fvrNma__ancestorNode",ancestorText:"trace-viewer-module__fvrNma__ancestorText",buttonLink:"trace-viewer-module__fvrNma__buttonLink",childRow:"trace-viewer-module__fvrNma__childRow",collapsed:"trace-viewer-module__fvrNma__collapsed",color0:"trace-viewer-module__fvrNma__color0",color1:"trace-viewer-module__fvrNma__color1",color2:"trace-viewer-module__fvrNma__color2",color3:"trace-viewer-module__fvrNma__color3",color4:"trace-viewer-module__fvrNma__color4",colorHighlight:"trace-viewer-module__fvrNma__colorHighlight",colorVercel:"trace-viewer-module__fvrNma__colorVercel",cursorMarker:"trace-viewer-module__fvrNma__cursorMarker",cursorMarkerContainer:"trace-viewer-module__fvrNma__cursorMarkerContainer",cursorMarkerLabel:"trace-viewer-module__fvrNma__cursorMarkerLabel",cursorMarkerLabelContainer:"trace-viewer-module__fvrNma__cursorMarkerLabelContainer",cursorMarkerStickyParent:"trace-viewer-module__fvrNma__cursorMarkerStickyParent",cursorSelection:"trace-viewer-module__fvrNma__cursorSelection",customEventColor:"trace-viewer-module__fvrNma__customEventColor",detailGroup:"trace-viewer-module__fvrNma__detailGroup",detailHeading:"trace-viewer-module__fvrNma__detailHeading",detailHeadingIcon:"trace-viewer-module__fvrNma__detailHeadingIcon",divider:"trace-viewer-module__fvrNma__divider",eventDefault:"trace-viewer-module__fvrNma__eventDefault",eventDiamond:"trace-viewer-module__fvrNma__eventDiamond",eventFailed:"trace-viewer-module__fvrNma__eventFailed",eventHook:"trace-viewer-module__fvrNma__eventHook",eventMarker:"trace-viewer-module__fvrNma__eventMarker",eventMarkers:"trace-viewer-module__fvrNma__eventMarkers",eventMarkersContainer:"trace-viewer-module__fvrNma__eventMarkersContainer",eventName:"trace-viewer-module__fvrNma__eventName",eventRetrying:"trace-viewer-module__fvrNma__eventRetrying",eventTimestamp:"trace-viewer-module__fvrNma__eventTimestamp",hidden:"trace-viewer-module__fvrNma__hidden",hoverInfo:"trace-viewer-module__fvrNma__hoverInfo",huge:"trace-viewer-module__fvrNma__huge",inert:"trace-viewer-module__fvrNma__inert",infraSpanDescription:"trace-viewer-module__fvrNma__infraSpanDescription",mapCanvas:"trace-viewer-module__fvrNma__mapCanvas",mapContainer:"trace-viewer-module__fvrNma__mapContainer",mapThumb:"trace-viewer-module__fvrNma__mapThumb",marker:"trace-viewer-module__fvrNma__marker",markerLabel:"trace-viewer-module__fvrNma__markerLabel",markers:"trace-viewer-module__fvrNma__markers",markersContainer:"trace-viewer-module__fvrNma__markersContainer",mobile:"trace-viewer-module__fvrNma__mobile",notch:"trace-viewer-module__fvrNma__notch",note:"trace-viewer-module__fvrNma__note",searchBar:"trace-viewer-module__fvrNma__searchBar",searchInput:"trace-viewer-module__fvrNma__searchInput",searchInputLabel:"trace-viewer-module__fvrNma__searchInputLabel",searchInputPrefix:"trace-viewer-module__fvrNma__searchInputPrefix",selected:"trace-viewer-module__fvrNma__selected",skeleton:"trace-viewer-module__fvrNma__skeleton",skeletonRounded:"trace-viewer-module__fvrNma__skeletonRounded",small:"trace-viewer-module__fvrNma__small","span-skeleton":"trace-viewer-module__fvrNma__span-skeleton",spanCancelled:"trace-viewer-module__fvrNma__spanCancelled",spanCompleted:"trace-viewer-module__fvrNma__spanCompleted",spanDetailPanel:"trace-viewer-module__fvrNma__spanDetailPanel",spanDetailPanelAttribute:"trace-viewer-module__fvrNma__spanDetailPanelAttribute",spanDetailPanelAttributeKey:"trace-viewer-module__fvrNma__spanDetailPanelAttributeKey",spanDetailPanelAttributeValue:"trace-viewer-module__fvrNma__spanDetailPanelAttributeValue",spanDetailPanelBody:"trace-viewer-module__fvrNma__spanDetailPanelBody",spanDetailPanelClose:"trace-viewer-module__fvrNma__spanDetailPanelClose",spanDetailPanelCloseVerticalRule:"trace-viewer-module__fvrNma__spanDetailPanelCloseVerticalRule",spanDetailPanelCorner:"trace-viewer-module__fvrNma__spanDetailPanelCorner",spanDetailPanelCornerInner:"trace-viewer-module__fvrNma__spanDetailPanelCornerInner",spanDetailPanelDuration:"trace-viewer-module__fvrNma__spanDetailPanelDuration",spanDetailPanelName:"trace-viewer-module__fvrNma__spanDetailPanelName",spanDetailPanelQuickLink:"trace-viewer-module__fvrNma__spanDetailPanelQuickLink",spanDetailPanelQuickLinkLabel:"trace-viewer-module__fvrNma__spanDetailPanelQuickLinkLabel",spanDetailPanelResizer:"trace-viewer-module__fvrNma__spanDetailPanelResizer",spanDetailPanelTop:"trace-viewer-module__fvrNma__spanDetailPanelTop",spanDetailPanelTopInfo:"trace-viewer-module__fvrNma__spanDetailPanelTopInfo",spanDetailPanelTraceViewer:"trace-viewer-module__fvrNma__spanDetailPanelTraceViewer",spanDetailPanelTruncatedHeading:"trace-viewer-module__fvrNma__spanDetailPanelTruncatedHeading",spanDuration:"trace-viewer-module__fvrNma__spanDuration",spanFailed:"trace-viewer-module__fvrNma__spanFailed",spanHook:"trace-viewer-module__fvrNma__spanHook",spanName:"trace-viewer-module__fvrNma__spanName",spanNameDetailPanel:"trace-viewer-module__fvrNma__spanNameDetailPanel",spanNode:"trace-viewer-module__fvrNma__spanNode",spanNodeEvent:"trace-viewer-module__fvrNma__spanNodeEvent",spanPaused:"trace-viewer-module__fvrNma__spanPaused",spanPending:"trace-viewer-module__fvrNma__spanPending",spanPendingStriped:"trace-viewer-module__fvrNma__spanPendingStriped",spanRunning:"trace-viewer-module__fvrNma__spanRunning",spanSleep:"trace-viewer-module__fvrNma__spanSleep",spanSpacer:"trace-viewer-module__fvrNma__spanSpacer",timeline:"trace-viewer-module__fvrNma__timeline",traceNode:"trace-viewer-module__fvrNma__traceNode",traceViewer:"trace-viewer-module__fvrNma__traceViewer",traceViewerContent:"trace-viewer-module__fvrNma__traceViewerContent",unlit:"trace-viewer-module__fvrNma__unlit",xHover:"trace-viewer-module__fvrNma__xHover","zoom-buttons-fade-in":"trace-viewer-module__fvrNma__zoom-buttons-fade-in",zoomButton:"trace-viewer-module__fvrNma__zoomButton",zoomButtonGroup:"trace-viewer-module__fvrNma__zoomButtonGroup",zoomButtonTraceViewer:"trace-viewer-module__fvrNma__zoomButtonTraceViewer"})},4378851,e=>{e.v(e.b(["static/chunks/cd68cb6cb83385f5.js","static/chunks/turbopack-f1f00debc621042f.js"]))},4039354,1728812,7534663,e=>{"use strict";let t;var r=e.i(4329866),a=e.i(6696646),n=e.i(5638944);e.i(6459358);var s=e.i(4183286),i=e.i(4252548),o=e.i(4456514),l=e.i(850149),d=e.i(963298);e.i(5363369);var c=e.i(4439612),u=(0,c.createServerReference)("78b8f58cc7be6757d735f8b7829eb7286ab7aae807",c.callServer,void 0,c.findSourceMapURL,"fetchStep"),m=(0,c.createServerReference)("70f42407d99c713adbaf4f9095640e60ba556b13e2",c.callServer,void 0,c.findSourceMapURL,"fetchSteps");c.callServer,c.findSourceMapURL;var f=(0,c.createServerReference)("602c23b6250a55bc33244b3d38aa85582745558242",c.callServer,void 0,c.findSourceMapURL,"recreateRun");function h(e){if(!e.success){var t;if(!e.error)throw new p("Unknown error occurred",{layer:"client"});throw new p((t=e.error).message,{cause:t.cause,request:t.request,layer:t.layer})}return e.data}class p extends Error{request;layer;constructor(e,t){super(e,{cause:t?.cause}),this.name="WorkflowAPIError",this.request=t?.request,this.layer=t?.layer,t?.cause instanceof Error&&(this.stack=`${this.stack}
Caused by: ${t.cause.stack}`)}}function v(e,t){let{runId:r,limit:s=10,sortOrder:i="desc"}=t,[o,d]=(0,a.useState)(void 0),[c,u]=(0,a.useState)(!1),[m,f]=(0,a.useState)(0),[v,g]=(0,a.useState)([void 0]),[w,b]=(0,a.useState)(1),[y,_]=(0,a.useState)(new Map([[0,{data:null,isLoading:!0,error:null}]])),x=(0,a.useRef)(new Map),k=(0,a.useCallback)(async function(t,a){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],o=a??"initial";if(_(e=>{let r=new Map(e);return r.set(t,{data:e.get(t)?.data??null,isLoading:!0,error:null}),r}),!n&&x.current.has(o)){let e=x.current.get(o);if(e){_(r=>{let a=new Map(r);return a.set(t,{data:e.data,isLoading:!1,error:null}),a}),d(e.cursor),u(e.hasMore);return}}try{let n=await (0,l.fetchHooks)(e,{runId:r,cursor:a,sortOrder:i,limit:s}),c=h(n);x.current.set(o,{data:c.data,cursor:c.cursor,hasMore:c.hasMore}),_(e=>{let r=new Map(e);return r.set(t,{data:c.data,isLoading:!1,error:null}),r}),d(c.cursor),u(c.hasMore)}catch(r){let e=r instanceof p?r:r instanceof Error?new p(r.message,{cause:r,layer:"client"}):new p(String(r),{layer:"client"});_(r=>{let a=new Map(r);return a.set(t,{data:r.get(t)?.data??null,isLoading:!1,error:e}),a})}},[e,r,s,i]);(0,a.useEffect)(()=>{k(0,void 0)},[k]);let N=(0,a.useCallback)(()=>{if(c&&o){let e=m+1;g(e=>[...e,o]),f(e),b(t=>Math.max(t,e+1)),y.has(e)||_(t=>{let r=new Map(t);return r.set(e,{data:null,isLoading:!0,error:null}),r}),k(e,o)}},[c,o,k,m,y]),j=(0,a.useCallback)(()=>{if(m>0){let e=m-1,t=v[e];f(e),k(e,t)}},[m,v,k]),S=(0,a.useCallback)(()=>{x.current.clear(),_(new Map([[0,{data:null,isLoading:!0,error:null}]])),f(0),g([void 0]),b(1),k(0,void 0,!0)},[k]),E=y.get(m)??{data:null,isLoading:!0,error:null},T=Array.from(y.values()).find(e=>e.error)?.error??null,R=Array.from(y.values()).some(e=>e.isLoading),L=c?m+2:m+1,C=m+1,M=(0,n.getPaginationDisplay)(C,w,C===w&&c);return{data:E,allData:Array.from(y.values()),error:T,isLoading:R,currentPage:m,totalPages:L,nextPage:N,previousPage:j,hasNextPage:c,hasPreviousPage:m>0,reload:S,pageInfo:M}}async function g(e,t){let r,a=[];for(;;){let n=h(await m(e,t,{cursor:r,sortOrder:"asc",limit:100}));if(a=[...a,...n.data],!n.hasMore||!n.cursor||a.length>=1e3)break;r=n.cursor}return{data:a,cursor:r}}async function w(e,t){let r,a=[];for(;;){let n=h(await (0,l.fetchHooks)(e,{runId:t,cursor:r,sortOrder:"asc",limit:100}));if(a=[...a,...n.data],!n.hasMore||!n.cursor||a.length>=1e3)break;r=n.cursor}return{data:a,cursor:r}}async function b(e,t){let r,a=[];for(;;){let n=h(await (0,s.fetchEvents)(e,t,{cursor:r,sortOrder:"asc",limit:1e3}));if(a=[...a,...n.data],!n.hasMore||!n.cursor||a.length>=1e3)break;r=n.cursor}return{data:a,cursor:r}}function y(e,t){let r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},{live:n=!1}=r,[i,o]=(0,a.useState)(null),[c,u]=(0,a.useState)([]),[f,v]=(0,a.useState)([]),[y,_]=(0,a.useState)([]),[x,k]=(0,a.useState)(!0),[N,j]=(0,a.useState)(null),[S,E]=(0,a.useState)(),[T,R]=(0,a.useState)(),[L,C]=(0,a.useState)(),M=(0,a.useRef)(!1),[D,I]=(0,a.useState)(!1),A=(0,a.useCallback)(async()=>{if(!M.current){M.current=!0,k(!0),j(null);try{let r=await (0,d.fetchRun)(e,t),a=h(r);o(a);let n=await g(e,t);u(n.data),E(n.cursor);let s=await w(e,t);v(s.data),R(s.cursor);let i=await b(e,t);_(i.data),C(i.cursor)}catch(e){j(e instanceof p?e:e instanceof Error?new p(e.message,{cause:e,layer:"client"}):new p(String(e),{layer:"client"}))}finally{k(!1),M.current=!1,I(!0)}}},[e,t]),P=(0,a.useCallback)((e,t)=>Array.from(new Map([...e,...t].map(e=>[e.stepId,e])).values()),[]),H=(0,a.useCallback)((e,t)=>Array.from(new Map([...e,...t].map(e=>[e.hookId,e])).values()),[]),F=(0,a.useCallback)((e,t)=>Array.from(new Map([...e,...t].map(e=>[e.eventId,e])).values()),[]),V=(0,a.useCallback)(async()=>!i?.completedAt&&(o(h(await (0,d.fetchRun)(e,t))),!0),[e,t,i?.completedAt]),O=(0,a.useCallback)(async()=>{let r=h(await m(e,t,{cursor:S,sortOrder:"asc",limit:5}));return r.data.length>0&&(u(e=>P(e,r.data)),r.cursor&&E(r.cursor),!0)},[e,t,S,P]),W=(0,a.useCallback)(async()=>{let r=h(await (0,l.fetchHooks)(e,{runId:t,cursor:T,sortOrder:"asc",limit:5}));return r.data.length>0&&(v(e=>H(e,r.data)),r.cursor&&R(r.cursor),!0)},[e,t,T,H]),$=(0,a.useCallback)(async()=>{let r=h(await (0,s.fetchEvents)(e,t,{cursor:L,sortOrder:"asc",limit:5}));return r.data.length>0&&(_(e=>F(e,r.data)),r.cursor&&C(r.cursor),!0)},[e,t,L,F]),z=(0,a.useCallback)(async()=>{if(M.current||!D)return{foundNewItems:!1};let e=!1;try{let[t,r,a,n]=await Promise.all([V(),O(),W(),$()]);e=r||a||n}catch(e){console.error("Update error:",e)}return{foundNewItems:e}},[O,W,$,D,V]);return(0,a.useEffect)(()=>{A()},[A]),(0,a.useEffect)(()=>{if(!n||!D||i?.completedAt)return;let e=setInterval(()=>{z()},5e3);return()=>clearInterval(e)},[n,D,z,i?.completedAt]),{run:i??{},steps:c,hooks:f,events:y,loading:x,error:N,update:z}}async function _(e,t,r){let a,n,s=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},i=s.resolveData??"all";if("run"===t)n=(a=h(await (0,d.fetchRun)(e,r,i))).runId;else if("step"===t){let{runId:t}=s;if(!t)throw new p("runId is required for step resource",{layer:"client"});n=(a=h(await u(e,t,r,i))).stepId}else if("hook"===t)n=(a=h(await (0,o.fetchHook)(e,r,i))).hookId;else throw new p(`Unknown resource type: ${t}`,{layer:"client"});return{data:a,correlationId:n}}function x(e,t,r){let n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},{refreshInterval:s=0,runId:o}=n,[l,d]=(0,a.useState)(null),[c,u]=(0,a.useState)(!0),[m,f]=(0,a.useState)(null),v=(0,a.useCallback)(async()=>{u(!0),d(null),f(null);try{if("sleep"===t){let t=await (0,i.fetchEventsByCorrelationId)(e,r,{sortOrder:"asc",limit:100,withData:!0}),a=h(t).data.find(e=>"wait_created"===e.eventType);a&&d({waitId:a.correlationId,runId:a.runId,createdAt:a.createdAt,resumeAt:a.eventData.resumeAt});return}let{data:a}=await _(e,t,r,{runId:o});if(d(a),"run"===t)return void u(!1)}catch(e){f(e instanceof p?e:e instanceof Error?new p(e.message,{cause:e,layer:"client"}):new p(String(e),{layer:"client"}))}finally{u(!1)}},[e,t,r,o]);return(0,a.useEffect)(()=>{v()},[v]),(0,a.useEffect)(()=>{if(!s||s<=0)return;let e=setInterval(v,s);return()=>clearInterval(e)},[s,v]),{data:l,loading:c,error:m,refresh:v}}async function k(e,t){try{let r=await f(e,t);return h(r)}catch(e){if(console.error("Error starting run:",e),e instanceof p)throw e;throw new p(e instanceof Error?e.message:"Failed to start run",{cause:e,layer:"client"})}}e.s(["recreateRun",()=>k,"useWorkflowHooks",()=>v,"useWorkflowResourceData",()=>x,"useWorkflowTraceViewerData",()=>y],1728812);var N=e.i(6468255);let j=function(){for(var e=arguments.length,t=Array(e),r=0;r<e;r++)t[r]=arguments[r];return t.filter((e,t,r)=>!!e&&""!==e.trim()&&r.indexOf(e)===t).join(" ").trim()};var S={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};let E=(0,a.forwardRef)((e,t)=>{let{color:r="currentColor",size:n=24,strokeWidth:s=2,absoluteStrokeWidth:i,className:o="",children:l,iconNode:d,...c}=e;return(0,a.createElement)("svg",{ref:t,...S,width:n,height:n,stroke:r,strokeWidth:i?24*Number(s)/Number(n):s,className:j("lucide",o),...c},[...d.map(e=>{let[t,r]=e;return(0,a.createElement)(t,r)}),...Array.isArray(l)?l:[l]])}),T=(e,t)=>{let r=(0,a.forwardRef)((r,n)=>{let{className:s,...i}=r;return(0,a.createElement)(E,{ref:n,iconNode:t,className:j(`lucide-${e.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase()}`,s),...i})});return r.displayName=`${e}`,r},R=T("CircleAlert",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]]),L=T("LoaderCircle",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]]);e.i(7738723);let C=Array(12).fill(0),M=1,D=new class{constructor(){this.subscribe=e=>(this.subscribers.push(e),()=>{let t=this.subscribers.indexOf(e);this.subscribers.splice(t,1)}),this.publish=e=>{this.subscribers.forEach(t=>t(e))},this.addToast=e=>{this.publish(e),this.toasts=[...this.toasts,e]},this.create=e=>{var t;let{message:r,...a}=e,n="number"==typeof(null==e?void 0:e.id)||(null==(t=e.id)?void 0:t.length)>0?e.id:M++,s=this.toasts.find(e=>e.id===n),i=void 0===e.dismissible||e.dismissible;return this.dismissedToasts.has(n)&&this.dismissedToasts.delete(n),s?this.toasts=this.toasts.map(t=>t.id===n?(this.publish({...t,...e,id:n,title:r}),{...t,...e,id:n,dismissible:i,title:r}):t):this.addToast({title:r,...a,dismissible:i,id:n}),n},this.dismiss=e=>(e?(this.dismissedToasts.add(e),requestAnimationFrame(()=>this.subscribers.forEach(t=>t({id:e,dismiss:!0})))):this.toasts.forEach(e=>{this.subscribers.forEach(t=>t({id:e.id,dismiss:!0}))}),e),this.message=(e,t)=>this.create({...t,message:e}),this.error=(e,t)=>this.create({...t,message:e,type:"error"}),this.success=(e,t)=>this.create({...t,type:"success",message:e}),this.info=(e,t)=>this.create({...t,type:"info",message:e}),this.warning=(e,t)=>this.create({...t,type:"warning",message:e}),this.loading=(e,t)=>this.create({...t,type:"loading",message:e}),this.promise=(e,t)=>{let r,n;if(!t)return;void 0!==t.loading&&(n=this.create({...t,promise:e,type:"loading",message:t.loading,description:"function"!=typeof t.description?t.description:void 0}));let s=Promise.resolve(e instanceof Function?e():e),i=void 0!==n,o=s.then(async e=>{if(r=["resolve",e],a.default.isValidElement(e))i=!1,this.create({id:n,type:"default",message:e});else if(I(e)&&!e.ok){i=!1;let r="function"==typeof t.error?await t.error(`HTTP error! status: ${e.status}`):t.error,s="function"==typeof t.description?await t.description(`HTTP error! status: ${e.status}`):t.description,o="object"!=typeof r||a.default.isValidElement(r)?{message:r}:r;this.create({id:n,type:"error",description:s,...o})}else if(e instanceof Error){i=!1;let r="function"==typeof t.error?await t.error(e):t.error,s="function"==typeof t.description?await t.description(e):t.description,o="object"!=typeof r||a.default.isValidElement(r)?{message:r}:r;this.create({id:n,type:"error",description:s,...o})}else if(void 0!==t.success){i=!1;let r="function"==typeof t.success?await t.success(e):t.success,s="function"==typeof t.description?await t.description(e):t.description,o="object"!=typeof r||a.default.isValidElement(r)?{message:r}:r;this.create({id:n,type:"success",description:s,...o})}}).catch(async e=>{if(r=["reject",e],void 0!==t.error){i=!1;let r="function"==typeof t.error?await t.error(e):t.error,s="function"==typeof t.description?await t.description(e):t.description,o="object"!=typeof r||a.default.isValidElement(r)?{message:r}:r;this.create({id:n,type:"error",description:s,...o})}}).finally(()=>{i&&(this.dismiss(n),n=void 0),null==t.finally||t.finally.call(t)}),l=()=>new Promise((e,t)=>o.then(()=>"reject"===r[0]?t(r[1]):e(r[1])).catch(t));return"string"!=typeof n&&"number"!=typeof n?{unwrap:l}:Object.assign(n,{unwrap:l})},this.custom=(e,t)=>{let r=(null==t?void 0:t.id)||M++;return this.create({jsx:e(r),id:r,...t}),r},this.getActiveToasts=()=>this.toasts.filter(e=>!this.dismissedToasts.has(e.id)),this.subscribers=[],this.toasts=[],this.dismissedToasts=new Set}},I=e=>e&&"object"==typeof e&&"ok"in e&&"boolean"==typeof e.ok&&"status"in e&&"number"==typeof e.status,A=Object.assign((e,t)=>{let r=(null==t?void 0:t.id)||M++;return D.addToast({title:e,...t,id:r}),r},{success:D.success,info:D.info,warning:D.warning,error:D.error,custom:D.custom,message:D.message,promise:D.promise,dismiss:D.dismiss,loading:D.loading},{getHistory:()=>D.toasts,getToasts:()=>D.getActiveToasts()});!function(e){if(!e||"undefined"==typeof document)return;let t=document.head||document.getElementsByTagName("head")[0],r=document.createElement("style");r.type="text/css",t.appendChild(r),r.styleSheet?r.styleSheet.cssText=e:r.appendChild(document.createTextNode(e))}("[data-sonner-toaster][dir=ltr],html[dir=ltr]{--toast-icon-margin-start:-3px;--toast-icon-margin-end:4px;--toast-svg-margin-start:-1px;--toast-svg-margin-end:0px;--toast-button-margin-start:auto;--toast-button-margin-end:0;--toast-close-button-start:0;--toast-close-button-end:unset;--toast-close-button-transform:translate(-35%, -35%)}[data-sonner-toaster][dir=rtl],html[dir=rtl]{--toast-icon-margin-start:4px;--toast-icon-margin-end:-3px;--toast-svg-margin-start:0px;--toast-svg-margin-end:-1px;--toast-button-margin-start:0;--toast-button-margin-end:auto;--toast-close-button-start:unset;--toast-close-button-end:0;--toast-close-button-transform:translate(35%, -35%)}[data-sonner-toaster]{position:fixed;width:var(--width);font-family:ui-sans-serif,system-ui,-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Helvetica Neue,Arial,Noto Sans,sans-serif,Apple Color Emoji,Segoe UI Emoji,Segoe UI Symbol,Noto Color Emoji;--gray1:hsl(0, 0%, 99%);--gray2:hsl(0, 0%, 97.3%);--gray3:hsl(0, 0%, 95.1%);--gray4:hsl(0, 0%, 93%);--gray5:hsl(0, 0%, 90.9%);--gray6:hsl(0, 0%, 88.7%);--gray7:hsl(0, 0%, 85.8%);--gray8:hsl(0, 0%, 78%);--gray9:hsl(0, 0%, 56.1%);--gray10:hsl(0, 0%, 52.3%);--gray11:hsl(0, 0%, 43.5%);--gray12:hsl(0, 0%, 9%);--border-radius:8px;box-sizing:border-box;padding:0;margin:0;list-style:none;outline:0;z-index:999999999;transition:transform .4s ease}@media (hover:none) and (pointer:coarse){[data-sonner-toaster][data-lifted=true]{transform:none}}[data-sonner-toaster][data-x-position=right]{right:var(--offset-right)}[data-sonner-toaster][data-x-position=left]{left:var(--offset-left)}[data-sonner-toaster][data-x-position=center]{left:50%;transform:translateX(-50%)}[data-sonner-toaster][data-y-position=top]{top:var(--offset-top)}[data-sonner-toaster][data-y-position=bottom]{bottom:var(--offset-bottom)}[data-sonner-toast]{--y:translateY(100%);--lift-amount:calc(var(--lift) * var(--gap));z-index:var(--z-index);position:absolute;opacity:0;transform:var(--y);touch-action:none;transition:transform .4s,opacity .4s,height .4s,box-shadow .2s;box-sizing:border-box;outline:0;overflow-wrap:anywhere}[data-sonner-toast][data-styled=true]{padding:16px;background:var(--normal-bg);border:1px solid var(--normal-border);color:var(--normal-text);border-radius:var(--border-radius);box-shadow:0 4px 12px rgba(0,0,0,.1);width:var(--width);font-size:13px;display:flex;align-items:center;gap:6px}[data-sonner-toast]:focus-visible{box-shadow:0 4px 12px rgba(0,0,0,.1),0 0 0 2px rgba(0,0,0,.2)}[data-sonner-toast][data-y-position=top]{top:0;--y:translateY(-100%);--lift:1;--lift-amount:calc(1 * var(--gap))}[data-sonner-toast][data-y-position=bottom]{bottom:0;--y:translateY(100%);--lift:-1;--lift-amount:calc(var(--lift) * var(--gap))}[data-sonner-toast][data-styled=true] [data-description]{font-weight:400;line-height:1.4;color:#3f3f3f}[data-rich-colors=true][data-sonner-toast][data-styled=true] [data-description]{color:inherit}[data-sonner-toaster][data-sonner-theme=dark] [data-description]{color:#e8e8e8}[data-sonner-toast][data-styled=true] [data-title]{font-weight:500;line-height:1.5;color:inherit}[data-sonner-toast][data-styled=true] [data-icon]{display:flex;height:16px;width:16px;position:relative;justify-content:flex-start;align-items:center;flex-shrink:0;margin-left:var(--toast-icon-margin-start);margin-right:var(--toast-icon-margin-end)}[data-sonner-toast][data-promise=true] [data-icon]>svg{opacity:0;transform:scale(.8);transform-origin:center;animation:sonner-fade-in .3s ease forwards}[data-sonner-toast][data-styled=true] [data-icon]>*{flex-shrink:0}[data-sonner-toast][data-styled=true] [data-icon] svg{margin-left:var(--toast-svg-margin-start);margin-right:var(--toast-svg-margin-end)}[data-sonner-toast][data-styled=true] [data-content]{display:flex;flex-direction:column;gap:2px}[data-sonner-toast][data-styled=true] [data-button]{border-radius:4px;padding-left:8px;padding-right:8px;height:24px;font-size:12px;color:var(--normal-bg);background:var(--normal-text);margin-left:var(--toast-button-margin-start);margin-right:var(--toast-button-margin-end);border:none;font-weight:500;cursor:pointer;outline:0;display:flex;align-items:center;flex-shrink:0;transition:opacity .4s,box-shadow .2s}[data-sonner-toast][data-styled=true] [data-button]:focus-visible{box-shadow:0 0 0 2px rgba(0,0,0,.4)}[data-sonner-toast][data-styled=true] [data-button]:first-of-type{margin-left:var(--toast-button-margin-start);margin-right:var(--toast-button-margin-end)}[data-sonner-toast][data-styled=true] [data-cancel]{color:var(--normal-text);background:rgba(0,0,0,.08)}[data-sonner-toaster][data-sonner-theme=dark] [data-sonner-toast][data-styled=true] [data-cancel]{background:rgba(255,255,255,.3)}[data-sonner-toast][data-styled=true] [data-close-button]{position:absolute;left:var(--toast-close-button-start);right:var(--toast-close-button-end);top:0;height:20px;width:20px;display:flex;justify-content:center;align-items:center;padding:0;color:var(--gray12);background:var(--normal-bg);border:1px solid var(--gray4);transform:var(--toast-close-button-transform);border-radius:50%;cursor:pointer;z-index:1;transition:opacity .1s,background .2s,border-color .2s}[data-sonner-toast][data-styled=true] [data-close-button]:focus-visible{box-shadow:0 4px 12px rgba(0,0,0,.1),0 0 0 2px rgba(0,0,0,.2)}[data-sonner-toast][data-styled=true] [data-disabled=true]{cursor:not-allowed}[data-sonner-toast][data-styled=true]:hover [data-close-button]:hover{background:var(--gray2);border-color:var(--gray5)}[data-sonner-toast][data-swiping=true]::before{content:'';position:absolute;left:-100%;right:-100%;height:100%;z-index:-1}[data-sonner-toast][data-y-position=top][data-swiping=true]::before{bottom:50%;transform:scaleY(3) translateY(50%)}[data-sonner-toast][data-y-position=bottom][data-swiping=true]::before{top:50%;transform:scaleY(3) translateY(-50%)}[data-sonner-toast][data-swiping=false][data-removed=true]::before{content:'';position:absolute;inset:0;transform:scaleY(2)}[data-sonner-toast][data-expanded=true]::after{content:'';position:absolute;left:0;height:calc(var(--gap) + 1px);bottom:100%;width:100%}[data-sonner-toast][data-mounted=true]{--y:translateY(0);opacity:1}[data-sonner-toast][data-expanded=false][data-front=false]{--scale:var(--toasts-before) * 0.05 + 1;--y:translateY(calc(var(--lift-amount) * var(--toasts-before))) scale(calc(-1 * var(--scale)));height:var(--front-toast-height)}[data-sonner-toast]>*{transition:opacity .4s}[data-sonner-toast][data-x-position=right]{right:0}[data-sonner-toast][data-x-position=left]{left:0}[data-sonner-toast][data-expanded=false][data-front=false][data-styled=true]>*{opacity:0}[data-sonner-toast][data-visible=false]{opacity:0;pointer-events:none}[data-sonner-toast][data-mounted=true][data-expanded=true]{--y:translateY(calc(var(--lift) * var(--offset)));height:var(--initial-height)}[data-sonner-toast][data-removed=true][data-front=true][data-swipe-out=false]{--y:translateY(calc(var(--lift) * -100%));opacity:0}[data-sonner-toast][data-removed=true][data-front=false][data-swipe-out=false][data-expanded=true]{--y:translateY(calc(var(--lift) * var(--offset) + var(--lift) * -100%));opacity:0}[data-sonner-toast][data-removed=true][data-front=false][data-swipe-out=false][data-expanded=false]{--y:translateY(40%);opacity:0;transition:transform .5s,opacity .2s}[data-sonner-toast][data-removed=true][data-front=false]::before{height:calc(var(--initial-height) + 20%)}[data-sonner-toast][data-swiping=true]{transform:var(--y) translateY(var(--swipe-amount-y,0)) translateX(var(--swipe-amount-x,0));transition:none}[data-sonner-toast][data-swiped=true]{user-select:none}[data-sonner-toast][data-swipe-out=true][data-y-position=bottom],[data-sonner-toast][data-swipe-out=true][data-y-position=top]{animation-duration:.2s;animation-timing-function:ease-out;animation-fill-mode:forwards}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=left]{animation-name:swipe-out-left}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=right]{animation-name:swipe-out-right}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=up]{animation-name:swipe-out-up}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=down]{animation-name:swipe-out-down}@keyframes swipe-out-left{from{transform:var(--y) translateX(var(--swipe-amount-x));opacity:1}to{transform:var(--y) translateX(calc(var(--swipe-amount-x) - 100%));opacity:0}}@keyframes swipe-out-right{from{transform:var(--y) translateX(var(--swipe-amount-x));opacity:1}to{transform:var(--y) translateX(calc(var(--swipe-amount-x) + 100%));opacity:0}}@keyframes swipe-out-up{from{transform:var(--y) translateY(var(--swipe-amount-y));opacity:1}to{transform:var(--y) translateY(calc(var(--swipe-amount-y) - 100%));opacity:0}}@keyframes swipe-out-down{from{transform:var(--y) translateY(var(--swipe-amount-y));opacity:1}to{transform:var(--y) translateY(calc(var(--swipe-amount-y) + 100%));opacity:0}}@media (max-width:600px){[data-sonner-toaster]{position:fixed;right:var(--mobile-offset-right);left:var(--mobile-offset-left);width:100%}[data-sonner-toaster][dir=rtl]{left:calc(var(--mobile-offset-left) * -1)}[data-sonner-toaster] [data-sonner-toast]{left:0;right:0;width:calc(100% - var(--mobile-offset-left) * 2)}[data-sonner-toaster][data-x-position=left]{left:var(--mobile-offset-left)}[data-sonner-toaster][data-y-position=bottom]{bottom:var(--mobile-offset-bottom)}[data-sonner-toaster][data-y-position=top]{top:var(--mobile-offset-top)}[data-sonner-toaster][data-x-position=center]{left:var(--mobile-offset-left);right:var(--mobile-offset-right);transform:none}}[data-sonner-toaster][data-sonner-theme=light]{--normal-bg:#fff;--normal-border:var(--gray4);--normal-text:var(--gray12);--success-bg:hsl(143, 85%, 96%);--success-border:hsl(145, 92%, 87%);--success-text:hsl(140, 100%, 27%);--info-bg:hsl(208, 100%, 97%);--info-border:hsl(221, 91%, 93%);--info-text:hsl(210, 92%, 45%);--warning-bg:hsl(49, 100%, 97%);--warning-border:hsl(49, 91%, 84%);--warning-text:hsl(31, 92%, 45%);--error-bg:hsl(359, 100%, 97%);--error-border:hsl(359, 100%, 94%);--error-text:hsl(360, 100%, 45%)}[data-sonner-toaster][data-sonner-theme=light] [data-sonner-toast][data-invert=true]{--normal-bg:#000;--normal-border:hsl(0, 0%, 20%);--normal-text:var(--gray1)}[data-sonner-toaster][data-sonner-theme=dark] [data-sonner-toast][data-invert=true]{--normal-bg:#fff;--normal-border:var(--gray3);--normal-text:var(--gray12)}[data-sonner-toaster][data-sonner-theme=dark]{--normal-bg:#000;--normal-bg-hover:hsl(0, 0%, 12%);--normal-border:hsl(0, 0%, 20%);--normal-border-hover:hsl(0, 0%, 25%);--normal-text:var(--gray1);--success-bg:hsl(150, 100%, 6%);--success-border:hsl(147, 100%, 12%);--success-text:hsl(150, 86%, 65%);--info-bg:hsl(215, 100%, 6%);--info-border:hsl(223, 43%, 17%);--info-text:hsl(216, 87%, 65%);--warning-bg:hsl(64, 100%, 6%);--warning-border:hsl(60, 100%, 9%);--warning-text:hsl(46, 87%, 65%);--error-bg:hsl(358, 76%, 10%);--error-border:hsl(357, 89%, 16%);--error-text:hsl(358, 100%, 81%)}[data-sonner-toaster][data-sonner-theme=dark] [data-sonner-toast] [data-close-button]{background:var(--normal-bg);border-color:var(--normal-border);color:var(--normal-text)}[data-sonner-toaster][data-sonner-theme=dark] [data-sonner-toast] [data-close-button]:hover{background:var(--normal-bg-hover);border-color:var(--normal-border-hover)}[data-rich-colors=true][data-sonner-toast][data-type=success]{background:var(--success-bg);border-color:var(--success-border);color:var(--success-text)}[data-rich-colors=true][data-sonner-toast][data-type=success] [data-close-button]{background:var(--success-bg);border-color:var(--success-border);color:var(--success-text)}[data-rich-colors=true][data-sonner-toast][data-type=info]{background:var(--info-bg);border-color:var(--info-border);color:var(--info-text)}[data-rich-colors=true][data-sonner-toast][data-type=info] [data-close-button]{background:var(--info-bg);border-color:var(--info-border);color:var(--info-text)}[data-rich-colors=true][data-sonner-toast][data-type=warning]{background:var(--warning-bg);border-color:var(--warning-border);color:var(--warning-text)}[data-rich-colors=true][data-sonner-toast][data-type=warning] [data-close-button]{background:var(--warning-bg);border-color:var(--warning-border);color:var(--warning-text)}[data-rich-colors=true][data-sonner-toast][data-type=error]{background:var(--error-bg);border-color:var(--error-border);color:var(--error-text)}[data-rich-colors=true][data-sonner-toast][data-type=error] [data-close-button]{background:var(--error-bg);border-color:var(--error-border);color:var(--error-text)}.sonner-loading-wrapper{--size:16px;height:var(--size);width:var(--size);position:absolute;inset:0;z-index:10}.sonner-loading-wrapper[data-visible=false]{transform-origin:center;animation:sonner-fade-out .2s ease forwards}.sonner-spinner{position:relative;top:50%;left:50%;height:var(--size);width:var(--size)}.sonner-loading-bar{animation:sonner-spin 1.2s linear infinite;background:var(--gray11);border-radius:6px;height:8%;left:-10%;position:absolute;top:-3.9%;width:24%}.sonner-loading-bar:first-child{animation-delay:-1.2s;transform:rotate(.0001deg) translate(146%)}.sonner-loading-bar:nth-child(2){animation-delay:-1.1s;transform:rotate(30deg) translate(146%)}.sonner-loading-bar:nth-child(3){animation-delay:-1s;transform:rotate(60deg) translate(146%)}.sonner-loading-bar:nth-child(4){animation-delay:-.9s;transform:rotate(90deg) translate(146%)}.sonner-loading-bar:nth-child(5){animation-delay:-.8s;transform:rotate(120deg) translate(146%)}.sonner-loading-bar:nth-child(6){animation-delay:-.7s;transform:rotate(150deg) translate(146%)}.sonner-loading-bar:nth-child(7){animation-delay:-.6s;transform:rotate(180deg) translate(146%)}.sonner-loading-bar:nth-child(8){animation-delay:-.5s;transform:rotate(210deg) translate(146%)}.sonner-loading-bar:nth-child(9){animation-delay:-.4s;transform:rotate(240deg) translate(146%)}.sonner-loading-bar:nth-child(10){animation-delay:-.3s;transform:rotate(270deg) translate(146%)}.sonner-loading-bar:nth-child(11){animation-delay:-.2s;transform:rotate(300deg) translate(146%)}.sonner-loading-bar:nth-child(12){animation-delay:-.1s;transform:rotate(330deg) translate(146%)}@keyframes sonner-fade-in{0%{opacity:0;transform:scale(.8)}100%{opacity:1;transform:scale(1)}}@keyframes sonner-fade-out{0%{opacity:1;transform:scale(1)}100%{opacity:0;transform:scale(.8)}}@keyframes sonner-spin{0%{opacity:1}100%{opacity:.15}}@media (prefers-reduced-motion){.sonner-loading-bar,[data-sonner-toast],[data-sonner-toast]>*{transition:none!important;animation:none!important}}.sonner-loader{position:absolute;top:50%;left:50%;transform:translate(-50%,-50%);transform-origin:center;transition:opacity .2s,transform .2s}.sonner-loader[data-visible=false]{opacity:0;transform:scale(.8) translate(-50%,-50%)}");var P=e.i(3007284),H=e.i(7986772);e.s(["ERROR_REVALIDATE_EVENT",()=>3,"FOCUS_EVENT",()=>0,"MUTATE_EVENT",()=>2,"RECONNECT_EVENT",()=>1],6089601);var F=e.i(3359394);let V=new WeakMap,O=()=>{},W=O(),$=Object,z=e=>e===W,B=(e,t)=>({...e,...t}),q={},U={},Y="undefined",X=typeof window!=Y,K=typeof document!=Y,G=X&&"Deno"in window,Q=(e,t)=>{let r=V.get(e);return[()=>!z(t)&&e.get(t)||q,a=>{if(!z(t)){let n=e.get(t);t in U||(U[t]=n),r[5](t,B(n,a),n||q)}},r[6],()=>!z(t)&&t in U?U[t]:!z(t)&&e.get(t)||q]},Z=!0,[J,ee]=X&&window.addEventListener?[window.addEventListener.bind(window),window.removeEventListener.bind(window)]:[O,O],et={initFocus:e=>(K&&document.addEventListener("visibilitychange",e),J("focus",e),()=>{K&&document.removeEventListener("visibilitychange",e),ee("focus",e)}),initReconnect:e=>{let t=()=>{Z=!0,e()},r=()=>{Z=!1};return J("online",t),J("offline",r),()=>{ee("online",t),ee("offline",r)}}},er=!a.default.useId,ea=!X||G,en=ea?a.useEffect:a.useLayoutEffect,es="undefined"!=typeof navigator&&navigator.connection,ei=!ea&&es&&(["slow-2g","2g"].includes(es.effectiveType)||es.saveData),eo=new WeakMap,el=(e,t)=>e===`[object ${t}]`,ed=0,ec=e=>{let t,r,a=typeof e,n=$.prototype.toString.call(e),s=el(n,"Date"),i=el(n,"RegExp"),o=el(n,"Object");if($(e)!==e||s||i)t=s?e.toJSON():"symbol"==a?e.toString():"string"==a?JSON.stringify(e):""+e;else{if(t=eo.get(e))return t;if(t=++ed+"~",eo.set(e,t),Array.isArray(e)){for(r=0,t="@";r<e.length;r++)t+=ec(e[r])+",";eo.set(e,t)}if(o){t="#";let a=$.keys(e).sort();for(;!z(r=a.pop());)z(e[r])||(t+=r+":"+ec(e[r])+",");eo.set(e,t)}}return t},eu=e=>{if("function"==typeof e)try{e=e()}catch(t){e=""}let t=e;return[e="string"==typeof e?e:(Array.isArray(e)?e.length:e)?ec(e):"",t]},em=0,ef=()=>++em;async function eh(){for(var e=arguments.length,t=Array(e),r=0;r<e;r++)t[r]=arguments[r];let[a,n,s,i]=t,o=B({populateCache:!0,throwOnError:!0},"boolean"==typeof i?{revalidate:i}:i||{}),l=o.populateCache,d=o.rollbackOnError,c=o.optimisticData,u=o.throwOnError;if("function"==typeof n){let e=[];for(let t of a.keys())!/^\$(inf|sub)\$/.test(t)&&n(a.get(t)._k)&&e.push(t);return Promise.all(e.map(m))}return m(n);async function m(e){let r,[n]=eu(e);if(!n)return;let[i,m]=Q(a,n),[f,h,p,v]=V.get(a),g=()=>{let t=f[n];return("function"==typeof o.revalidate?o.revalidate(i().data,e):!1!==o.revalidate)&&(delete p[n],delete v[n],t&&t[0])?t[0](2).then(()=>i().data):i().data};if(t.length<3)return g();let w=s,b=!1,y=ef();h[n]=[y,0];let _=!z(c),x=i(),k=x.data,N=x._c,j=z(N)?k:N;if(_&&m({data:c="function"==typeof c?c(j,k):c,_c:j}),"function"==typeof w)try{w=w(j)}catch(e){r=e,b=!0}if(w&&"function"==typeof w.then){let e;if(w=await w.catch(e=>{r=e,b=!0}),y!==h[n][0]){if(b)throw r;return w}b&&_&&(e=r,"function"==typeof d?d(e):!1!==d)&&(l=!0,m({data:j,_c:W}))}if(l&&!b&&("function"==typeof l?m({data:l(w,j),error:W,_c:W}):m({data:w,error:W,_c:W})),h[n][1]=ef(),Promise.resolve(g()).then(()=>{m({_c:W})}),b){if(u)throw r;return}return w}}let ep=(e,t)=>{for(let r in e)e[r][0]&&e[r][0](t)},ev=(e,t)=>{if(!V.has(e)){let r=B(et,t),a=Object.create(null),n=eh.bind(W,e),s=O,i=Object.create(null),o=(e,t)=>{let r=i[e]||[];return i[e]=r,r.push(t),()=>r.splice(r.indexOf(t),1)},l=(t,r,a)=>{e.set(t,r);let n=i[t];if(n)for(let e of n)e(r,a)},d=()=>{if(!V.has(e)&&(V.set(e,[a,Object.create(null),Object.create(null),Object.create(null),n,l,o]),!ea)){let t=r.initFocus(setTimeout.bind(W,ep.bind(W,a,0))),n=r.initReconnect(setTimeout.bind(W,ep.bind(W,a,1)));s=()=>{t&&t(),n&&n(),V.delete(e)}}};return d(),[e,n,d,s]}return[e,V.get(e)[4]]},eg=F.dequal,[ew,eb]=ev(new Map),ey=B({onLoadingSlow:O,onSuccess:O,onError:O,onErrorRetry:(e,t,r,a,n)=>{let s=r.errorRetryCount,i=n.retryCount,o=~~((Math.random()+.5)*(1<<(i<8?i:8)))*r.errorRetryInterval;(z(s)||!(i>s))&&setTimeout(a,o,n)},onDiscarded:O,revalidateOnFocus:!0,revalidateOnReconnect:!0,revalidateIfStale:!0,shouldRetryOnError:!0,errorRetryInterval:ei?1e4:5e3,focusThrottleInterval:5e3,dedupingInterval:2e3,loadingTimeout:ei?5e3:3e3,compare:eg,isPaused:()=>!1,cache:ew,mutate:eb,fallback:{}},{isOnline:()=>Z,isVisible:()=>{let e=K&&document.visibilityState;return z(e)||"hidden"!==e}}),e_=(e,t)=>{let r=B(e,t);if(t){let{use:a,fallback:n}=e,{use:s,fallback:i}=t;a&&s&&(r.use=a.concat(s)),n&&i&&(r.fallback=B(n,i))}return r},ex=(0,a.createContext)({});var ek=e.i(6089601);let eN=X&&window.__SWR_DEVTOOLS_USE__,ej=(eN?window.__SWR_DEVTOOLS_USE__:[]).concat(e=>(t,r,a)=>{let n=r&&function(){for(var e=arguments.length,a=Array(e),n=0;n<e;n++)a[n]=arguments[n];let[s]=eu(t),[,,,i]=V.get(ew);if(s.startsWith("$inf$"))return r(...a);let o=i[s];return z(o)?r(...a):(delete i[s],o)};return e(t,n,a)});eN&&(window.__SWR_DEVTOOLS_REACT__=a.default);let eS=()=>{},eE=eS(),eT=(new WeakMap,a.default.use||(e=>{switch(e.status){case"pending":throw e;case"fulfilled":return e.value;case"rejected":throw e.reason;default:throw e.status="pending",e.then(t=>{e.status="fulfilled",e.value=t},t=>{e.status="rejected",e.reason=t}),e}})),eR={dedupe:!0},eL=Promise.resolve(W);$.defineProperty(e=>{let{value:t}=e,r=(0,a.useContext)(ex),n="function"==typeof t,s=(0,a.useMemo)(()=>n?t(r):t,[n,r,t]),i=(0,a.useMemo)(()=>n?s:e_(r,s),[n,r,s]),o=s&&s.provider,l=(0,a.useRef)(W);o&&!l.current&&(l.current=ev(o(i.cache||ew),s));let d=l.current;return d&&(i.cache=d[0],i.mutate=d[1]),en(()=>{if(d)return d[2]&&d[2](),d[3]},[]),(0,a.createElement)(ex.Provider,B(e,{value:i}))},"defaultValue",{value:ey});let eC=(t=(e,t,r)=>{let{cache:n,compare:s,suspense:i,fallbackData:o,revalidateOnMount:l,revalidateIfStale:d,refreshInterval:c,refreshWhenHidden:u,refreshWhenOffline:m,keepPreviousData:f}=r,[h,p,v,g]=V.get(n),[w,b]=eu(e),y=(0,a.useRef)(!1),_=(0,a.useRef)(!1),x=(0,a.useRef)(w),k=(0,a.useRef)(t),N=(0,a.useRef)(r),j=()=>N.current.isVisible()&&N.current.isOnline(),[S,E,T,R]=Q(n,w),L=(0,a.useRef)({}).current,C=z(o)?z(r.fallback)?W:r.fallback[w]:o,M=(e,t)=>{for(let r in L)if("data"===r){if(!s(e[r],t[r])&&(!z(e[r])||!s(U,t[r])))return!1}else if(t[r]!==e[r])return!1;return!0},D=(0,a.useMemo)(()=>{let e=!!w&&!!t&&(z(l)?!N.current.isPaused()&&!i&&!1!==d:l),r=t=>{let r=B(t);return(delete r._k,e)?{isValidating:!0,isLoading:!0,...r}:r},a=S(),n=R(),s=r(a),o=a===n?s:r(n),c=s;return[()=>{let e=r(S());return M(e,c)?(c.data=e.data,c.isLoading=e.isLoading,c.isValidating=e.isValidating,c.error=e.error,c):(c=e,e)},()=>o]},[n,w]),I=(0,H.useSyncExternalStore)((0,a.useCallback)(e=>T(w,(t,r)=>{M(r,t)||e()}),[n,w]),D[0],D[1]),A=!y.current,P=h[w]&&h[w].length>0,F=I.data,O=z(F)?C&&"function"==typeof C.then?eT(C):C:F,$=I.error,q=(0,a.useRef)(O),U=f?z(F)?z(q.current)?O:q.current:F:O,K=(!P||!!z($))&&(A&&!z(l)?l:!N.current.isPaused()&&(i?!z(O)&&d:z(O)||d)),G=!!(w&&t&&A&&K),Z=z(I.isValidating)?G:I.isValidating,J=z(I.isLoading)?G:I.isLoading,ee=(0,a.useCallback)(async e=>{let t,a,n=k.current;if(!w||!n||_.current||N.current.isPaused())return!1;let i=!0,o=e||{},l=!v[w]||!o.dedupe,d=()=>er?!_.current&&w===x.current&&y.current:w===x.current,c={isValidating:!1,isLoading:!1},u=()=>{E(c)},m=()=>{let e=v[w];e&&e[1]===a&&delete v[w]},f={isValidating:!0};z(S().data)&&(f.isLoading=!0);try{if(l&&(E(f),r.loadingTimeout&&z(S().data)&&setTimeout(()=>{i&&d()&&N.current.onLoadingSlow(w,r)},r.loadingTimeout),v[w]=[n(b),ef()]),[t,a]=v[w],t=await t,l&&setTimeout(m,r.dedupingInterval),!v[w]||v[w][1]!==a)return l&&d()&&N.current.onDiscarded(w),!1;c.error=W;let e=p[w];if(!z(e)&&(a<=e[0]||a<=e[1]||0===e[1]))return u(),l&&d()&&N.current.onDiscarded(w),!1;let o=S().data;c.data=s(o,t)?o:t,l&&d()&&N.current.onSuccess(t,w,r)}catch(r){m();let e=N.current,{shouldRetryOnError:t}=e;!e.isPaused()&&(c.error=r,l&&d())&&(e.onError(r,w,e),(!0===t||"function"==typeof t&&t(r))&&(!N.current.revalidateOnFocus||!N.current.revalidateOnReconnect||j())&&e.onErrorRetry(r,w,e,e=>{let t=h[w];t&&t[0]&&t[0](ek.ERROR_REVALIDATE_EVENT,e)},{retryCount:(o.retryCount||0)+1,dedupe:!0}))}return i=!1,u(),!0},[w,n]),et=(0,a.useCallback)(function(){for(var e=arguments.length,t=Array(e),r=0;r<e;r++)t[r]=arguments[r];return eh(n,x.current,...t)},[]);if(en(()=>{k.current=t,N.current=r,z(F)||(q.current=F)}),en(()=>{var e;let t;if(!w)return;let r=ee.bind(W,eR),a=0;N.current.revalidateOnFocus&&(a=Date.now()+N.current.focusThrottleInterval);let n=(e=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(e==ek.FOCUS_EVENT){let e=Date.now();N.current.revalidateOnFocus&&e>a&&j()&&(a=e+N.current.focusThrottleInterval,r())}else if(e==ek.RECONNECT_EVENT)N.current.revalidateOnReconnect&&j()&&r();else if(e==ek.MUTATE_EVENT)return ee();else if(e==ek.ERROR_REVALIDATE_EVENT)return ee(t)},(t=h[w]||(h[w]=[])).push(e),()=>{let r=t.indexOf(e);r>=0&&(t[r]=t[t.length-1],t.pop())});if(_.current=!1,x.current=w,y.current=!0,E({_k:b}),K&&!v[w])if(z(O)||ea)r();else X&&typeof window.requestAnimationFrame!=Y?window.requestAnimationFrame(r):setTimeout(r,1);return()=>{_.current=!0,n()}},[w]),en(()=>{let e;function t(){let t="function"==typeof c?c(S().data):c;t&&-1!==e&&(e=setTimeout(r,t))}function r(){!S().error&&(u||N.current.isVisible())&&(m||N.current.isOnline())?ee(eR).then(t):t()}return t(),()=>{e&&(clearTimeout(e),e=-1)}},[c,u,m,w]),(0,a.useDebugValue)(U),i){let e=w&&z(O);if(!er&&ea&&e)throw Error("Fallback data is required when using Suspense in SSR.");e&&(k.current=t,N.current=r,_.current=!1);let a=g[w];if(eT(!z(a)&&e?et(a):eL),!z($)&&e)throw $;let n=e?ee(eR):eL;!z(U)&&e&&(n.status="fulfilled",n.value=!0),eT(n)}return{mutate:et,get data(){return L.data=!0,U},get error(){return L.error=!0,$},get isValidating(){return L.isValidating=!0,Z},get isLoading(){return L.isLoading=!0,J}}},function(){let e;for(var r=arguments.length,n=Array(r),s=0;s<r;s++)n[s]=arguments[s];let i=(e=(0,a.useContext)(ex),(0,a.useMemo)(()=>B(ey,e),[e])),[o,l,d]="function"==typeof n[1]?[n[0],n[1],n[2]||{}]:[n[0],null,(null===n[1]?n[2]:n[1])||{}],c=e_(i,d),u=t,{use:m}=c,f=(m||[]).concat(ej);for(let e=f.length;e--;)u=f[e](u);return u(o,l||c.fetcher||null,c)}),eM=(0,e.i(3294237).cva)("relative w-full rounded-lg border p-4 [&>svg~*]:pl-7 [&>svg+div]:translate-y-[-3px] [&>svg]:absolute [&>svg]:left-4 [&>svg]:top-4 [&>svg]:text-foreground",{variants:{variant:{default:"bg-background text-foreground",destructive:"border-destructive/50 text-destructive dark:border-destructive [&>svg]:text-destructive"}},defaultVariants:{variant:"default"}}),eD=a.forwardRef((e,t)=>{let{className:r,variant:a,...s}=e;return(0,N.jsx)("div",{ref:t,role:"alert",className:(0,n.cn)(eM({variant:a}),r),...s})});eD.displayName="Alert";let eI=a.forwardRef((e,t)=>{let{className:r,...a}=e;return(0,N.jsx)("h5",{ref:t,className:(0,n.cn)("mb-1 font-medium leading-none tracking-tight",r),...a})});eI.displayName="AlertTitle";let eA=a.forwardRef((e,t)=>{let{className:r,...a}=e;return(0,N.jsx)("div",{ref:t,className:(0,n.cn)("text-sm [&_p]:leading-relaxed",r),...a})});function eP(e){if(!e||!(e instanceof Date))return[0,0];let t=e.getTime();return[Math.floor(t/1e3),t%1e3*1e6]}function eH(e){return 1e3*e[0]+e[1]/1e6}function eF(e,t){if(!e||!(e instanceof Date))return[0,0];let r=(t&&t instanceof Date?t:new Date).getTime()-e.getTime();return[Math.floor(r/1e3),r%1e3*1e6]}eA.displayName="AlertDescription";let eV={name:"workflow-development-kit",version:"4.0.0"},eO=new Set(["hook_created","hook_received","hook_disposed","step_retrying","step_failed","workflow_failed","wait_created","wait_completed"]);function eW(e){let t=!(arguments.length>1)||void 0===arguments[1]||arguments[1];return e.filter(e=>!t||eO.has(e.eventType)).map(e=>{var t;return{name:e.eventType,timestamp:eP(e.createdAt),attributes:{eventId:e.eventId,correlationId:e.correlationId,eventData:"eventData"in e?e.eventData:void 0},showVerticalLine:"hook_created"===(t=e.eventType)||"hook_received"===t||"hook_disposed"===t}})}function e$(e){let{summary:t,children:r}=e;return(0,N.jsxs)("details",{className:"group",children:[(0,N.jsx)("summary",{className:"cursor-pointer rounded-md border px-3 py-2 text-copy-14 hover:brightness-95",style:{borderColor:"var(--ds-gray-300)",backgroundColor:"var(--ds-gray-100)",color:"var(--ds-gray-900)"},children:t}),(0,N.jsx)("div",{className:"p-2",children:r})]})}let ez=e=>(0,N.jsx)("pre",{className:"text-copy-12 overflow-x-auto rounded-md border p-4",style:{borderColor:"var(--ds-gray-300)",backgroundColor:"var(--ds-gray-100)",color:"var(--ds-gray-1000)"},children:(0,N.jsx)("code",{children:JSON.stringify(e,null,2)})}),eB=["workflowName","stepName","status","stepId","hookId","eventId","runId","attempt","token","correlationId","eventType","deploymentId","ownerId","projectId","environment","executionContext","createdAt","startedAt","updatedAt","completedAt","retryAfter","error","errorCode","metadata","eventData","input","output","resumeAt"],eq=(e,t)=>(eB.indexOf(e)||0)-(eB.indexOf(t)||0),eU={workflowName:e=>(0,r.parseWorkflowName)(String(e))?.shortName??"?",stepName:e=>(0,r.parseStepName)(String(e))?.shortName??"?",runId:e=>String(e),stepId:e=>String(e),hookId:e=>String(e),eventId:e=>String(e),status:e=>String(e),attempt:e=>String(e),token:e=>String(e),eventType:e=>String(e),correlationId:e=>String(e),deploymentId:e=>String(e),ownerId:e=>null,projectId:e=>null,environment:e=>null,executionContext:e=>null,createdAt:e=>new Date(String(e)).toLocaleString(),startedAt:e=>new Date(String(e)).toLocaleString(),updatedAt:e=>new Date(String(e)).toLocaleString(),completedAt:e=>new Date(String(e)).toLocaleString(),retryAfter:e=>new Date(String(e)).toLocaleString(),resumeAt:e=>new Date(String(e)).toLocaleString(),metadata:ez,input:e=>{let t=Array.isArray(e)?e.length:0;return(0,N.jsx)(e$,{summary:`Input (${t} arguments)`,children:Array.isArray(e)?e.map((e,t)=>(0,N.jsx)("div",{className:"mt-2",children:ez(e)},t)):ez(e)})},output:e=>(0,N.jsx)(e$,{summary:"Output",children:ez(e)}),error:e=>(0,N.jsx)(e$,{summary:"Error",children:ez(e)}),errorCode:ez,eventData:e=>(0,N.jsx)(e$,{summary:"Event Data",children:ez(e)})},eY=["input","output","error","errorCode","metadata","eventData"],eX=e=>{let{attribute:t,value:r,isLoading:a}=e,n=eU[t];if(!n)return null;let s=n(r);return s?(0,N.jsxs)("div",{className:"relative",children:["boolean"==typeof a&&a&&(0,N.jsx)("div",{className:"absolute top-9 right-4",children:(0,N.jsx)("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2",style:{borderColor:"var(--ds-gray-900)"}})}),(0,N.jsxs)("div",{className:"flex flex-col gap-0 my-2",children:[(0,N.jsx)("span",{className:"font-medium",style:{color:"var(--ds-gray-500)"},children:t}),(0,N.jsx)("span",{style:{color:"var(--ds-gray-1000)"},children:s})]},t)]}):null},eK=e=>{let{data:t,isLoading:r,error:a}=e,n=Object.keys(t).filter(e=>!eY.includes(e)).sort(eq),s=Object.keys(t).filter(e=>eY.includes(e)).sort(eq);return(0,N.jsxs)("div",{children:[n.map(e=>(0,N.jsx)(eX,{attribute:e,value:t[e]},e)),a?(0,N.jsxs)(eD,{variant:"destructive",className:"my-4",children:[(0,N.jsx)(R,{className:"h-4 w-4"}),(0,N.jsx)(eI,{children:"Failed to load resource details"}),(0,N.jsx)(eA,{className:"text-sm",children:a.message})]}):s.map(e=>(0,N.jsx)(eX,{isLoading:r,attribute:e,value:t[e]},e))]})};function eG(e){let{correlationId:t,env:r,events:n}=e,s=(0,a.useCallback)(()=>(0,i.fetchEventsByCorrelationId)(r,t,{sortOrder:"asc",limit:100,withData:!0}).then(e=>{if(!e.success)throw Error(e.error?.message||"Failed to fetch events");return eW(e.data.data||[],!1)}),[r,t]),{data:o,error:l,isLoading:d}=eC(["workflow","events",t],s,{fallbackData:n,revalidateOnFocus:!1}),c=(o?.length?o:n)||[];return(0,N.jsxs)("div",{className:"mt-2",style:{color:"var(--ds-gray-1000)"},children:[(0,N.jsxs)("h3",{className:"text-heading-16 font-medium mt-4 mb-2",style:{color:"var(--ds-gray-1000)"},children:["Events (",d?"...":c.length,")"]}),l?(0,N.jsxs)(eD,{variant:"destructive",className:"my-4",children:[(0,N.jsx)(R,{className:"h-4 w-4"}),(0,N.jsx)(eI,{children:"Failed to load event data"}),(0,N.jsx)(eA,{className:"text-sm",children:l.message})]}):null,d?(0,N.jsx)("div",{children:"Loading events..."}):null,!d&&!l&&0===c.length&&(0,N.jsx)("div",{className:"text-sm",children:"No events found"}),c.length>0&&!l?(0,N.jsx)("div",{className:"flex flex-col gap-2",children:c.map((e,t)=>(0,N.jsx)(e$,{summary:(0,N.jsxs)(N.Fragment,{children:[(0,N.jsx)("span",{className:"font-medium",style:{color:"var(--ds-gray-1000)"},children:e.name})," ","-"," ",(0,N.jsx)("span",{style:{color:"var(--ds-gray-700)"},children:new Date(1e3*e.timestamp[0]+e.timestamp[1]/1e6).toLocaleString()})]}),children:(0,N.jsxs)("div",{className:"mt-2 px-4",children:[Object.entries(e.attributes).filter(e=>{let[t]=e;return"eventData"!==t}).map(e=>{let[t,r]=e;return(0,N.jsx)(eX,{attribute:t,value:r},t)}),(0,N.jsxs)("div",{className:"relative",children:[l&&(0,N.jsx)("div",{children:"Error loading event data"}),!l&&!d&&e.attributes.eventData&&(0,N.jsx)(eX,{isLoading:d,attribute:"eventData",value:e.attributes.eventData})]})]})},`${e.name}-${t}`))}):null]})}let eQ={root:{startTime:0,endTime:1,duration:1,depth:0,children:[]},spanMap:{},resourceMap:{},filter:"",selected:null,baseScale:1,scaleRatio:1,scale:1,width:640,height:480,timelineWidth:640,timelineHeight:480,panelWidth:380,panelHeight:480,scrollbarWidth:0,timelineRef:{current:null},scrollSnapshotRef:{current:void 0},memoCacheRef:{current:new Map},getQuickLinks:()=>[],withPanel:!1,isMobile:!1,customPanelComponent:null},eZ=e=>(e.width-e.scrollbarWidth-Number(!!(e.selected&&e.withPanel))*e.panelWidth)/e.root.duration,eJ=(0,a.createContext)({state:eQ,dispatch:()=>{}});eJ.displayName="TraceViewerContext";let e0=(e,t)=>{switch(t.type){case"setRoot":return e.scrollSnapshotRef.current=void 0,e.memoCacheRef.current.clear(),e0({...e,root:t.root,spanMap:t.spanMap,resourceMap:Object.fromEntries(t.resources.map(e=>{let{name:t,attributes:r}=e;return[t,r]}))},{type:"detectBaseScale"});case"setSize":{let r=t.height-56-40-24,a=e.withPanel&&t.width<=768,n={...e,width:t.width,height:t.height,timelineWidth:t.width-Number(!!(e.selected&&e.withPanel&&!a))*e.panelWidth,timelineHeight:r,panelHeight:r,isMobile:a};return n.width!==e.width&&(n=e0(n,{type:"detectBaseScale"})),n}case"setPanelWidth":{let r=Math.max(240,Math.min(t.width,e.width-240));return{...e,timelineWidth:e.width-r,panelWidth:r}}case"setFilter":return{...e,filter:t.filter};case"deselect":return e0({...e,selected:null,timelineWidth:e.width},{type:"minScale"});case"select":{let r=e.spanMap[t.id];if(!r)return e;return{...e,selected:r,timelineWidth:e.width-(e.withPanel&&!e.isMobile?e.panelWidth:0)}}case"escape":if(e.selected)return e0(e,{type:"deselect"});return e0(e,{type:"resetScale"});case"toggleSelection":{let r=e;if(e.selected&&(r=e0(r,{type:"deselect"})),e.selected?.span.spanId===t.id)return r;return e0(r,{type:"select",id:t.id})}case"detectBaseScale":{let t=(e.width-e.scrollbarWidth)/e.root.duration;return{...e,baseScale:t,scale:t*e.scaleRatio}}case"setScale":return{...e,scaleRatio:t.scale,scale:e.baseScale*t.scale};case"resetScale":return e0(e,{type:"scaleToRange",t1:e.root.startTime,t2:e.root.endTime});case"scaleToNode":{let r=e.spanMap[t.id];if(!r)return e;return e0(e0(e,{type:"setScale",scale:(e.width-e.scrollbarWidth-(e.withPanel&&!e.isMobile?e.panelWidth:0))/r.duration/e.baseScale}),{type:"setScrollSnapshot",anchorT:r.startTime-e.root.startTime,anchorX:0})}case"scaleToRange":{let r=Math.abs(t.t1-t.t2);return e0(e0(e,{type:"setScale",scale:(e.width-e.scrollbarWidth-(e.selected&&e.withPanel?e.panelWidth:0))/r/e.baseScale}),{type:"setScrollSnapshot",anchorT:Math.min(t.t1,t.t2)-e.root.startTime,anchorX:0})}case"adjustScaleRatio":{let{scaleRatio:r}=e;switch(t.direction){case -1:r*=.8;break;case 1:r*=1.25;break;default:r=1}let a=e.timelineRef.current;if(!a)return console.warn("timelineRef is null"),e;let{clientWidth:n,scrollLeft:s}=a;return e0(e0({...e,scaleRatio:r,scale:e.baseScale*r},{type:"minScale"}),{type:"setScrollSnapshot",anchorT:(s+.5*n)/e.scale,anchorX:.5*n})}case"trackpadScale":{let r=Math.max(eZ(e)/e.baseScale,e.scaleRatio*(1+.2*Math.sign(t.delta)*Math.sqrt(Math.abs(t.delta))));return e0({...e,scaleRatio:r,scale:e.baseScale*r},{type:"setScrollSnapshot",anchorT:t.anchorT,anchorX:t.anchorX})}case"minScale":{let t=eZ(e);if(e.scale>=t)return e;return{...e,scale:t,scaleRatio:t/e.baseScale}}case"setScrollSnapshot":{let r=e.timelineRef.current;if(!r)return e;let{anchorT:a,anchorX:n}=t,s=a*e.scale-n,{scrollTop:i}=r,o=(i-24-8)/26,l=o+Math.ceil(e.timelineHeight/26);return e.scrollSnapshotRef.current={anchorT:a,anchorX:n,scrollLeft:s,scrollTop:i,startTime:e.root.startTime+s/e.scale,endTime:e.root.startTime+(s+e.timelineWidth)/e.scale,startRow:o,endRow:l,scale:e.scale},e}case"setWithPanel":if(e.withPanel===t.withPanel)return e;return{...e,withPanel:t.withPanel};case"forceRender":return e.memoCacheRef.current.set("",{}),{...e}}};function e1(e){let{getQuickLinks:t,withPanel:r=!1,children:n,customSpanClassNameFunc:s,customSpanEventClassNameFunc:i,customPanelComponent:o=null}=e,l=(0,a.useRef)(null),d=(0,a.useRef)(void 0),c=(0,a.useRef)(t);c.current=t;let u=(0,a.useRef)(new Map),m=(0,a.useRef)(new Map),[f,h]=(0,a.useReducer)(e0,eQ,e=>({...e,scrollbarWidth:(()=>{if(!("document"in globalThis))return 0;let e=document.createElement("div");e.style.width="400px",e.style.height="400px",e.style.overflow="scroll",document.body.appendChild(e);let t=400-e.scrollWidth;return e.remove(),t})(),timelineRef:l,scrollSnapshotRef:d,customSpanClassNameFunc:s,customSpanEventClassNameFunc:i,customPanelComponent:o,memoCacheRef:u,withPanel:r,getQuickLinks:e=>{let t=e.spanId,r=m.current.get(t);if(r)return r;let a=c.current?.(e)||[];return m.current.set(t,a),a}}));(0,a.useEffect)(()=>h({type:"setWithPanel",withPanel:r}),[r]);let p=(0,a.useMemo)(()=>({state:f,dispatch:h}),[f,h]);return(0,N.jsx)(eJ.Provider,{value:p,children:n})}let e2=()=>(0,a.useContext)(eJ);var e4=e.i(9633219),e6=e.i(5710208);let e5=(e,t)=>e.duration*t>=500,e8=e=>e.isVercel?String(e4.default.colorVercel):String(e4.default[`color${e.resourceIndex%5}`]),e3=(e,t)=>{let r=e5(e,t),a=e.isHovered&&!r&&!1!==e.isHighlighted;return(0,P.clsx)(e4.default.spanNode,r&&e4.default.huge,e.duration*t<64&&e4.default.small,e.isSelected&&e4.default.selected,a&&e4.default.xHover,e.isHighlighted?e4.default.colorHighlight:e8(e),!1===e.isHighlighted&&e4.default.unlit)},e9=(0,a.memo)(function(e){let{root:t,scale:r,spans:a,scrollSnapshotRef:n,cache:s,customSpanClassNameFunc:i,customSpanEventClassNameFunc:o}=e;return a.map(e=>(0,N.jsx)(e7,{cacheKey:s.get(e.span.spanId),customSpanEventClassNameFunc:o,customSpanClassNameFunc:i,node:e,root:t,scale:r,scrollSnapshotRef:n},e.span.spanId))}),e7=(0,a.memo)(function(e){let{node:t,root:r,scale:n,scrollSnapshotRef:s,customSpanClassNameFunc:i,customSpanEventClassNameFunc:o}=e,l=(0,a.useRef)(null);t.ref=l;let{span:d}=t,c=t.isInstrumentationHint?"Get Started":(0,e6.formatDuration)(t.duration),u=(t.startTime-r.startTime)*n,m=24+26*t.row,f=t.duration*n,h=Math.max(f,4),p=24,v=e5(t,n),g=f<64,w=t.isHovered&&!v&&!1!==t.isHighlighted;g&&!w&&(p*=.4,m+=(24-p)*.5);let b=!1;if(w){let{duration:e,endTime:a}=r,n=s.current;n&&(e=n.endTime-n.startTime,a=n.endTime),b=a-t.startTime<.25*e}let y=i?i(t):"";return(0,N.jsxs)(N.Fragment,{children:[(0,N.jsx)("button",{"aria-label":`${d.name} - ${c}`,className:(0,P.clsx)(e3(t,n),y),"data-span-id":d.spanId,"data-start-time":t.startTime-r.startTime,"data-right-side":b,ref:l,style:{"--span-width":`${Math.max(f,1)}px`,minWidth:w?h:void 0,width:w?void 0:h,height:p,maxWidth:w&&!b?(r.endTime-t.startTime)*n:void 0,containIntrinsicWidth:w?void 0:h,containIntrinsicHeight:p,left:b?void 0:u,right:b?(r.endTime-t.endTime)*n:void 0,top:m},type:"button",children:g&&!w?null:(0,N.jsxs)(N.Fragment,{children:[(0,N.jsx)("span",{className:e4.default.spanName,children:t.label||d.name}),v?(0,N.jsx)("span",{className:e4.default.spanSpacer}):null,w||h>128?(0,N.jsx)("span",{className:e4.default.spanDuration,children:c}):null]})}),t.events&&!g?t.events.map(e=>(0,N.jsx)(te,{customSpanEventClassNameFunc:o,event:e,node:t,root:r,scale:n},e.key)):null]})}),te=(0,a.memo)(function(e){let{event:t,node:r,root:n,scale:s,customSpanEventClassNameFunc:i}=e,o=(0,a.useRef)(null);t.ref=o;let{event:{name:l}}=t,d=(0,e6.formatDuration)(t.timestamp-n.startTime),c=(t.timestamp-n.startTime)*s,u=24+26*r.row,m=i?i(t):"";return(0,N.jsxs)("div",{title:`${l} at ${d}`,className:(0,P.clsx)(e4.default.spanNodeEvent,m,r.isHighlighted?e4.default.colorHighlight:e8(r),!1===r.isHighlighted&&e4.default.unlit),"data-hovered":t.isHovered,ref:o,style:{left:c,top:u},children:[(0,N.jsxs)("div",{className:(0,P.clsx)(e4.default.hoverInfo,(t.timestamp-r.startTime)/r.duration<.5?e4.default.alignStart:e4.default.alignEnd),children:[(0,N.jsx)("span",{className:e4.default.eventName,children:l}),(0,N.jsx)("span",{className:e4.default.eventTimestamp,children:d})]}),(0,N.jsx)("div",{className:e4.default.eventDiamond})]})}),tt={"gray-700":"var(--ds-gray-700)","gray-900":"var(--ds-gray-900)"};function tr(e){let{size:t=16,color:r="gray-700"}=e,a={color:tt[r]||r};return(0,N.jsxs)("svg",{width:t,height:t,viewBox:"0 0 24 24",fill:"none",style:a,"aria-hidden":!0,children:[(0,N.jsx)("title",{children:"Cross"}),(0,N.jsx)("path",{d:"M6 6l12 12M18 6L6 18",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round"})]})}function ta(e){let{size:t=16}=e;return(0,N.jsxs)("svg",{width:t,height:t,viewBox:"0 0 24 24",fill:"none","aria-hidden":!0,className:e4.default.detailHeadingIcon,children:[(0,N.jsx)("title",{children:"Chevron Down"}),(0,N.jsx)("path",{d:"M6 9l6 6 6-6",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"})]})}function tn(e){let{size:t=16,color:r="gray-900"}=e,a={color:tt[r]||r};return(0,N.jsxs)("svg",{width:t,height:t,viewBox:"0 0 24 24",fill:"none",style:a,"aria-hidden":!0,children:[(0,N.jsx)("title",{children:"External Small"}),(0,N.jsx)("path",{d:"M14 4h6m0 0v6m0-6L10 14",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"}),(0,N.jsx)("path",{d:"M20 14v4a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V6a2 2 0 0 1 2-2h4",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round"})]})}function ts(e){let{as:t,className:r,href:a,children:n,...s}=e;return"span"!==(t||"a")&&a?(0,N.jsx)("a",{className:r,href:a,...s,children:n}):(0,N.jsx)("span",{className:r,...s,children:n})}function ti(e){let{className:t,children:r,size:a,...n}=e;return(0,N.jsx)("a",{...n,className:(0,P.clsx)(e4.default.buttonLink,t),children:r})}function to(e){let{children:t,className:r}=e;return(0,N.jsx)("div",{className:(0,P.clsx)(e4.default.note,r),children:t})}function tl(e){let{width:t,height:r,rounded:a}=e;return(0,N.jsx)("span",{className:(0,P.clsx)(e4.default.skeleton,a&&e4.default.skeletonRounded),style:{width:t,height:r},"aria-hidden":!0})}let td=e=>`${(100*e).toFixed(3)}%`,tc=(e,t)=>e<t?-1:+(e>t),tu=e=>{let t={};for(let[r,a]of Object.entries(e)){let e=r.indexOf("."),n="",s="";-1!==e?(n=r.substring(0,e),s=r.substring(e+1)):s=r;let i=t[n];i||(i={prefix:n,attributes:[]},t[n]=i),i.attributes.push({key:r,suffix:s,value:String(a)})}let r=Array.from(Object.values(t)).sort((e,t)=>tc(e.prefix,t.prefix));for(let e of r)e.attributes.sort((e,t)=>tc(e.suffix,t.suffix));return r},tm=()=>{let{state:{root:e,selected:t,resourceMap:r,getQuickLinks:n},dispatch:s}=e2(),i=(0,a.useMemo)(()=>((e,t)=>{let r=[];if(!t)return r;for(let e=t;"parent"in e;e=e.parent)r.unshift(e);return r})(0,t),[e,t]),o=(0,a.useMemo)(()=>tu(t?.span.attributes??{}),[t]),l=(0,a.useMemo)(()=>{let e=t?.span.resource;if(!e)return[];let a=r[e];return a?tu(a):[]},[r,t]);if(!t)return null;let{span:d}=t,c=ty(t);return(0,N.jsxs)(N.Fragment,{children:[t.isVercel?(0,N.jsx)(t_,{node:t}):null,t.isInstrumentationHint?(0,N.jsx)(tN,{}):null,!t.isInstrumentationHint&&i.length?(0,N.jsx)(tp,{className:e4.default.ancestorGroup,name:"Location",children:i.map(r=>(0,N.jsxs)("button",{className:e4.default.ancestorNode,onClick:()=>s({type:"select",id:r.span.spanId}),type:"button",children:[(0,N.jsxs)("div",{className:e4.default.ancestorText,children:[(0,N.jsx)("span",{className:e4.default.ancestorName,children:r.label||r.span.name}),(0,N.jsx)("span",{className:e4.default.ancestorDuration,children:(0,e6.formatDuration)(r.duration)})]}),(0,N.jsx)("span",{"aria-hidden":!0,className:e4.default.ancestorLineContainer,children:(0,N.jsx)("span",{className:(0,P.clsx)(e4.default.ancestorLine,e8(r)),style:{left:td((r.startTime-e.startTime)/e.duration),width:td(r.duration/e.duration)}})})]},`${t.span.spanId}.${r.span.spanId}`))}):null,c?(0,N.jsx)(tx,{getQuickLinks:n,span:t.span}):null,t.events?.length?(0,N.jsx)(tp,{name:"Events",children:t.events.map(t=>(0,N.jsxs)(a.Fragment,{children:[(0,N.jsxs)("dl",{className:e4.default.spanDetailPanelAttribute,children:[(0,N.jsx)("dt",{className:e4.default.spanDetailPanelAttributeKey,children:t.event.name}),(0,N.jsx)("dd",{className:e4.default.spanDetailPanelAttributeValue,children:(0,e6.formatDuration)(t.timestamp-e.startTime)})]}),Object.entries(t.event.attributes).map(e=>{let[r,a]=e;return(0,N.jsx)(tj,{name:`${t.event.name}.${r}`,value:a},r)})]},t.key))}):null,o.length?(0,N.jsx)(tp,{name:"Attributes",children:o.map(e=>(0,N.jsx)(a.Fragment,{children:e.attributes.map(e=>{let{key:t,value:r}=e;return(0,N.jsx)(tj,{name:t,value:r},t)})},e.prefix))}):null,l.length?(0,N.jsx)(tp,{name:"Resource",children:l.map(e=>(0,N.jsx)(a.Fragment,{children:e.attributes.map(e=>{let{key:t,value:r}=e;return(0,N.jsx)(tj,{name:t,value:r},t)})},e.prefix))}):null,t.isInstrumentationHint?null:(0,N.jsxs)(tp,{name:"Library",children:[(0,N.jsx)(tj,{name:"name",value:d.library.name}),d.library.version?(0,N.jsx)(tj,{name:"version",value:d.library.version}):null]})]})};function tf(e){let{attached:t=!1}=e,{state:{selected:r,isMobile:a,customPanelComponent:n},dispatch:s}=e2();if(!r)return null;let{span:i}=r;return(0,N.jsxs)("div",{className:(0,P.clsx)(e4.default.spanDetailPanel,a&&e4.default.mobile),children:[t&&!a?(0,N.jsx)(tS,{}):null,(0,N.jsx)("div",{className:e4.default.spanDetailPanelTop,children:(0,N.jsxs)("div",{className:e4.default.spanDetailPanelTopInfo,children:[(0,N.jsxs)("div",{className:e4.default.spanDetailPanelTruncatedHeading,children:[r.isInstrumentationHint?null:(0,N.jsx)("span",{className:e4.default.spanDetailPanelDuration,children:(0,e6.formatDuration)(r.duration)}),(0,N.jsx)("span",{className:e4.default.spanDetailPanelName,title:i.name,children:i.name})]}),(0,N.jsxs)("div",{className:e4.default.spanDetailPanelCorner,children:[(0,N.jsx)("div",{className:e4.default.spanDetailPanelCloseVerticalRule}),(0,N.jsx)("button",{"aria-label":"Close Span Details",className:e4.default.spanDetailPanelClose,onClick:()=>s({type:"deselect"}),type:"button",children:(0,N.jsx)(tr,{color:"gray-700",size:24})})]})]})}),(0,N.jsx)("div",{className:(0,P.clsx)("flex gap-3",e4.default.spanDetailPanelBody),children:n||(0,N.jsx)(tm,{})})]})}let th="vc-trace-span-exp:";function tp(e){let{name:t,className:r="",children:n}=e,[s,i]=(0,a.useState)(()=>!("localStorage"in globalThis)||"0"!==localStorage.getItem(`${th}${t}`)),o=(0,a.useCallback)(()=>{i(e=>{let r=!e;return localStorage.setItem(`${th}${t}`,String(Number(r))),r})},[t]);return(0,N.jsxs)("div",{className:(0,P.clsx)(e4.default.detailGroup,s?e4.default.expanded:e4.default.collapsed,r),children:[(0,N.jsxs)("button",{className:e4.default.detailHeading,onClick:o,type:"button",children:[(0,N.jsx)("span",{children:t}),(0,N.jsx)(ta,{})]}),s?n:null]})}let tv=new Set(["OPTIONS","HEAD","GET","PUT","POST","DELETE"]),tg={"Resolve Deployment":"How long it took Vercel's routing layer to retrieve details for the deployment.","Resolve Cache":"How long it took Vercel's routing layer to check for a cached function invocation.","Resolve Route":"How long it took Vercel's routing layer to resolve routing rules, including redirects and rewrites.","Invoke Middleware":"How long it took this middleware to start and run user code.","Invoke Function":"How long it took this Vercel Function to start and run user code.",waitUntil:"How long it took to run user code inside of waitUntil.","Start VM":"How long it took to start the Virtual Machine which contains the Vercel Function.","Spawn Node.js":"How long it took the Virtual Machine to start the Node.js runtime.","Spawn Python":"How long it took the Virtual Machine to start the Python runtime.","Init User Code":"How long it took to import the user code and run any globally-scoped code."},tw=new Set(["Start VM","Spawn Node.js","Spawn Python","Init User Code"]),tb=e=>{if(!e||!("span"in e))return null;let t=e.span.attributes,r=t["vercel.region"]||t["vercel.function.region"];return r?String(r):null},ty=e=>{if(!e.isVercel)return!1;let{name:t}=e.span,r=t.indexOf(" ");if(-1===r)return!1;let a=t.substring(0,r);return tv.has(a)};function t_(e){let{node:t}=e,{name:r}=t.span,a=tg[r];if(!a&&ty(t)&&(a="How long it took for Vercel to process the request and send the response."),!a)return null;let n=(e=>{let{name:t}=e.span,r=tb(e),a=tb(e.parent);return"true"===e.span.attributes["vercel.middleware.internal"]?"The Vercel Toolbar created this middleware.":tw.has(t)||"Invoke Function"===t&&e.children.some(e=>tw.has(e.span.name))?"This function encountered a cold start.":r&&a&&r!==a?"This request was routed across regions.":null})(t);return(0,N.jsx)(tp,{name:"What is this?",children:(0,N.jsxs)("div",{className:e4.default.infraSpanDescription,children:[(0,N.jsx)("span",{children:a}),n?(0,N.jsx)(to,{children:n}):n]})})}let tx=(0,a.memo)(function(e){let{getQuickLinks:t,span:r}=e,a=t(r);return a.length?(0,N.jsx)(tp,{name:"Links",children:a.map(e=>{let{key:t,value:r}=e;return(0,N.jsx)(tk,{link:r,name:t},t)})}):null});function tk(e){let{name:t,link:r}=e,n=function(e){let[t,r]=(0,a.useState)({}),n=void 0!==e.__resolvedValue||void 0!==e.__rejectedValue;return(0,a.useEffect)(()=>{n||e.then(t=>{e.__resolvedValue=t}).catch(t=>{e.__rejectedValue=t}).finally(()=>r({}))},[e,n]),e.__resolvedValue}(r);return(0,N.jsxs)(ts,{as:n?void 0:"span",className:(0,P.clsx)(e4.default.spanDetailPanelAttribute,e4.default.spanDetailPanelQuickLink),href:n?.href||"",children:[(0,N.jsx)("span",{className:e4.default.spanDetailPanelAttributeKey,children:t}),(0,N.jsx)("span",{className:(0,P.clsx)(e4.default.spanDetailPanelAttributeValue,e4.default.spanDetailPanelQuickLinkLabel),children:n?(0,N.jsxs)(N.Fragment,{children:[n.label,n.icon||(0,N.jsx)(tn,{color:"gray-900"})]}):(0,N.jsxs)(N.Fragment,{children:[(0,N.jsx)(tl,{height:18,width:32+8*t.length}),(0,N.jsx)(tl,{height:18,rounded:!0,width:18})]})})]})}function tN(){return(0,N.jsx)(tp,{name:"What is this?",children:(0,N.jsxs)("div",{className:e4.default.infraSpanDescription,children:[(0,N.jsx)("span",{children:"You can visualize your application's spans alongside Vercel's spans in this viewer."}),(0,N.jsx)(ti,{href:"https://vercel.com/docs/session-tracing#adding-custom-spans",size:"small",target:"_blank",children:"Get Started"})]})})}function tj(e){let{name:t,value:r}=e;return(0,N.jsxs)("dl",{className:e4.default.spanDetailPanelAttribute,children:[(0,N.jsx)("dt",{className:e4.default.spanDetailPanelAttributeKey,children:t}),(0,N.jsx)("dd",{className:e4.default.spanDetailPanelAttributeValue,title:String(r),children:String(r)})]})}function tS(){let{state:{panelWidth:e},dispatch:t}=e2(),r=(0,a.useRef)({start:{x:0,width:e},x:0,width:e,isHeld:!1});r.current.width=e;let n=(0,a.useCallback)(e=>{if("mouse"!==e.pointerType)return;e.preventDefault();let t=r.current;t.start.x=e.clientX,t.x=e.clientX,t.start.width=t.width,t.isHeld=!0},[]),s=(0,a.useCallback)(()=>{t({type:"setPanelWidth",width:eQ.panelWidth})},[t]);return(0,a.useEffect)(()=>{let e=0,a=()=>{let e=r.current;t({type:"setPanelWidth",width:e.start.width+e.start.x-e.x})},n=t=>{r.current.isHeld&&(t.preventDefault(),r.current.x=t.clientX,cancelAnimationFrame(e),e=requestAnimationFrame(a))},s=()=>{r.current.isHeld=!1};return window.addEventListener("pointermove",n),window.addEventListener("pointerup",s),()=>{window.removeEventListener("pointermove",n),window.removeEventListener("pointerup",s)}},[t]),(0,N.jsx)("div",{"aria-hidden":!0,className:e4.default.spanDetailPanelResizer,onDoubleClick:s,onPointerDown:n})}function tE(e){let t=(0,a.useRef)({});return{setStyle:(0,a.useCallback)((r,a)=>{if(t.current[r]=a,e.current){if(!a)return void e.current.style.removeProperty(r);e.current.style.setProperty(r,a)}},[e]),styleRef:t,style:{...t.current}}}let tT=(0,a.memo)(function(e){let{timelineRef:t,rows:r,scale:n}=e,{state:{root:s,baseScale:i,timelineWidth:o,width:l,scrollbarWidth:d}}=e2(),c=l+16,u=(()=>{let[e,t]=(0,a.useState)(1);return(0,a.useLayoutEffect)(()=>{let r=()=>t("devicePixelRatio"in globalThis&&globalThis.devicePixelRatio||1),a=matchMedia(`(resolution: ${e}dppx)`);return a.addEventListener("change",r),r(),()=>{a.removeEventListener("change",r)}},[e]),e})(),m=(0,a.useRef)(null),f=(0,a.useRef)(null),h=l/(l-d)*Math.min(l/o,i/n),p=Math.min(l,(o-d)*h);(0,a.useEffect)(()=>{let e,r=!1,a=0,n=e=>!!m.current?.contains(e),s=0,i=()=>{if(!r||!e)return;let n=t.current;n&&(n.scrollLeft=(a-.5*p-e.left)/h)},o=e=>{({clientX:a}=e),cancelAnimationFrame(s),s=requestAnimationFrame(i)},l=t=>{n(t.target)&&(r=!0,e=m.current?.getBoundingClientRect(),o(t))},d=()=>{r=!1,e=void 0},c=e=>{n(e.target)&&e.cancelable&&e.preventDefault()},u=e=>{r&&e.cancelable&&e.preventDefault()};return window.addEventListener("pointerdown",l),window.addEventListener("pointermove",o),window.addEventListener("pointerup",d),window.addEventListener("blur",d),window.addEventListener("touchstart",c,{passive:!1}),window.addEventListener("touchmove",u,{passive:!1}),()=>{window.removeEventListener("pointerdown",l),window.removeEventListener("pointermove",o),window.removeEventListener("pointerup",d),window.removeEventListener("blur",d),window.removeEventListener("touchstart",c),window.removeEventListener("touchmove",u),cancelAnimationFrame(s)}},[t,h,p]),(0,a.useEffect)(()=>{let e=f.current,t=e?.getContext("2d");if(!e||!t)return;let a=requestAnimationFrame(()=>{t.resetTransform(),t.clearRect(0,0,e.width,e.height),t.scale(u,u);let a=(c-16)/s.duration;for(let e of(t.fillStyle="#ccc",t.beginPath(),r))for(let r of e){let e=7+4*r.row;if(e>=45)break;let n=8+(r.startTime-s.startTime)*a,i=r.duration*a;t.roundRect(n,e,i,3,3)}t.fill()});return()=>cancelAnimationFrame(a)},[u,s,c,r]);let v=(0,a.useRef)(null),{style:g,setStyle:w}=tE(v);return(0,a.useLayoutEffect)(()=>{let e=t.current;if(!e)return;let r=0,a=()=>{w("transform",`translateX(${8+e.scrollLeft*h}px)`)};a();let n=()=>{cancelAnimationFrame(r),r=requestAnimationFrame(a)};return e.addEventListener("scroll",n),()=>{cancelAnimationFrame(r),e.removeEventListener("scroll",n)}},[t,h,w]),(0,N.jsxs)("div",{className:e4.default.mapContainer,ref:m,style:{width:p>0?c:"100%",height:56},children:[(0,N.jsx)("canvas",{className:e4.default.mapCanvas,height:56*u,ref:f,style:{width:c,height:56},width:c*u}),(0,N.jsx)("div",{className:e4.default.mapThumb,ref:v,style:{transform:g.transform,width:p>0?p:"calc(100% - 16px)",top:2,height:52}})]})}),tR=[1,2,4,5,8,10];function tL(e){let{scale:t}=e,{state:{root:r}}=e2(),a=r.duration,n=Math.floor(Math.log10(a)),s=Math.max(2,10**n*(Math.floor(Math.log10(.5*a))===n?1:.5)),i=s*t,o=1;for(let e of tR){if(s/e<24)break;o=e}s/=o,i/=o;let l=Math.ceil(a/s),d=Math.ceil(100/i)||1;return(0,N.jsx)("div",{className:e4.default.markersContainer,children:(0,N.jsx)("div",{"aria-hidden":!0,className:e4.default.markers,style:{width:Math.floor(r.duration*t+15),visibility:-1!==t?"visible":"hidden","--marker-width":`${i}px`},children:Array(l).fill(null).map((e,t)=>{let r=t%d==0;return(0,N.jsx)("span",{className:(0,P.clsx)(e4.default.marker,!r&&e4.default.notch),children:r?(0,N.jsx)("span",{className:e4.default.markerLabel,children:(0,e6.formatDuration)(s*t)}):null},String(t))})})})}function tC(e){let{events:t,root:r,scale:n}=e,s=(0,a.useMemo)(()=>t.filter(e=>!1!==e.event.showVerticalLine),[t]);return(0,N.jsx)("div",{className:e4.default.eventMarkersContainer,children:(0,N.jsx)("div",{"aria-hidden":!0,className:e4.default.eventMarkers,style:{width:Math.floor(r.duration*n)},children:s.map(e=>(0,N.jsx)("span",{className:(0,P.clsx)(e4.default.eventMarker),style:{left:Math.floor((e.timestamp-r.startTime)*n),...e.event.color&&{borderLeftColor:e.event.color}}},e.key))})})}function tM(e){var t;let r,{memoCacheRef:n,timelineRef:s,root:i,spans:o,events:l,scale:d,dispatch:c,scrollSnapshotRef:u}=e,m=(0,a.useRef)(!1),f=(0,a.useRef)(o);f.current=o;let h=(0,a.useRef)(l);h.current=l;let p=(0,a.useRef)(null),{style:v,setStyle:g}=tE(p),w=(0,a.useRef)(null),b=(0,a.useRef)(null),{style:y,setStyle:_}=tE(b),x=(0,a.useRef)(void 0),k=(0,a.useRef)(null),{style:j,setStyle:S}=tE(k),E=(0,a.useRef)(0);(0,a.useEffect)(()=>{let e=s.current;if(!e)return;let t=E.current,r=0,a=!1,o=!1,l=!1,u=!1,p=0,v=0,b=Date.now()+500,y=()=>{x.current||(x.current=e.getBoundingClientRect())},N=e=>x.current?(e-24-8)/26:0,j=()=>{let e=n.current;for(let t of f.current)t.isHovered&&(t.isHovered=!1,e.set(t.span.spanId,{}));c({type:"forceRender"})},R=0,L=()=>{if(!m.current)return;x.current||y();let s=x.current;if(!s)return;let{scrollLeft:u,scrollTop:E}=e,T=Math.max(0,Math.min(t+u-s.left-8,i.duration*d)),C=`${T-u+8}px`;_("left",C),g("left",C);let M=i.startTime+T/d,D=M-i.startTime;if(D<0||D>i.duration?w.current?.removeAttribute("data-text"):w.current?.setAttribute("data-text",(0,e6.formatTimeSelection)(D)),a){let e,a,n=t-r,o=Math.abs(n);if(!l){if(o<4)return;l=!0,S("display","flex"),j()}n>0?(S("left",""),S("right","0")):(S("left","0"),S("right","")),S("width",`${o}px`);let c=Math.max(0,Math.min(r+u-s.left-8,i.duration*d))/d;c<D?(e=c,a=D):(e=D,a=c),k.current?.setAttribute("data-range",`${(0,e6.formatTimeSelection)(e)}  ${(0,e6.formatTimeSelection)(a)}`),k.current?.setAttribute("data-duration",`${(0,e6.formatTimeSelection)(a-e)} selected`)}if(Date.now()<b){R=requestAnimationFrame(L);return}if(u!==p||E!==v){p=u,v=E,R=requestAnimationFrame(L);return}if(t-s.left<128?w.current?.setAttribute("data-align","left"):t-s.left>s.width-128?w.current?.setAttribute("data-align","right"):w.current?.removeAttribute("data-align"),!l&&!o){let e=n.current,t=N(E)-2,r=N(E+s.height)+2;for(let a of f.current){let n=a.row>=t&&a.row<=r&&M>=a.startTime&&M<=a.endTime;a.isHovered!==n&&(a.isHovered=n,e.set(a.span.spanId,{}))}let a=12/d;for(let e of h.current){let t=M>=e.timestamp-a&&M<=e.timestamp+a;if(e.isHovered===t)continue;e.isHovered=t;let r=e.ref?.current;r&&r.setAttribute("data-hovered",String(t))}c({type:"forceRender"})}};R=requestAnimationFrame(L);let C=e=>{"mouse"===e.pointerType&&(m.current=!0)},M=()=>{m.current&&(m.current=!1,j())},D=e=>{let{clientX:r}=e;E.current=t=r,cancelAnimationFrame(R),R=requestAnimationFrame(L)},I=e=>{e.preventDefault()},A=e=>{if(2===e.button)u=!0,e.preventDefault();else{if(0!==e.button)return;u=!1}s.current?.contains(e.target)?(r=t,a=!0):(o=!0,requestAnimationFrame(j))},P=n=>{if(o=!1,!a||(a=!1,!l))return;if(l=!1,S("display",""),S("left",""),S("right",""),S("width",""),n.preventDefault(),n.stopImmediatePropagation(),u){u=!1;return}x.current||y();let s=x.current;if(!s)return;let{scrollLeft:m}=e,f=Math.max(0,Math.min((r+m-s.left-8)/d,i.duration)),h=Math.max(0,Math.min((t+m-s.left-8)/d,i.duration));c({type:"scaleToRange",t1:f+i.startTime,t2:h+i.startTime})},H=e=>{a&&"Escape"===e.key&&(u=!0,P(e))},F=()=>{x.current=void 0,T.current=void 0,cancelAnimationFrame(R),R=requestAnimationFrame(L)},V=()=>{cancelAnimationFrame(R),R=requestAnimationFrame(L)},O=new ResizeObserver(()=>{x.current=void 0});return O.observe(e),window.addEventListener("mousemove",D),e.addEventListener("contextmenu",I),window.addEventListener("mousedown",A),window.addEventListener("mouseup",P),window.addEventListener("blur",P),window.addEventListener("keydown",H,!0),window.addEventListener("scroll",F),e.addEventListener("scroll",V),e.addEventListener("pointerenter",C),e.addEventListener("pointerleave",M),()=>{O.disconnect(),window.removeEventListener("mousemove",D),e.removeEventListener("contextmenu",I),window.removeEventListener("mousedown",A),window.removeEventListener("mouseup",P),window.removeEventListener("blur",P),window.removeEventListener("keydown",H,!0),window.removeEventListener("scroll",F),e.removeEventListener("scroll",V),e.removeEventListener("pointerenter",C),e.removeEventListener("pointerleave",M),cancelAnimationFrame(R),E.current=t,j()}},[c,i,d,_,g,S,n,s,u]);let T=(0,a.useRef)(void 0);return t=e=>{let t=s.current;if(!t)return;x.current??=t.getBoundingClientRect();let r=x.current,a=Math.max(0,Math.min(E.current-r.left-8,r.width-16)),n=0,i=T.current;i?.anchorX===a?n=i.anchorT:T.current=i={anchorT:n=(t.scrollLeft+a)/d,anchorX:a},c({type:"trackpadScale",delta:e/64,anchorT:n,anchorX:a})},(r=(0,a.useRef)(t)).current=t,(0,a.useEffect)(()=>{let e=0,t=0,a=()=>{r.current(e),e=0},n=r=>{if(!r.ctrlKey&&!r.metaKey)return;r.preventDefault();let n=-r.deltaY;switch(r.deltaMode){case WheelEvent.DOM_DELTA_PAGE:n*=window.innerHeight;break;case WheelEvent.DOM_DELTA_LINE:n*=20}e+=n,cancelAnimationFrame(t),t=requestAnimationFrame(a)};return window.addEventListener("wheel",n,{passive:!1}),()=>{window.removeEventListener("wheel",n),cancelAnimationFrame(t)}},[]),(0,N.jsxs)(N.Fragment,{children:[(0,N.jsx)("div",{className:e4.default.cursorMarkerStickyParent,children:(0,N.jsx)("div",{className:e4.default.cursorMarkerLabelContainer,ref:p,style:v,children:(0,N.jsx)("div",{className:e4.default.cursorMarkerLabel,ref:w})})}),(0,N.jsx)("div",{className:e4.default.cursorMarkerStickyParent,children:(0,N.jsx)("div",{className:e4.default.cursorMarkerContainer,ref:b,style:y,children:(0,N.jsx)("div",{className:e4.default.cursorMarker,children:(0,N.jsx)("div",{className:e4.default.cursorSelection,ref:k,style:j})})})})]})}function tD(e){let{height:t,width:r,value:a,placeholder:n,onChange:s}=e;return(0,N.jsxs)("label",{className:e4.default.searchInputLabel,children:[(0,N.jsx)("div",{className:e4.default.searchInputPrefix,children:(0,N.jsx)(tI,{})}),(0,N.jsx)("input",{type:"search",value:a,placeholder:n,onChange:s,style:{height:t,width:r}})]})}function tI(){return(0,N.jsxs)("svg",{width:16,height:16,viewBox:"0 0 16 16",fill:"none","aria-hidden":"true",focusable:"false",children:[(0,N.jsx)("circle",{cx:"7",cy:"7",r:"4.5",stroke:"currentColor",strokeWidth:"1.5"}),(0,N.jsx)("path",{d:"M11.5 11.5L14 14",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"round"})]})}function tA(){return(0,N.jsx)("nav",{className:e4.default.searchBar,children:(0,N.jsx)(tP,{})})}function tP(){let{dispatch:e}=e2(),[t,r]=(0,a.useState)("");return(0,a.useEffect)(()=>{let r=setTimeout(()=>e({type:"setFilter",filter:t}),100);return()=>{clearTimeout(r)}},[e,t]),(0,N.jsx)("div",{className:e4.default.searchInput,children:(0,N.jsx)(tD,{height:40,onChange:e=>r(e.target.value),placeholder:"Search spans",value:t,width:"100%"})})}function tH(e){let{size:t=16}=e;return(0,N.jsxs)("svg",{width:t,height:t,viewBox:"0 0 24 24",fill:"none","aria-hidden":!0,children:[(0,N.jsx)("title",{children:"Zoom In"}),(0,N.jsx)("path",{d:"M11 19a8 8 0 1 0 0-16 8 8 0 0 0 0 16Z",stroke:"currentColor",strokeWidth:"2"}),(0,N.jsx)("path",{d:"M11 8v6M8 11h6",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round"}),(0,N.jsx)("path",{d:"M20 20l-3.5-3.5",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round"})]})}function tF(e){let{size:t=16}=e;return(0,N.jsxs)("svg",{width:t,height:t,viewBox:"0 0 24 24",fill:"none","aria-hidden":!0,children:[(0,N.jsx)("title",{children:"Zoom Out"}),(0,N.jsx)("path",{d:"M11 19a8 8 0 1 0 0-16 8 8 0 0 0 0 16Z",stroke:"currentColor",strokeWidth:"2"}),(0,N.jsx)("path",{d:"M8 11h6",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round"}),(0,N.jsx)("path",{d:"M20 20l-3.5-3.5",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round"})]})}function tV(e){let{size:t=16}=e;return(0,N.jsxs)("svg",{width:t,height:t,viewBox:"0 0 24 24",fill:"none","aria-hidden":!0,children:[(0,N.jsx)("title",{children:"Minus"}),(0,N.jsx)("path",{d:"M6 12h12",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round"})]})}function tO(){let{dispatch:e}=e2(),t=(0,a.useCallback)(()=>{e({type:"adjustScaleRatio",direction:1})},[e]),r=(0,a.useCallback)(()=>{e({type:"adjustScaleRatio",direction:-1})},[e]),n=(0,a.useCallback)(()=>{e({type:"adjustScaleRatio",direction:0})},[e]);return(0,N.jsxs)("div",{className:e4.default.zoomButtonGroup,children:[(0,N.jsx)("button",{"aria-label":"Zoom Out",className:e4.default.zoomButton,onClick:r,type:"button",children:(0,N.jsx)(tF,{size:18})}),(0,N.jsx)("div",{className:e4.default.divider}),(0,N.jsx)("button",{"aria-label":"Reset Zoom",className:e4.default.zoomButton,onClick:n,type:"button",children:(0,N.jsx)(tV,{size:18})}),(0,N.jsx)("div",{className:e4.default.divider}),(0,N.jsx)("button",{"aria-label":"Zoom In",className:e4.default.zoomButton,onClick:t,type:"button",children:(0,N.jsx)(tH,{size:18})})]})}var tW=e.i(9840583);function t$(){return[]}let tz={traceId:"skeleton",spans:[{parentSpanId:"",spanId:"root",name:"root span",kind:1,resource:"vercel.runtime",startTime:[5e3,0],endTime:[6e3,0],duration:[1e3,0],library:{name:"vercel-site"},status:{code:1},attributes:{"vercel.ownerId":"team_abc"},traceFlags:1,events:[],links:[]}],resources:[{name:"vercel.runtime",attributes:{}}],rootSpanId:"root"};function tB(t){let{trace:r=tz,className:n="",scrollLock:s=!1,height:i,withPanel:o=!1,highlightedSpans:l}=t,d=r===tz,{state:c,dispatch:u}=e2(),{timelineRef:m,scrollSnapshotRef:f}=c,h=c.memoCacheRef.current,p=(l?.length??0)>0||r.spans.length<=10;(0,a.useEffect)(()=>{let{root:e,map:t}=(0,tW.parseTrace)(r);u({type:"setRoot",root:e,spanMap:t,resources:r.resources||[]})},[u,r]);let{rows:v,spans:g,events:w,scale:b}=(t=>{let{state:r,dispatch:n}=e2(),{root:s,filter:i,scale:o,timelineRef:l,timelineWidth:d,spanMap:c,scrollSnapshotRef:u,selected:m,memoCacheRef:f,customSpanClassNameFunc:h}=r,p=function(e){let[t,r]=(0,a.useState)(e);return(0,a.useEffect)(()=>{if(t===e)return;let a=0,n=0,s=()=>{if(++a<=3){n=requestAnimationFrame(s);return}r(e)};return s(),()=>{cancelAnimationFrame(n)}},[t,e]),t}(r.timelineHeight),v=(0,a.useRef)(0),[g,w]=(0,a.useState)(t$),[b,y]=(0,a.useState)(t$),[_,x]=(0,a.useState)(t$),[k,N]=(0,a.useState)(-1),j=(0,a.useRef)(void 0);return(0,a.useEffect)(()=>j.current?.(i),[i]),(0,a.useEffect)(()=>{if(t?.length){for(let e of g)for(let r of e){let e=t.includes(r.span.spanId);r.isHighlighted!==e&&(r.isHighlighted=e,f.current.set(r.span.spanId,{}))}n({type:"forceRender"})}},[g,t,n,f]),(0,a.useEffect)(()=>{if(!s.startTime)return;let t=new Worker(e.r(4378851)),r=++v.current;t.addEventListener("message",e=>{let t=e.data;switch(t.type){case"setRowsResult":if(t.isEnd)for(let e of t.rows)for(let t of e)t.span=c[t.span.spanId]?.span??t.span;w(t.rows);break;case"updateHighlight":{if(t.requestId!==r)return;let{matches:e}=t;w(t=>{for(let r of t)for(let t of r){let r=e.has(t.span.spanId);t.isHighlighted!==r&&(t.isHighlighted=r,f.current.set(t.span.spanId,{}))}return t}),n({type:"forceRender"})}}});let a={requestId:r,type:"calculateSpanPositions",root:s};return t.postMessage(a),j.current=e=>{let a=e.trim().toLocaleLowerCase();if(!a)return void w(e=>e.map(e=>e.map(e=>(e.isHighlighted=void 0,{...e}))));let n={type:"filterSpans",requestId:r=++v.current,root:s,filter:a};t.postMessage(n)},()=>{t.terminate()}},[s,c,n,f]),(0,a.useEffect)(()=>{if(!g.length)return;let e=l.current,t=u.current,r=!1,a=!1,n=0,i=0,c=Math.max(500,.5*d),m=Array(g.length).fill(null),f=e=>t?e<t.startRow?e-t.startRow:e>t.endRow?e-t.endRow:0:0,h=e=>{if(!t)return 0;let r=0;e.endTime<t.startTime?r=t.startTime-e.endTime:e.startTime>t.endTime&&(r=e.startTime-t.endTime);let a=Math.abs(f(e.row));return r||a?Math.sqrt((r/o)**2+(24*a+2)**2):0},v=0,w=()=>{(r||!t)&&(r=!1,(()=>{if(!e)return;let{scrollLeft:r,scrollTop:a}=e,n=(a-24-8)/26,i=n+Math.ceil(p/26);u.current=t={anchorT:r/o,anchorX:0,scrollLeft:r,scrollTop:a,startTime:s.startTime+r/o,endTime:s.startTime+(r+d)/o,startRow:n,endRow:i,scale:o};for(let e=m.length;e--;)m[e]=null})()),(()=>{a=!0;let e=Math.min(1+i+Math.ceil(t?.endRow??1/0),g.length);for(let t=e;t--;){if(m[t])continue;let e=f(t);if(Math.abs(e)>i){if(a=!1,e>0)continue;break}let r=[],s=g[t];if(s){for(let e of s){if(!(0,tW.adjustSpanVisibility)(e,o))continue;let t=h(e);n=Math.max(t,n),r.push({d:t,span:e})}m[t]=r}}})();let l=[],b=[];for(let e of m)if(e)for(let{d:t,span:r}of e)!(t>i)&&(l.push(r),r.events&&b.push(...r.events));i<c&&(!a||i<n)&&(i=Math.min(c,i+100),v=requestAnimationFrame(w)),y(l),x(b),N(o)};w();let b=Date.now(),_=e=>{(e.ctrlKey||e.metaKey)&&(b=Date.now())};e?.addEventListener("wheel",_);let k=()=>{Date.now()-b<=50||(r=!0,cancelAnimationFrame(v),v=requestAnimationFrame(w))};return e?.addEventListener("scroll",k),()=>{cancelAnimationFrame(v),e?.removeEventListener("wheel",_),e?.removeEventListener("scroll",k)}},[g,s,o,u,l,d,p]),(0,a.useEffect)(()=>{let e;if(!m)return;for(let t of b)if(t.span.spanId===m.span.spanId){e=t;break}let t=e?.ref?.current;if(!e||!t)return;e.isSelected=!0;let r=e3(e,o),a=h?h(e):"";return t.className=(0,P.clsx)(r,a),()=>{e.isSelected=!1;let r=e3(e,o),a=h?h(e):"";t.className=(0,P.clsx)(r,a)}},[b,o,m,h]),{rows:g,spans:b,events:_,scale:k}})(l),y=(0,a.useRef)(null);(0,a.useLayoutEffect)(()=>{let e=y.current;if(!e)return;let t=()=>{let t=e.getBoundingClientRect();u({type:"setSize",width:t.width-16,height:t.height})};t();let r=new ResizeObserver(t);return r.observe(e),window.addEventListener("resize",t),()=>{r.disconnect(),window.removeEventListener("resize",t)}},[u]);let _=(0,a.useRef)({t:0,x:-1,y:-1,spanId:""}),x=(0,a.useCallback)(e=>{let t=_.current,r=Date.now(),{clientX:a,clientY:n}=e,s=Math.sqrt((a-t.x)**2+(n-t.y)**2);if(r-t.t<=500&&s<=8)return(e.stopPropagation(),e.preventDefault(),t.spanId)?(u({type:"select",id:t.spanId}),void u({type:"scaleToNode",id:t.spanId})):void u({type:"resetScale"});let i=e.target;if(!i.closest(`.${String(e4.default.timeline)}`))return;let o=i.closest("[data-span-id]"),l=o?.dataset.spanId||"";_.current={x:a,y:n,t:r,spanId:l},l&&(u({type:"toggleSelection",id:l}),e.stopPropagation())},[u]);(0,a.useLayoutEffect)(()=>{let e=m.current;if(!e)return;let t=f.current;t&&(e.scrollLeft=t.anchorT*b-t.anchorX)},[f,m,b]),(0,a.useEffect)(()=>{let e=c.selected?.span.spanId;if(!e)return;let t=setTimeout(()=>{let t=c.timelineRef.current,r=t?.querySelector(`[data-span-id="${e}"]`);if(!t||!r)return;let a=t.getBoundingClientRect(),n=r.getBoundingClientRect();n.width<a.width&&(n.left<a.left||n.right>a.right||n.top<a.top||n.bottom>a.bottom)&&r.scrollIntoView({block:"nearest",inline:"center",behavior:"smooth"})},500);return()=>{clearTimeout(t)}},[c.selected,c.timelineRef]),(0,a.useEffect)(()=>{let e=e=>{"Escape"===e.key&&u({type:"escape"})};return window.addEventListener("keydown",e),()=>{window.removeEventListener("keydown",e)}},[u]),(0,a.useEffect)(()=>{if(!s)return;let e=document.documentElement,t=document.body;e.style.overflow="clip",t.style.overflow="clip";let r=e=>{e?.cancelable?e.preventDefault():window.scrollTo({left:0,top:0,behavior:"instant"})};return r(),window.addEventListener("scroll",r,{passive:!1}),()=>{e.style.overflow="",t.style.overflow="",window.removeEventListener("scroll",r)}},[s]);let k=Math.max(c.timelineHeight-c.scrollbarWidth,26+26*v.length-2+84),j=!!(c.isMobile&&c.selected);return(0,N.jsxs)("div",{className:(0,P.clsx)(e4.default.traceViewer,d&&e4.default.skeleton,n),onClickCapture:x,ref:y,style:{height:i,"--timeline-padding":"8px","--row-height":"24px","--row-padding":"2px","--search-height":`${40*!p}px`,"--search-gap":`${!p?8:2}px`,"--map-height":"56px","--timeline-width":`${c.timelineWidth}px`,"--timeline-height":`${c.timelineHeight}px`,"--timeline-scroll-width":`${Math.round(c.root.duration*c.scale)}px`,"--panel-width":`${c.panelWidth}px`,"--panel-height":`${c.panelHeight}px`,"--height":`${c.height}px`,"--scrollbar-width":`${c.scrollbarWidth}px`,"--marker-height":"24px","--marker-notch-height":"8px"},children:[p?null:(0,N.jsx)(tA,{}),(0,N.jsx)(tT,{rows:v,scale:b,timelineRef:m}),(0,N.jsxs)("div",{className:(0,P.clsx)(e4.default.traceViewerContent,j&&e4.default.inert),children:[(0,N.jsx)("div",{className:e4.default.timeline,ref:m,children:(0,N.jsx)("div",{style:{position:"relative",width:c.timelineWidth,height:c.timelineHeight-16,padding:8,paddingBottom:0},children:(0,N.jsxs)("div",{className:e4.default.traceNode,style:{width:c.root.duration*b||void 0,height:k-16},children:[(0,N.jsx)(tL,{scale:b}),(0,N.jsx)(tC,{events:w,root:c.root,scale:b}),(0,N.jsx)(tM,{dispatch:u,events:w,memoCacheRef:c.memoCacheRef,root:c.root,scale:b,scrollSnapshotRef:f,spans:g,timelineRef:m}),(0,N.jsx)(e9,{cacheKey:h.get(""),cache:h,customSpanClassNameFunc:c.customSpanClassNameFunc,customSpanEventClassNameFunc:c.customSpanEventClassNameFunc,root:c.root,scale:b,scrollSnapshotRef:f,spans:g})]})})}),(0,N.jsx)("div",{className:e4.default.zoomButtonTraceViewer,children:(0,N.jsx)(tO,{})})]}),o?(0,N.jsx)("div",{className:(0,P.clsx)(e4.default.spanDetailPanelTraceViewer,!c.selected&&e4.default.hidden,c.isMobile&&e4.default.mobile),children:(0,N.jsx)(tf,{attached:!0})}):null]})}function tq(e){let{env:t}=e,{state:r}=e2(),{selected:n}=r,s=n?.span.attributes?.data,{resource:i,resourceId:o,runId:l}=(0,a.useMemo)(()=>{let e=n?.span.attributes?.resource;return"step"===e?{resource:"step",resourceId:s.stepId,runId:s.runId}:"run"===e?{resource:"run",resourceId:s.runId,runId:void 0}:"hook"===e?{resource:"hook",resourceId:s.hookId,runId:void 0}:"sleep"===e?{resource:"sleep",resourceId:n?.span?.spanId,runId:void 0}:{resource:void 0,resourceId:void 0,runId:void 0}},[n,s]),{data:d,error:c,loading:u}=x(t,i,o??"",{runId:l});if((0,a.useEffect)(()=>{c&&n&&i&&A.error(`Failed to load ${i} details`,{description:c.message})},[c,i,n]),!n||!i||!o)return null;let m=d||s;return(0,N.jsxs)("div",{className:(0,P.default)("flex flex-col px-2"),children:[(0,N.jsx)(eK,{data:m,isLoading:u,error:c??void 0}),"run"!==i&&(0,N.jsx)(eG,{correlationId:o,env:t,events:n.span.events})]})}function tU(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(t&&"pending"===e)return e4.default.spanPendingStriped;switch(e){case"running":return e4.default.spanRunning;case"pending":return e4.default.spanPending;case"completed":return e4.default.spanCompleted;case"cancelled":return e4.default.spanCancelled;case"paused":return e4.default.spanPaused;case"failed":return e4.default.spanFailed;default:return""}}let tY=e=>{let t=e.span.attributes,r=t?.resource;if("step"===r){let e=t.data,r=e?.stepName;if(r&&String(r).toLowerCase().endsWith("sleep"))return e4.default.spanSleep;let a=e?.status==="pending";return tU(e?.status,a)}if("run"===r){let e=t.data;return tU(e?.status,!1)}return"hook"===r?e4.default.spanHook:"sleep"===r?e4.default.spanSleep:""},tX=e=>{let t=e.event.name;return"step_failed"===t||"workflow_failed"===t?e4.default.eventFailed:"step_retrying"===t?e4.default.eventRetrying:"hook_created"===t||"hook_received"===t||"hook_disposed"===t?e4.default.eventHook:e4.default.eventDefault};e.s(["WorkflowTraceViewer",0,e=>{let{run:t,steps:n,hooks:s,events:i,env:o,isLoading:l,error:d,height:c=800}=e,[u,m]=(0,a.useState)(()=>new Date);(0,a.useEffect)(()=>{if(!t?.completedAt){let e=setInterval(()=>{m(new Date)},2e3);return()=>clearInterval(e)}},[t?.completedAt]);let f=(0,a.useMemo)(()=>{let e,a,o,l;if(!t)return;let d=new Map,c=new Map,m=[],f=new Map;for(let e of i){if("wait_created"===e.eventType||"wait_completed"===e.eventType){let t=f.get(e.correlationId)||[];t.push(e),f.set(e.correlationId,t);continue}let t=e.correlationId;if(t){let r=n.find(e=>e.stepId===t),a=s.find(e=>e.hookId===t);if(r){let r=d.get(t)||[];r.push(e),d.set(t,r)}else if(a){let r=c.get(t)||[];r.push(e),c.set(t,r)}else m.push(e)}else m.push(e)}let h=n.map(e=>{let t,a,n,s,i=d.get(e.stepId)||[];return t=u??new Date,a=(0,r.parseStepName)(String(e.stepName)),n=e.completedAt??t,s=eW(i),{spanId:String(e.stepId),name:a?.shortName??"",kind:1,resource:"step",library:eV,status:{code:0},traceFlags:1,attributes:{resource:"step",data:e},links:[],events:s,startTime:eP(e.startedAt),endTime:eP(n),duration:eF(e.startedAt,n)}}),p=s.map(e=>{let t,r,a,n=c.get(e.hookId)||[];return r=(t=n.slice().sort((e,t)=>t.createdAt.getTime()-e.createdAt.getTime()).find(e=>"hook_received"===e.eventType))?t.createdAt:new Date(Math.max(e.createdAt.getTime()+1e4,Date.now())),a=eW(n),{spanId:String(e.hookId),name:String(e.hookId),kind:1,resource:"hook",library:eV,status:{code:1},traceFlags:1,attributes:{resource:"hook",data:e},links:[],events:a,startTime:eP(e.createdAt),endTime:eP(r),duration:eF(e.createdAt,r)}}),v=Array.from(f.entries()).map(e=>{let t,r,a,n,s,i,o,[l,d]=e;return t=d.find(e=>"wait_created"===e.eventType),r=d.find(e=>"wait_completed"===e.eventType),a=t?.createdAt??u,n=r?.createdAt??u,s=eP(a),i=eP(n),o=eF(a,n),{spanId:l,name:"sleep",kind:1,resource:"sleep",library:eV,status:{code:0},traceFlags:1,attributes:{resource:"sleep",data:{correlationId:l}},links:[],events:eW(d),duration:o,startTime:s,endTime:i}}),g=[(e=u??new Date,a=t.startedAt??t.createdAt,o=t.completedAt??e,l=eW(m),{spanId:String(t.runId),name:String((0,r.parseWorkflowName)(t.workflowName)?.shortName??"?"),kind:1,resource:"run",library:eV,status:{code:0},traceFlags:1,attributes:{resource:"run",data:t},links:[],events:l,startTime:eP(a),endTime:eP(o),duration:eF(a,o)}),...[...h,...p,...v].slice().sort((e,t)=>eH(e.startTime)-eH(t.startTime))],w=g.map((e,t)=>{let r=0===t?void 0:String(g[t-1].spanId);return{...e,parentSpanId:r}});return{traceId:t.runId,rootSpanId:t.runId,spans:w,resources:[{name:"workflow",attributes:{"service.name":eV.name}}]}},[t,n,s,i,u]);return(0,a.useEffect)(()=>{d&&!l&&(console.error(d),A.error("Error loading workflow trace data",{description:d.message}))},[d,l]),(0,N.jsxs)("div",{className:"relative",children:[l&&(0,N.jsx)("div",{className:"absolute inset-0 z-50 flex items-center justify-center bg-background/80 backdrop-blur-sm",children:(0,N.jsxs)("div",{className:"flex flex-col items-center gap-3",children:[(0,N.jsx)(L,{className:"h-8 w-8 animate-spin text-muted-foreground"}),(0,N.jsx)("p",{className:"text-sm text-muted-foreground",children:"Loading trace data..."})]})}),(0,N.jsx)(e1,{withPanel:!0,customSpanClassNameFunc:tY,customSpanEventClassNameFunc:tX,customPanelComponent:(0,N.jsx)(tq,{env:o}),children:(0,N.jsx)(tB,{height:c,trace:f,withPanel:!0})})]})}],7534663),e.s([],4039354)}]);

//# sourceMappingURL=27bf3c5ab9193b20.js.map
//# debugId=041bdee9-cc5c-5e2e-a021-25f2e5fd8f5a
