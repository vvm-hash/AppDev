
!function(){try{var e="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:{},n=(new e.Error).stack;n&&(e._sentryDebugIds=e._sentryDebugIds||{},e._sentryDebugIds[n]="4a017429-62d3-55e6-ab41-7abd94c42a40")}catch(e){}}();
(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,8306707,e=>{"use strict";function t(e,t,r){let n={...e,...t};return t.levels?.length===0&&delete n.levels,t.deploymentDomains?.length===0&&delete n.deploymentDomains,t.routes?.length===0&&delete n.routes,t.requestPaths?.length===0&&delete n.requestPaths,t.requestIds?.length===0&&delete n.requestIds,t.statusCodes?.length===0&&delete n.statusCodes,t.caches?.length===0&&delete n.caches,t.domains?.length===0&&delete n.domains,t.requestMethods?.length===0&&delete n.requestMethods,t.sources?.length===0&&delete n.sources,t.environments?.length===0&&delete n.environments,t.branches?.length===0&&delete n.branches,""===t.searchQuery&&delete n.searchQuery,(!t.selectedLogId||r)&&delete n.selectedLogId,n}function r(e){if(e&&0!==e.length)return e.join(",")}function n(e){let t=Number(e.split("-")[1]);if(!Number.isNaN(t)||!Number.isNaN(t=Number(e.slice(0,13))))return t}function a(e){return Array.from(e.matchAll(/"(?<tokenQuoted>[^"]+)"|(?<tokenWord>\S+)/g),e=>e.groups?.tokenQuoted||e.groups?.tokenWord)}e.s(["extractTimestampOfLogId",()=>n,"getNewLogsQuery",()=>t,"stringifyArrayContent",()=>r,"tokenizeSearchQuery",()=>a])},4643311,e=>{e.v({badge:"disclosure-module__kAv1ia__badge",button:"disclosure-module__kAv1ia__button",collapseContent:"disclosure-module__kAv1ia__collapseContent",collapseGroup:"disclosure-module__kAv1ia__collapseGroup",icon:"disclosure-module__kAv1ia__icon",iconWrapper:"disclosure-module__kAv1ia__iconWrapper",open:"disclosure-module__kAv1ia__open"})},7580732,e=>{"use strict";var t=e.i(6468255),r=e.i(6696646),n=e.i(9722978),a=e.i(9499865),i=e.i(7807066),s=e.i(6226725),l=e.i(2037703),o=e.i(692265),u=e.i(4643311);let d=e=>{let{defaultExpanded:d=!1,title:c,contentClassName:m,count:f,id:g,onToggle:p,onExpand:h,children:y,className:v,buttonClassName:j,onClearFilter:b,...x}=e,[_,C]=(0,r.useState)(d);(0,r.useEffect)(()=>{C(d)},[d]);let I=(0,l.useCollapse)(),T=(0,o.useId)("collapse-section-"),w=(0,o.useId)("collapse-button-"),[k,{height:A}]=(0,a.default)(),S=(0,r.useCallback)(()=>C(!_),[_]),L=(0,r.useMemo)(()=>I?0===I.selected.size?_:I.selected.has(c):_,[I,_,c]),N=(0,r.useCallback)(()=>{"function"==typeof p&&p(),L||"function"!=typeof h||h(),I?I.onChange(L?"":c):S()},[I,L,c,p,S,h]);return(0,t.jsxs)("div",{className:(0,n.clsx)(u.default.collapse,{[u.default.context]:I},v),id:g,...x,children:[(0,t.jsx)("p",{className:"text-[14px] leading-[20px] font-medium",children:(0,t.jsx)("button",{"aria-controls":T,"aria-disabled":L?d:void 0,"aria-expanded":L,"aria-label":c,className:(0,n.clsx)("geist-reset",u.default.button,{[u.default.open]:L},j),id:w,onClick:N,children:(0,t.jsxs)("span",{className:"flex flex-row items-center justify-between flex-initial",children:[(0,t.jsxs)("span",{className:"flex flex-row items-center justify-start flex-initial",children:[(0,t.jsx)("span",{className:u.default.iconWrapper,children:(0,t.jsx)("span",{className:(0,n.clsx)(u.default.icon,{[u.default.open]:L}),children:(0,t.jsx)(i.ChevronRight,{"aria-hidden":"true",size:16})})}),(0,t.jsx)("span",{className:u.default.text,children:c})]}),f?(0,t.jsxs)("span",{"aria-label":`Clear ${c} filter`,className:u.default.badge,onClick:e=>{e.stopPropagation(),b?.()},onKeyDown:e=>{"Enter"===e.key&&(e.stopPropagation(),b?.())},role:"button",tabIndex:0,children:[(0,t.jsx)(s.CrossCircle,{color:"gray-700"}),(0,t.jsx)("p",{className:"text-[12px] leading-[16px] font-medium text-gray-900",children:f})]}):null]})})}),(0,t.jsx)("div",{"aria-labelledby":w,className:u.default.collapseContent,id:T,role:"region",style:{height:L?0!==A?A:void 0:0,visibility:L?"visible":"hidden"},children:(0,t.jsx)("div",{className:m,ref:k,children:y})})]})};d.displayName="Disclosure";let c=(0,r.memo)(d);e.s(["Disclosure",0,c])},3793583,e=>{"use strict";var t=e.i(9487122),r=e.i(8119470),n=e.i(2812875);function a(e,a,i){let{years:s=0,months:l=0,weeks:o=0,days:u=0,hours:d=0,minutes:c=0,seconds:m=0}=a,f=(0,n.subMonths)(e,l+12*s,i),g=(0,r.subDays)(f,u+7*o,i);return(0,t.constructFrom)(i?.in||e,g-1e3*(m+60*(c+60*d)))}e.s(["sub",()=>a])},8681022,e=>{e.v("/_next/static/media/worker.508297a8.ts")},9096091,9698309,e=>{"use strict";function t(e){let[t,r]=e;return 1e3*t+r/1e6}function r(e){return[Math.floor(e/1e3),e%1e3*1e3]}e.i(942336);let n=new Intl.NumberFormat(void 0,{maximumFractionDigits:2});function a(e){return 0===e?"0":e>=1e3?`${n.format(e/1e3)}s`:`${n.format(e)}ms`}let i=new Intl.NumberFormat(void 0,{minimumFractionDigits:2,maximumFractionDigits:2});function s(e){return e>=1e3?`${i.format(e/1e3)}s`:`${i.format(e)}ms`}e.s(["formatDuration",()=>a,"formatTimeSelection",()=>s,"getHighResInMs",()=>t,"getMsInHighRes",()=>r],9698309);let l=e=>{if(!e.events.length)return;let r=`${e.spanId}:ev`;return e.events.map((e,n)=>({key:`${r}${n}`,timestamp:t(e.timestamp),event:e})).sort((e,t)=>e.timestamp-t.timestamp)};e.s(["addToRow",0,(e,t,r)=>{let n=t.parent;for(let a=(n?.row||-1)+1;;++a){let n=e[a];if(n){if(!n.every(e=>{let{startTime:n,endTime:a}=e;return n+r>t.endTime||a-r<t.startTime}))continue}else n=[],e.push(n);t.row=a,n.push(t);break}},"adjustSpanVisibility",0,(e,t)=>{let r=e.duration*t;return e.isVisible=r>=2,e.isHovered=!1,e.isVisible},"parseTrace",0,e=>{let{spans:n}=e,a={startTime:0,endTime:0,duration:0,depth:0,children:[]},i={},s=new Map,o=e=>{let t=s.get(e);if(t)return t;let r=s.size+1;return s.set(e,r),r},u=!1;for(let e of n){let r,n=t(e.startTime),s=t(e.endTime),d=t(e.duration);s>a.endTime&&(a.endTime=s,a.duration=s-a.startTime),(0===a.startTime||n<a.startTime)&&(a.startTime=n,a.duration=a.endTime-n);let c=e.resource.startsWith("vercel.");c||(u=!0);let m=c&&("vercel.serverless-runtime"!==e.resource||!("http.method"in e.attributes)),f=m?0:o(e.resource);m&&(r=`▲ ${e.name}`),i[e.spanId]={parent:null,startTime:n,endTime:s,duration:d,span:e,depth:0,label:r,events:l(e),isVercel:m,children:[],resourceIndex:f}}let d=(e,t)=>{let r;t&&(r=i[t])||(r=a),e.parent=r,r.children.push(e)},c=e=>{for(let t of("parent"in e&&(e.depth=e.parent.depth+1),e.children))c(t)},m=1,f=(e,t)=>{if("parent"in e&&e.span.name===t){let t=e.endTime,n=e=>e.children.length?e.children.map(n).sort((e,t)=>e.duration-t.duration)[0]||e:"waitUntil"===e.span.name?(t=e.startTime,e.parent):e,a=n(e),s=`instrumentation-hint-${m++}`,l=.05*e.duration,o=e.startTime+l,u=Math.max(o+l,Math.min(t-.01*e.duration,e.endTime-l)),d=u-o,c={parent:a,startTime:o,endTime:u,duration:d,span:{spanId:s,name:"Add your spans here",resource:"",kind:0,library:{name:""},status:{code:200},traceFlags:0,attributes:{},links:[],events:[],startTime:r(o),endTime:r(u),duration:r(d)},depth:e.depth+1,isVercel:!1,isInstrumentationHint:!0,children:[],resourceIndex:1};return a.children.push(c),i[s]=c,!0}for(let r of e.children)if(f(r,t))return!0;return!1};for(let e of Object.values(i))d(e,e.span.parentSpanId);if(c(a),!u){for(let e of["Invoke Function","Invoke Middleware","Vercel Runtime"])if(f(a,e))break}return{root:a,map:i}}],9096091)},7620661,e=>{"use strict";var t=e.i(6468255),r=e.i(6696646),n=e.i(277234),a=e.i(1988648),i=e.i(1933683),s=e.i(248550),l=e.i(4535059),o=e.i(2720056),u=e.i(5071474),d=e.i(8216525);function c(e){let{children:r}=e;return(0,t.jsx)("span",{className:"grid size-[18px] place-content-center",children:r})}e.s(["useTracingQuickLinks",0,function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},{includeRequest:m=!0}=e;return(0,r.useCallback)(e=>{let r=e.attributes,f=r["vercel.ownerId"],g=r["vercel.projectId"],p=r["vercel.deploymentId"];if(!f||!g||!p)return[];let h=(0,n.default)((0,a.getDashboardDeploymentEndpoint)({teamSlug:f,projectName:g,deploymentId:p})).then(e=>(e.team||(e.team={name:"Unknown Team",slug:e.ownerId,id:e.ownerId}),e.project||(e.project={name:"Unknown Project",id:e.projectId,framework:""}),e.id=e.id.replace("dpl_",""),e)),y=[{key:"Project",value:h.then(e=>({label:e.project.name,href:`/${e.team.slug}/${e.project.name}`,icon:(0,t.jsx)(o.ProjectAvatar,{className:"!rounded-full",project:e.project,size:18})}))},{key:"Deployment",value:h.then(e=>({label:(0,t.jsx)("span",{className:"text-label-13-mono",children:(0,u.default)(e).hash}),href:`/${e.team.slug}/${e.project.name}/${e.id}`,icon:(0,t.jsx)(c,{children:(0,t.jsx)(d.DeploymentStatus,{deployment:e})})}))}],v=r["http.route"];v&&y.push({key:"Route",value:h.then(e=>({label:"Observability",href:`/${e.team.slug}/${e.project.name}/observability/route/${encodeURIComponent(String(v).replace(/\.rsc$/,""))}`,icon:(0,t.jsx)(c,{children:(0,t.jsx)(i.Eye,{size:12})})}))});let j=r["vercel.sessionId"];j&&y.push({key:"Session",value:h.then(e=>({label:"Traces",href:`/${e.team.slug}/${e.project.name}/${e.id}/logs?${new URLSearchParams({sessionIds:String(j),hasTraces:"true"}).toString()}`,icon:(0,t.jsx)(c,{children:(0,t.jsx)(l.Traces,{size:12})})}))});let b=m&&r["vercel.requestId"];return b&&y.push({key:"Request",value:h.then(e=>({label:"Logs",href:`/${e.team.slug}/${e.project.name}/${e.id}/logs?${new URLSearchParams({requestIds:String(b),selectedLogId:String(b)}).toString()}`,icon:(0,t.jsx)(c,{children:(0,t.jsx)(s.Logs,{size:12})})}))}),y},[m])}])},7033605,294613,8063555,6094744,e=>{"use strict";var t=e.i(6696646),r=e.i(1233856),n=e.i(9100551),a=e.i(409142),i=e.i(516467),s=e.i(3793583),l=e.i(7917902),o=e.i(268049);let u={hobby:{hours:1},pro:{days:1},enterprise:{days:3}},d={hobby:{hours:1},pro:{days:30},enterprise:{days:30}},c={days:14};function m(e,t){return(e?d:u)[t??"hobby"]}function f(e,t){let r=m(e,t);return(0,o.milliseconds)(r)>(0,o.milliseconds)(c)?c:r}e.s(["getMaxRetention",()=>m,"getMaxTimeRange",()=>f],294613);var g=e.i(2126130);let p=()=>{let{team:e,isLoading:r}=(0,l.useAccount)(),{ready:n,hasObservabilityPlusAccessOnCurrentProject:a}=(0,g.useHasObservabilityPlus)(),o=!!n&&a,u=e?.billing?.plan??"hobby";return(0,t.useMemo)(()=>{let t=m(o,u),n=f(o,u),a={past30Minutes:{minutes:30},pastHour:{hours:1},past12Hours:{hours:12},pastDay:{days:1},past3Days:{days:3},pastWeek:{days:7},past2Weeks:{days:14},maximum:n};return{isLoading:r,billingPlan:u,maxRetention:t,maxTimeRange:n,getNewDates:e=>{let t=new Date;return[(0,s.sub)(t,a[e]),t]},findClosestTimeline:(e,t)=>{let r,n,l,o=[];for(let e of Object.values(a))o.push((0,s.sub)(t,e));let u=isNaN(l=+(0,i.toDate)(e))?NaN:(o.forEach((e,t)=>{let a=(0,i.toDate)(e);if(isNaN(+a)){r=NaN,n=NaN;return}let s=Math.abs(l-a);(null==r||s<n)&&(r=t,n=s)}),r),d=Object.keys(a);return void 0===u?"pastHour":d[u]},teamId:e?.id,hasExtendedTimeline:o}},[u,o,r,e?.id])};e.s(["useUserRetention",0,p],8063555);var h=e.i(7133058),y=e.i(60582);let[v,j]=(0,h.default)(function(e){let t=y.IS_DASH?56:46;return{functionFilterDefaultExpanded:!1,isDeploymentEditable:!0,...Object.fromEntries(Object.entries(e).filter(e=>{let[t,r]=e;return void 0!==r})),topOffset:t}});e.s(["PageConfigProvider",()=>v,"usePageConfig",()=>j],6094744);let b=()=>{let e=(0,n.useParams)(),{deploymentIdQuery:r}=j(),i=(0,t.useMemo)(()=>r&&"string"==typeof e?.id?[`dpl_${e.id}`]:[],[r,e]),s=(0,t.useMemo)(()=>({timeline:{defaultValue:"past30Minutes",onChangeRemoveKeys:["startDate","endDate","page","live"]},startDate:{defaultValue:void 0,formatToUrl:e=>Math.floor(e.getTime()/1e3).toString(),parseFromUrl:e=>new Date(1e3*Number(e)),onChangeRemoveKeys:["timeline","live","paused"]},endDate:{defaultValue:void 0,formatToUrl:e=>Math.floor(e.getTime()/1e3).toString(),parseFromUrl:e=>new Date(1e3*Number(e)),onChangeRemoveKeys:["timeline","live","paused"]},live:{defaultValue:!1,formatToUrl:e=>e.toString(),parseFromUrl:e=>"true"===e,onChangeRemoveKeys:["page","timeline","startDate","endDate","paused"]},paused:{defaultValue:!1,formatToUrl:e=>e.toString(),parseFromUrl:e=>"true"===e},page:{defaultValue:1,formatToUrl:e=>e.toString(),parseFromUrl:e=>Number(e)},selectedLogId:{defaultValue:""},refreshedAt:{defaultValue:void 0},caches:{defaultValue:[],formatToUrl:e=>e.join(","),parseFromUrl:e=>e.split(",")},levels:{defaultValue:[],formatToUrl:e=>e.join(","),parseFromUrl:e=>e.split(",")},deploymentDomains:{defaultValue:[],formatToUrl:e=>e.join(","),parseFromUrl:e=>e.split(",")},deploymentIds:{defaultValue:i,formatToUrl:e=>e.join(","),parseFromUrl:e=>e.split(",")},routes:{defaultValue:[],formatToUrl:e=>e.join(","),parseFromUrl:e=>e.split(",")},requestPaths:{defaultValue:[],formatToUrl:e=>e.join(","),parseFromUrl:e=>e.split(",")},requestMethods:{defaultValue:[],formatToUrl:e=>e.join(","),parseFromUrl:e=>e.split(",")},domains:{defaultValue:[],formatToUrl:e=>e.join(","),parseFromUrl:e=>e.split(",")},sources:{defaultValue:[],formatToUrl:e=>e.join(","),parseFromUrl:e=>e.split(",")},requestTags:{defaultValue:[],formatToUrl:e=>e.join(","),parseFromUrl:e=>e.split(",")},searchQuery:{defaultValue:""},statusCodes:{defaultValue:[],formatToUrl:e=>e.join(","),parseFromUrl:e=>e.split(",")},environments:{defaultValue:[],formatToUrl:e=>e.length>0?e.join(","):"",parseFromUrl:e=>e.split(",")},branches:{defaultValue:[],formatToUrl:e=>e.join(","),parseFromUrl:e=>e.split(",")},requestIds:{defaultValue:[],formatToUrl:e=>e.join(","),parseFromUrl:e=>e.split(",")},myLogs:{defaultValue:!1,formatToUrl:e=>e.toString(),parseFromUrl:e=>"true"===e},sessionIds:{defaultValue:[],formatToUrl:e=>e.join(","),parseFromUrl:e=>e.split(",")},hasTraces:{defaultValue:!1,formatToUrl:e=>e.toString(),parseFromUrl:e=>"true"===e},traceIds:{defaultValue:[],formatToUrl:e=>e.join(","),parseFromUrl:e=>e.split(",")},invocationIds:{defaultValue:[],formatToUrl:e=>e.join(","),parseFromUrl:e=>e.split(",")},panelState:{defaultValue:"auto"},preset:{defaultValue:null},useClickHouseLogs:{defaultValue:void 0}}),[i]),{set:l,state:o}=(0,a.useSearchParamsState)(s);return(0,t.useMemo)(()=>({state:o,setState:l,hasActiveFilters:()=>o.deploymentDomains.length>0||o.routes.length>0||o.domains.length>0||o.sources.length>0||o.levels.length>0||o.statusCodes.length>0||o.requestIds.length>0||""!==o.searchQuery||o.requestMethods.length>0||o.requestPaths.length>0||o.caches.length>0||o.environments.length>0||o.branches.length>0||o.requestTags.length>0||o.myLogs||o.sessionIds.length>0||o.hasTraces||o.traceIds.length>0||o.invocationIds.length>0||void 0!==o.startDate||void 0!==o.endDate||"past30Minutes"!==o.timeline||o.live}),[o,l])};e.s(["useLogsApiParams",0,()=>{let{state:e}=b(),{getNewDates:n}=p();return(0,t.useMemo)(()=>{if(e.startDate&&e.endDate)return e;let[t,a]=n(e.timeline);return{...e,startDate:(0,r.endOfDuration)(t,{minutes:1}),endDate:(0,r.endOfDuration)(a,{minutes:1})}},[e,n])},"useLogsQueryState",0,b],7033605)},710731,e=>{e.v({badge:"generic-filter-module__Jtj5jG__badge",button:"generic-filter-module__Jtj5jG__button",card:"generic-filter-module__Jtj5jG__card",checkbox:"generic-filter-module__Jtj5jG__checkbox",onlyInstance:"generic-filter-module__Jtj5jG__onlyInstance",option:"generic-filter-module__Jtj5jG__option",optionsContainer:"generic-filter-module__Jtj5jG__optionsContainer",skeleton:"generic-filter-module__Jtj5jG__skeleton",tooltip:"generic-filter-module__Jtj5jG__tooltip",tooltipContainer:"generic-filter-module__Jtj5jG__tooltipContainer",truncateText:"generic-filter-module__Jtj5jG__truncateText"})},6209667,e=>{"use strict";var t=e.i(6468255),r=e.i(6357175),n=e.i(6696646),a=e.i(9508212),i=e.i(5255926),s=e.i(1344973),l=e.i(8835183),o=e.i(3869281),u=e.i(5468328),d=e.i(2988836),c=e.i(9031150),m=e.i(7797615),f=e.i(710731);let g=(0,n.memo)(function(e){let{options:i,onChange:o,onSearch:u=()=>{},searchId:d,searchLabel:g="Search",searchPlaceholder:h="Search…",isCountLoading:j=!1,isFirstLoading:b=!1,isLoading:x=!1,hideSearch:_=!1,selectedOptions:C=[],showSelectedOptionsAtTop:I,totalAvailableOptions:T}=e,[w,k]=(0,n.useState)(),A=(0,r.useDebouncedCallback)(u,300),S=(0,n.useRef)(null),L=(0,n.useRef)(void 0),N=(0,n.useMemo)(()=>{let e=[],t=[];return I&&C.length?(i.forEach(r=>{C.includes(r.value)?e.push(r):t.push(r)}),[...e,...t]):i},[i,C,I]);return((0,n.useEffect)(()=>{let e=L.current;I&&e&&C!==e&&S.current&&C.findIndex(t=>!e.includes(t))>=0&&(S.current.scrollTop=0),L.current=C},[C,I]),x||0!==T||0!==C.length||w)?(0,t.jsxs)(a.Stack,{gap:2,children:[_?null:(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"geist-sr-only",htmlFor:d,children:g}),(0,t.jsx)(l.SearchInput,{className:f.default.searchInput,clearable:!0,id:d,loading:x,onChange:e=>{A(e.target.value),k(e.target.value)},placeholder:h,value:w,width:"100%"})]}),(0,t.jsxs)("div",{className:f.default.optionsContainer,ref:S,tabIndex:-1,children:[N.map(e=>(0,t.jsx)(p,{additionalInfo:e.additionalInfo,checked:C.includes(e.value),count:e.count,icon:e.icon,isCountLoading:j,label:e.label,onChange:()=>{(0,c.awaitPaint)().then(()=>{o(C.includes(e.value)?C.filter(t=>t!==e.value):[...C,e.value])})},value:e.value},e.value)),b?(0,t.jsx)(y,{selectedCount:C.length}):null]}),T&&T>25?(0,t.jsxs)(s.Text,{size:12,style:{color:"var(--accents-5)",textAlign:"center"},children:[(0,m.abbreviateNumber)(T-25)," more to search"]}):null]}):(0,t.jsx)(v,{})});function p(e){let{count:r,label:l,value:c,onChange:g,checked:p,icon:h,isCountLoading:y,additionalInfo:v}=e,[j,b]=(0,n.useState)(!1),x=(0,n.useRef)(null),_="string"==typeof l?l:c;return(0,t.jsx)(a.Stack,{className:f.default.option,justify:"center",onMouseEnter:()=>{x.current&&b(x.current.offsetWidth<x.current.scrollWidth)},children:(0,t.jsx)(u.Tooltip,{className:f.default.tooltipContainer,delayTime:100,desktopOnly:!0,forceHide:!j,lowerDelay:!0,maxWidth:"100%",position:"right",tabIndex:null,text:_,tooltipClassName:f.default.tooltip,useParentForBoundingRect:!0,children:(0,t.jsx)(a.Stack,{align:"center",direction:"row",children:(0,t.jsx)(o.Checkbox,{checked:p,className:f.default.checkbox,fullWidth:!0,id:c,onChange:g,textOverflow:!1,value:c,children:(0,t.jsxs)(a.Stack,{align:"center",direction:"row",gap:2,children:[h?(0,t.jsx)(a.Stack,{children:h}):null,(0,t.jsx)("span",{className:f.default.truncateText,ref:x,children:l}),v?(0,t.jsx)(u.Tooltip,{text:v,children:(0,t.jsx)(d.InformationFillSmall,{})}):null,y?(0,t.jsx)(i.Skeleton,{height:20,style:{marginLeft:"auto"},width:30}):null,y||"number"!=typeof r?null:(0,t.jsx)("span",{className:f.default.badge,style:{marginLeft:"auto"},children:(0,t.jsx)(s.Text,{color:"gray-900",size:12,weight:500,children:(0,m.abbreviateNumber)(r).toUpperCase()})})]})})})})})}function h(){return(0,t.jsxs)(a.Stack,{className:f.default.skeleton,direction:"row",gap:2,children:[(0,t.jsx)(i.Skeleton,{height:20,width:20}),(0,t.jsx)(i.Skeleton,{height:23,width:170})]})}function y(e){let{selectedCount:r}=e;return(0,t.jsx)(t.Fragment,{children:Array.from({length:r>3?0:3-r},(e,r)=>(0,t.jsx)(h,{},r))})}function v(e){let{comment:r}=e;return(0,t.jsx)(a.Stack,{align:"center",className:f.default.card,direction:"column",gap:1,justify:"center",children:(0,t.jsx)(s.Text,{color:"gray-900",size:14,children:r||"No options."})})}e.s(["LogFilter",0,g,"generateFilterOption",0,e=>{let{attributeValue:t,total:r}=e;return{label:t,value:t,count:r}}])},7827812,e=>{"use strict";e.s(["LOGS_PAGE_SIZE",()=>p,"useGroupLogs",()=>j,"useGroupLogsInternal",()=>y]);var t=e.i(8815282),r=e.i(119294),n=e.i(6352514),a=e.i(8042625),i=e.i(4244280),s=e.i(7917902),l=e.i(7432042),o=e.i(6696646),u=e.i(1138941),d=e.i(6060673),c=e.i(8306707),m=e.i(7033605),f=e.i(9224004),g=e.i(4597921);let p=50,h={hobby:(0,l.default)("65 seconds"),pro:(0,l.default)("205 seconds"),enterprise:(0,l.default)("905 seconds")};function y(){let{data:e}=(0,d.useProject)((0,u.useProjectIdOrName)()),{user:l,team:f,isLoading:p}=(0,s.useAccount)(),y=(0,g.useServerFlag)("logs-live-mode-refresh-interval",2e3),{deploymentDomains:j,deploymentIds:b,domains:x,levels:_,routes:C,sources:I,requestTags:T,startDate:w,endDate:k,live:A,searchQuery:S,requestIds:L,requestMethods:N,requestPaths:U,statusCodes:D,caches:M,environments:P,branches:q,myLogs:F,sessionIds:E,hasTraces:R,traceIds:V,invocationIds:$,useClickHouseLogs:O}=(0,m.useLogsApiParams)(),G=(0,t.default)((t,r)=>{if(r&&!r.hasMoreRows)return null;if(p||!e)return;let n=null!==f?f.id:null,s=null!==l?l?.uid:null,o=f?.billing?h[f.billing.plan]:h.enterprise,u=n||s;if(null===u)return;let d=A?void 0:k?.getTime(),m=t;t>0&&r?.rows&&r.rows.length>0&&(d=new Date(r.rows[r.rows.length-1].timestamp).getTime()-1,m=0);let g=(0,a.encode)({startDate:L.length>0?Math.min(...L.map(e=>Number(e.split("-")[1])))-o:w.getTime(),endDate:L.length>0?Math.max(...L.map(e=>Number(e.split("-")[1])))+o:d,page:m,searchQuery:(0,c.stringifyArrayContent)((0,c.tokenizeSearchQuery)(S)),projectId:e.id,deploymentDomain:(0,c.stringifyArrayContent)(j),deploymentId:(0,c.stringifyArrayContent)(b),domain:(0,c.stringifyArrayContent)(x),level:(0,c.stringifyArrayContent)(_),ownerId:u,source:(0,c.stringifyArrayContent)(I),requestTags:(0,c.stringifyArrayContent)(T),route:(0,c.stringifyArrayContent)(C),requestPath:(0,c.stringifyArrayContent)(U),requestMethod:(0,c.stringifyArrayContent)(N),requestId:L.map(e=>e.split("::").pop()),statusCode:(0,c.stringifyArrayContent)(D),cache:(0,c.stringifyArrayContent)(M),myLogs:F?"true":void 0,environment:(0,c.stringifyArrayContent)(P),branch:(0,c.stringifyArrayContent)(q),sessionId:(0,c.stringifyArrayContent)(E),hasTraces:R?"true":void 0,traceId:(0,c.stringifyArrayContent)(V),invocationId:(0,c.stringifyArrayContent)($),useClickHouseLogs:O});return`${i.API_LOGS}/request-logs${g}`},(e,t)=>(r.analytics.track(n.AnalyticsEvent.LOGS_RUN_QUERY,{teamSlug:f?.slug}),v(e,t)),{refreshInterval:A?y:0,dedupingInterval:A?800:void 0,keepPreviousData:!0,revalidateAll:A,revalidateOnFocus:A,revalidateFirstPage:A}),z=(0,o.useMemo)(()=>G.data?.flatMap(e=>e.rows??[])||[],[G.data]);return(0,o.useMemo)(()=>({...G,logRows:z}),[G,z])}async function v(e,t){let r=await fetch(e,t);if(!r.ok){let e=await r.json(),t=Error(e.message);throw e.name&&(t.name=e.name),t}return r.json()}function j(){let e=(0,f.useLogs)();return{logRows:e.logRows,...e.swr}}},9224004,e=>{"use strict";e.s(["GroupLogsProvider",()=>f,"useLogs",()=>g],9224004);var t=e.i(6468255),r=e.i(6696646),n=e.i(7827812),a=e.i(349746),i=e.i(7033605),s=e.i(5851942),l=e.i(9100551),o=e.i(9171423),u=e.i(134877),d=e.i(8042625),c=e.i(7620661);let m=(0,r.createContext)(null);function f(e){let{children:f}=e,{selectedLogId:g}=(0,i.useLogsApiParams)(),p=(0,n.useGroupLogsInternal)(),h=(0,a.useSelectedLogInternal)(g,p.logRows),y=(e=>{let[t,n]=(0,r.useState)({}),a=(0,r.useRef)(new Map),i=(0,l.useParams)(),s=i?.teamSlug||"";if((0,r.useEffect)(()=>{if(!s||!e)return;let t=a.current;t.has(e)||(t.set(e,void 0),(async()=>{let r=await (0,o.fetchApi)(`/api/observability/traces/${e}${(0,d.encode)({teamId:s,project:i?.project})}`);if(!r||"string"==typeof r||"error"in r||(0,u.isAPIError)(r))return t.delete(e);t.set(e,r),n({})})())},[s,e,i]),e)return a.current.get(e)})(h.data?.traceId&&h.data?.sessionId?h.data.traceId:void 0),v=(0,c.useTracingQuickLinks)({includeRequest:!1}),j=(0,r.useMemo)(()=>({logRows:p.logRows,selectedLog:h.data,selectedTrace:y,isLoadingSelected:h.isLoading,error:h.error,swr:p}),[p,h.data,y,h.isLoading,h.error]);return(0,t.jsx)(m.Provider,{value:j,children:(0,t.jsx)(s.TraceViewerProvider,{getQuickLinks:v,children:f})})}function g(){let e=(0,r.useContext)(m);if(!e)throw Error("useLogs must be used within a LogsProvider");return e}m.displayName="LogsContext"},349746,e=>{"use strict";e.s(["useSelectedLog",()=>f,"useSelectedLogInternal",()=>c]);var t=e.i(3911483),r=e.i(8042625),n=e.i(4244280),a=e.i(7917902),i=e.i(6696646),s=e.i(1138941),l=e.i(6060673),o=e.i(8306707),u=e.i(9224004),d=e.i(7033605);function c(e,u){let{team:c,isLoading:f}=(0,a.useAccount)(),{data:g}=(0,l.useProject)((0,s.useProjectIdOrName)()),{useClickHouseLogs:p}=(0,d.useLogsApiParams)(),[h,y]=(0,i.useState)();(0,i.useEffect)(()=>{if(!e)return;let t=u.find(t=>t.requestId===e);t?y(t):h&&e!==h.requestId&&y(void 0)},[e,u,h]);let v=(0,i.useMemo)(()=>{if(e)return u.find(t=>t.requestId===e)},[u,e]),j=(0,t.default)(()=>{if(v||f||!e)return null;let t=g?.id;if(!c||!t)return null;let a=c.id,i=(0,o.extractTimestampOfLogId)(e);if(void 0===i)return null;let s=(0,r.encode)({ownerId:a,projectId:t,startDate:i,endDate:i,requestId:[e],useClickHouseLogs:p});return`${n.API_LOGS}/request-logs${s}`},m,{revalidateOnFocus:!1});return e?{data:j.data??v??h,error:j.error,isLoading:j.isLoading}:{data:void 0,error:void 0,isLoading:!1}}async function m(e,t){let r=await fetch(e,t);if(!r.ok){let e=await r.json(),t=Error(e.message);throw e.name&&(t.name=e.name),t}let n=await r.json();return n.rows?.[0]}function f(){let e=(0,u.useLogs)();return{data:e.selectedLog,error:e.error,isLoading:e.isLoadingSelected}}},4569709,e=>{e.v({draggable:"draggable-border-module__CfqrMq__draggable",dragging:"draggable-border-module__CfqrMq__dragging",fakeBorder:"draggable-border-module__CfqrMq__fakeBorder",horizontal:"draggable-border-module__CfqrMq__horizontal",leftBorder:"draggable-border-module__CfqrMq__leftBorder",root:"draggable-border-module__CfqrMq__root",vertical:"draggable-border-module__CfqrMq__vertical"})},8510056,e=>{"use strict";var t=e.i(6468255),r=e.i(6696646),n=e.i(9722978),a=e.i(4569709);function i(e){let{element:i,onWidthChange:s,position:l,onReset:o,onStartDrag:u,onStopDrag:d}=e,c=(0,r.useRef)(0),m=(0,r.useRef)(0),[f,g]=(0,r.useState)(!1),p="bottom"===l||"top"===l;return(0,r.useEffect)(()=>{let e=e=>{if(e.preventDefault(),e.dataTransfer&&(e.dataTransfer.dropEffect="move"),!f)return;let t=m.current;if(p){let r=e.clientY-c.current;t+="top"===l?-r:r}else"left"===l?t+=c.current-e.clientX:t+=e.clientX-c.current;s(t)},t=()=>{g(!1),d&&d()};return document.addEventListener("dragover",e),document.addEventListener("drop",t,{capture:!0}),()=>{document.removeEventListener("dragover",e),document.removeEventListener("drop",t)}},[f,s,l,p,d]),(0,t.jsxs)("div",{className:(0,n.clsx)(a.default.root,{[a.default.horizontal]:p,[a.default.vertical]:!p}),style:{[l]:"right"===l?"-10px":"-8px"},children:[(0,t.jsx)("div",{className:a.default.draggable,draggable:!0,onClick:e=>{o&&2===e.detail&&o()},onDrag:()=>{g(!0)},onDragEnd:()=>{g(!1),d&&d()},onDragStart:e=>{g(!0),u&&u(),i.current&&(c.current=p?e.clientY:e.clientX,m.current=p?i.current.offsetHeight:i.current.offsetWidth)},role:"none"}),(0,t.jsx)("div",{className:(0,n.clsx)(a.default.fakeBorder,{[a.default.dragging]:f,[a.default.leftBorder]:"left"===l}),draggable:!1})]})}e.s(["DraggableBorder",()=>i])},9321858,6097977,e=>{"use strict";var t=e.i(6468255),r=e.i(6696646),n=e.i(3285452),a=e.i(9508212),i=e.i(1344973),s=e.i(3671642),l=e.i(5323212),o=e.i(6891161),u=e.i(8735244);let d=[1e3,5e3,1e4,5e4,1e5];function c(e){let{onClose:c,getExport:m,format:f}=e,[g,p]=(0,r.useState)(1e3),[h,y]=(0,r.useState)(!1),v=async()=>{y(!0),await m(f,g),y(!1),c()};return(0,t.jsxs)(o.Modal.Modal,{active:!0,onClickOutside:c,children:[(0,t.jsx)(o.Modal.Body,{children:(0,t.jsxs)(a.Stack,{gap:6,children:[(0,t.jsx)("header",{children:(0,t.jsxs)(a.Stack,{direction:"row",justify:"space-between",children:[(0,t.jsxs)(i.Text,{as:"h2",lineHeight:32,size:24,weight:600,children:["Export Logs (",f.toUpperCase(),")"]}),h?(0,t.jsx)(u.Spinner,{size:20}):null]})}),(0,t.jsxs)(i.Text,{lineHeight:20,size:14,children:["Export to ",f]}),(0,t.jsx)(s.Label,{id:"select-line-limit",value:"Result Limit",withInput:!0,children:(0,t.jsx)(l.Select,{id:"select-line-limit",onChange:e=>{p(Number(e.target.value))},prefix:(0,t.jsx)(n.ArrowDown,{}),value:g,children:d.map(e=>(0,t.jsx)("option",{value:e,children:e},e))})})]})}),(0,t.jsxs)(o.Modal.Actions,{children:[(0,t.jsx)(o.Modal.Action,{onClick:c,type:"secondary",children:"Cancel"}),(0,t.jsx)(o.Modal.Action,{disabled:h,onClick:v,type:"secondary",children:"Export"})]})]})}e.s(["GroupExportModal",()=>c],9321858);var m=e.i(455575),f=e.i(8042625),g=e.i(277234),p=e.i(4244280),h=e.i(7917902),y=e.i(8631221),v=e.i(3196486),j=e.i(1138941),b=e.i(6060673),x=e.i(7033605),_=e.i(8306707);function C(){let{user:e,team:t,isLoading:r}=(0,h.useAccount)(),n=(0,m.useToasts)(),{deploymentDomains:a,deploymentIds:i,domains:s,levels:l,routes:o,sources:u,startDate:d,endDate:c,searchQuery:C,requestIds:w,requestMethods:k,requestPaths:A,statusCodes:S,caches:L,environments:N,branches:U,myLogs:D,sessionIds:M,hasTraces:P,traceIds:q,invocationIds:F}=(0,x.useLogsApiParams)(),{data:E}=(0,b.useProject)((0,j.useProjectIdOrName)());return{getExport:async(m,h)=>{if(r||!E)return;let j=null!==t?t.id:null,b=null!==e?e.uid:null,x=(0,f.encode)({branch:(0,_.stringifyArrayContent)(U),cache:(0,_.stringifyArrayContent)(L),deploymentDomain:(0,_.stringifyArrayContent)(a),deploymentId:(0,_.stringifyArrayContent)(i),domain:(0,_.stringifyArrayContent)(s),endDate:c?.getTime(),environment:(0,_.stringifyArrayContent)(N),format:m,level:(0,_.stringifyArrayContent)(l),ownerId:j||b,pageSize:h,projectId:E.id,requestId:w[0],requestMethod:(0,_.stringifyArrayContent)(k),requestPath:(0,_.stringifyArrayContent)(A),route:(0,_.stringifyArrayContent)(o),searchQuery:C?(0,_.stringifyArrayContent)((0,_.tokenizeSearchQuery)(C)):void 0,source:(0,_.stringifyArrayContent)(u),startDate:d.getTime(),statusCode:(0,_.stringifyArrayContent)(S),myLogs:D?"true":void 0,sessionId:(0,_.stringifyArrayContent)(M),hasTraces:P?"true":void 0,traceId:(0,_.stringifyArrayContent)(q),invocationId:(0,_.stringifyArrayContent)(F)}),R=`${p.API_GROUP_LOGS_EXPORT}${x}`,V=await (0,g.fetchAPI)(R);if(V.error)return void n.error("Something went wrong, please try again later");if("csv"===m){let e=new Promise(e=>{I(V.data,"logs_result.csv"),setTimeout(()=>{e(!0)},500)});await e.then(()=>n.success("csv file downloaded"))}else{let e=new Promise(e=>{T(JSON.stringify(V.data),"logs_result.json"),setTimeout(()=>{e(!0)},500)});await e.then(()=>n.success("json file downloaded"))}(0,v.sendToSnowflake)(y.Topic.VercelAppV0LogQueryResultsExported,{team_id:j||void 0,user_id:b||"",project_id:E.id,export_type:m,num_results_downloaded:h},"vercel-app")}}}function I(e,t){let r=window.URL.createObjectURL(new Blob([e])),n=document.createElement("a");n.setAttribute("href",r),n.setAttribute("download",t),document.getElementById("select-line-limit").appendChild(n),n.click(),document.getElementById("select-line-limit").removeChild(n)}function T(e,t){let r=`data:text/json;charset=utf-8,${encodeURIComponent(e)}`,n=document.createElement("a");n.setAttribute("href",r),n.setAttribute("download",t),document.getElementById("select-line-limit").appendChild(n),n.click(),document.getElementById("select-line-limit").removeChild(n)}e.s(["downloadCsv",()=>I,"downloadJson",()=>T,"useGroupLogsExport",()=>C],6097977)}]);

//# sourceMappingURL=d3bd3e4b502020cc.js.map
//# debugId=4a017429-62d3-55e6-ab41-7abd94c42a40
