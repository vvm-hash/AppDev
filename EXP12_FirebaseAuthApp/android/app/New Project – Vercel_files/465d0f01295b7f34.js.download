
!function(){try{var e="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:{},n=(new e.Error).stack;n&&(e._sentryDebugIds=e._sentryDebugIds||{},e._sentryDebugIds[n]="5079b0e6-247b-588c-a629-a72736a58792")}catch(e){}}();
(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,5797737,e=>{e.v({"fade-in":"custom-buttons-module__8sUwva__fade-in",fadeIn:"custom-buttons-module__8sUwva__fadeIn",turborepo:"custom-buttons-module__8sUwva__turborepo"})},8643060,e=>{e.v({border:"card-module__zTCk9W__border",cardSection:"card-module__zTCk9W__cardSection",footer:"card-module__zTCk9W__footer",noPadding:"card-module__zTCk9W__noPadding"})},6785390,e=>{e.v({details:"details-module__eTEHoW__details"})},9444673,e=>{e.v({noPadding:"legacy-env-variables-form-module__E3lP-W__noPadding",removeButton:"legacy-env-variables-form-module__E3lP-W__removeButton",removeButtonCell:"legacy-env-variables-form-module__E3lP-W__removeButtonCell",row:"legacy-env-variables-form-module__E3lP-W__row",table:"legacy-env-variables-form-module__E3lP-W__table",valueTextarea:"legacy-env-variables-form-module__E3lP-W__valueTextarea"})},6693189,e=>{e.v({details:"settings-module__zQ1M-G__details",disabled:"settings-module__zQ1M-G__disabled",input:"settings-module__zQ1M-G__input",installCommandDescription:"settings-module__zQ1M-G__installCommandDescription",label:"settings-module__zQ1M-G__label",settings:"settings-module__zQ1M-G__settings"})},3310008,e=>{e.v({active:"file-tree-module__O8ws-G__active",dir:"file-tree-module__O8ws-G__dir",dirName:"file-tree-module__O8ws-G__dirName",file:"file-tree-module__O8ws-G__file",fileName:"file-tree-module__O8ws-G__fileName",icon:"file-tree-module__O8ws-G__icon",indent:"file-tree-module__O8ws-G__indent",selected:"file-tree-module__O8ws-G__selected",statusIcon:"file-tree-module__O8ws-G__statusIcon",tree:"file-tree-module__O8ws-G__tree"})},2100205,e=>{e.v({modalBody:"root-directory-modal-module__NKgClG__modalBody"})},2329301,e=>{e.v({monorepoManagerLogo:"main-import-module__GKZ5_a__monorepoManagerLogo"})},8228513,e=>{e.v({gradientOverlay:"page-with-gradient-module__0esGHW__gradientOverlay",importPageAdjustment:"page-with-gradient-module__0esGHW__importPageAdjustment",main:"page-with-gradient-module__0esGHW__main",newTitle:"page-with-gradient-module__0esGHW__newTitle"})},5746939,e=>{e.v({cardContent:"index-module__9CNWmG__cardContent",configureProjectContent:"index-module__9CNWmG__configureProjectContent",createTeamStep:"index-module__9CNWmG__createTeamStep",headerSpacer:"index-module__9CNWmG__headerSpacer",mainContent:"index-module__9CNWmG__mainContent",narrative:"index-module__9CNWmG__narrative",newMain:"index-module__9CNWmG__newMain",newMainContentWrapper:"index-module__9CNWmG__newMainContentWrapper",screenStyle:"index-module__9CNWmG__screenStyle",sidebarContainer:"index-module__9CNWmG__sidebarContainer"})},5187772,e=>{"use strict";var t=e.i(6468255),n=e.i(6696646),r=e.i(9722978),i=e.i(512540),a=e.i(9508212),l=e.i(5140444),o=e.i(5338940),s=e.i(9100551),d=e.i(1717203),u=e.i(7557283),c=e.i(6232213),m=e.i(1177040),p=e.i(746850),h=e.i(9499865),f=e.i(550542),v=e.i(6499772),g=e.i(1991452),y=e.i(5468328),x=e.i(7045101),j=e.i(7562527),_=e.i(5797737),w=e.i(4298944),b=e.i(6038905),E=e.i(9187364),S=e.i(8248823),C=e.i(8230165),T=e.i(3496900),N=e.i(57106),k=e.i(4585051),I=e.i(3306538),P=e.i(2504781),O=e.i(6881349),R=e.i(3500331),D=e.i(3671642),A=e.i(8522580),L=e.i(5255926),G=e.i(9318197),M=e.i(1344973),V=e.i(1906681),$=e.i(455575),F=e.i(4004502),W=e.i(119294),U=e.i(6352514),B=e.i(6198010),z=e.i(5433449),H=e.i(2988836),Y=e.i(9716741),J=e.i(4450569),q=e.i(7374478),K=e.i(8643060);function Q(e){let{footer:n,border:i=!0,noPadding:a,children:l,className:o,...s}=e;return(0,t.jsx)("div",{className:(0,r.clsx)(K.default.cardSection,{footer:n,[K.default.footer]:n,[K.default.border]:i,[K.default.noPadding]:a},o),...s,children:l})}var X=e.i(2560270),Z=e.i(3603926),ee=e.i(6785390);let et=(0,n.memo)(function(e){let{title:i,children:a,className:l,onClick:o,"data-testid":s,open:d,disableAnimation:u,...c}=e,m=(0,n.useRef)(!1),[p,h]=(0,n.useState)(!1),f=d??p;return(0,n.useEffect)(()=>{m.current=!0},[]),(0,t.jsx)(Z.AnimatedDiv,{friction:30,immediate:u||!m.current,initialHeight:"auto",tension:290,children:(0,t.jsxs)("details",{className:(0,r.clsx)(ee.default.details,l),open:f,...c,children:[(0,t.jsxs)("summary",{"data-testid":s??(0,F.tid)("details","summary"),onClick:e=>{o&&(e.preventDefault(),o(e),h(!f))},children:[(0,t.jsx)(X.ChevronDown,{color:"gray-700",size:20}),i]}),a]})})});var en=e.i(9334091),er=e.i(5376191),ei=e.i(9512272),ea=e.i(187815),el=e.i(9444673);let eo=(0,t.jsxs)(a.Stack,{direction:"row",gap:2,justify:"space-between",style:{flexWrap:"wrap"},children:[(0,t.jsxs)(M.Text,{color:"gray-900",children:[(0,t.jsx)("strong",{children:"TIP:"})," Paste a .env above to populate the form"]}),(0,t.jsxs)(M.Text,{color:"gray-900",children:["Learn more about"," ",(0,t.jsx)(N.Link,{external:!0,href:"/docs/environment-variables",type:"highlight",children:"Environment Variables"})]})]}),es=(0,t.jsxs)(M.Text,{children:["You are using a System Environment Variable."," ",(0,t.jsx)(N.Link,{external:!0,href:"/docs/environment-variables/system-environment-variables",type:"highlight",children:"Learn More"})]}),ed=e=>{let{onSubmit:r,envName:i,setEnvName:l,envValue:o,setEnvValue:s,error:d,hideLabels:u,onBulkAdd:c,onRemove:m,description:p=e=>e?es:eo,disabled:h,explicitId:f}=e,v=(0,n.useRef)(null),g=(0,n.useMemo)(()=>(0,ei.isSystemEnv)(i),[i]),x=(0,n.useCallback)(async e=>{e?.preventDefault(),await r?.(),v.current?.focus()},[r]),j=(0,n.useCallback)(async e=>{"Enter"!==e.key||e.shiftKey||await x(e)},[x]),_=(0,t.jsxs)(a.Stack,{direction:"row",gap:1,children:["Value",(0,t.jsx)(y.Tooltip,{text:"Encrypted at rest",children:(0,t.jsx)(H.InformationFillSmall,{})})]});return(0,t.jsx)("form",{onSubmit:e=>void x(e),children:(0,t.jsxs)(a.Stack,{gap:4,children:[(0,t.jsxs)(a.Stack,{direction:"row",gap:2,children:[(0,t.jsx)(a.Stack,{flex:1,children:(0,t.jsx)(R.Input,{"aria-label":"Key",disabled:!l||h,error:l?d:null,label:u?void 0:"Key",onChange:e=>l?.(e.target.value||""),onPaste:e=>{let t=e.clipboardData.getData("text"),n=Object.entries((0,ea.parseEnv)(t));0!==n.length&&(c?.(n),e.preventDefault())},placeholder:"EXAMPLE_NAME",ref:e=>{v.current=e},value:i,width:"100%"})}),(0,t.jsx)(a.Stack,{flex:1,children:g?(0,t.jsx)(R.Input,{"aria-label":"Value",disabled:!0,label:u?void 0:_,placeholder:"Populated by System",value:"",width:"100%"}):(0,t.jsx)(en.Textarea,{explicitId:f,"aria-label":"Value",className:el.default.valueTextarea,disabled:!s||h,error:d,label:u?void 0:_,onChange:e=>s?.(e.target.value||""),onKeyDown:e=>void j(e),placeholder:"I9JU23NF394R6HH",spellCheck:"false",value:o,width:"100%"})}),r?(0,t.jsx)(P.Button,{disabled:!i||!o,style:{marginTop:u?void 0:"32px"},typeName:"submit",children:"Add"}):null,m?(0,t.jsx)(P.Button,{"aria-label":"Remove",disabled:h,onClick:m,shape:"square",style:{marginTop:u?void 0:"32px"},svgOnly:!0,type:"secondary",children:(0,t.jsx)(er.Minus,{})}):null]}),p?(0,t.jsx)(t.Fragment,{children:p(g)}):null]})})};var eu=e.i(4307275),ec=e.i(8042625),em=e.i(277234),ep=e.i(4244280),eh=e.i(7691989),ef=e.i(6178534),ev=e.i(8188735);async function eg(e){let{repo:t,teamId:n,isPrivate:r}=e,i=`${ep.API_INTEGRATION_CONTROLLER}/github-create-repo${(0,ec.encode)({teamId:n})}`;return(0,em.fetchAPI)(i,{method:"POST",body:JSON.stringify({name:t,private:r}),throwOnHTTPError:!0})}async function ey(e){let{repo:t,teamId:n,isPrivate:r}=e,i=`${ep.API_INTEGRATION_CONTROLLER}/gitlab/create-project${(0,ec.encode)({teamId:n})}`;return(0,em.fetchAPI)(i,{method:"POST",body:JSON.stringify({name:t,private:r}),throwOnHTTPError:!0})}async function ex(e){let{repo:t,teamId:n,isPrivate:r}=e,i=`${ep.API_INTEGRATION_CONTROLLER}/bitbucket/create-project${(0,ec.encode)({teamId:n})}`;return(0,em.fetchAPI)(i,{method:"POST",body:JSON.stringify({name:t,private:r}),throwOnHTTPError:!0})}async function ej(e){let{type:t,repo:n,teamId:r,isPrivate:i}=e;switch(t){case"github":return(await eg({repo:n,teamId:r,isPrivate:i})).id;case"gitlab":return(await ey({repo:n,teamId:r,isPrivate:i})).projectId;case"bitbucket":return(await ex({repo:n,teamId:r,isPrivate:i})).uuid;default:throw Error("Unsupported `type`.")}}var e_=e.i(5394280),ew=e.i(693385);async function eb(e){let{projectIdOrName:t,teamId:n}=e;return(0,em.fetchAPI)(`${(0,ep.API_PROJECTS_VERSION)("v7")}/${encodeURIComponent(t)}${(0,ec.encode)({teamId:n})}`,{method:"DELETE",throwOnHTTPError:!0})}async function eE(e){let{teamId:t,projectName:n,type:r,host:i,ref:a,sha:l,repoId:o,owner:s,slug:d,source:u="import"}=e;return(0,em.fetchAPI)(`${(0,ep.API_DEPLOYMENTS)("v13")}${(0,ec.encode)({teamId:t,skipAutoDetectionConfirmation:1})}`,{method:"POST",body:JSON.stringify({gitSource:{type:r,ref:a||"master",sha:l||void 0,repoId:"github"===r||"github-limited"===r||"github-custom-host"===r?o:void 0,host:"github-custom-host"===r?i:void 0,projectId:"gitlab"===r?o:void 0,owner:"bitbucket"===r?s:void 0,slug:"bitbucket"===r?d:void 0},name:n,target:"production",source:u}),throwOnHTTPError:!0})}async function eS(e){let{projectName:t,environmentVariables:n,teamId:r,projectSettings:i,gitRepository:a}=e;try{return await (0,em.fetchAPI)(`${(0,ep.API_PROJECTS_VERSION)("v6")}${(0,ec.encode)({teamId:r,withUserCredentials:1})}`,{method:"POST",body:JSON.stringify({name:t,environmentVariables:n,gitRepository:a,...i}),throwOnHTTPError:!0})}catch(e){throw"invalid_build_command"===e.code||"invalid_output_directory"===e.code?e.step="buildSettings":e.key&&e.key.startsWith("environmentVariables")?e.step="envs":("invalid_project_name"===e.code||"name"===e.key)&&(e.step="projectName"),e}}async function eC(e){let{teamId:t,source:n,clone:r,isPrivate:i,projectName:a,projectSettings:l,envs:o,domains:s,deployHook:d,clonedRepoId:u,setClonedRepoId:c,setData:m,projectIdFromQuery:p}=e;if(!p)try{throw await (0,eh.getProjectInfo)({name:a,teamId:t}),Error(`Project "${a}" already exists, please use a new name.`)}catch(e){if(404!==e.status)throw e.step="projectName",e}let h=async()=>{if(!r)return n.repoId;if(u)return u;let e=r.owner?`${r.owner}/${r.repo}`:`${r.repo}`;return c(u=await ej({teamId:t,type:r.type,repo:e,isPrivate:i})),await (0,e_.pushRepo)({type:r.type,source:n.source,target:e,teamId:t}),u},f=null,v=async()=>{let e=r||n,i={type:"github-custom-host"===e.type?"github":e.type,repo:e.owner?`${e.owner}/${e.repo}`:`${e.repo}`,host:e.host,sourceless:!0};if(p){try{await (0,ei.addEnvs)(p,o.map(e=>({...e,name:e.key})),t||void 0)}catch(e){if("ENV_ALREADY_EXISTS"===e.code){await Promise.all(o.map(async e=>{await (0,ei.legacyRemoveEnv)(p,e,t||void 0)}));try{await (0,ei.addEnvs)(p,o.map(e=>({...e,name:e.key})),t||void 0)}catch(e){throw e.step="envs",e}}else throw e.step="envs",e}try{await (0,ev.default)(p,t,l)}catch(e){throw e.step="buildSettings",e}await (e=>{let{id:t,teamId:n,gitRepository:r}=e;return(0,em.fetchAPI)(`${(0,ep.API_PROJECTS_VERSION)("v9")}/${t}/link${(0,ec.encode)({teamId:n,withUserCredentials:1})}`,{method:"POST",body:JSON.stringify({type:r.type,repo:r.repo}),throwOnHTTPError:!0})})({id:p,teamId:t,gitRepository:i}),f=await (0,eh.getProject)({id:p,teamId:t})}else{let e=(0,ei.addEncryptedEnvs)(o.map(e=>({...e,name:e.key})));f=await eS({projectName:a,environmentVariables:e,teamId:t,projectSettings:l,gitRepository:i})}m({projectName:a}),d&&await (0,ef.createDeployHook)(f,t,d,r?"master":n.ref||"master")},g=async e=>{let i=await eE({teamId:t,projectName:a,type:r?r.type:n.type,host:r?r.host:n.host,ref:r?null:n.ref,sha:r?null:n.sha,repoId:e,owner:r?r.owner:n.owner,slug:r?r.repo:n.repo,source:r?"clone/repo":"import"});return i?(m({deployment:i.url}),i.id):null},y=async()=>{let e=f;s&&e&&await Promise.all(s.map(n=>(0,ew.addProjectDomain)({domain:n,project:{id:e.id},team:t?{id:t}:null}).catch(e=>{console.error("Failed to add domain to project:",e)})))},x=await h();return await v(),await y(),g(x)}var eT=e.i(6693189),eN=e.i(9042029),ek=e.i(5527477),eI=e.i(4298868),eP=e.i(1719521),eO=e.i(7743427),eR=e.i(5714623);let eD=(0,n.memo)(()=>(0,t.jsx)("div",{className:"jsx-660195507e5fa6fe line",children:(0,t.jsx)(eR.default,{id:"660195507e5fa6fe",children:".line.jsx-660195507e5fa6fe{border-top:1px solid var(--accents-2);margin:12px 20px}"})}));var eA=e.i(3207250),eL=e.i(4588064),eG=e.i(2280665),eM=e.i(4833050),eV=e.i(5432439),e$=e.i(9192668),eF=e.i(6475061),eW=e.i(8492314),eU=e.i(4030453),eB=e.i(6891161),ez=e.i(3322724),eH=e.i(3911483),eY=e.i(9429645);let eJ=(e,t)=>e.type===t.type?e.name>t.name?1:-1:"dir"!==e.type?1:-1;async function eq(e){let t=await (0,em.fetchAPI)(e,{throwOnHTTPError:!0});return t.tree?.filter(e=>!e.name.startsWith(".")&&"dir"===e.type).sort(eJ)??null}function eK(e){let{type:t,owner:n,repo:r,ref:i="",rootPath:a="",slug:l="",errorOn404:o=!1}=e;return(0,eH.default)(()=>t&&n&&r?function(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"",i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"",a=arguments.length>5&&void 0!==arguments[5]?arguments[5]:"",l="gitlab"===e?encodeURIComponent(t):t,o="gitlab"===e?encodeURIComponent(n):n;return`${ep.API_INTEGRATION_CONTROLLER}/${e}/file-tree/${l}/${o}${(0,ec.encode)({rootPath:i,slug:a,ref:r,withUserCredentials:"1"})}`}(t,n,r,i,a,l):null,async e=>{let t,n=eq(e);try{t=await n}catch(e){if(!o&&404===e.status)return null;throw e}return t},{revalidateOnReconnect:!1,revalidateOnFocus:!1,dedupingInterval:1e4,refreshInterval:0})}eK.prefetch=async e=>{let t,{type:n,owner:r,repo:i,ref:a="",rootPath:l="",slug:o=""}=e;if(!n||!r||!i)return;let s=`${ep.API_INTEGRATION_CONTROLLER}/${n}/file-tree/${r}/${i}${(0,ec.encode)({rootPath:l,slug:o,ref:a,withUserCredentials:"1"})}`,d=(0,em.fetchAPI)(s,{throwOnHTTPError:!0});try{t=await d}catch(e){404!==e.status&&console.error(e)}t&&(0,eY.mutate)(s,t.tree?.filter(e=>!e.name.startsWith(".")&&"dir"===e.type).sort(eJ),!1)};var eQ=e.i(4345845),eX=e.i(296955),eZ=e.i(3959677),e0=e.i(5371931),e1=e.i(9222994);function e2(e){let{type:r,slug:i}=e,l=(0,n.useMemo)(()=>i.split("/").pop(),[i]),o=null,s="#";switch(r){case"github":o=(0,t.jsx)(eZ.default,{height:16,width:16}),s="https://github.com/"+i;break;case"gitlab":o=(0,t.jsx)(e0.default,{height:16,width:16}),s="https://gitlab.com/"+i;break;case"bitbucket":o=(0,t.jsx)(e1.default,{height:16,width:16}),s="https://bitbucket.org/"+i}return(0,t.jsx)(N.Link,{href:s,tab:!0,children:(0,t.jsxs)(a.Stack,{align:"center",direction:"row",flex:"0 1 auto",gap:2,children:[(0,t.jsx)("div",{style:{width:16,height:16},children:o}),(0,t.jsx)(M.Text,{as:"span",className:"geist-ellipsis",style:{lineHeight:"30px"},weight:500,children:l})]})})}function e9(e){let{Icon:n,text:r}=e;return(0,t.jsxs)(a.Stack,{align:"center",className:"geist-hide-on-mobile",direction:"row",flex:"0 1 auto",gap:4,children:[(0,t.jsx)(n,{size:20}),(0,t.jsx)(M.Text,{as:"span",className:"geist-ellipsis",lineHeight:32,style:{whiteSpace:"nowrap"},weight:500,children:r})]})}function e3(e){let{gitType:n,repo:r,branch:i,directory:a}=e;return(0,t.jsxs)(t.Fragment,{children:[n&&r?(0,t.jsx)(t.Fragment,{children:(0,t.jsx)(e2,{slug:r,type:n})}):null,i?(0,t.jsx)(e9,{Icon:eQ.GitBranch,text:i}):null,a?(0,t.jsx)(e9,{Icon:eX.FolderClosed,text:a}):null]})}function e5(e){return(0,t.jsx)(a.Stack,{align:"center",direction:"row",justify:"center",children:(0,t.jsx)(e3,{...e})})}var e4=e.i(6939507),e6=e.i(2259462),e8=e.i(8876434),e7=e.i(199192),te=e.i(8735244),tt=e.i(1848296),tn=e.i(4147070),tr=e.i(3310008);let ti=n.default.createContext([0,""]);function ta(){return(0,n.useContext)(ti)}ti.displayName="FileTreeContext";let{Provider:tl}=ti,to=n.default.createContext(["",()=>{}]);function ts(){return(0,n.useContext)(to)}to.displayName="SelectedContext";let td=e=>{let{selected:n}=e;return n?(0,t.jsx)(e7.ChevronRightSmall,{className:"rotate-90"}):(0,t.jsx)(e7.ChevronRightSmall,{})},tu=e=>{let{selected:n,setSelected:r,children:i}=e;return(0,t.jsx)("div",{className:tr.default.tree,children:(0,t.jsx)(to.Provider,{value:[n,r],children:(0,t.jsx)(tl,{value:[0,""],children:i})})})},tc=n.default.memo(e=>{let{name:r,open:i,children:a,defaultOpen:l,onToggle:o,framework:s,loading:d,rootLevel:u}=e,[c,m]=ts(),[p,h]=ta(),f=(0,n.useRef)(!1),v=c===(h=(h?h+"/":"")+r),g=!v&&c.startsWith(h+"/"),[y,x]=(0,n.useState)(l||v||!1),j=g||(void 0===i?y:i),_=(0,n.useCallback)(()=>{f.current=!0;let e=!0;!v&&(m(h),j&&(e=!1)),e&&(o&&o(!j),x(!j))},[j,v,h,o,m]),w=(0,n.useCallback)(e=>{"Enter"===e.key&&_()},[_]);return(0,t.jsxs)("li",{className:tr.default.dir,children:[(0,t.jsxs)("a",{className:v?tr.default.selected:void 0,onClick:_,onKeyPress:w,title:r,children:[(0,t.jsxs)("span",{className:"flex items-center",children:[(0,t.jsx)("span",{className:tr.default.indent,style:{width:25*p,...u&&{marginRight:-25}}}),!u&&(0,t.jsx)("span",{className:tr.default.statusIcon,children:(0,t.jsx)(td,{selected:j})}),(0,t.jsx)("span",{className:tr.default.icon,children:(0,t.jsx)(tt.RadioGroup,{label:r,onChange:()=>{},value:v?r:"",children:(0,t.jsx)(J.default,{children:(0,t.jsx)(tt.RadioGroup.Item,{value:r,children:r})})})})]}),(0,t.jsxs)("span",{className:"flex size-[24px] items-center justify-center",children:[d?(0,t.jsx)(te.Spinner,{}):null,!d&&s?(0,t.jsx)(tm,{framework:s}):null]})]}),(0,t.jsx)(Z.AnimatedDiv,{allowOverview:!0,friction:30,immediate:!f.current,tension:290,children:(0,t.jsx)("ul",{style:{height:j?void 0:0},children:(0,t.jsx)(tl,{value:[p+1,h],children:a})})})]})});function tm(e){let{framework:n}=e,r=(0,tn.useFrameworkLogo)({logo:n.logo,darkModeLogo:n.darkModeLogo});return(0,t.jsx)("img",{alt:"Framework logo",height:24,src:r,width:24})}tc.displayName="Folder";let tp=n.default.memo(e=>{let{name:n,active:i,type:a="file",...l}=e,[o]=ta();return(0,t.jsx)("li",{className:(0,r.clsx)(tr.default.file,{[tr.default.active]:i}),children:(0,t.jsxs)("a",{...l,children:[(0,t.jsx)("span",{className:tr.default.indent,style:{width:25*o}}),(0,t.jsx)("span",{className:tr.default.icon,style:{top:13},children:"lambda"===a?(0,t.jsx)(e4.Lambda,{size:22}):(0,t.jsx)(e6.File,{size:22})}),(0,t.jsx)("span",{className:tr.default.fileName,title:"string"==typeof n?n:"",children:n})]})})});tp.displayName="File";let th=n.default.memo(()=>{let[e]=ta();return(0,t.jsx)("li",{style:{pointerEvents:"none"},children:(0,t.jsxs)("a",{children:[(0,t.jsx)("span",{className:tr.default.indent,style:{width:25*e}}),(0,t.jsx)("span",{className:tr.default.icon,children:(0,t.jsx)(e8.MoreHorizontal,{})}),(0,t.jsx)("span",{className:tr.default.fileName,children:"Additional files not shown"})]})})});th.displayName="Cutoff";var tf=e.i(2100205),tv=e.i(6913536);function tg(e){let{isDir:r,rootLevel:i,type:a,owner:l,repo:o,branch:s,rootPath:d,teamSlug:u,framework:c,allFrameworks:m,...p}=e,[h]=ts(),f=ta()[1],v=(0,j.useRepoQuery)(),g=(f?f+"/":"")+p.name,{data:y}=(0,eL.default)({provider:a,owner:l,name:o,customGitHost:"github-custom-host"===a?v?.host:void 0}),x=h===g||h.startsWith(g+"/"),[_,w]=(0,n.useState)(!1),b=_||x,{data:E}=eK(b?{type:a,owner:l,repo:o,ref:s,rootPath:d,slug:u}:{}),S=(0,n.useMemo)(()=>{let e=0;return E?.reduce((t,n)=>"dir"===n.type?[...t,n]:e<10?(e+=1,[...t,n]):t.find(e=>e.cutoff)?t:[...t,{cutoff:!0}],[])},[E]),{data:C}=(0,eA.default)((0,tv.default)(v,y?.defaultBranch,d)),T=C?.framework.slug,N=void 0===T&&r&&!i&&!c,k=(0,n.useMemo)(()=>m.find(e=>e.slug===T)||null,[m,T]);return(0,t.jsx)(tc,{...p,framework:k,loading:b&&void 0===E||N,rootLevel:i,children:S?.map(e=>"dir"===e.type?(0,t.jsx)(tg,{allFrameworks:m,branch:s,framework:c||k,isDir:!0,name:e.name,onToggle:w,owner:l,repo:o,rootPath:d?d+"/"+e.name:e.name,teamSlug:u,type:a},e.name):e.cutoff?(0,t.jsx)(th,{}):(0,t.jsx)(tp,{name:e.name},e.name))||null})}let ty=e=>{let{active:r,onCancel:i,onContinue:a,frameworks:l,initialPath:d=""}=e,u=(0,ez.useIsMobile)(),c="./"===d,m=d.startsWith("/")?d.substring(1):d,[p,h]=(0,n.useState)(c?"":m),{team:f}=(0,o.useTeam)(),v=(0,j.useRepoQuery)(),[g,y]=(0,n.useState)(null),x=p||"",_=v?.name+(x?"/"+x:""),w=(0,n.useCallback)(()=>{y(null)},[]),b={type:v?.type,owner:v?.owner,repo:v?.name,rootPath:p,slug:f?.slug,ref:v?.branch};!function(e){let{type:t,owner:r,repo:i,ref:a,rootPath:l,slug:o}=e,d=(0,s.useSearchParams)();(0,n.useEffect)(()=>{if(l){let e=l.split("/"),n="";eK.prefetch({type:t,owner:r,ref:a,repo:i,slug:o});for(let l=0;l<e.length;l++){let s=e[l];eK.prefetch({type:t,owner:r,repo:i,ref:a,rootPath:n+s,slug:o}),n+=s+"/"}}},[d])}(b);let{data:E}=eK(b);return(0,t.jsxs)(eB.Modal.Modal,{active:r,onAnimationDone:w,onClickOutside:i,width:"480px",children:[(0,t.jsx)(eB.Modal.Body,{className:tf.default.modalBody,padding:!1,children:(0,t.jsx)("main",{children:(0,t.jsx)("form",{className:"form",onSubmit:async e=>{e?.preventDefault()},children:(0,t.jsxs)(J.default,{children:[(0,t.jsxs)(Q,{border:!1,style:{paddingBottom:"0"},children:[(0,t.jsx)(Y.default,{Component:"h1",h3:!0,noMargin:!0,style:{textAlign:"center"},weight:500,children:"Root Directory"}),(0,t.jsx)(G.Spacer,{y:.5}),(0,t.jsx)(Y.default,{noMargin:!0,preset:"body-2",style:{textAlign:"center"},type:"secondary",children:"Select the directory where your source code is located. To deploy a monorepo, create separate projects for other directories in the future."}),(0,t.jsx)(G.Spacer,{y:2/3}),(0,t.jsx)(e5,{branch:v?.branch||"",gitType:v?.type||"",repo:v?.fullName||""}),g?(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(G.Spacer,{y:.5}),(0,t.jsx)(eU.Error,{error:g})]}):null,(0,t.jsx)(G.Spacer,{y:1})]}),(0,t.jsx)("div",{style:{borderTop:"1px solid var(--accents-2)",flex:"1 1 auto",overflowX:"hidden",overflowY:"auto",height:u?"auto":270},children:(0,t.jsx)(tu,{selected:_,setSelected:e=>{let t=v?.name.split("/").length;h(e.split("/").slice(t).join("/"))},children:v?(0,t.jsx)(tg,{allFrameworks:l,branch:v.branch,isDir:!0,name:v.name,nameSlug:(0,t.jsxs)(t.Fragment,{children:[v.name," ",(0,t.jsx)("span",{style:{color:"var(--accents-5)"},children:"(root)"})]}),open:!0,owner:v.owner,repo:v.name,rootLevel:!0,teamSlug:f?.slug,type:v.type}):null})})]})})})}),(0,t.jsxs)(eB.Modal.Actions,{children:[(0,t.jsx)(eB.Modal.Action,{"data-testid":(0,F.tid)("root-directory-modal","cancel"),onClick:i,type:"secondary",children:"Cancel"}),(0,t.jsx)(eB.Modal.Action,{"data-testid":(0,F.tid)("root-directory-modal","continue"),disabled:null===E,onClick:async()=>{W.analytics.track(U.AnalyticsEvent.PROJECT_CREATION_SELECTED_ROOT_DIRECTORY,{version:3}),a(p)},children:"Continue"})]})]})};e.i(2148360);var tx=e.i(7259833),tj=e.i(8334396);function t_(e){let{gitType:n}=e,{text:r,openModal:i,scopedTeam:a}=(0,tx.useUpgradeToProButton)({trialBehavior:"choose",buttonText:{desired:"Start a Pro Trial",fallback:"Upgrade to Pro"}});return a?.billing?.plan!=="hobby"?null:(0,t.jsxs)(A.Note,{action:(0,t.jsx)(P.Button,{onClick:()=>i({source:"import",disabledSteps:["team-members"]}),size:"small",children:r}),fill:!0,label:!1,type:"success",children:["You are attempting to import a Git repository from a private"," ",(0,tj.getGitProviderNameAndOrg)(n),". To collaborate with your team members, a Pro subscription is required."]})}var tw=e.i(4909757),tb=e.i(7102400),tE=e.i(2138061),tS=e.i(458149);let tC=(e,t)=>e.reduce((e,n)=>((e[n[t]]=e[n[t]]||[]).push(n),e),{});function tT(e){let{field:r,name:i,description:a,framework:l,deploying:o,projectSettings:s,setProjectSettings:d,defaultValue:u="",shouldOverride:c,setShouldOverride:m,disabled:p}=e,h=(0,n.useRef)(null),f=(0,t.jsx)(V.Toggle,{checked:c[r],disabled:p||o,icon:{checked:(0,t.jsx)(T.PencilEdit,{color:"gray-1000",size:10}),unchecked:(0,t.jsx)(T.PencilEdit,{color:"gray-1000",size:10})},label:"Override",onChange:e=>{var t;m(t=>({...t,[r]:!!e})),e&&!s[r]&&d({...s,[r]:((t=l?.settings[r])&&"value"in t?t.value:null)||""}),setTimeout(()=>{e&&h.current&&h.current.select()},30)},size:"large"});return(0,t.jsx)(J.default,{"data-testid":(0,F.tid)(i,"field"),halfGap:!0,row:!0,children:(0,t.jsxs)(J.default,{halfGap:!0,children:[(0,t.jsxs)(J.default,{noWrap:!0,row:!0,style:{maxWidth:180,minWidth:180,whiteSpace:"nowrap",marginBottom:-8},vcenter:!0,children:[(0,t.jsx)(Y.default,{noMargin:!0,preset:"label",type:"secondary",children:i}),(0,t.jsx)(G.Spacer,{x:.25}),(0,t.jsx)(y.Tooltip,{text:a,children:(0,t.jsx)(H.InformationFillSmall,{})})]}),(0,t.jsx)(J.default,{children:(0,t.jsx)(R.Input,{"aria-label":i,disabled:p||!c[r]||o,onChange:e=>d({...s,[r]:e.target.value}),placeholder:u||l?.settings[r].placeholder||l?.settings[r].value||"",ref:h,style:{fontFamily:"var(--font-mono, var(--font-mono-fallback))"},suffix:f,suffixStyling:!1,value:(p||c[r])&&s[r]||"",width:"100%"})})]})})}let tN="env_value_input_";function tk(e,t){switch(t.type){case"SET_ENV_NAME":return{...e,envName:t.envName};case"SET_ENV_VALUE":return{...e,envValue:t.envValue};case"ADD":return{...e,envs:[...e.envs,{id:(0,C.default)("env_"),key:e.envName,value:e.envValue,system:(0,ei.isSystemEnv)(e.envName)}],envName:"",envValue:""};case"BULK_ADD":{let n=t.parsedEnvs.map(e=>{let[t,n]=e;return{id:(0,C.default)("env_"),key:t,value:n,system:(0,ei.isSystemEnv)(t)}});return{...e,envs:[...e.envs,...n]}}case"REMOVE":return{...e,envs:e.envs.filter(e=>e.id!==t.id)};case"UPDATE_ENV_NAME":return{...e,envs:e.envs.map(e=>e.id===t.id?{...e,key:t.name}:e)};case"UPDATE_ENV_VALUE":return{...e,envs:e.envs.map(e=>e.id===t.id?{...e,value:t.value}:e)};case"PREFILL_MISSING_ENV_VAR":{let n={id:(0,C.default)("env_"),key:t.name,value:"",system:(0,ei.isSystemEnv)(t.name)};if(0===e.envs.length)return{...e,envOpen:!0,envs:[n]};if(1===e.envs.length){let n=e.envs[0];if(""===n.key&&""===n.value)return{...e,envOpen:!0,envs:[{...n,key:t.name}]}}if(e.envs.some(e=>e.key===t.name))return{...e,envOpen:!0};return{...e,envOpen:!0,envs:[...e.envs,n]}}case"ERROR":return{...e,envError:t.envError,envOpen:!0};case"TOGGLE_DETAILS":return{...e,envOpen:!e.envOpen};case"START_DEPLOYING":return{...e,envError:null};default:throw Error()}}let tI=["repo_links_exceeded_limit","too_many_projects"];async function tP(e){let{template:t,clone:n,type:r,host:i,path:a,selectedPath:l,owner:o,repo:s,ref:d,state:u,selected:c,projectSettings:m,setDeploying:p,setLoading:h,setRequiredEnvs:f,teamId:v,source:g,envs:y,isPrivate:x,projectName:j,deployHook:_,toasts:w,envVariablesDispatch:b,requiredEnvs:E,requiredEnvNames:C,repoId:T,setProjectSettingsError:N,setProjectSettingsOpen:k,confirmBuildCommand:I,qsProjectName:P,dispatch:O,setProjectNameError:R,clonedRepoId:D,setClonedRepoId:A,setGenericError:L,projectIdFromQuery:G,domains:M}=e,V=m?.buildCommand;if(!await I(V))return;O({type:"SET_DEPLOYMENT_ID",deploymentId:null}),h(!0),b({type:"START_DEPLOYING"}),R(null),N(null),L(null);let $=!1,F=[];if(C)for(let e of C)E[e]?.value||(0,ei.isSystemEnv)(e)?F.push({key:e,value:E[e]?.value??""}):(f(t=>({...t,[e]:{value:"",error:"Required"}})),$=!0);if($){h(!1),p(!1);return}let W=[...y,...F];try{let e;P&&!G&&await eb({projectIdOrName:P,teamId:v}),(e=n||t?await eC({teamId:v,source:{type:r,host:i,source:g,repoId:T,owner:o,repo:s,ref:d},clone:{type:u.type,repo:u.repo,owner:u.owner},isPrivate:x,domains:M,projectName:j,deployHook:_,projectSettings:{framework:c||null,devCommand:null,rootDirectory:l||null,publicSource:!x,...m},envs:W,clonedRepoId:D,setClonedRepoId:A,setData:()=>{},projectIdFromQuery:G}):await eC({teamId:v,source:{owner:o,type:r,host:i,repo:s,repoId:T,ref:d},isPrivate:x,projectName:j,deployHook:_,projectSettings:{framework:c||null,devCommand:null,rootDirectory:a||null,...m},domains:M,envs:W,clonedRepoId:D,setClonedRepoId:A,setData:()=>{},projectIdFromQuery:G,clone:null}))&&(O({type:"SET_DEPLOYMENT_ID",deploymentId:e}),p(!0))}catch(e){p(!1),(0,eG.isProjectsError)(e)&&"steps"in e?"envs"===e.step?b({type:"ERROR",envError:e}):"buildSettings"===e.step?(N((0,S.errorToString)(e)),k(!0)):"projectName"===e.step&&R(e):(0,eG.isProjectsError)(e)&&(tI.includes(e.code)||"action"in e&&e.link)?L(e):w.error((0,S.errorToString)(e))}finally{h(!1)}}function tO(e){let{slug:n,totalEnvs:r}=e,{data:i}=(0,eO.useIntegration)(n);return(0,t.jsxs)(J.default,{noWrap:!0,row:!0,children:[i?.icon?(0,t.jsx)(k.Avatar,{hash:i?.icon,size:20}):(0,t.jsx)(k.Avatar,{placeholder:!0,size:20}),(0,t.jsx)(G.Spacer,{inline:!0,x:.2}),(0,t.jsxs)(Y.default,{span:!0,style:{color:"var(--accents-5)"},children:[i?.website?(0,t.jsx)(N.Link,{external:!0,href:i?.website,children:(0,t.jsx)("b",{children:i?.name})}):(0,t.jsx)("b",{children:i?.name})," ","added ",r," Environment Variable",r>1?"s":""]})]})}let tR=function(e){let{frameworks:i=[],canCreateProject:s}=e,{user:d}=(0,l.useUser)(),u=(0,$.useToasts)(),c=(0,b.useCardContext)(),[p,h]=(0,n.useState)(!1),[f,v]=(0,n.useState)(null),{clone:y,deploymentError:w,"project-name":E,"project-id":S,"production-deploy-hook":T,...k}=(0,ek.useImportUrlMachine)(),{isReady:G,query:V}=(0,g.useRouter)(),{projectName:H,framework:Y,path:K,buildCommand:X,outputDirectory:Z,installCommand:ee,domain:en}=V,er=H?String(H):void 0,ei=Array.isArray(en)?en:en?[en]:void 0,el=Y?String(Y):void 0,eo=K?String(K):void 0,es=X?String(X):void 0,eh=Z?String(Z):void 0,ef=ee?String(ee):void 0,ev=(0,j.useRepoQuery)(),{data:eg}=(0,x.useDetectEligibleProjects)(ev?.url),ey=eg?.monorepoManager,{deploying:ex,deploymentId:ej,rootDirectory:e_,dispatch:ew}=(0,m.useProjectImportContext)(),{data:eb}=(0,eL.default)({provider:ev?.type,name:ev?.name,customGitHost:ev?.host,owner:ev?.owner}),{selectedTeamSlug:eE,isCreatingTeam:eS,isSelectedTeamSlugReady:eC,onTeamSlugChange:eO,selectedTeamError:eR}=(0,tw.useSelectedTeamSlug)({gitProvider:eb?.provider,gitNamespaceId:eb?.owner.id,gitNamespaceSlug:eb?.namespace}),{team:eG}=(0,o.useTeam)(eE),eU=eG?.billing?.plan==="hobby",eB=eb?.ownerType==="team",ez=!!eb?.private,eH=eB&&ez&&eU,{showUpgradeCTA:eY,upgradeMessage:eJ,setFreezeUpgradeUI:eq,disallowHobby:eK}=(0,eF.useUpgradeCTA)({selectedTeamSlug:eE,isCreatingTeam:eS,isTeamRepo:eB,isPrivate:ez,gitType:eb?.provider}),eQ=eg?.projects.find(e=>e.path===`/${e_??""}`)??null,[eX,eZ]=(0,n.useState)(void 0);(0,n.useEffect)(()=>{G&&!el&&ev&&eZ((0,tv.default)(ev,void 0,eo))},[G]);let{data:e0,isLoading:e1}=(0,eA.default)(eX),{data:e2}=function(e){let{user:t}=(0,l.useUser)();return(0,eM.default)(()=>t&&!t.limited&&e?`${ep.API_INTEGRATION_CONTROLLER}/detect-vercel-configuration${(0,ec.encode)({url:e})}`:null,e=>(0,em.fetchAPI)(e,{throwOnHTTPError:!0}))}(ev?.url),e9=e2?.settings,e3=!el&&e1,e5=!!(c.active&&!e3);(0,n.useEffect)(()=>{c.active&&ew({type:"SET_CONFIGURE_PROJECT",configureProject:!0})},[c.active,ew]);let[e4,e6]=(0,n.useState)(i.find(e=>e.slug===(e9?.framework==="other"?null:e9?.framework))??null);function e8(e){ew({type:"SET_DEPLOYING",deploying:e})}(0,n.useEffect)(()=>{"other"===el?e6(i.find(e=>null===e.slug)??null):el&&e6(i.find(e=>e.slug===el)??null)},[el,i]),(0,n.useEffect)(()=>{e0&&e6(e0.framework)},[e0]);let e7=eo||ev?.subdir,te=ev?.branch||eb?.defaultBranch;(0,n.useEffect)(()=>{e7&&ew({type:"SET_ROOT_DIRECTORY",rootDirectory:e7})},[e7,ew]);let tt=(0,n.useMemo)(()=>{if(ev?.name)return(0,tE.sanitizeProjectName)(ev.name)},[ev?.name]),[tn,tr]=(0,n.useState)(tt),ti=(0,eV.useGetProjectName)();(0,n.useEffect)(()=>{async function e(){tr(await ti(eG?.id,E))}E&&eG?.id&&e()},[E,eG?.id]);let[ta,tl]=(0,n.useState)(null),[to,ts]=(0,n.useState)({buildCommand:e9?.buildCommand??es??null,outputDirectory:e9?.outputDirectory??eh??null,installCommand:e9?.installCommand??ef??null}),[td,tu]=(0,n.useState)({buildCommand:"string"==typeof e9?.buildCommand||e9?.buildCommand===null||"string"==typeof es&&void 0===ey,outputDirectory:"string"==typeof e9?.outputDirectory||e9?.outputDirectory===null||"string"==typeof eh&&void 0===ey,installCommand:"string"==typeof e9?.installCommand||e9?.installCommand===null||"string"==typeof ef&&void 0===ey}),[tc,tm]=(0,n.useState)(!1),[tp,th]=(0,n.useState)(null),{confirm:tf,modal:tg}=(0,eN.default)(),[tx,tj]=(0,n.useState)(null),{missingEnvVarKey:tI,setMissingEnvVarKey:tR}=(0,tS.useOpenMissingEnvVar)(),[{envs:tD,envError:tA,envOpen:tL},tG]=(0,n.useReducer)(tk,{envName:"",envValue:"",envs:[{id:(0,C.default)("env_"),key:"",value:"",system:!1}]}),tM=k.env?.split(",")??[],tV=k.envDescription,t$=k.envLink,[tF,tW]=(0,n.useState)({}),[tU,tB]=(0,n.useState)(!1),tz=ev?.name,tH=ev?.template;(0,n.useLayoutEffect)(()=>{tI&&(tG({type:"PREFILL_MISSING_ENV_VAR",name:tI}),setTimeout(()=>{let e=document.getElementById(`${tN}${tI}`);if(e){let t=e.closest("details");t?t.scrollIntoView({behavior:"smooth",block:"center"}):e.scrollIntoView({behavior:"smooth",block:"center"}),e.focus()}},100),tR(null))},[tI,tR,tG,tD[0]?.id]),(0,n.useEffect)(()=>{ts({buildCommand:e9?.buildCommand??es??null,outputDirectory:e9?.outputDirectory??eh??null,installCommand:e9?.installCommand??ef??null}),tu({buildCommand:"string"==typeof e9?.buildCommand||e9?.buildCommand===null||"string"==typeof es&&void 0===ey,outputDirectory:"string"==typeof e9?.outputDirectory||e9?.outputDirectory===null||"string"==typeof eh&&void 0===ey,installCommand:"string"==typeof e9?.installCommand||e9?.installCommand===null||"string"==typeof ef&&void 0===ey}),tr(E||tH||tz||"")},[es,ey,eh,tz,tH,E,ef,e9?.buildCommand,e9?.outputDirectory,e9?.installCommand]),(0,n.useEffect)(()=>{e4?.slug!==null&&tu({buildCommand:"string"==typeof e9?.buildCommand||e9?.buildCommand===null||"string"==typeof es&&void 0===ey,outputDirectory:"string"==typeof e9?.outputDirectory||e9?.outputDirectory===null||"string"==typeof eh&&void 0===ey,installCommand:"string"==typeof e9?.installCommand||e9?.installCommand===null||"string"==typeof ef&&void 0===ey})},[e4]);let{data:tY}=(0,eW.useNewDeploymentInterval)(ej),tJ=function(e){let{deploymentId:t}=e,[r,i]=(0,n.useState)(!1),{team:a}=(0,o.useTeam)(),{data:l}=(0,eW.useNewDeploymentInterval)(t);async function s(){r&&l?.projectId&&(await (0,em.fetchAPI)(`${(0,ep.API_PROJECTS_VERSION)("v9")}/${l.projectId}${(0,ec.encode)({teamId:a?.id})}`,{method:"DELETE",throwOnHTTPError:!0}),i(!1))}return(0,n.useEffect)(()=>{switch(l?.readyState){case"CANCELED":case"ERROR":(0,n.startTransition)(()=>{i(!0)})}},[l]),s}({deploymentId:ej});(0,n.useEffect)(()=>{tY&&("CANCELED"===tY.readyState||"ERROR"===tY.readyState?e8(!1):tY.readyState&&e8(!0))},[tY]),(0,n.useEffect)(()=>{w&&e8(!1)},[w]);let{data:tq}=(0,eI.default)(S),tK=tq?.envs.filter(e=>e.configurationId),{data:tQ}=(0,eP.default)(S),tX=tC(tK||[],"configurationId"),tZ=tC(tQ?.integrations?.filter(e=>tK&&tK.map(e=>e.configurationId).includes(e.id))||[],"slug"),t0=[];for(let[e,t]of Object.entries(tZ)){let n=tX[t[0].id].length;t0.push({slug:e,totalEnvs:n})}let t1=async e=>{eS&&e&&eO(e.slug),await tJ(),await tP({template:ev?.template,clone:y,type:ev?.type,host:ev?.host,path:e_||e7,selectedPath:e_,owner:ev?.owner,repo:ev?.name,ref:te,deployHook:T,state:k,domains:ei,selected:e4?.slug??null,projectSettings:{outputDirectory:eh??td.outputDirectory?to.outputDirectory:null,buildCommand:(es??td.buildCommand)&&eQ?.settings.buildCommand!==to.buildCommand?to.buildCommand:null,installCommand:(ef??td.installCommand)&&eQ?.settings.installCommand!==to.installCommand?to.installCommand:null},setDeploying:e8,setLoading:tB,setRequiredEnvs:tW,teamId:eS&&e?e.id:eG?.id,userId:d?.uid,source:ev?.url,envs:tD.filter(e=>""!==e.id&&""!==e.key&&""!==e.value),isPrivate:ez,projectName:tn,toasts:u,envVariablesDispatch:tG,requiredEnvs:tF,requiredEnvNames:tM,repoId:eb?.id,setProjectSettingsError:th,setProjectSettingsOpen:tm,confirmBuildCommand:tf,qsProjectName:er,dispatch:ew,setProjectNameError:tl,clonedRepoId:f,setClonedRepoId:v,setGenericError:tj,projectIdFromQuery:S})},t2=eE&&eE===eG?.slug?eR:null,t9=eE&&eE===eG?.slug&&eG.billing?.plan==="hobby"?eJ:null,t3=(0,n.useRef)(eE?{[eE]:eY}:{});(0,n.useEffect)(()=>{eE&&(t3.current[eE]||(t3.current[eE]=eY))},[eY,eE]);let t5=!!(!ex&&(w||ej)),t4=(0,n.useMemo)(()=>eE&&t3.current[eE]?!t5:!!eR||!!eH||!!ex||!s||!e5,[eE,e5,ex,t5,eH,eR,s]),t6=(0,n.useRef)(null);return(0,t.jsxs)(a.Stack,{className:(0,r.clsx)(eT.default.settings,"expand-mobile"),gap:6,children:[(0,t.jsx)(e$.GitRepositoryEntity,{action:"importing",frameworks:i}),(0,t.jsxs)(M.Text,{children:["Choose where you want to create the project",S?".":" and give it a name."]}),(0,t.jsx)(Q,{border:!1,className:"expand-mobile",style:{padding:0},children:(0,t.jsx)(tb.AnimateChangeInHeight,{children:(0,t.jsxs)(a.Stack,{gap:6,children:[(0,t.jsxs)(a.Stack,{direction:{sm:"column",md:"row"},gap:{sm:4,md:0},style:{width:"100%"},children:[(0,t.jsx)(D.Label,{style:{flex:1},value:"Vercel Team",children:(0,t.jsx)(tw.TeamSelector,{disabled:!!(tU||!e5||ex),gitNamespaceId:eb?.owner.id,gitNamespaceSlug:eb?.namespace,gitProvider:eb?.provider,loading:!eC,onChange:eO,value:eE})}),S?null:(0,t.jsx)(a.Stack,{className:"geist-hide-on-mobile",style:{transform:"translateY(32px)"},children:(0,t.jsx)(q.SlashDivider,{})}),(0,t.jsx)(D.Label,{style:{flex:1,display:S?"none":"initial"},value:"Project Name",children:(0,t.jsx)(L.Skeleton,{show:!eC,style:{overflow:eC?void 0:"hidden"},children:(0,t.jsx)(R.Input,{"aria-label":"New Project Name",autoFocus:!0,className:(0,r.clsx)("new-project-name",eT.default.input),disabled:ex||"string"==typeof ej||tU||!e5,error:ta,id:"new-project-name",maxLength:100,onChange:e=>tr(e.target.value),placeholder:"my-project",value:tn||"",width:"100%"})})})]}),tx?(0,t.jsx)(A.Note,{fill:!0,type:"error",children:tx.message}):null,t2?(0,t.jsx)(A.Note,{fill:!0,type:"secondary",children:t2}):null,t9?(0,t.jsx)(A.Note,{fill:!0,type:"secondary",children:t9}):null,eY?(0,t.jsx)(eF.UpgradeCTA,{disallowHobby:eK,onSubmit:t1,selectedTeamSlug:eE,setFreezeUpgradeUI:eq}):(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)("hr",{className:"geist-hr-reset"}),(0,t.jsxs)(a.Stack,{gap:4,children:[(0,t.jsx)(D.Label,{value:"Framework Preset",children:(0,t.jsx)(L.Skeleton,{show:!eC||!e4,style:{overflow:eC?void 0:"hidden"},children:(0,t.jsxs)(O.Combobox,{clearable:!1,disabled:!!(e9?.framework||!e5||ex||tU),noRawSelectedValue:!0,onChange:e=>{let t=i.find(t=>t.slug===("other"===e?null:e));t&&e6(t)},value:e4?.slug||"other",children:[(0,t.jsx)(O.Combobox.Input,{className:eT.default.input,"data-testid":(0,F.tid)("framework","select")}),(0,t.jsx)(O.Combobox.List,{children:(0,t.jsx)(eu.FrameworkComboboxList,{frameworks:i})})]})})}),(0,t.jsx)(D.Label,{value:"Root Directory",children:(0,t.jsxs)(a.Stack,{direction:"row",gap:3,children:[(0,t.jsx)(L.Skeleton,{show:!eC,style:{overflow:eC?void 0:"hidden",width:"100%"},children:(0,t.jsx)(R.Input,{"aria-label":"Root Directory",className:eT.default.input,disabled:!0,style:{fontFamily:"var(--font-mono, var(--font-mono-fallback))",color:e5?"var(--geist-foreground)":"var(--accents-1)"},value:e_||"./",width:"100%"})}),(0,t.jsx)(L.Skeleton,{show:!eC,style:{overflow:eC?void 0:"hidden",flexShrink:0},children:(0,t.jsx)(J.default,{flex:"0 0 auto",children:(0,t.jsx)(P.Button,{disabled:!!(!e5||tU||ex),onClick:()=>{W.analytics.track(U.AnalyticsEvent.PROJECT_CREATION_EDITED_ROOT_DIRECTORY,{version:3}),h(!0)},type:"secondary",children:"Edit"})})})]})}),(0,t.jsxs)(a.Stack,{gap:2,children:[(0,t.jsx)(L.Skeleton,{show:!eC,style:{overflow:eC?void 0:"hidden"},children:(0,t.jsxs)(et,{className:eT.default.details,disableAnimation:!0,onClick:()=>tm(e=>!e),open:tc,style:{backgroundColor:e5?"var(--geist-background)":"var(--accents-1)",color:e5?"var(--accents-6)":"var(--accents-3)"},title:"Build and Output Settings",children:[tg,(0,t.jsxs)(a.Stack,{gap:6,children:[tp?(0,t.jsx)(A.Note,{type:"error",children:tp}):null,(0,t.jsx)(tT,{defaultValue:eQ?.settings.buildCommand,deploying:ex||tU,description:"The command your frontend framework provides for compiling your code.",disabled:!!e9?.buildCommand,field:"buildCommand",framework:e4,monorepoManager:ey,name:"Build Command",projectSettings:to,setProjectSettings:ts,setShouldOverride:tu,shouldOverride:td}),(0,t.jsx)(tT,{deploying:ex||tU,description:"The directory in which your compiled frontend will be located.",disabled:!!e9?.outputDirectory,field:"outputDirectory",framework:e4,monorepoManager:ey,name:"Output Directory",projectSettings:to,setProjectSettings:ts,setShouldOverride:tu,shouldOverride:td}),(0,t.jsx)(tT,{defaultValue:eQ?.settings.installCommand,deploying:ex||tU,description:(0,t.jsx)(t.Fragment,{children:"The command that is used to install your Project's software dependencies. If you don't need to install dependencies, override this field and leave it empty."}),disabled:!!e9?.installCommand,field:"installCommand",framework:e4,monorepoManager:ey,name:"Install Command",projectSettings:to,setProjectSettings:ts,setShouldOverride:tu,shouldOverride:td})]})]})}),(0,t.jsx)(L.Skeleton,{show:!eC,style:{overflow:eC?void 0:"hidden"},children:(0,t.jsx)(et,{className:eT.default.details,disableAnimation:!0,onClick:()=>tG({type:"TOGGLE_DETAILS"}),open:tL||tM.length>0,style:{backgroundColor:e5?"var(--geist-background)":"var(--accents-1)"},title:(0,t.jsxs)(t.Fragment,{children:["Environment Variables",tM.length>0?(0,t.jsxs)(t.Fragment,{children:[" ",(0,t.jsx)(I.Badge,{size:"sm",variant:"gray-subtle",children:"Required"})]}):null]}),children:(0,t.jsxs)(a.Stack,{gap:3,children:[tA?(0,t.jsx)(A.Note,{type:"error",children:tA.message}):null,tM.length>0?(0,t.jsxs)(t.Fragment,{children:[tM.map((e,n)=>(0,t.jsx)(ed,{explicitId:`${tN}${e}`,description:null,disabled:ex||tU,envName:e,envValue:tF[e]?.value??"",error:tF[e]?.error,hideLabels:0!==n,onRemove:()=>tW(t=>({...t,[e]:{value:""}})),setEnvValue:t=>tW(n=>({...n,[e]:{value:t,error:t?void 0:"Required"}}))},e)),tV?(0,t.jsxs)(M.Text,{color:"gray-900",children:[tV," ",t$?(0,t.jsx)(N.Link,{external:!0,href:t$,variant:"highlight",children:"Learn More"}):null]}):null]}):null,tD.map((e,n)=>(0,t.jsx)(ed,{explicitId:`${tN}${e.key}`,description:null,disabled:ex||tU,envName:e.key,envValue:e.value,hideLabels:tM.length>0||n>0,onBulkAdd:e=>tG({type:"BULK_ADD",parsedEnvs:e}),onRemove:()=>{tG({type:"REMOVE",id:e.id})},setEnvName:t=>tG({type:"UPDATE_ENV_NAME",name:t,id:e.id}),setEnvValue:t=>tG({type:"UPDATE_ENV_VALUE",value:t,id:e.id})},e.id)),(0,t.jsx)(P.Button,{disabled:ex||tU,onClick:()=>tG({type:"ADD"}),prefix:(0,t.jsx)(B.Plus,{}),size:"small",style:{alignSelf:"flex-start"},type:"secondary",children:"Add More"}),(0,t.jsxs)("div",{className:"flex flex-row gap-2 items-center",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("input",{accept:"env","aria-hidden":!0,multiple:!1,ref:t6,style:{display:"none"},type:"file",onChange:e=>{let t=e.target.files?.[0];if(!t||"text/plain"!==t.type&&""!==t.type)return void u.error("Please upload a valid env file");let n=new FileReader;n.onload=e=>{let t=e.target?.result;t&&tG({type:"BULK_ADD",parsedEnvs:Object.entries((0,ea.parseEnv)(t.toString()))})},n.readAsText(t)}}),(0,t.jsx)(P.Button,{disabled:!t6.current,onClick:()=>t6.current?.click(),prefix:(0,t.jsx)(z.FileText,{}),size:"small",type:"secondary",typeName:"button",children:"Import .env"})]}),(0,t.jsxs)(M.Text,{color:"gray-900",children:["or paste the .env contents above."," ",(0,t.jsx)(N.Link,{external:!0,href:"/docs/environment-variables",type:"highlight",children:"Learn more"})]})]}),t0.length>0?(0,t.jsx)(eD,{}):null,t0.map(e=>{let{slug:n,totalEnvs:r}=e;return(0,t.jsx)(J.default,{children:(0,t.jsx)(tO,{slug:n,totalEnvs:r})},n)})]})})})]}),eH?(0,t.jsx)(t_,{gitType:ev?.type}):null]})]})]})})}),eY?null:(0,t.jsx)(Q,{footer:!0,style:{padding:0},children:(0,t.jsxs)(J.default,{className:"relative",children:[ey?.slug==="turbo"?(0,t.jsx)("div",{className:(0,r.clsx)(eH||ex||tU||t4?"hidden":_.default.turborepo,_.default.fadeIn)}):null,(0,t.jsx)(L.Skeleton,{show:!eC,style:{overflow:eC?void 0:"hidden"},children:(0,t.jsx)(P.Button,{disabled:t4,loading:tU||!!ex,onClick:()=>{t1()},width:"100%",children:tU||ex?"Deployingâ€¦":"Deploy"})})]})}),(0,t.jsx)(ty,{active:p,frameworks:i,onCancel:()=>{h(!1)},onContinue:e=>{h(!1),ew({type:"SET_ROOT_DIRECTORY",rootDirectory:e});let t=eg?.projects.find(t=>t.path===`/${e}`);async function n(){tr(await ti(eG?.id,t?.name))}t?(n(),ts(t.settings),e6(t.framework)):eZ((0,tv.default)(ev,void 0,e))}})]})};var tD=e.i(3495961),tA=e.i(6509836),tL=e.i(2329301),tG=e.i(1315623),tM=e.i(6979900),tV=e.i(2251791),t$=e.i(316263),tF=e.i(7780974);function tW(e){let{frameworks:i,hasAccess:s}=e;(0,tD.useShouldRedirectToNew)();let d=(0,g.useRouter)(),{user:u}=(0,l.useUser)(),{team:c}=(0,o.useTeam)(),{configureProject:S,deploying:C,deploymentReset:T,deploymentId:N,dispatch:k,flowId:I}=(0,m.useProjectImportContext)();(0,tV.useImportTrackStatusChanges)(),(0,t$.useTrackPageViewCustomActivityIgnoreQueryParams)(!!I,tF.VercelActivityAction.NewProjectImportViewed,{flowId:I});let{url:P}=(0,j.useRepoQuery)()||{},{data:O}=(0,x.useDetectEligibleProjects)(P),{monorepoManager:R}=O||{};(0,n.useEffect)(()=>()=>{k({type:"RESET"})},[k]);let[D,{height:A}]=(0,h.default)(),L=(0,v.useSpring)({height:A,config:{tension:300,friction:26,clamp:!0}}),G=(0,n.useCallback)(e=>{setTimeout(()=>{M.current?.scrollIntoView({behavior:"smooth"})},e||500)},[]),M=(0,n.useRef)(null);(0,n.useEffect)(()=>{if(d.query.finishSetup&&(c||!d.query.teamSlug&&u)){let e={...d.query};delete e.finishSetup,d.push({query:e}),requestAnimationFrame(()=>G())}},[d,G,c,u]);let V=(0,n.useMemo)(()=>R?(0,t.jsx)(y.Tooltip,{text:`This project is using ${R.name}`,children:(0,t.jsx)(tA.FrameworkIcon,{className:(0,r.clsx)(tL.default.monorepoManagerLogo,_.default.fadeIn),framework:R,size:24,style:{borderWidth:0}})}):void 0,[R]);return(0,w.useTrackStatsigEvent)({eventName:`new_import_${C?"deploying":"viewed"}`}),(0,t.jsxs)(a.Stack,{align:"center",gap:{sm:0,md:12},children:[(0,t.jsx)(b.default,{active:S||!!C||!!d.query.teamSlug||!d.query.gitOrgLimit,as:f.animated.article,className:"configure-project-card bg-background-100",ref:(0,p.default)([D,M]),style:{willChange:"height",overflow:"hidden",...null!==C&&{...L}},title:"New Project",titleSuffix:V,children:(0,t.jsx)(tR,{frameworks:i,canCreateProject:s})}),C||T?(0,t.jsx)(E.default,{active:!!(C||T),deploymentId:N,flow:"import",resetDeploying:C?function(){k({type:"SET_DEPLOYING",deploying:!1}),k({type:"SET_DEPLOYMENT_RESET",deploymentReset:!0})}:void 0,flowId:I}):(0,t.jsx)(tG.DeploymentPlaceholderCard,{}),(0,t.jsx)(tM.ImportFooter,{})]})}var tU=e.i(1459027),tB=e.i(8228513),tz=e.i(5746939);function tH(e){let{frameworks:r}=e,{isLoading:a,user:p}=(0,l.useUser)(),[h,f]=(0,m.useProjectImportReducer)(),{team:v,isReady:g}=(0,o.useTeam)(),{can:y,isLoading:x}=(0,d.default)(),_=(0,j.useRepoQuery)(),w=(0,s.useRouter)();(0,n.useEffect)(()=>{_||w.push("/new")},[_,w]);let b=y(u.Action.Create,u.Resource.Project),E=!g||x||a,S=(0,n.useMemo)(()=>({...h,dispatch:f}),[f,h]),C=(0,n.useRef)(!1);return(0,n.useEffect)(()=>{!h.deploymentId||C.current||(C.current=!0,i.default.get("visitor-id")&&(0,c.postToStatsigClient)({events:[{eventName:"project_created"}]}))},[h.deploymentId,v?.billing?.plan,v?.id,p?.uid]),(0,t.jsxs)(m.ProjectImportContext.Provider,{value:S,children:[(0,t.jsx)(tU.TrackStatsigPageView,{name:"new_import"}),(0,t.jsx)(tY,{frameworks:r,hasAccess:!E&&!(E||!b)})]})}function tY(e){let{hasAccess:n,frameworks:i=[]}=e;return(0,t.jsx)("div",{children:(0,t.jsx)("div",{className:(0,r.clsx)(tB.default.importPageAdjustment,tz.default.newMain),children:(0,t.jsx)(a.Stack,{className:(0,r.clsx)("geist-wrapper",tz.default.newMainContentWrapper),direction:{sm:"column",md:"column",lg:"row"},gap:{sm:9,md:9,lg:18},children:(0,t.jsx)("div",{className:tz.default.mainContent,children:(0,t.jsx)(tW,{frameworks:i,hasAccess:!!n})})})})})}e.s(["ImportFlow",()=>tH,"StaticImportFlowPage",()=>tY],5187772)}]);

//# sourceMappingURL=cfe42fe83f0c1d1f.js.map
//# debugId=5079b0e6-247b-588c-a629-a72736a58792
