
!function(){try{var e="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:{},n=(new e.Error).stack;n&&(e._sentryDebugIds=e._sentryDebugIds||{},e._sentryDebugIds[n]="f157ca1e-c6d6-541e-889b-1c325e0c8752")}catch(e){}}();
(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,1935298,e=>{e.v({fakeSideBorders:"group-log-filters-module__iUXrVG__fakeSideBorders",filterContent:"group-log-filters-module__iUXrVG__filterContent",first:"group-log-filters-module__iUXrVG__first",last:"group-log-filters-module__iUXrVG__last",modalActiveButtonContainer:"group-log-filters-module__iUXrVG__modalActiveButtonContainer",modalActiveButtonDot:"group-log-filters-module__iUXrVG__modalActiveButtonDot",modalBody:"group-log-filters-module__iUXrVG__modalBody",modalMain:"group-log-filters-module__iUXrVG__modalMain",title:"group-log-filters-module__iUXrVG__title",titleContainer:"group-log-filters-module__iUXrVG__titleContainer"})},8300708,e=>{e.v({buttonLink:"group-details-panel-module__u1jj4W__buttonLink",buttonRule:"group-details-panel-module__u1jj4W__buttonRule",codeBlock:"group-details-panel-module__u1jj4W__codeBlock",copy:"group-details-panel-module__u1jj4W__copy",cta:"group-details-panel-module__u1jj4W__cta",detailsContainer:"group-details-panel-module__u1jj4W__detailsContainer",detailsHeader:"group-details-panel-module__u1jj4W__detailsHeader",detailsMain:"group-details-panel-module__u1jj4W__detailsMain",divider:"group-details-panel-module__u1jj4W__divider",drawer:"group-details-panel-module__u1jj4W__drawer",error:"group-details-panel-module__u1jj4W__error",fetchMetricRowContainer:"group-details-panel-module__u1jj4W__fetchMetricRowContainer",fetchMetricsContainer:"group-details-panel-module__u1jj4W__fetchMetricsContainer",ghostButton:"group-details-panel-module__u1jj4W__ghostButton",groupMessage:"group-details-panel-module__u1jj4W__groupMessage",info:"group-details-panel-module__u1jj4W__info",learnMore:"group-details-panel-module__u1jj4W__learnMore",logDetailRowSkeleton:"group-details-panel-module__u1jj4W__logDetailRowSkeleton",message:"group-details-panel-module__u1jj4W__message",modalBody:"group-details-panel-module__u1jj4W__modalBody",noLogsSelected:"group-details-panel-module__u1jj4W__noLogsSelected",root:"group-details-panel-module__u1jj4W__root",rowContainer:"group-details-panel-module__u1jj4W__rowContainer",setupLogDrain:"group-details-panel-module__u1jj4W__setupLogDrain",title:"group-details-panel-module__u1jj4W__title",tooltip:"group-details-panel-module__u1jj4W__tooltip",truncate:"group-details-panel-module__u1jj4W__truncate",warning:"group-details-panel-module__u1jj4W__warning"})},4410321,e=>{e.v({breakSpaces:"group-log-rows-module__JxqD1W__breakSpaces",colspan:"group-log-rows-module__JxqD1W__colspan",darkTheme:"group-log-rows-module__JxqD1W__darkTheme",darktheme:"group-log-rows-module__JxqD1W__darktheme",error:"group-log-rows-module__JxqD1W__error",fadeIn:"group-log-rows-module__JxqD1W__fadeIn",faded:"group-log-rows-module__JxqD1W__faded",fatal:"group-log-rows-module__JxqD1W__fatal",flash:"group-log-rows-module__JxqD1W__flash",header:"group-log-rows-module__JxqD1W__header",headerContainer:"group-log-rows-module__JxqD1W__headerContainer",info:"group-log-rows-module__JxqD1W__info",isNew:"group-log-rows-module__JxqD1W__isNew",isSelected:"group-log-rows-module__JxqD1W__isSelected",liveModeRow:"group-log-rows-module__JxqD1W__liveModeRow",loadingError:"group-log-rows-module__JxqD1W__loadingError",loadingNew:"group-log-rows-module__JxqD1W__loadingNew","move-in-indicator":"group-log-rows-module__JxqD1W__move-in-indicator","move-logs-down":"group-log-rows-module__JxqD1W__move-logs-down","move-logs-down-with-opacity":"group-log-rows-module__JxqD1W__move-logs-down-with-opacity","move-logs-up":"group-log-rows-module__JxqD1W__move-logs-up",moveUp:"group-log-rows-module__JxqD1W__moveUp",paused:"group-log-rows-module__JxqD1W__paused",previouslyFaded:"group-log-rows-module__JxqD1W__previouslyFaded",reverseBackground:"group-log-rows-module__JxqD1W__reverseBackground",rowContainer:"group-log-rows-module__JxqD1W__rowContainer",rowItem:"group-log-rows-module__JxqD1W__rowItem",screenReaderSelect:"group-log-rows-module__JxqD1W__screenReaderSelect",separated:"group-log-rows-module__JxqD1W__separated",tooltip:"group-log-rows-module__JxqD1W__tooltip",tooltipContainer:"group-log-rows-module__JxqD1W__tooltipContainer",truncate:"group-log-rows-module__JxqD1W__truncate",uppercase:"group-log-rows-module__JxqD1W__uppercase",warning:"group-log-rows-module__JxqD1W__warning"})},3327755,(e,t,s)=>{!function(e){"use strict";function t(e){var t={},s=e?e.split(/\.|-|_/):["0","0","0"];return t.info=s.join("."),t.major=s[0]||"0",t.minor=s[1]||"0",t.patch=s[2]||"0",t}Array.isArray||(Array.isArray=function(e){return"[object Array]"===Object.prototype.toString.call(e)});var s=["crios","fxios","daumapps"],r=e.userAgent=function(e,r){var a,l,o,n,i=e?e.toLowerCase():"undefined"!=typeof window&&window.navigator&&"string"==typeof window.navigator.userAgent?window.navigator.userAgent.toLowerCase():"";return{ua:i,browser:(a={},"webkit"===(l=/(dolfin)[ \/]([\w.]+)/.exec(i)||/(edge)[ \/]([\w.]+)/.exec(i)||/(chrome)[ \/]([\w.]+)/.exec(i)||/(tizen)[ \/]([\w.]+)/.exec(i)||/(opera)(?:.*version)?[ \/]([\w.]+)/.exec(i)||/(webkit)(?:.*version)?[ \/]([\w.]+)/.exec(i)||/(msie) ([\w.]+)/.exec(i)||0>i.indexOf("compatible")&&/(mozilla)(?:.*? rv:([\w.]+))?/.exec(i)||["","unknown"])[1]?l=/(iphone|ipad|ipod)[\S\s]*os ([\w._\-]+) like/.exec(i)||/(android)[ \/]([\w._\-]+);/.exec(i)||[l[0],"safari",l[2]]:"mozilla"===l[1]?/trident/.test(i)?l[1]="msie":l[1]="firefox":/polaris|natebrowser|([010|011|016|017|018|019]{3}\d{3,4}\d{4}$)/.test(i)&&(l[1]="polaris"),a[l[1]]=!0,a.name=l[1],a.version=t(l[2]),a),platform:function(e){var t,s;if(!(!(t=e).match(/linux|windows (nt|98)|macintosh|cros/)||t.match(/android|mobile|polaris|lgtelecom|uzard|natebrowser|ktf;|skt;/)))return"pc";if((s=e).match(/ipad/)||s.match(/android/)&&!s.match(/mobi|mini|fennec/))return"tablet";return e.match(/ip(hone|od)|android.+mobile|windows (ce|phone)|blackberry|bb10|symbian|webos|firefox.+fennec|opera m(ob|in)i|tizen.+mobile|polaris|iemobile|lgtelecom|nokia|sonyericsson|dolfin|uzard|natebrowser|ktf;|skt;/)?"mobile":""}(i),os:(o={},"iphone"===(n=/(iphone|ipad|ipod)[\S\s]*os ([\w._\-]+) like/.exec(i)||!!/polaris|natebrowser|([010|011|016|017|018|019]{3}\d{3,4}\d{4}$)/.test(i)&&["","polaris","0.0.0"]||/(windows)(?: nt | phone(?: os){0,1} | )([\w._\-]+)/.exec(i)||/(android)[ \/]([\w._\-]+);/.exec(i)||!!/android/.test(i)&&["","android","0.0.0"]||!!/(windows)/.test(i)&&["","windows","0.0.0"]||/(mac) os x ([\w._\-]+)/.exec(i)||/(tizen)[ \/]([\w._\-]+);/.exec(i)||!!/(linux)/.test(i)&&["","linux","0.0.0"]||!!/webos/.test(i)&&["","webos","0.0.0"]||/(cros)(?:\s[\w]+\s)([\d._\-]+)/.exec(i)||/(bada)[ \/]([\w._\-]+)/.exec(i)||!!/bada/.test(i)&&["","bada","0.0.0"]||!!/(rim|blackberry|bb10)/.test(i)&&["","blackberry","0.0.0"]||["","unknown","0.0.0"])[1]||"ipad"===n[1]||"ipod"===n[1]?n[1]="ios":"windows"===n[1]&&"98"===n[2]&&(n[2]="0.98.0"),"cros"===n[1]&&(n[1]="chrome"),o[n[1]]=!0,o.name=n[1],o.version=t(n[2]),o),app:function(e,r){var a={},l=null,o=s;Array.isArray(r)?o=s.concat(r):"string"==typeof r&&(o=s.concat([r]));for(var n=0,i=o.length;n<i&&!(l=RegExp("("+o[n]+")[ \\/]([\\w._\\-]+)").exec(e));n+=1);return l||(l=["",""]),l[1]?(a.isApp=!0,a.name=l[1],a.version=t(l[2])):a.isApp=!1,a}(i,r)}};"object"==typeof window&&window.navigator.userAgent&&(window.ua_result=r(window.navigator.userAgent)||null)}((s.daumtools=s,s.util=s,s))},2458511,e=>{e.v({combobox:"search-filter-module__SHqGLq__combobox",comboboxList:"search-filter-module__SHqGLq__comboboxList",comboboxWrapper:"search-filter-module__SHqGLq__comboboxWrapper",confirm:"search-filter-module__SHqGLq__confirm",empty:"search-filter-module__SHqGLq__empty",filter:"search-filter-module__SHqGLq__filter",firstOption:"search-filter-module__SHqGLq__firstOption",firstOptionInnerButton:"search-filter-module__SHqGLq__firstOptionInnerButton",hide:"search-filter-module__SHqGLq__hide",highlight:"search-filter-module__SHqGLq__highlight",input:"search-filter-module__SHqGLq__input",option:"search-filter-module__SHqGLq__option",suffix:"search-filter-module__SHqGLq__suffix",suggestions:"search-filter-module__SHqGLq__suggestions",textOverlay:"search-filter-module__SHqGLq__textOverlay"})},5431818,e=>{e.v({logRowsContainer:"logs-common-module__Gs96xq__logRowsContainer",logRowsWrapper:"logs-common-module__Gs96xq__logRowsWrapper"})},615673,e=>{e.v({container:"paginated-group-logs-module__kgOb4G__container",hasLogs:"paginated-group-logs-module__kgOb4G__hasLogs"})},7230346,e=>{e.v({logGradient:"group-logs-module__OaUHyW__logGradient",logHeader:"group-logs-module__OaUHyW__logHeader",show:"group-logs-module__OaUHyW__show"})},6687520,e=>{"use strict";var t=e.i(6468255),s=e.i(6696646),r=e.i(9508212),a=e.i(8674454),l=e.i(6694387),o=e.i(4991687),n=e.i(5326905),i=e.i(8459493),d=e.i(2504781),c=e.i(455575),u=e.i(9722978),p=e.i(4004502),m=e.i(8139291),x=e.i(992159),h=e.i(9100551),g=e.i(7917902),f=e.i(3322724),j=e.i(1360174),v=e.i(1717203),y=e.i(7557283),C=e.i(119294),b=e.i(6352514),w=e.i(9202779),_=e.i(1344973),S=e.i(6891161),N=e.i(7580732),k=e.i(3911483),L=e.i(8042625),T=e.i(4244280),E=e.i(1138941),M=e.i(6060673),D=e.i(7033605),I=e.i(8306707);let F={rows:[]};function q(e){let{attributeName:t,attributeNameSearchQuery:s,forceEmpty:r=!1,deploymentDomains:a,deploymentIds:l,domains:o,levels:n,sources:i,requestTags:d,routes:c,requestPaths:u,requestIds:p,requestMethods:m,statusCodes:x,caches:h,environments:f,branches:j,sessionIds:v,traceIds:y,invocationIds:C}=e,{data:b}=(0,M.useProject)((0,E.useProjectIdOrName)()),{user:w,team:_,isLoading:S}=(0,g.useAccount)(),{startDate:N,endDate:q,searchQuery:R,myLogs:O,hasTraces:B,useClickHouseLogs:P}=(0,D.useLogsApiParams)(),$=q??new Date,z=(0,k.default)(()=>{if(S||!t||r||p&&p.length>0||!b)return;let e=null!==_?_.id:null,g=null!==w?w?.uid:null,k=e||g;if(null===k)return;let E=(0,L.encode)({attributeName:t,attributeNameSearchQuery:s||void 0,startDate:N.getTime(),endDate:$.getTime(),searchQuery:(0,I.stringifyArrayContent)((0,I.tokenizeSearchQuery)(R)),projectId:b.id,deploymentDomain:(0,I.stringifyArrayContent)(a),deploymentId:(0,I.stringifyArrayContent)(l),domain:(0,I.stringifyArrayContent)(o),level:(0,I.stringifyArrayContent)(n),ownerId:k,source:(0,I.stringifyArrayContent)(i),requestTags:(0,I.stringifyArrayContent)(d),route:(0,I.stringifyArrayContent)(c),requestPath:(0,I.stringifyArrayContent)(u),requestMethod:(0,I.stringifyArrayContent)(m),statusCode:(0,I.stringifyArrayContent)(x),cache:(0,I.stringifyArrayContent)(h),environment:(0,I.stringifyArrayContent)(f),branch:(0,I.stringifyArrayContent)(j),myLogs:O?"true":void 0,sessionId:(0,I.stringifyArrayContent)(v),hasTraces:B?"true":void 0,traceId:(0,I.stringifyArrayContent)(y),invocationId:(0,I.stringifyArrayContent)(C),useClickHouseLogs:P});return`${T.API_LOGS}/request-logs/filter-values${E}`},A,{keepPreviousData:!0,revalidateOnFocus:!1});return r?{...z,data:F}:z}async function A(e,t){let s=await fetch(e,t);if(!s.ok)throw Error((await s.json()).message);return s.json()}var R=e.i(1935298),O=e.i(8631221),B=e.i(3196486);let P=["responseStatusCodes","vercelCaches","requestMethods","timeline","levels","sources","environments"],$={hobby:"pastHour",pro:"pastDay",enterprise:"past3Days"},z=()=>{let{project:e}=(0,h.useParams)()??{},t=(0,M.useProject)(e),r=t.data?.id,{user:a,team:l}=(0,g.useAccount)(),o=l?.billing?.plan??"hobby",n=(0,s.useCallback)(()=>{r&&a?.uid&&(0,B.sendToSnowflake)(O.Topic.VercelAppV0LogPageVisited,{project_id:r,team_id:l?.id,user_id:a.uid},"vercel-app")},[r,a?.uid,l?.id]);return{trackLogPageVisit:n,trackFilterUse:(0,s.useCallback)(e=>{r&&a&&("timeline"===e.filter&&"maximum"===e.value[0]&&(e.value[0]=$[o]),(0,B.sendToSnowflake)(O.Topic.VercelAppV0LogFilterQuery,{project_id:r,team_id:l?.id,user_id:a.uid,event_trigger:e.eventTrigger,filter_terms:e.value.map(t=>({field:e.filter,operator:"=",value:t||void 0}))},"vercel-app"))},[r,a,l,o]),trackLogPresetRun:(0,s.useCallback)(e=>{let{presetId:t}=e;r&&a&&(0,B.sendToSnowflake)(O.Topic.VercelAppV0LogPresetRun,{project_id:r,team_id:l?.id,user_id:a.uid,preset_id:t,preset_type:t.endsWith("_t")?"team":"personal"},"vercel-app")},[r,a,l])}};var W=e.i(4796642),H=e.i(787358),G=e.i(4333930),V=e.i(9334638);let U=(0,V.withNewIcon)(`<path fill-rule="evenodd" clip-rule="evenodd" d="M0.5 3.25C0.5 1.86929 1.61929 0.75 3 0.75H13C14.3807 0.75 15.5 1.86929 15.5 3.25V4.75C15.5 5.24434 15.3565 5.70517 15.1089 6.09311C14.6903 5.81311 14.2373 5.58044 13.7576 5.40277C13.9087 5.22759 14 4.99946 14 4.75V3.25C14 2.69772 13.5523 2.25 13 2.25H3C2.44772 2.25 2 2.69772 2 3.25V4.75C2 5.30229 2.44772 5.75 3 5.75H8.46611C7.74768 6.12985 7.10902 6.64041 6.58178 7.25H3C1.61929 7.25 0.5 6.13071 0.5 4.75V3.25ZM5.86958 8.25H3C1.61929 8.25 0.5 9.36929 0.5 10.75V12.25C0.5 13.6307 1.61929 14.75 3 14.75H5.86958C5.59976 14.2835 5.38623 13.7804 5.23829 13.25H3C2.44772 13.25 2 12.8023 2 12.25V10.75C2 10.1977 2.44772 9.75 3 9.75H5.23829C5.38623 9.21955 5.59975 8.71645 5.86958 8.25ZM4.25 4.75C4.66421 4.75 5 4.41421 5 4C5 3.58579 4.66421 3.25 4.25 3.25C3.83579 3.25 3.5 3.58579 3.5 4C3.5 4.41421 3.83579 4.75 4.25 4.75ZM7.5 4C7.5 4.41421 7.16421 4.75 6.75 4.75C6.33579 4.75 6 4.41421 6 4C6 3.58579 6.33579 3.25 6.75 3.25C7.16421 3.25 7.5 3.58579 7.5 4ZM13.2307 12C13.2 12.815 13.0938 13.6278 12.9124 14.4279C13.8564 13.9717 14.5462 13.0724 14.7118 12H13.2307ZM11.8047 14.7359C11.7044 14.7452 11.6028 14.75 11.5 14.75C11.3972 14.75 11.2956 14.7452 11.1953 14.7359C10.9494 13.839 10.8077 12.9211 10.77 12H12.23C12.1923 12.9211 12.0506 13.839 11.8047 14.7359ZM13.2307 11C13.2 10.185 13.0938 9.37224 12.9124 8.57213C13.8564 9.02834 14.5462 9.92764 14.7118 11H13.2307ZM12.23 11C12.1923 10.0789 12.0506 9.16097 11.8047 8.2641C11.7044 8.25477 11.6028 8.25 11.5 8.25C11.3972 8.25 11.2956 8.25477 11.1953 8.2641C10.9494 9.16097 10.8077 10.0789 10.77 11H12.23ZM9.76925 11C9.80005 10.185 9.90616 9.37224 10.0876 8.57213C9.1436 9.02834 8.45381 9.92764 8.28822 11H9.76925ZM10.0876 14.4279C9.90616 13.6278 9.80005 12.815 9.76925 12H8.28822C8.45381 13.0724 9.1436 13.9717 10.0876 14.4279ZM11.5 16C13.9853 16 16 13.9853 16 11.5C16 9.01472 13.9853 7 11.5 7C9.01472 7 7 9.01472 7 11.5C7 13.9853 9.01472 16 11.5 16Z" fill="currentColor"/>
  `);var Z=e.i(8004707),Q=e.i(1438473);let X=[{label:"Vercel Function",value:"serverless",icon:(0,t.jsx)(G.FunctionSquare,{size:16})},{label:"Middleware",value:"middleware",icon:(0,t.jsx)(H.FunctionMiddleware,{size:16})},{label:"Cache",value:"cache",icon:(0,t.jsx)(U,{size:16})},{label:"Edge Function",value:"edge-function",icon:(0,t.jsx)(W.FunctionEdge,{size:16}),optional:!0},{label:"Rewrites",value:"external",icon:(0,t.jsx)(Z.ArrowGlobe,{size:16}),optional:!0},{label:"Redirects",value:"redirect",icon:(0,t.jsx)(Q.ArrowRight,{size:16}),optional:!0}],J=[{label:"Warning",value:"warning"},{label:"Error",value:"error"},{label:"Fatal",value:"fatal"}],K=[{label:"GET",value:"GET"},{label:"POST",value:"POST"},{label:"HEAD",value:"HEAD"},{label:"PUT",value:"PUT"},{label:"DELETE",value:"DELETE"},{label:"OPTIONS",value:"OPTIONS"},{label:"PATCH",value:"PATCH"}],Y=[{label:"API Endpoint",value:"api"},{label:"Server-side Rendering",value:"ssr"},{label:"Incremental Static Regeneration",value:"isr"},{label:"Partial Prerendering",value:"ppr"},{label:"Server Components",value:"rsc"},{label:"Cron Job",value:"cron"}],ee=[{name:"level",attributeName:"level",suggestions:J.map(e=>e.value)},{name:"resource",attributeName:"source",suggestions:X.filter(e=>!e.optional).map(e=>e.value)},{name:"requestType",attributeName:"requestTags",suggestions:Y.map(e=>e.value)},{name:"function",attributeName:"route",suggestions:["function name"]},{name:"requestPath",attributeName:"requestPath",suggestions:["request path"]},{name:"host",attributeName:"domain",suggestions:["domain name"]},{name:"deployment",attributeName:"deploymentDomain",suggestions:["deployment name"]},{name:"method",attributeName:"requestMethod",suggestions:K.map(e=>e.value)},{name:"status",attributeName:"statusCode",suggestions:["status code"]},{name:"cache",attributeName:"cache",suggestions:["cache value"]},{name:"environment",attributeName:"environment",suggestions:[{label:"Production",value:"production"},{label:"Preview",value:"preview"}].map(e=>e.value)},{name:"branch",attributeName:"branch",suggestions:["branch name"]},{name:"requestId",attributeName:"requestId",suggestions:["Request ID - a partial of the requestId is required to search, ex:abcde-1678961364403-a1b2c3d4f5e6"]},{name:"sessionId",attributeName:"sessionId",suggestions:["id of your tracing session"]},{name:"traceId",attributeName:"traceId",suggestions:["id of the trace"]},{name:"deploymentId",attributeName:"deploymentId",suggestions:["id of the deployment"]},{name:"invocationId",attributeName:"invocationId",suggestions:["id of the invocation"]}],et=ee.filter(e=>"deploymentId"!==e.name&&"deployment"!==e.name);var es=e.i(6209667);function er(){let{state:{levels:e,routes:r,deploymentDomains:a,deploymentIds:l,domains:o,sources:n,requestTags:i,requestMethods:d,requestPaths:c,caches:u,statusCodes:m,environments:x,branches:h,sessionIds:g,traceIds:f,invocationIds:j},setState:v}=(0,D.useLogsQueryState)(),{data:y,isLoading:C}=q({attributeName:"level",domains:o,deploymentDomains:a,deploymentIds:l,sources:n,requestTags:i,routes:r,requestPaths:c,requestMethods:d,caches:u,statusCodes:m,environments:x,branches:h,sessionIds:g,traceIds:f,invocationIds:j}),b=(0,s.useMemo)(()=>{let e;return e=y?.rows,J.map(t=>{let s=e?.find(e=>e.attributeValue===t.value)?.total;return s||C||(s=0),{label:t.label,value:t.value,count:s}}).sort((e,t)=>Number(t.count)-Number(e.count))},[y,C]),w=b.length,{trackFilterUse:_}=z();return(0,t.jsx)(N.Disclosure,{buttonClassName:R.default.fakeSideBorders,contentClassName:R.default.filterContent,count:e.length,"data-testid":(0,p.tid)("group-logs","level-filter"),defaultExpanded:!0,onClearFilter:()=>v({levels:void 0,preset:null}),title:"Contains Console Level",children:(0,t.jsx)(es.LogFilter,{hideSearch:!0,isCountLoading:C,onChange:e=>{v({levels:e.sort(),preset:null}),_({eventTrigger:"filter click",filter:"levels",value:e.sort()})},options:b,selectedOptions:e,totalAvailableOptions:w})})}function ea(){let{state:{levels:e,deploymentDomains:r,deploymentIds:a,domains:l,routes:o,sources:n,requestTags:i,requestMethods:d,requestPaths:c,caches:m,statusCodes:x,environments:h,branches:g,sessionIds:f,traceIds:j,invocationIds:v},setState:y}=(0,D.useLogsQueryState)(),[C,b]=(0,s.useState)(!1),{data:w,isLoading:_}=q({attributeName:"source",levels:e,domains:l,deploymentDomains:r,deploymentIds:a,routes:o,requestMethods:d,requestPaths:c,caches:m,statusCodes:x,environments:h,branches:g,forceEmpty:!C,requestTags:i,sessionIds:f,traceIds:j,invocationIds:v}),{trackFilterUse:S}=z(),k=(0,s.useMemo)(()=>(e=>{let t=[];for(let s of X){let r=e?.find(e=>e.attributeValue===s.value)?.total;(!s.optional||r)&&t.push({label:s.label,value:s.value,icon:s.icon,count:r??0})}return t})(w?.rows??[]),[w]),L=k.length;return(0,t.jsx)(N.Disclosure,{buttonClassName:R.default.fakeSideBorders,contentClassName:(0,u.clsx)(R.default.filterContent),count:n.length,"data-testid":(0,p.tid)("logs","source-filter"),onClearFilter:()=>y({sources:void 0,preset:null}),onExpand:()=>b(!0),title:"Resource",children:(0,t.jsx)(es.LogFilter,{hideSearch:!0,isCountLoading:_,onChange:e=>{y({sources:e.sort(),preset:null}),S({eventTrigger:"filter click",filter:"sources",value:e.sort()})},options:k,selectedOptions:n,totalAvailableOptions:L})})}function el(){let{state:{levels:e,deploymentDomains:r,deploymentIds:a,domains:l,routes:o,sources:n,requestTags:i,requestMethods:d,requestPaths:c,caches:m,statusCodes:x,environments:h,branches:g,sessionIds:f,traceIds:j,invocationIds:v},setState:y}=(0,D.useLogsQueryState)(),[C,b]=(0,s.useState)(!1),{data:w,isLoading:_}=q({attributeName:"requestTags",levels:e,domains:l,deploymentDomains:r,deploymentIds:a,routes:o,requestMethods:d,requestPaths:c,caches:m,statusCodes:x,environments:h,branches:g,sources:n,sessionIds:f,traceIds:j,forceEmpty:!C,invocationIds:v}),{trackFilterUse:S}=z(),k=(0,s.useMemo)(()=>{let e;return e=w?.rows??[],Y.map(t=>{let s=e?.find(e=>e.attributeValue===t.value)?.total;return{label:t.label,value:t.value,icon:t.icon,count:s??0}})},[w]),L=k.length;return(0,t.jsx)(N.Disclosure,{buttonClassName:R.default.fakeSideBorders,contentClassName:(0,u.clsx)(R.default.filterContent),count:i.length,"data-testid":(0,p.tid)("logs","request-tags-filter"),onClearFilter:()=>y({requestTags:void 0,preset:null}),onExpand:()=>b(!0),title:"Request Type",children:(0,t.jsx)(es.LogFilter,{hideSearch:!0,isCountLoading:_,onChange:e=>{y({requestTags:e.sort(),preset:null}),S({eventTrigger:"filter click",filter:"requestTags",value:e.sort()})},options:k,selectedOptions:i,totalAvailableOptions:L})})}function eo(){let{state:{levels:e,deploymentDomains:r,deploymentIds:a,sources:l,requestTags:o,domains:n,routes:i,requestPaths:d,requestMethods:c,statusCodes:u,caches:m,environments:x,branches:h,sessionIds:g,traceIds:f,invocationIds:j},setState:v}=(0,D.useLogsQueryState)(),[y,C]=(0,s.useState)(""),{trackFilterUse:b}=z(),[w,_]=(0,s.useState)(!1),{data:S,isLoading:k}=q({attributeName:"domain",attributeNameSearchQuery:y,levels:e,deploymentDomains:r,deploymentIds:a,sources:l,requestTags:o,routes:i,requestPaths:d,requestMethods:c,statusCodes:u,caches:m,environments:x,branches:h,sessionIds:g,traceIds:f,forceEmpty:!w,invocationIds:j}),L=!S,T=(0,s.useMemo)(()=>{let e=S?.rows??[];return n.filter(t=>!e.find(e=>e.attributeValue===t)).forEach(t=>{e.push({attributeValue:t,total:0})}),e.map(es.generateFilterOption)},[S,n]),E=S?.availableOptions??0;return(0,t.jsx)(N.Disclosure,{buttonClassName:R.default.fakeSideBorders,contentClassName:R.default.filterContent,count:n.length,"data-testid":(0,p.tid)("group-logs","domain-filter"),onClearFilter:()=>v({domains:void 0,preset:null}),onExpand:()=>_(!0),title:"Host",children:(0,t.jsx)(es.LogFilter,{isFirstLoading:L,isLoading:k,onChange:e=>{v({domains:e.sort(),preset:null}),b({eventTrigger:"filter click",filter:"domains",value:Array(e.length).fill("")})},onSearch:C,options:T,searchId:"search-hosts",searchLabel:"Search hosts",searchPlaceholder:"Search hosts…",selectedOptions:n,showSelectedOptionsAtTop:!0,totalAvailableOptions:E})})}var en=e.i(3306538),ei=e.i(6094744),ed=e.i(3981247);e.i(3182268);var ec=e.i(7849855),eu=e.i(4396019);function ep(){let{state:{levels:e,deploymentIds:a,sources:l,requestTags:o,domains:n,routes:i,requestPaths:d,statusCodes:c,requestMethods:u,caches:m,environments:x,branches:h,sessionIds:g,traceIds:f,invocationIds:j},setState:v}=(0,D.useLogsQueryState)(),{isDeploymentEditable:y}=(0,ei.usePageConfig)(),{trackFilterUse:C}=z(),[b,w]=(0,s.useState)(""),[_,S]=(0,s.useState)(!1),{data:k,isLoading:L}=q({attributeName:"deploymentId",attributeNameSearchQuery:b,deploymentIds:a,levels:e,sources:l,requestTags:o,domains:n,routes:i,requestPaths:d,statusCodes:c,requestMethods:u,caches:m,environments:x,branches:h,sessionIds:g,traceIds:f,forceEmpty:!y||!_,invocationIds:j}),{teamSlug:T,projectSlug:E}=(0,ec.useProjectAndTeamSlug)(),{data:M}=(0,ed.useRollingRelease)({teamIdOrSlug:T,projectSlug:E}),{deployment:I}=(0,eu.useProjectProductionDeployment)(E??void 0),F=M?.rollingRelease,A=F?.canaryDeployment?.id,O=!a,B=(0,s.useMemo)(()=>{let e=[];return k?.rows?.forEach(s=>{let a=s.attributeValue,l=I?.id===a,o=A&&a===A;l?e.push({label:(0,t.jsxs)(r.Stack,{align:"center",direction:"row",gap:2,children:[(0,t.jsx)(en.Badge,{size:"sm",variant:"green-subtle",children:"Current"}),(0,t.jsx)("span",{children:a})]}),value:`${a}`,count:s.total}):o?e.push({label:(0,t.jsxs)(r.Stack,{align:"center",direction:"row",gap:2,children:[(0,t.jsx)(en.Badge,{size:"sm",variant:"blue-subtle",children:"Canary"}),(0,t.jsx)("span",{children:a})]}),value:`${a}`,count:s.total}):e.push({label:a,value:`${a}`,count:s.total})}),e.sort((e,t)=>{let s=I?.id===e.value,r=A&&e.value===A,a=I?.id===t.value,l=A&&t.value===A;return s&&!a?-1:!s&&a?1:r&&!l?-1:!r&&l?1:0})},[A,k?.rows,I?.id]),P=k?.availableOptions??0;return y?(0,t.jsx)(N.Disclosure,{buttonClassName:R.default.fakeSideBorders,contentClassName:R.default.filterContent,count:a.length,"data-testid":(0,p.tid)("logs","deployment-filter"),onClearFilter:()=>v({deploymentIds:void 0,preset:null}),onExpand:()=>S(!0),title:"Deployment ID",children:(0,t.jsx)(es.LogFilter,{isFirstLoading:O,isLoading:L,onChange:e=>{v({deploymentIds:e.sort(),preset:null}),C({eventTrigger:"filter click",filter:"deploymentIds",value:Array(e.length).fill("")})},onSearch:w,options:B,searchId:"search-deployment-ids",searchLabel:"Search deployment IDs",searchPlaceholder:"Search deployment IDs…",selectedOptions:a,showSelectedOptionsAtTop:!0,totalAvailableOptions:P})}):null}function em(){let{state:{routes:e,levels:r,deploymentDomains:a,deploymentIds:l,domains:o,requestPaths:n,sources:i,requestTags:d,environments:c,branches:u,requestMethods:m,caches:x,statusCodes:h,sessionIds:g,traceIds:f,invocationIds:j},setState:v}=(0,D.useLogsQueryState)(),[y,C]=(0,s.useState)(""),{trackFilterUse:b}=z(),{functionFilterDefaultExpanded:w}=(0,ei.usePageConfig)(),[_,S]=(0,s.useState)(w),{data:k,isLoading:L}=q({attributeName:"route",attributeNameSearchQuery:y,domains:o,forceEmpty:!_,levels:r,requestPaths:n,environments:c,branches:u,deploymentDomains:a,deploymentIds:l,statusCodes:h,requestMethods:m,caches:x,sources:i,requestTags:d,sessionIds:g,traceIds:f,invocationIds:j}),T=!k,E=(0,s.useMemo)(()=>{let t=k?.rows??[];return e.filter(e=>!t.find(t=>t.attributeValue===e)).forEach(e=>{t.push({attributeValue:e,total:0})}),t.map(es.generateFilterOption)},[k,e]),M=k?.availableOptions??0;return(0,t.jsx)(N.Disclosure,{buttonClassName:R.default.fakeSideBorders,contentClassName:R.default.filterContent,count:e.length,"data-testid":(0,p.tid)("logs","route-filter"),defaultExpanded:w,onClearFilter:()=>v({routes:void 0,preset:null}),onExpand:()=>S(!0),title:"Route",children:(0,t.jsx)(es.LogFilter,{isFirstLoading:T,isLoading:L,onChange:e=>{v({routes:e.sort(),preset:null}),b({eventTrigger:"filter click",filter:"routes",value:Array(e.length).fill("")})},onSearch:C,options:E,searchId:"search-routes",searchLabel:"Search Routes",searchPlaceholder:"Search Routes…",selectedOptions:e,showSelectedOptionsAtTop:!0,totalAvailableOptions:M})})}var ex=e.i(5627633),eh=e.i(3793583),eg=e.i(1794286),ef=e.i(5255926),ej=e.i(6143247),ev=e.i(5338940),ey=e.i(8063555);e.i(6483798);var eC=e.i(8287059);e.i(6728635);var eb=e.i(2630141),ew=e.i(294613);function e_(){let e=(0,eC.useOpenUpgradeModal)(),s=(0,eb.useOpenEnableModal)(),{team:r}=(0,ev.useTeam)(),{maxTimeRange:a,maxRetention:l,isLoading:o,teamId:n,hasExtendedTimeline:i}=(0,ey.useUserRetention)(),{state:{startDate:d,endDate:c},setState:u}=(0,D.useLogsQueryState)(),{startDate:m,endDate:x,timeline:h}=(0,D.useLogsApiParams)(),{trackFilterUse:g}=z(),f=Date.now(),j=(0,eh.sub)(f,a).getTime(),v=d&&c?void 0:h,{presets:y,presetValue:C}=(()=>{let t,l=(t=new Date,[{key:"past30Minutes",text:"Last 30 minutes",start:(0,eh.sub)(t,{minutes:30}),end:t},{key:"pastHour",text:"Last hour",start:(0,eh.sub)(t,{hours:1}),end:t},{key:"past12Hours",text:"Last 12 hours",start:(0,eh.sub)(t,{hours:12}),end:t},{key:"pastDay",text:"Last day",start:(0,eh.sub)(t,{days:1}),end:t},{key:"past3Days",text:"Last 3 days",start:(0,eh.sub)(t,{days:3}),end:t},{key:"pastWeek",text:"Last week",start:(0,eh.sub)(t,{weeks:1}),end:t},{key:"past2Weeks",text:"Last 2 weeks",start:(0,eh.sub)(t,{weeks:2}),end:t}]),o=r?.billing?.plan??"hobby",d=l.map(e=>{let t=e.start.getTime(),s=!1,r=null;if(!i&&t<j)if(s=!0,"hobby"===o){let e=(0,ew.getMaxRetention)(!1,"pro");r=t>=(0,eh.sub)(f,e).getTime()?"pro":"observability-plus"}else r="observability-plus";return{...e,key:e.start.getTime()===j?"maximum":e.key,needsUpgrade:s,upgradeType:r}});d.some(e=>e.start.getTime()===j)||d.push({key:"maximum",text:`Last ${(0,ex.formatDuration)(a)}`,start:new Date(j),end:new Date,needsUpgrade:!1,upgradeType:null});let c=v?d.find(e=>e.key===v):void 0,p=[{presets:d.filter(e=>!e.needsUpgrade)}];if("hobby"===o){let t=d.filter(e=>e.needsUpgrade&&"pro"===e.upgradeType).map(t=>({...t,onClick:()=>{e({teamHint:n,source:"logs-timeline-filter",onConversionSuccess:()=>{u({preset:null,timeline:t.key})}})}}));t.length>0&&p.push({title:"Upgrade to Pro",divider:!0,presets:t})}let m=d.filter(e=>e.needsUpgrade&&"observability-plus"===e.upgradeType).map(e=>({...e,onClick:()=>{s({via:"logs-date-range-select",upgradeUseCase:"retention"})}}));return m.length>0&&p.push({title:"Observability Plus",divider:!0,presets:m}),{presets:p,presetValue:c}})();return(0,t.jsx)(N.Disclosure,{buttonClassName:R.default.fakeSideBorders,contentClassName:(0,ej.cn)(R.default.filterContent,"[&>*>:first-child]:max-w-[calc(100%_-_40px)]"),"data-testid":(0,p.tid)("logs","timeline-filter"),defaultExpanded:!0,title:"Timeline",children:"maximum"===h&&o?(0,t.jsx)(ef.Skeleton,{height:40,width:"100%"}):(0,t.jsx)(eg.Calendar,{allowClear:!1,compact:!0,maxValue:f,minValue:(0,eh.sub)(f,l).getTime(),maxDuration:a,value:C||{start:d??m,end:c??x},width:"100%",dataTestId:(0,p.tid)("group-logs","calendar"),onChange:(e,t)=>{g({eventTrigger:"filter click",filter:"timeline",value:[t||"custom"]}),t?u({preset:null,timeline:t}):u({preset:null,startDate:new Date(e.start),endDate:new Date(e.end)})},presets:y,presetKey:v})})}var eS=e.i(9338892),eN=e.i(5869491);function ek(){let{state:{levels:e,deploymentDomains:r,deploymentIds:a,domains:l,routes:o,requestPaths:n,statusCodes:i,requestMethods:d,caches:c,environments:u,branches:m,sources:x,requestTags:h,sessionIds:g,traceIds:f,invocationIds:j},setState:v}=(0,D.useLogsQueryState)(),[y,C]=(0,s.useState)(""),{trackFilterUse:b}=z(),[w,_]=(0,s.useState)(!1),{data:S,isLoading:k}=q({attributeName:"statusCode",levels:e,domains:l,deploymentDomains:r,deploymentIds:a,routes:o,requestPaths:n,requestMethods:d,caches:c,environments:u,branches:m,forceEmpty:!w,sources:x,requestTags:h,sessionIds:g,traceIds:f,invocationIds:j}),L=!S,T=(0,s.useMemo)(()=>(S?.rows??[]).reduce((e,t)=>{if("-1"!==t.attributeValue){let s=(e=>{let{attributeValue:t,total:s}=e,r="None"!==t?eN.statusCodes[t]:void 0,a=r?.message??"";return{label:`${t} ${a}`,value:`${t}`,count:s}})(t);e.push(s)}return e},[]),[S?.rows]),E=T.length;i.filter(e=>!T.find(t=>String(t.value)===e)).forEach(e=>{T.push({label:e,value:e,count:0})});let M=(0,s.useMemo)(()=>y?(0,eS.matchSorter)(T,y,{keys:["label"],sorter:e=>e.sort((e,t)=>t.item.count-e.item.count)}):T,[T,y]);return(0,t.jsx)(N.Disclosure,{buttonClassName:R.default.fakeSideBorders,contentClassName:R.default.filterContent,count:i.length,"data-testid":(0,p.tid)("logs","status-filter"),onClearFilter:()=>v({statusCodes:void 0,preset:null}),onExpand:()=>_(!0),title:"Status Code",children:(0,t.jsx)(es.LogFilter,{isFirstLoading:L,isLoading:k,onChange:e=>{v({statusCodes:e.sort(),preset:null}),b({eventTrigger:"filter click",filter:"responseStatusCodes",value:e.sort()})},onSearch:C,options:M,searchId:"search-status",searchLabel:"Search status",searchPlaceholder:"Search status…",selectedOptions:i,showSelectedOptionsAtTop:!0,totalAvailableOptions:E})})}function eL(){let{state:{routes:e,levels:r,deploymentDomains:a,deploymentIds:l,environments:o,branches:n,domains:i,sources:d,requestTags:c,requestMethods:u,caches:m,statusCodes:x,requestPaths:h,sessionIds:g,traceIds:f,invocationIds:j},setState:v}=(0,D.useLogsQueryState)(),[y,C]=(0,s.useState)(""),{trackFilterUse:b}=z(),[w,_]=(0,s.useState)(!1),{data:S,isLoading:k}=q({attributeName:"requestPath",attributeNameSearchQuery:y,domains:i,levels:r,deploymentDomains:a,deploymentIds:l,environments:o,branches:n,statusCodes:x,sources:d,requestTags:c,requestMethods:u,caches:m,routes:e,sessionIds:g,traceIds:f,forceEmpty:!w,invocationIds:j}),L=!S,T=(0,s.useMemo)(()=>{let e=S?.rows??[];return h.filter(t=>!e.find(e=>e.attributeValue===t)).forEach(t=>{e.push({attributeValue:t,total:0})}),e.map(es.generateFilterOption)},[S,h]),E=S?.availableOptions??0;return(0,t.jsx)(N.Disclosure,{buttonClassName:R.default.fakeSideBorders,contentClassName:R.default.filterContent,count:h.length,"data-testid":(0,p.tid)("logs","request-path-filter"),onClearFilter:()=>v({requestPaths:void 0,preset:null}),onExpand:()=>_(!0),title:"Request Path",children:(0,t.jsx)(es.LogFilter,{isFirstLoading:L,isLoading:k,onChange:e=>{v({requestPaths:e.sort(),preset:null}),b({eventTrigger:"filter click",filter:"requestPaths",value:Array(e.length).fill("")})},onSearch:C,options:T,searchId:"search-request-paths",searchLabel:"Search request paths",searchPlaceholder:"Search request paths…",selectedOptions:h,showSelectedOptionsAtTop:!0,totalAvailableOptions:E})})}function eT(e){let{isLoadingEnvs:r,allEnvironments:a}=e,{state:{routes:l,deploymentDomains:o,deploymentIds:n,domains:i,sources:d,requestTags:c,requestPaths:u,levels:p,requestMethods:m,statusCodes:x,caches:h,environments:g,branches:f,sessionIds:j,traceIds:v,invocationIds:y},setState:C}=(0,D.useLogsQueryState)();a=a.filter(e=>"production"===e.id||"preview"===e.id);let{trackFilterUse:b}=z(),[w,_]=(0,s.useState)(!1),{data:S,isLoading:k}=q({attributeName:"environment",domains:i,deploymentDomains:o,deploymentIds:n,sources:d,requestTags:c,routes:l,requestMethods:m,levels:p,statusCodes:x,requestPaths:u,caches:h,branches:f,sessionIds:j,traceIds:v,forceEmpty:!w,invocationIds:y}),L=(0,s.useMemo)(()=>{let e;return e=S?.rows,a.map(t=>{let s=t.name??t.slug,r=e?.find(e=>e.attributeValue===t.id)?.total??0;return{label:s,value:t.id,count:r}}).sort((e,t)=>t.count-e.count)},[S,a]),T=(0,s.useMemo)(()=>k&&!!r,[k,r]),E=L.length;return(0,t.jsx)(N.Disclosure,{buttonClassName:R.default.fakeSideBorders,contentClassName:R.default.filterContent,count:g.length,onClearFilter:()=>C({environments:void 0}),onExpand:()=>_(!0),title:"Environment",children:(0,t.jsx)(es.LogFilter,{hideSearch:!0,isCountLoading:T,onChange:e=>{C({environments:e.sort(),preset:null}),b({eventTrigger:"filter click",filter:"environments",value:e.sort()})},options:L,searchId:"search-environment",searchLabel:"Search environment",searchPlaceholder:"Search environment…",selectedOptions:g,totalAvailableOptions:E})})}function eE(){let{state:{levels:e,deploymentDomains:r,deploymentIds:a,sources:l,requestTags:o,domains:n,routes:i,statusCodes:d,requestMethods:c,requestPaths:u,caches:p,environments:m,branches:x,sessionIds:h,traceIds:g,invocationIds:f},setState:j}=(0,D.useLogsQueryState)(),{trackFilterUse:v}=z(),[y,C]=(0,s.useState)(!1),[b,w]=(0,s.useState)(""),{data:_,isLoading:S}=q({attributeName:"branch",attributeNameSearchQuery:b,deploymentIds:a,deploymentDomains:r,levels:e,sources:l,requestTags:o,domains:n,routes:i,statusCodes:d,requestMethods:c,caches:p,environments:m,requestPaths:u,sessionIds:h,traceIds:g,forceEmpty:!y,invocationIds:f}),k=!_,L=(0,s.useMemo)(()=>{let e=_?.rows??[];return x.filter(t=>!e.find(e=>e.attributeValue===t)).forEach(t=>{e.push({attributeValue:t,total:0})}),e.map(es.generateFilterOption)},[_,x]),T=_?.availableOptions??0;return(0,t.jsx)(N.Disclosure,{buttonClassName:R.default.fakeSideBorders,contentClassName:R.default.filterContent,count:x.length,onClearFilter:()=>j({branches:void 0}),onExpand:()=>C(!0),title:"Branch",children:(0,t.jsx)(es.LogFilter,{isFirstLoading:k,isLoading:S,onChange:e=>{j({branches:e.sort(),preset:null}),v({eventTrigger:"filter click",filter:"branches",value:Array(e.length).fill("")})},onSearch:w,options:L,searchId:"search-branches",searchLabel:"Search branches",searchPlaceholder:"Search branches…",selectedOptions:x,showSelectedOptionsAtTop:!0,totalAvailableOptions:T})})}function eM(){let{state:{routes:e,deploymentDomains:r,deploymentIds:a,domains:l,sources:o,requestTags:n,levels:i,requestMethods:d,requestPaths:c,statusCodes:u,environments:p,branches:m,caches:x,sessionIds:h,traceIds:g,invocationIds:f},setState:j}=(0,D.useLogsQueryState)(),[v,y]=(0,s.useState)(!1),{data:C,isLoading:b}=q({attributeName:"cache",domains:l,deploymentDomains:r,deploymentIds:a,sources:o,requestTags:n,routes:e,requestMethods:d,requestPaths:c,levels:i,environments:p,branches:m,statusCodes:u,sessionIds:h,traceIds:g,forceEmpty:!v,invocationIds:f}),w=!C,_=(0,s.useMemo)(()=>{let e=C?.rows??[];return x.filter(t=>!e.find(e=>e.attributeValue===t)).forEach(t=>{e.push({attributeValue:t,total:0})}),e.map(es.generateFilterOption)},[C,x]),S=C?.availableOptions??0,{trackFilterUse:k}=z();return(0,t.jsx)(N.Disclosure,{buttonClassName:R.default.fakeSideBorders,contentClassName:R.default.filterContent,count:x.length,onClearFilter:()=>j({caches:void 0,preset:null}),onExpand:()=>y(!0),title:"Cache",children:(0,t.jsx)(es.LogFilter,{hideSearch:!0,isLoading:b,isFirstLoading:w,onChange:e=>{j({preset:null,caches:e.sort()}),k({eventTrigger:"filter click",filter:"vercelCaches",value:e.sort()})},options:_,searchId:"search-cache",searchLabel:"Search cache",searchPlaceholder:"Search cache…",selectedOptions:x,showSelectedOptionsAtTop:!0,totalAvailableOptions:S})})}function eD(){let{state:{levels:e,deploymentDomains:r,deploymentIds:a,sources:l,requestTags:o,domains:n,routes:i,requestMethods:d,requestPaths:c,statusCodes:m,caches:x,environments:h,branches:g,sessionIds:f,traceIds:j,invocationIds:v},setState:y}=(0,D.useLogsQueryState)(),[C,b]=(0,s.useState)(""),{trackFilterUse:w}=z(),[_,S]=(0,s.useState)(!1),{data:k,isLoading:L}=q({attributeName:"requestMethod",levels:e,deploymentDomains:r,deploymentIds:a,sources:l,requestTags:o,routes:i,requestPaths:c,statusCodes:m,caches:x,domains:n,environments:h,branches:g,sessionIds:f,traceIds:j,forceEmpty:!_,invocationIds:v}),T=(0,s.useMemo)(()=>{let e,t=(e=k?.rows,K.map(t=>{let s=e?.find(e=>e.attributeValue===t.value)?.total;return{label:t.label,value:t.value,count:s??0}}).sort((e,t)=>t.count-e.count));return C?(0,eS.matchSorter)(t,C,{keys:["value"],sorter:e=>e.sort((e,t)=>t.item.count-e.item.count)}):t},[C,k]),E=k?.availableOptions??0;return(0,t.jsx)(N.Disclosure,{buttonClassName:R.default.fakeSideBorders,contentClassName:(0,u.clsx)(R.default.filterContent),count:d.length,"data-testid":(0,p.tid)("logs","request-method-filter"),onClearFilter:()=>y({requestMethods:void 0,preset:null}),onExpand:()=>S(!0),title:"Request Method",children:(0,t.jsx)(es.LogFilter,{isCountLoading:L,onChange:e=>{w({eventTrigger:"filter click",filter:"requestMethods",value:e.sort()}),y({requestMethods:e.sort(),preset:null})},onSearch:b,options:T,searchId:"search-request-method",searchLabel:"Search request methods",searchPlaceholder:"Search request methods…",selectedOptions:d,showSelectedOptionsAtTop:!0,totalAvailableOptions:E})})}function eI(e){let{isLoadingEnvs:s,allEnvironments:a}=e,{hasActiveFilters:l}=(0,D.useLogsQueryState)();return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsxs)(r.Stack,{align:"center",className:R.default.titleContainer,direction:"row",justify:"space-between",children:[(0,t.jsx)(r.Stack,{children:(0,t.jsx)(eR,{})}),(0,t.jsx)(r.Stack,{direction:"row",gap:2,children:l()&&(0,t.jsx)(eB,{size:"small"})})]}),(0,t.jsx)(eO,{allEnvironments:a,isLoadingEnvs:s})]})}function eF(e){let{isLoadingEnvs:r,allEnvironments:a,active:l,...o}=e,n=(0,f.useIsMobile)(),[i,d]=(0,s.useState)(!1);return((0,s.useEffect)(()=>{if(!l){let e=setTimeout(()=>{d(!0)},500);return()=>clearTimeout(e)}d(!1)},[l]),(l||!i)&&n)?(0,t.jsx)(eq,{active:l,allEnvironments:a,isLoadingEnvs:r,...o}):null}function eq(e){let{isLoadingEnvs:s,allEnvironments:a,active:l,onDismiss:o}=e,{hasActiveFilters:n}=(0,D.useLogsQueryState)();return(0,t.jsxs)(S.Modal.Modal,{active:l,"data-testid":(0,p.tid)("group-logs","filters-modal"),drawerHeight:"max",drawerVerticalScroll:!0,onClickOutside:o,children:[(0,t.jsx)(S.Modal.Body,{className:R.default.modalBody,children:(0,t.jsxs)(r.Stack,{className:R.default.modalMain,children:[n()?(0,t.jsx)(r.Stack,{className:(0,u.clsx)("geist-show-on-mobile",R.default.filterContent,R.default.first),gap:2,children:(0,t.jsx)(eB,{})}):null,(0,t.jsx)(eO,{allEnvironments:a,isLoadingEnvs:s})]})}),(0,t.jsx)(S.Modal.Actions,{children:(0,t.jsx)(S.Modal.Action,{"data-testid":(0,p.tid)("group-logs","filters-modal-apply"),fullWidth:!0,onClick:o,children:"Apply"})})]})}function eA(e){let{onClick:s}=e,{hasActiveFilters:r}=(0,D.useLogsQueryState)();return(0,t.jsxs)("div",{className:(0,u.clsx)("lg:hidden","relative"),children:[(0,t.jsx)(d.Button,{"aria-label":"Log Filters",className:R.default.modalActiveButton,"data-testid":(0,p.tid)("group-logs","filters-modal-button"),passthroughOnClick:s,shape:"square",svgOnly:!0,type:"secondary",children:(0,t.jsx)(w.SettingsSliders,{})}),r()&&(0,t.jsx)("div",{className:R.default.modalActiveButtonDot})]})}function eR(){return(0,t.jsx)(_.Text,{className:R.default.title,size:14,weight:600,children:"Filters"})}function eO(e){let{isLoadingEnvs:s,allEnvironments:r}=e;return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(e_,{}),(0,t.jsx)(er,{}),(0,t.jsx)(eT,{allEnvironments:r,isLoadingEnvs:s}),(0,t.jsx)(em,{}),(0,t.jsx)(eL,{}),(0,t.jsx)(ek,{}),(0,t.jsx)(ea,{}),(0,t.jsx)(el,{}),(0,t.jsx)(eo,{}),(0,t.jsx)(eD,{}),(0,t.jsx)(eM,{}),(0,t.jsx)(eE,{}),(0,t.jsx)(ep,{})]})}function eB(e){let{onClick:s,...r}=e,{setState:a}=(0,D.useLogsQueryState)(),l=(0,f.useIsMobile)(),{isDeploymentEditable:o}=(0,ei.usePageConfig)();return(0,t.jsx)(d.Button,{onClick:e=>{let t;t={startDate:void 0,endDate:void 0,page:1,timeline:void 0,preset:null,levels:void 0,sources:void 0,domains:void 0,routes:void 0,requestPaths:void 0,requestIds:void 0,searchQuery:l?void 0:"",requestMethods:void 0,statusCodes:void 0,caches:void 0,branches:void 0,environments:void 0,myLogs:void 0,hasTraces:void 0,traceIds:void 0,sessionIds:void 0,invocationIds:void 0},o&&(t.deploymentDomains=void 0,t.deploymentIds=void 0),a(t),s?.(e)},touchEventWorkaround:!0,type:"secondary",...r,children:"Reset"})}var eP=e.i(4201247),e$=e.i(9844152),ez=e.i(7511168),eW=e.i(1201436),eH=e.i(1933683),eG=e.i(4141852),eV=e.i(8713146),eU=e.i(109803),eZ=e.i(9138164),eQ=e.i(1000031),eX=e.i(1802690),eJ=e.i(2560270),eK=e.i(7399351),eY=e.i(6942035),e0=e.i(1230902),e1=e.i(8923565),e2=e.i(5257834);let e3=(0,V.withNewIcon)(`<path d="M14.13 5.26096C14.0999 5.22807 14.0679 5.19523 14.0358 5.16429C14.0038 5.13332 13.9737 5.09853 13.9416 5.06759C13.9096 5.03666 13.8794 5.00187 13.8474 4.9709C13.8154 4.93996 13.7852 4.90517 13.7532 4.87423C13.7212 4.8433 13.691 4.80847 13.659 4.77753C13.627 4.7466 13.5968 4.71181 13.5648 4.68087C13.5328 4.64994 13.5026 4.61511 13.4706 4.58417C14.4052 5.52678 14.9406 6.80909 14.961 8.15372C14.961 11.3578 11.7918 13.9644 7.89529 13.9644C5.71341 13.9644 3.76137 13.1464 2.46318 11.8644L3.12265 12.5412C4.41895 13.8773 6.41432 14.7378 8.64895 14.7378C12.5454 14.7378 15.7147 12.1312 15.7147 8.93683C15.7147 7.57169 15.1419 6.27808 14.13 5.26096Z" fill="black" style="fill:black;fill-opacity:1;"/>
<path d="M14.49 8.15373C14.49 11.0948 11.5375 13.479 7.89534 13.479C4.25319 13.479 1.30068 11.0948 1.30068 8.15373C1.30068 6.33028 2.43119 4.71954 4.16841 3.76433C5.90564 2.80909 6.98716 1.83066 7.89534 1.83066C8.80351 1.83066 9.57979 2.62926 11.6222 3.76433C13.3595 4.71954 14.49 6.33028 14.49 8.15373Z" fill="#FBF0DF" style="fill:#FBF0DF;fill:color(display-p3 0.9843 0.9412 0.8745);fill-opacity:1;"/>
<path d="M14.49 8.15373C14.489 7.77591 14.4385 7.39996 14.3394 7.03608C13.825 13.4751 6.17145 13.7845 3.1624 11.8586C4.51507 12.9346 6.18411 13.506 7.89534 13.479C11.5318 13.479 14.49 11.091 14.49 8.15373Z" fill="#F6DECE" style="fill:#F6DECE;fill:color(display-p3 0.9647 0.8706 0.8078);fill-opacity:1;"/>
<path d="M5.35734 3.41046C6.19956 2.89224 7.31875 1.91961 8.41915 1.91768C8.24984 1.86152 8.07322 1.83218 7.89534 1.83066C7.43936 1.83066 6.95325 2.07237 6.34087 2.4359C6.12795 2.56352 5.90751 2.70467 5.67388 2.85163C5.23485 3.13008 4.73179 3.44527 4.16653 3.76046C2.37278 4.75629 1.30068 6.39796 1.30068 8.15373C1.30068 8.23108 1.30068 8.30844 1.30068 8.38384C2.4425 4.24389 4.51699 3.92867 5.35734 3.41046Z" fill="#FFFEFC" style="fill:#FFFEFC;fill:color(display-p3 1.0000 0.9961 0.9882);fill-opacity:1;"/>
<path fill-rule="evenodd" clip-rule="evenodd" d="M7.35278 2.31988C7.35542 2.77646 7.26204 3.22825 7.07894 3.64439C6.89587 4.06053 6.62744 4.43122 6.29199 4.73117C6.23925 4.77951 6.2807 4.8723 6.34853 4.84523C6.98349 4.59192 7.84079 3.83392 7.47905 2.30441C7.46397 2.2174 7.35278 2.2406 7.35278 2.31988ZM7.78051 2.31988C8.01106 2.70592 8.15752 3.13856 8.20986 3.58814C8.26224 4.03773 8.21924 4.4936 8.08385 4.92454C8.06123 4.99221 8.14226 5.05022 8.1875 4.99413C8.60011 4.4527 8.95998 3.3776 7.88225 2.2174C7.82759 2.16712 7.74281 2.24447 7.78051 2.31215V2.31988ZM8.30053 2.28701C8.66158 2.54932 8.96359 2.88804 9.18623 3.28031C9.4089 3.67259 9.54698 4.10931 9.59119 4.56099C9.58928 4.57728 9.59355 4.59368 9.60311 4.60682C9.61267 4.61995 9.6268 4.62881 9.64254 4.63153C9.65832 4.63425 9.67447 4.63069 9.68771 4.62149C9.70095 4.61233 9.71026 4.59828 9.71368 4.58228C9.88703 3.90741 9.78904 2.75689 8.36272 2.15939C8.28736 2.12845 8.23837 2.23287 8.30053 2.27928V2.28701ZM4.82235 4.29803C5.25177 4.16636 5.64942 3.94331 5.98932 3.64348C6.32922 3.34364 6.60375 2.97369 6.79506 2.55772C6.82901 2.48811 6.93637 2.51518 6.91941 2.59253C6.59346 4.13947 5.50251 4.46237 4.82422 4.41985C4.75261 4.42177 4.75452 4.31929 4.82235 4.29803Z" fill="#CCBEA7" style="fill:#CCBEA7;fill:color(display-p3 0.8000 0.7451 0.6549);fill-opacity:1;"/>
<path d="M7.89529 13.9644C3.9988 13.9644 0.82959 11.3578 0.82959 8.15375C0.82959 6.2201 1.99401 4.41596 3.94413 3.33506C4.50939 3.02568 4.99362 2.71436 5.42511 2.44171C5.66254 2.29088 5.88672 2.14973 6.10344 2.01824C6.76477 1.61604 7.33003 1.34726 7.89529 1.34726C8.46055 1.34726 8.9542 1.5793 9.5722 1.95443C9.76063 2.06465 9.94903 2.18453 10.1506 2.31602C10.6198 2.61381 11.1492 2.95026 11.8464 3.33506C13.7965 4.41596 14.961 6.21812 14.961 8.15372C14.961 11.3578 11.7918 13.9644 7.89529 13.9644ZM7.89534 1.83066C7.43936 1.83066 6.95325 2.07237 6.34087 2.4359C6.12795 2.56352 5.90751 2.70467 5.67388 2.85163C5.23485 3.13008 4.73179 3.44527 4.16653 3.76046C2.37278 4.75629 1.30068 6.39796 1.30068 8.15373C1.30068 11.091 4.2588 13.481 7.89529 13.481C11.5317 13.481 14.49 11.091 14.49 8.15373C14.49 6.39796 13.4179 4.75629 11.6222 3.76433C10.91 3.37759 10.3541 3.01408 9.90382 2.72789C9.69843 2.59834 9.51004 2.47845 9.33856 2.3721C8.76764 2.02404 8.35128 1.83066 7.89534 1.83066Z" fill="black" style="fill:black;fill-opacity:1;"/>
<path d="M9.22342 9.56532C9.13879 9.92111 8.94609 10.24 8.67324 10.4761C8.46837 10.6799 8.20317 10.8078 7.91955 10.8396C7.62743 10.8128 7.35293 10.6846 7.1414 10.4761C6.87131 10.2389 6.68137 9.92012 6.59876 9.56532C6.596 9.54428 6.59802 9.52284 6.60461 9.50268C6.61115 9.48253 6.62215 9.46421 6.63672 9.44909C6.65125 9.43398 6.66897 9.42246 6.68854 9.41547C6.70807 9.40849 6.72893 9.40617 6.74949 9.40871H9.07456C9.09498 9.40646 9.11561 9.40904 9.13492 9.41617C9.15423 9.42331 9.1717 9.43486 9.18605 9.44994C9.20036 9.46502 9.21117 9.48323 9.21765 9.50324C9.22412 9.52321 9.22611 9.54443 9.22342 9.56532Z" fill="#B71422" style="fill:#B71422;fill:color(display-p3 0.7176 0.0784 0.1333);fill-opacity:1;"/>
<path d="M7.14176 10.4916C7.35285 10.7002 7.62636 10.8297 7.91804 10.8589C8.20905 10.8292 8.48186 10.6998 8.69244 10.4916C8.75982 10.4271 8.82275 10.358 8.88087 10.2847C8.76479 10.1495 8.62299 10.0402 8.46424 9.96337C8.30546 9.88653 8.13306 9.84387 7.95761 9.83798C7.76988 9.84254 7.58608 9.89385 7.42196 9.9875C7.25784 10.0811 7.11837 10.2143 7.01553 10.3755C7.05886 10.4162 7.09656 10.4548 7.14176 10.4916Z" fill="#FF6164" style="fill:#FF6164;fill:color(display-p3 1.0000 0.3804 0.3922);fill-opacity:1;"/>
<path d="M7.17169 10.3388C7.26507 10.2149 7.38465 10.1143 7.52141 10.0446C7.65816 9.97496 7.80849 9.938 7.96117 9.93656C8.24332 9.9451 8.51215 10.0617 8.71482 10.2633C8.75815 10.215 8.7996 10.1647 8.83918 10.1144C8.59948 9.88018 8.28271 9.74696 7.95171 9.74125C7.77487 9.74284 7.60052 9.78454 7.44122 9.86344C7.28192 9.94234 7.1416 10.0565 7.03037 10.1976C7.07491 10.2473 7.1221 10.2944 7.17169 10.3388Z" fill="black" style="fill:black;fill-opacity:1;"/>
<path d="M7.91204 10.9556C7.59808 10.9274 7.30261 10.7911 7.07357 10.5689C6.78189 10.3157 6.57661 9.97363 6.4876 9.59239C6.4812 9.55848 6.48231 9.5235 6.49077 9.49003C6.49922 9.45659 6.51489 9.42548 6.53659 9.39903C6.56242 9.36703 6.595 9.3415 6.6319 9.32444C6.66883 9.30733 6.70903 9.29913 6.74949 9.30042H9.07456C9.11499 9.29954 9.15508 9.30796 9.1919 9.32503C9.22875 9.34205 9.26138 9.36736 9.28749 9.39903C9.30897 9.42559 9.32435 9.45674 9.33251 9.49021C9.34064 9.52368 9.34138 9.55863 9.33457 9.59239C9.24556 9.97363 9.04028 10.3157 8.7486 10.5689C8.52008 10.7907 8.22535 10.927 7.91204 10.9556ZM6.74949 9.52471C6.71933 9.52471 6.71182 9.53825 6.70991 9.54211C6.78958 9.8727 6.96974 10.1687 7.2243 10.3871C7.41045 10.5753 7.65248 10.6944 7.91204 10.7255C8.17091 10.6948 8.41268 10.5772 8.59975 10.391C8.85354 10.1722 9.033 9.87627 9.11226 9.54601C9.10814 9.53979 9.10244 9.5349 9.09579 9.53185C9.08917 9.52876 9.08181 9.52766 9.07456 9.52857L6.74949 9.52471Z" fill="black" style="fill:black;fill-opacity:1;"/>
<path d="M10.7631 9.68522C11.3718 9.68522 11.8653 9.3874 11.8653 9.02002C11.8653 8.65265 11.3718 8.35483 10.7631 8.35483C10.1543 8.35483 9.66084 8.65265 9.66084 9.02002C9.66084 9.3874 10.1543 9.68522 10.7631 9.68522Z" fill="#FEBBD0" style="fill:#FEBBD0;fill:color(display-p3 0.9961 0.7333 0.8157);fill-opacity:1;"/>
<path d="M5.05995 9.68522C5.66872 9.68522 6.16222 9.3874 6.16222 9.02002C6.16222 8.65265 5.66872 8.35483 5.05995 8.35483C4.45121 8.35483 3.95772 8.65265 3.95772 9.02002C3.95772 9.3874 4.45121 9.68522 5.05995 9.68522Z" fill="#FEBBD0" style="fill:#FEBBD0;fill:color(display-p3 0.9961 0.7333 0.8157);fill-opacity:1;"/>
<path fill-rule="evenodd" clip-rule="evenodd" d="M5.57759 8.75319C5.78302 8.7536 5.98392 8.69144 6.15492 8.57458C6.32588 8.45773 6.45925 8.29147 6.53811 8.09682C6.61697 7.90218 6.63782 7.68789 6.59795 7.48106C6.55812 7.27428 6.4594 7.08426 6.31426 6.93504C6.16915 6.78585 5.98418 6.68419 5.78272 6.64292C5.58127 6.60165 5.37246 6.62265 5.18263 6.70321C4.99284 6.78379 4.83056 6.92036 4.71643 7.09563C4.60226 7.27086 4.54131 7.47694 4.54131 7.68774C4.54131 7.97 4.65044 8.24071 4.84472 8.44044C5.039 8.6402 5.30258 8.75268 5.57759 8.75319ZM10.2447 8.75319C10.4504 8.75474 10.6518 8.69353 10.8236 8.57741C10.9953 8.46126 11.1295 8.29541 11.2093 8.10087C11.289 7.90633 11.3106 7.69186 11.2714 7.48467C11.2322 7.27748 11.1339 7.08691 10.9891 6.93714C10.8442 6.78736 10.6592 6.68511 10.4576 6.64336C10.256 6.60165 10.0469 6.62229 9.85673 6.70269C9.66661 6.7831 9.50399 6.91967 9.3896 7.09504C9.27518 7.27042 9.21408 7.47669 9.21408 7.68774C9.21357 7.96916 9.32178 8.23928 9.51495 8.43897C9.70813 8.63869 9.97053 8.75165 10.2447 8.75319Z" fill="black" style="fill:black;fill-opacity:1;"/>
<path fill-rule="evenodd" clip-rule="evenodd" d="M5.25759 7.75539C5.33479 7.7558 5.41042 7.73262 5.47479 7.68889C5.53919 7.64512 5.58947 7.58277 5.61926 7.50965C5.64909 7.43657 5.65707 7.35602 5.64225 7.27822C5.62739 7.20047 5.59039 7.12896 5.53592 7.0728C5.48144 7.01663 5.41196 6.97831 5.33627 6.96271C5.26053 6.94711 5.18204 6.95491 5.11065 6.98515C5.03929 7.01538 4.97827 7.06669 4.93531 7.13257C4.89239 7.19841 4.86943 7.27587 4.86943 7.35513C4.86943 7.46095 4.91026 7.56247 4.98302 7.63747C5.05577 7.7125 5.15449 7.75488 5.25759 7.75539ZM9.9247 7.75539C10.0019 7.7558 10.0775 7.73262 10.1419 7.68889C10.2063 7.64512 10.2566 7.58277 10.2864 7.50965C10.3162 7.43657 10.3242 7.35602 10.3094 7.27822C10.2945 7.20047 10.2575 7.12896 10.2031 7.0728C10.1486 7.01663 10.0791 6.97831 10.0034 6.96271C9.92768 6.94711 9.84915 6.95491 9.77779 6.98515C9.7064 7.01538 9.64538 7.06669 9.60242 7.13257C9.55949 7.19841 9.53658 7.27587 9.53658 7.35513C9.53658 7.46029 9.57689 7.56122 9.6488 7.63614C9.72074 7.71103 9.81847 7.75388 9.92095 7.75539H9.9247Z" fill="white" style="fill:white;fill-opacity:1;"/>`);var e5=e.i(57106),e9=e.i(9031150),e6=e.i(1637579),e4=e.i(4837983),e8=e.i(9307255),e7=e.i(545405),te=e.i(9459801),tt=e.i(1542949),ts=e.i(9375869),tr=e.i(349746);function ta(){return(0,t.jsxs)("svg",{fill:"none",height:"48",viewBox:"0 0 48 48",width:"48",xmlns:"http://www.w3.org/2000/svg",children:[(0,t.jsx)("rect",{fill:"#FAFAFA",height:"48",rx:"24",width:"48"}),(0,t.jsx)("path",{d:"M29 30.6667V22.3333",stroke:"black",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"1.5"}),(0,t.jsx)("path",{d:"M24 30.6667V17.3333",stroke:"black",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"1.5"}),(0,t.jsx)("path",{d:"M19 30.6667V25.6667",stroke:"black",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"1.5"})]})}var tl=e.i(8300708),to=e.i(7827812);function tn(){let e=(0,h.useSearchParams)();return(0,I.tokenizeSearchQuery)(e?.get("searchQuery")??"")}var ti=e.i(3219703),td=e.i(8735244),tc=e.i(1286423),tu=e.i(516467);function tp(e){return+(0,tu.toDate)(e)>Date.now()}var tm=e.i(277234),tx=e.i(2126130),th=e.i(5797774),tg=e.i(2988836),tf=e.i(6982071),tj=e.i(4569307),tv=e.i(4099936),ty=e.i(8313680);function tC(e){let{type:s,className:r}=e,a={className:r};return"blob"===s?(0,t.jsx)(tv.Blob,{...a}):"edge-config"===s?(0,t.jsx)(ty.EdgeConfig,{...a}):null}function tb(e){let{requestMethod:s,icon:r}=e;return(0,t.jsxs)("span",{className:"inline-flex flex-row items-center gap-1 rounded-sm border border-gray-300 px-1 font-mono text-xs font-medium uppercase text-gray-800",children:[r,s]})}function tw(e){let{statusCode:s,reason:r}=e,a=(0,tj.getStatusCodeType)(s),l=null,o=null,n={fill:"none",height:"6",viewBox:"0 0 6 6",width:"6",xmlns:"http://www.w3.org/2000/svg"};return a===tj.StatusType["2XX"]?l=(0,t.jsx)("svg",{...n,children:(0,t.jsx)("circle",{cx:"3",cy:"3",fill:"#46A758",r:"2"})}):a===tj.StatusType["3XX"]?l=(0,t.jsx)("svg",{...n,children:(0,t.jsx)("circle",{cx:"3",cy:"3",fill:"#0070F3",r:"2"})}):a===tj.StatusType["4XX"]?l=(0,t.jsx)("svg",{...n,children:(0,t.jsx)("path",{d:"M3 0.5L5.59808 5H0.401924L3 0.5Z",fill:"#FF990A"})}):a===tj.StatusType["5XX"]?l=(0,t.jsx)("svg",{...n,children:(0,t.jsx)("path",{d:"M3 0L6 3L3 6L0 3L3 0Z",fill:"#CA2A30"})}):-1===s&&(r?(l=(0,t.jsxs)("svg",{fill:"none",height:"8",viewBox:"0 0 8 8",width:"8",xmlns:"http://www.w3.org/2000/svg",children:[(0,t.jsx)("circle",{cx:"4",cy:"4",r:"2.5",stroke:"var(--ds-red-900)"}),(0,t.jsx)("line",{stroke:"var(--ds-red-900)",x1:"0.896447",x2:"7.26041",y1:"7.14645",y2:"0.782486"})]}),o=`Fetch failed with reason: ${r}`):(l=(0,t.jsxs)("svg",{fill:"none",height:"8",viewBox:"0 0 8 8",width:"8",xmlns:"http://www.w3.org/2000/svg",children:[(0,t.jsx)("circle",{cx:"4",cy:"4",r:"2.5",stroke:"var(--ds-gray-800)"}),(0,t.jsx)("line",{stroke:"var(--ds-gray-800)",x1:"0.896447",x2:"7.26041",y1:"7.14645",y2:"0.782486"})]}),o="Timed out while waiting for a response")),(0,t.jsx)(th.ContextCard.Trigger,{content:o??(0,t.jsx)(ti.StatusCodeBadge,{full:!0,monochrome:!0,statusCode:s}),side:"top",className:"inline-flex items-center",children:l})}var t_=e.i(3617058);function tS(e){let{className:s}=e;return(0,t.jsxs)("div",{className:(0,t_.twMerge)("flex items-center text-gray-300",s),children:[(0,t.jsx)("div",{className:"absolute h-[7px] w-full border-x border-current"}),(0,t.jsx)("div",{className:"absolute h-px w-full bg-current"})]})}function tN(e){let{startTime:s,endTime:r,className:a,traces:l}=e;return(0,t.jsx)("div",{className:(0,t_.twMerge)("relative flex items-center text-gray-600",a),children:(0,t.jsxs)("div",{className:"relative mx-0.5 flex size-full items-center",children:[(0,t.jsx)(tS,{}),l.map((e,a)=>{let{traceStart:l,traceEnd:o,className:n}=e,i=(l-s)/(r-s)*100,d=(o-l)/(r-s)*100,c=`${i.toString()+d.toString()+a.toString()}`;return(0,t.jsxs)("div",{className:"relative ml-px mr-[2px] flex w-full",children:[(0,t.jsx)("div",{style:{width:`${i}%`}}),(0,t.jsx)(th.ContextCard.Trigger,{content:`Started after ${l-s}ms`,side:"top",className:"inline-flex items-center",children:(0,t.jsx)("div",{className:(0,u.clsx)("absolute my-6 mr-1 h-[5px] min-w-[2px] rounded-[1px] bg-current",n),style:{width:`${d}%`}})})]},c)})]})})}var tk=e.i(3848869),tL=e.i(7432042);let tT=["cache-get","cache-set","fetch-set","fetch-get"],tE={"cache-get":"GET","cache-set":"SET","fetch-get":"GET","fetch-set":"SET"};function tM(e){let{fetchType:s}=e;return tT.includes(s)?(0,t.jsxs)("span",{className:"relative inline-flex items-center gap-1 rounded-sm bg-gray-100 px-1 py-px font-mono text-xs uppercase text-gray-800",children:[(0,t.jsx)("svg",{fill:"none",height:"13",viewBox:"0 0 12 13",width:"12",xmlns:"http://www.w3.org/2000/svg",children:(0,t.jsx)("path",{clipRule:"evenodd",d:"M2.47653 1.08941C3.40636 0.717474 4.65234 0.5 6 0.5C7.34766 0.5 8.59364 0.717474 9.52347 1.08941C9.98683 1.27475 10.3995 1.50951 10.7056 1.79898C11.0129 2.08957 11.25 2.47411 11.25 2.9375V6.5V10.0625C11.25 10.5259 11.0129 10.9104 10.7056 11.201C10.3995 11.4905 9.98683 11.7253 9.52347 11.9106C8.59364 12.2825 7.34766 12.5 6 12.5C4.65234 12.5 3.40636 12.2825 2.47653 11.9106C2.01317 11.7253 1.60045 11.4905 1.29437 11.201C0.987098 10.9104 0.75 10.5259 0.75 10.0625V6.5V2.9375C0.75 2.47411 0.987098 2.08957 1.29437 1.79898C1.60045 1.50951 2.01317 1.27475 2.47653 1.08941ZM1.875 4.49811V6.5C1.875 6.55438 1.90024 6.66309 2.06737 6.82115C2.23568 6.98033 2.50943 7.14959 2.89434 7.30356C3.66105 7.61024 4.75882 7.8125 6 7.8125C7.24118 7.8125 8.33895 7.61024 9.10566 7.30356C9.49057 7.14959 9.76432 6.98033 9.93263 6.82115C10.0998 6.66309 10.125 6.55438 10.125 6.5V4.49811C9.93882 4.60473 9.7365 4.70038 9.52347 4.78559C8.59364 5.15753 7.34766 5.375 6 5.375C4.65234 5.375 3.40636 5.15753 2.47653 4.78559C2.2635 4.70038 2.06118 4.60473 1.875 4.49811ZM10.125 2.9375C10.125 2.99188 10.0998 3.10059 9.93263 3.25865C9.76432 3.41783 9.49057 3.58709 9.10566 3.74106C8.33895 4.04774 7.24118 4.25 6 4.25C4.75882 4.25 3.66105 4.04774 2.89434 3.74106C2.50943 3.58709 2.23568 3.41783 2.06737 3.25865C1.90024 3.10059 1.875 2.99188 1.875 2.9375C1.875 2.88312 1.90024 2.77441 2.06737 2.61635C2.23568 2.45717 2.50943 2.28791 2.89434 2.13394C3.66105 1.82726 4.75882 1.625 6 1.625C7.24118 1.625 8.33895 1.82726 9.10566 2.13394C9.49057 2.28791 9.76432 2.45717 9.93263 2.61635C10.0998 2.77441 10.125 2.88312 10.125 2.9375ZM10.125 8.06061C9.93882 8.16723 9.7365 8.26288 9.52347 8.34809C8.59364 8.72003 7.34766 8.9375 6 8.9375C4.65234 8.9375 3.40636 8.72003 2.47653 8.34809C2.2635 8.26288 2.06118 8.16723 1.875 8.06061V10.0625C1.875 10.1169 1.90024 10.2256 2.06737 10.3836C2.23568 10.5428 2.50943 10.7121 2.89434 10.8661C3.66105 11.1727 4.75882 11.375 6 11.375C7.24118 11.375 8.33895 11.1727 9.10566 10.8661C9.49057 10.7121 9.76432 10.5428 9.93263 10.3836C10.0998 10.2256 10.125 10.1169 10.125 10.0625V8.06061Z",fill:"#8F8F8F",fillRule:"evenodd"})}),tE[s]]}):null}function tD(e){let{title:s,children:r}=e;return(0,t.jsxs)("div",{className:"flex flex-1 flex-col items-start gap-1",children:[(0,t.jsx)("div",{className:"text-gray-700",children:s}),(0,t.jsx)("div",{children:r})]})}function tI(e){let{cache:s}=e,r=s.hit?"HIT":"MISS";return(0,t.jsxs)("div",{className:"flex flex-col gap-1 gap-y-2 p-2 max-w-[300px]",children:["VSC_GET"===s.type?(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(tD,{title:"Cache Status",children:s.stale>0?"Stale":r}),s.revalidated>0?(0,t.jsx)(tD,{title:"Revalidated",children:"YES"}):null,0!==s.age?(0,t.jsx)(tD,{title:"Age",children:(0,tL.default)(1e3*s.age)}):null]}):null,s.revalidate_after>0?(0,t.jsxs)(tD,{title:"Revalidate After",children:[(0,tk.formatDistanceStrict)(0,1e3*s.revalidate_after)," ",s.revalidate_after>1e3&&s.revalidate_after<1e5?(0,t.jsxs)("span",{className:"text-gray-700",children:["(",s.revalidate_after,"s)"]}):null]}):null,s.tags.length>0?(0,t.jsx)(tD,{title:"Tags",children:(0,t.jsx)("div",{className:"flex flex-wrap gap-1",children:s.tags.map(e=>(0,t.jsx)(en.Badge,{className:"normal-case",size:"sm",variant:"blue",children:e},e))})}):null]})}let tF="inline-block flex-1 cursor-pointer truncate bg-transparent p-0 text-left text-[12px] font-mono";function tq(e){let s,{request:r,additionalMetrics:a,startTime:l,endTime:o,createCopyHandler:n,longestMethodLength:i,shouldConnectToNext:d,lite:c,plan:p,onUpgradePressed:m}=e,x=(0,h.useParams)(),g=(0,tj.getStatusCodeType)(r.http_status),f=`${r.request_hostname}${r.request_path}`,{isRuntimeCache:j,requestType:v,isRevalidate:y}=(0,tj.resolveRuntimeCacheProps)(f,r),{store:C,isStore:b,isLoading:w}=(0,tj.useGetStoreFromHostname)(r.request_hostname,r.request_path),_=f;f.endsWith("_vercel/insights/event")&&(_="Web Analytics Event"),tj.SUSPENSE_CACHE_HOSTNAME_REGEX.test(f)&&(_=y?"Revalidate Cache":j?r.cache_item_id||"Runtime Cache":"Data Cache"),(tj.readFromCache.includes(r.fetch_type)||j&&"cache-get"===v)&&d&&(_=`Reading Cache${404===r.http_status?" (Miss)":""}`),(tj.writeToCache.includes(r.fetch_type)||j&&"cache-set"===v)&&(_="Updating Cache"),!w&&b&&C&&x&&(_=`${C.name}`,s=`/${x.teamSlug}/~/stores/${C.type}/${C.id}`);let S=n(f),N=tT.includes(r.fetch_type)||j&&!y&&!!v,k=!d&&(tj.readFromCache.includes(r.fetch_type)||j&&"cache-get"===v),L=(0,t.jsxs)(t.Fragment,{children:[k?(0,t.jsx)("span",{className:"border-indigo-500 mr-1 border-r pr-1 text-gray-900",children:"Using cache"}):null,(0,t.jsx)("span",{className:(0,u.clsx)("truncate",s&&"hover:underline",k?"text-gray-700":"text-gray-900"),children:w?(0,t.jsx)(ef.Skeleton,{as:"span",height:15,width:36}):_})]});return(0,t.jsxs)("div",{className:(0,u.clsx)("grid-cols-[8fr,1fr]","group relative grid h-[24px] w-full  items-center gap-2 border-none bg-transparent transition-opacity duration-200 ease-in-out"),children:[(0,t.jsxs)("div",{className:"flex flex-1 items-center gap-1 truncate",children:[(0,t.jsxs)("div",{className:"flex items-center",style:{...i&&{minWidth:`calc(${i}ch + 1px)`}},children:[d?(0,t.jsx)("div",{className:"absolute bottom-1 left-[9.5px] h-2 w-[1.5px] translate-y-full bg-gray-300"}):null,N?(0,t.jsx)(tM,{fetchType:j?v||"":r.fetch_type}):(0,t.jsx)(tb,{icon:C?(0,t.jsx)(tC,{className:"size-3",type:C.type}):void 0,requestMethod:r.request_method})]}),s?(0,t.jsx)(e5.Link,{className:(0,u.clsx)(tF,"no-underline"),href:s,children:L}):(0,t.jsxs)("button",{className:(0,u.clsx)(tF,"flex"),onClick:S,onKeyPress:S,type:"button",children:[L,N&&r.cache?(0,t.jsx)(th.ContextCard.Trigger,{className:"inline-flex items-center w-auto",content:(0,t.jsx)(tI,{cache:r.cache}),side:"top",children:(0,t.jsx)(tg.InformationFillSmall,{className:"ml-2"})}):null]}),"hobby"!==p&&(0,t.jsx)("div",{className:"flex gap-1",children:c?(0,t.jsx)(t.Fragment,{children:-1===r.http_status?(0,t.jsx)(th.ContextCard.Trigger,{className:"inline-flex items-center w-auto",content:(0,t.jsx)("span",{children:"Timed out while waiting for a response"}),side:"top",children:(0,t.jsx)("span",{className:"relative text-xs tabular-nums text-red-900",children:"Timeout"})}):(0,t.jsx)(ti.StatusCodeBadge,{statusCode:r.http_status,variant:"small"})}):(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(tw,{reason:r.reason,statusCode:r.http_status}),(0,t.jsx)("span",{className:"relative text-xs tabular-nums text-gray-1000",children:(0,tj.formatMilliseconds)(r.duration)})]})})]}),c?(0,t.jsx)(th.ContextCard.Trigger,{className:"inline-flex items-center w-auto",content:(0,t.jsx)("span",{className:"text-sm",children:"hobby"===p?"Unlock external API insights with Pro & Observability Plus":"Unlock latency insights with Observability Plus"}),side:"top",children:(0,t.jsxs)("button",{"aria-label":"Upgrade to Observability Plus to unlock latency insights",className:"group/lock relative flex h-4 w-full cursor-pointer appearance-none items-center border-none bg-transparent p-0 text-gray-500 focus:outline-none",onClick:()=>{m&&m()},type:"button",children:[(0,t.jsx)("div",{className:"absolute left-1/2 z-10 mx-auto mb-0.5 flex size-4 -translate-x-1/2 justify-center rounded-sm px-1 transition-colors duration-100 ease-in-out group-hover/lock:bg-gray-300 group-hover/lock:text-gray-800",children:(0,t.jsx)(tf.LockClosedSmall,{})}),(0,t.jsx)(tS,{className:"transition-colors duration-100 ease-in-out group-hover/lock:text-gray-500"})]})}):(0,t.jsx)(tN,{className:(0,u.clsx)("min-w-[20px] flex-1",g===tj.StatusType["2XX"]&&"text-green-800",g===tj.StatusType["3XX"]&&"text-blue-700",g===tj.StatusType["4XX"]&&"text-amber-800",g===tj.StatusType["5XX"]&&"text-red-800",-1===r.http_status&&(r.reason?"text-red-900":"text-gray-800")),endTime:o,startTime:l,traces:a?a.map(e=>{let t=(0,tj.getStatusCodeType)(e.http_status);return{className:(0,u.clsx)(t===tj.StatusType["2XX"]&&"!bg-green-800",t===tj.StatusType["3XX"]&&"!bg-blue-700",t===tj.StatusType["4XX"]&&"!bg-amber-800",t===tj.StatusType["5XX"]&&"!bg-red-800"),traceStart:e.timestamp,traceEnd:e.timestamp+e.duration}}):[{traceStart:r.timestamp,traceEnd:r.timestamp+r.duration}]})]})}function tA(e){let{requests:r,startTime:a,endTime:l,createCopyHandler:o,longestMethodLength:n}=e,[i,d]=(0,s.useState)(!1),c={startTime:a,endTime:l,createCopyHandler:o,longestMethodLength:n};return 1===r.length?(0,t.jsx)(tq,{...c,request:r[0]}):(0,t.jsx)(t.Fragment,{children:r.map((e,t)=>(0,s.createElement)(tq,{...c,key:t,request:e,shouldConnectToNext:(0,tj.checkIfShouldConnectToNext)(r,t)}))})}function tR(e){let{requests:r,startTime:a,endTime:l,className:o}=e,n=(0,c.useToasts)(),i=(0,f.useIsMobile)(),d=(0,s.useCallback)(e=>t=>{i||"key"in t&&"Enter"!==t.key||((0,e7.copyToClipboard)(e),n.message("Request path copied to clipboard"))},[n,i]),{startTime:p,endTime:m}=(0,s.useMemo)(()=>({startTime:Math.min(...r.map(e=>e.timestamp),a),endTime:Math.max(...r.map(e=>e.timestamp+e.duration),l),totalTime:l-a}),[l,r,a]),x=(0,s.useMemo)(()=>{let e=!1,t=!1,s=r.reduce((s,r)=>(tT.includes(r.fetch_type)&&(e=!0),r.request_hostname.includes(".vercel-storage.com")&&(t=!0),r.request_method.length>s)?r.request_method.length:s,0);return t?s+2:e?s+1:s},[r]),h=(0,s.useMemo)(()=>{let e={};return r.forEach((t,s)=>{let r=-1===t.fetch_idx?`${t.request_hostname}${t.request_path}-${t.fetch_idx}-${s}`:`${t.fetch_idx}`;e[r]||(e[r]=[]),e[r].push(t)}),Object.values(e).sort((e,t)=>e[0].timestamp-t[0].timestamp)},[r]);return(0,t.jsx)("div",{className:(0,u.clsx)("relative",o),children:h.map(e=>(0,t.jsx)(tA,{createCopyHandler:d,endTime:m,longestMethodLength:Math.max(x,3),requests:e,startTime:p},`${e[0].timestamp}${e[0].fetch_idx}${e[0].request_path}${e[0].request_hostname}`))})}function tO(e){let{requests:r,className:a,plan:l,onUpgradePressed:o}=e,n=(0,c.useToasts)(),i=(0,f.useIsMobile)(),d=(0,s.useCallback)(e=>t=>{i||"key"in t&&"Enter"!==t.key||((0,e7.copyToClipboard)(e),n.message("Request path copied to clipboard"))},[n,i]);return(0,t.jsx)("div",{className:(0,u.clsx)("relative",a),children:r.map(e=>(0,t.jsx)(tq,{createCopyHandler:d,endTime:0,lite:!0,longestMethodLength:4,onUpgradePressed:o,plan:l,request:e,startTime:0},`${e.fetch_idx}${e.request_path}${e.request_hostname}`))})}function tB(e){let{projectId:a,requestId:l,source:o,startTime:n,endTime:i,enableDataCacheMetrics:d,disableHeader:c,pathType:u}=e,{team:p}=(0,g.useAccount)(),m=p?.billing?.plan,{hasObservabilityPlusAccessOnCurrentProject:x}=(0,tx.useHasObservabilityPlus)(),h=(0,eb.useOpenEnableModal)(),{loading:f,data:j,isAwaitingData:v}=function(e){let{requestId:t,projectId:s,source:r,timestamp:a,pathType:l}=e,{team:o}=(0,g.useAccount)(),n=o?.billing?.plan,i=(0,tc.addSeconds)(new Date(a),20),d=(0,k.default)(()=>o&&s&&t&&n?`${T.API_LOGS_FETCH_METRICS}${(0,L.encode)({ownerId:o.id,requestId:t,projectId:s,source:r,pathType:l})}`:null,e=>(0,tm.fetchAPI)(e,{throwOnHTTPError:!0}),{revalidateOnFocus:!1,refreshInterval:()=>1e3*!!tp(i)});return{data:d.data?.data,loading:d.isValidating,error:d.error,isAwaitingData:tp(i)}}({projectId:a,requestId:l,source:"request"!==o?o:void 0,timestamp:n.getTime(),pathType:u}),y=j?.some(e=>e.fetch_type.startsWith("cache-")),{data:C}=function(e){let{requestId:t,projectId:s,timestamp:r,shouldLoad:a}=e,{team:l}=(0,g.useAccount)(),o=l?.billing?.plan,n=(0,tc.addSeconds)(new Date(r),15),i=(0,k.default)(()=>l&&s&&t&&o&&"hobby"!==o&&a?`${T.API_LOGS_CACHE_METRICS}${(0,L.encode)({ownerId:l.id,requestId:t,projectId:s})}`:null,e=>(0,tm.fetchAPI)(e,{throwOnHTTPError:!0}),{revalidateOnFocus:!1,refreshInterval:()=>1e3*!!tp(n)});return{data:i.data?.data,loading:i.isValidating,error:i.error,isAwaitingData:tp(n)}}({projectId:a,requestId:l,timestamp:n.getTime(),shouldLoad:d&&y}),b=(0,s.useMemo)(()=>{let e=[...C??[]];return C?j?.map(t=>{let s=e.find(e=>{if(t.cache_item_id===e.item_id&&t.fetch_type.startsWith("cache-")){let s=t.fetch_type.split("-")[1];return e.type.includes(s.toUpperCase())}return!1});return s?(e.splice(e.findIndex(e=>e.item_id===s.item_id),1),{...t,cache:s}):t}):j},[j,C]),w=j&&j.length>0,S=(0,s.useCallback)(()=>{h({from:"observability",via:"request-metrics",upgradeUseCase:"external-apis"})},[h]),N=(0,s.useMemo)(()=>v&&!w?(0,t.jsxs)(r.Stack,{align:"center",className:"mr-0.5",direction:"row",gap:2,children:[(0,t.jsx)(td.Spinner,{size:16}),(0,t.jsx)(_.Text,{className:"text-gray-800",children:"Awaiting data"})]}):f&&!w?(0,t.jsx)(ef.Skeleton,{as:"dd",className:"ml-2",height:20,width:30}):w?x?(0,t.jsx)(tR,{className:"min-w-[50px] flex-1 rounded",endTime:i.getTime(),requests:b??[],startTime:n.getTime()}):(0,t.jsx)(tO,{className:"min-w-[50px] flex-1 rounded",endTime:i.getTime(),onUpgradePressed:S,plan:m,requests:b??[],startTime:n.getTime()}):(0,t.jsx)(_.Text,{className:"mr-0.5 text-right text-gray-800",children:"No outgoing requests"}),[v,f,w,x,i,b,n,S,m]);return(0,t.jsx)("div",{className:"tailwind-preflight",children:c?N:(0,t.jsxs)(r.Stack,{className:"w-full justify-between",direction:w?"column":"row",gap:2,style:{position:"relative"},children:[(0,t.jsx)(r.Stack,{align:"center",direction:"row",gap:1,children:(0,t.jsx)(_.Text,{as:"span",color:"gray-900",size:14,children:"External APIs"})}),N]})})}var tP=e.i(9886547),t$=e.i(8225664);function tz(e){let{title:a,params:l,hideCopyButton:o=!1}=e,n=(0,c.useToasts)(),i=`?${Object.keys(l).reduce((e,t)=>`${e}${t}${null===l[t]?"":`=${l[t]}`}&`,"").slice(0,-1)}
    `,d=(0,s.useCallback)((e,t)=>{"key"in e&&"Enter"!==e.key||((0,e7.copyToClipboard)(t),n.message("Copied value to clipboard"))},[n]),[p,m]=(0,s.useState)(!1),x=(0,s.useMemo)(()=>{let e=Object.keys(l),s=e.slice(0,10),r=e.length>s.length+1,a=r?(0,t.jsx)("li",{className:"inline-flex max-w-full overflow-hidden rounded-sm border border-gray-300 text-xs divide-x",children:(0,t.jsx)("span",{className:"inline-block whitespace-nowrap cursor-pointer font-medium bg-gray-100 p-1.5 px-2 text-left text-gray-900 text-[12px]",role:"button",onClick:()=>m(e=>!e),children:p?"Hide":"Show more"})}):null;return r&&!p?(0,t.jsxs)("ul",{className:"mx-2 flex flex-wrap gap-2",children:[s.map(e=>(0,t.jsx)(tW,{paramKey:e,paramValue:l[e],onCopy:d},e)),a]}):(0,t.jsxs)("ul",{className:"mx-2 flex flex-wrap gap-2",children:[e.map(e=>(0,t.jsx)(tW,{paramKey:e,paramValue:l[e],onCopy:d},e)),a]})},[p,l,d]);return(0,t.jsx)("div",{className:"border-b pt-2 pb-4 last:border-none",children:(0,t.jsxs)(r.Stack,{direction:"column",gap:2,style:{position:"relative"},children:[(0,t.jsxs)(r.Stack,{align:"center",className:(0,u.clsx)("mx-2"),direction:"row",justify:"space-between",children:[(0,t.jsx)(_.Text,{as:"dt",color:"gray-900",style:{flexShrink:0},children:a}),!o&&(0,t.jsx)(t$.CopyButton,{label:"Copy",shape:"square",style:{width:"28px",height:"28px"},textToCopy:i,title:"Copy full search params to the clipboard",type:"tertiary"})]}),x]})})}function tW(e){let{paramKey:s,paramValue:r,onCopy:a}=e,l=s,o=r,n=s;try{l=decodeURIComponent(s),n=(o=r?decodeURIComponent(r):null)?new URLSearchParams({[l]:o}).toString():l}catch(e){}return(0,t.jsxs)("li",{className:"flex cursor-pointer overflow-hidden rounded-sm border border-gray-300 text-xs font-mono divide-x",onClick:e=>a(e,n),onKeyDown:e=>a(e,n),children:[(0,t.jsx)("span",{className:"truncate bg-transparent p-1.5 text-left text-[12px]",title:s,children:s}),null!==o?(0,t.jsx)("span",{className:"truncate bg-background-200 p-1.5 text-left text-[12px] font-mono font-medium text-gray-900",title:o,children:o}):null]},s)}var tH=e.i(1551685),tG=e.i(4670733),tV=e.i(762945),tU=e.i(6226725),tZ=e.i(2006677),tQ=e.i(6401841),tX=e.i(8320377),tJ=e.i(846089),tK=e.i(8654638),tY=e.i(6280036),t0=e.i(5468328);function t1(e){let{text:r,className:a,tooltipContainerClassName:l,tooltipClassName:o}=e,[n,i]=(0,s.useState)(!1),d=(0,s.useRef)(null),c=(0,f.useIsMobile)();return(0,s.useLayoutEffect)(()=>{if(!d.current||c)return;let e=new ResizeObserver(e=>{for(let t of e){let e=t.target;i(e.offsetWidth<e.scrollWidth)}});return e.observe(d.current),()=>{e.disconnect()}},[d,c]),(0,t.jsx)(t0.Tooltip,{className:l,delayTime:100,desktopOnly:!0,forceHide:!n,lowerDelay:!0,maxWidth:"100%",style:{display:"flex",alignItems:"center",minWidth:0},tabIndex:null,text:r,tooltipClassName:o,children:(0,t.jsx)("div",{className:`truncate ${a||""}`,ref:d,children:r})})}var t2=e.i(8087928),t3=e.i(8161149),t5=e.i(248550),t9=e.i(2259462),t6=e.i(4535059),t4=e.i(1568600),t8=e.i(1474855),t7=e.i(4410321);let se=(0,s.forwardRef)(function(e,s){return(0,t.jsx)("div",{className:t7.default.headerContainer,ref:s,children:(0,t.jsxs)(r.Stack,{align:"center",className:(0,u.clsx)(t7.default.rowContainer,t7.default.header),direction:"row",children:[(0,t.jsx)("div",{className:t7.default.rowItem,style:{flexShrink:0,paddingLeft:16,width:166},children:"Time"}),(0,t.jsx)("div",{className:t7.default.rowItem,style:{flexShrink:0,width:"72px"},children:"Status"}),(0,t.jsx)("div",{className:(0,u.clsx)(t7.default.rowItem,t7.default.truncate),style:{minWidth:"12%",maxWidth:"12%"},children:"Host"}),(0,t.jsx)("div",{className:(0,u.clsx)(t7.default.rowItem,t7.default.truncate),style:{paddingLeft:"35px",minWidth:"calc(max(12%,180px) + 50px)",maxWidth:"calc(400px + 50px)"},children:"Request"}),(0,t.jsx)("div",{className:(0,u.clsx)(t7.default.rowItem,t7.default.truncate),children:"Messages"})]})})});function st(e){let{logRows:a=[],selectedLogId:l,onRowSelect:o}=e,{state:{live:n,paused:i}}=(0,D.useLogsQueryState)(),d=(0,s.useRef)(!1),c=tn(),m=(0,s.useRef)(void 0);(0,s.useEffect)(()=>{a.length>0&&(m.current=new Date(a[0].timestamp).getTime()+1)},[a]);let[x,h]=(0,s.useState)({state:"disabled"});(0,s.useEffect)(()=>{n?h(e=>"enabled"!==e.state?{state:"enabled",ts:m.current||Date.now()}:e):i?h(e=>({state:"paused",ts:e.ts||Date.now()})):h(e=>({state:"disabled",ts:e.ts}))},[n,i]);let g="disabled"!==x.state&&x.ts?a.findIndex(e=>new Date(e.timestamp).getTime()<x.ts):a.length;"paused"===x.state&&0===g&&(g=a.length);let f=a.slice(0,g),j=a.slice(g);(0,s.useEffect)(()=>{function e(e){"Tab"===e.key&&(d.current=!0)}function t(e){"Tab"===e.key&&(d.current=!1)}return document.addEventListener("keydown",e),document.addEventListener("keyup",t),()=>{document.removeEventListener("keydown",e),document.removeEventListener("keyup",t)}},[]);let{teamSlug:v,projectSlug:y}=(0,ec.useProjectAndTeamSlug)(),{data:C}=(0,ed.useRollingRelease)({teamIdOrSlug:v,projectSlug:y}),b=C?.rollingRelease?.state==="ACTIVE"?C.rollingRelease.canaryDeployment:null;return(0,t.jsx)(t.Fragment,{children:(0,t.jsxs)(r.Stack,{className:"tailwind-preflight","data-testid":(0,p.tid)("group-logs","log-rows"),direction:"column",flex:"auto",onFocus:e=>{d.current&&e.target.scrollIntoView({block:"center"})},children:[f.map(e=>{let t=e.requestId===l;return(0,s.createElement)(sr,{...e,highlightedWords:c,isCanary:e.deploymentId===b?.id,isSelected:t,key:e.requestId,moveUp:!!(x.ts&&new Date(e.timestamp).getTime()<x.ts),onSelect:o})}),j.length>0?(0,t.jsx)("div",{className:(0,u.clsx)(t7.default.liveModeRow,{[t7.default.paused]:"paused"===x.state}),children:(0,t.jsxs)(r.Stack,{align:"center",direction:"row",gap:2,children:[(0,t.jsx)(t4.PlayFill,{size:10})," Live Mode"]})},x.ts):null,j.map(e=>{let t=e.requestId===l;return(0,s.createElement)(sr,{...e,faded:"enabled"===x.state,highlightedWords:c,isCanary:e.deploymentId===b?.id,isSelected:t,key:e.requestId,onSelect:o,previouslyFaded:!!(x.ts&&new Date(e.timestamp).getTime()<x.ts),reverseBackground:!0})})]})})}function ss(e){let{level:s}=e;switch(s){case"fatal":return(0,t.jsx)(tQ.Stop,{"aria-hidden":"true"});case"warning":return(0,t.jsx)(tV.Warning,{"aria-hidden":"true"});case"error":return(0,t.jsx)(tU.CrossCircle,{"aria-hidden":"true"});default:return(0,t.jsx)("div",{style:{width:"16px",height:"16px"}})}}let sr=(0,s.memo)(function(e){let{onSelect:r,isCanary:a,isSelected:l,highlightedWords:o,isNew:n,faded:i,previouslyFaded:d,moveUp:c,reverseBackground:p,...m}=e,x=(0,s.useRef)(null),{value:h}=(0,tG.useEnableAnsiLogs)();(0,s.useEffect)(()=>{x.current&&x.current.scrollIntoView({block:"center"})},[x]);let{resolvedTheme:g}=(0,tY.useTheme)(),f=new Date(m.timestamp),j=new Set([...m.events.map(e=>{let t=e.source;return"static"===t&&m.events.some(e=>"PRERENDER"===e.cache)&&(t="data-cache"),"serverless"===t&&"middleware"===e.pathType&&(t="serverless-middleware"),t}),...m.logs.map(e=>e.source)]),v=()=>void(0,e9.awaitPaint)().then(()=>r(m)),y=(0,s.useMemo)(()=>m.hasFunctionCrashed?"fatal":m.statusCode>=500?"error":m.statusCode>=400?"warning":"info",[m.statusCode,m.hasFunctionCrashed]),C=(0,s.useMemo)(()=>{let e,t=m.logs.toSorted((e,t)=>{let{timestamp:s}=e,{timestamp:r}=t;return new Date(s).getTime()-new Date(r).getTime()}).reverse();return(o.length>0&&(e=t.find(e=>{let{message:t}=e,s=t.toLowerCase();return o.some(e=>s.includes(e.toLowerCase()))})),e||(e=t.find(e=>{let{level:t}=e;return"error"===t})||t.find(e=>{let{level:t}=e;return"warning"===t})||t[0]),e)?{style:"error"===e.level?"text-red-900":"warning"===e.level?"text-amber-900":"text-gray-1000",text:e.message}:{style:"text-gray-1000",text:""}},[m.logs,o]);return(0,t.jsxs)("div",{className:(0,u.clsx)("flex items-center py-[3px]",t7.default.rowContainer,t7.default[y],{[t7.default.faded]:i,[t7.default.previouslyFaded]:d,[t7.default.moveUp]:c,[t7.default.reverseBackground]:p,[t7.default.isSelected]:l,[t7.default.isNew]:n,[t7.default.darkTheme]:"dark"===g},m.className),"data-log-row-id":m.requestId,onClick:()=>v(),onKeyDown:e=>{"Enter"===e.key&&v()},ref:l?x:void 0,tabIndex:0,children:[(0,t.jsx)("div",{className:"relative flex items-center justify-center pl-2",children:(0,t.jsx)(ss,{level:y})}),(0,t.jsx)("div",{className:(0,u.clsx)(t7.default.rowItem,t7.default.uppercase,t7.default.truncate),style:{flexShrink:0},children:(0,t.jsxs)(t8.TimestampTooltip,{content:{timestamp:f.getTime()},showRelativeToNow:!0,children:[(0,t.jsx)("span",{className:"opacity-60",children:(0,e0.format)(f,"MMM dd ")}),(0,t.jsx)("span",{className:"opacity-100",children:(0,e0.format)(f,"HH:mm:ss")}),(0,t.jsx)("span",{className:"opacity-60",children:(0,e0.format)(f,".SS")})]})}),(0,t.jsxs)("div",{className:t7.default.rowItem,style:{flexShrink:0,width:"72px",justifyContent:"space-between"},children:[(0,t.jsx)(ti.RequestMethodBadge,{method:m.requestMethod,variant:"small"}),(0,t.jsx)(ti.StatusCodeBadge,{statusCode:m.statusCode,variant:"small"})]}),(0,t.jsxs)("div",{className:(0,u.clsx)(t7.default.rowItem),style:{minWidth:"12%",maxWidth:"12%"},children:[a?(0,t.jsx)("div",{style:{opacity:.6,paddingRight:"3px"},children:(0,t.jsx)(en.Badge,{size:"sm",variant:"green-subtle",children:"Canary"})}):null,(0,t.jsx)(t1,{text:m.domain,tooltipContainerClassName:t7.default.tooltipContainer,tooltipClassName:t7.default.tooltip})]}),(0,t.jsx)("div",{className:"ml-4 px-2",children:(0,t.jsx)("div",{className:"-space-x-px flex justify-end",style:{width:"25px",height:"16px",opacity:.6},children:Array.from(j).sort((e,t)=>{let s=["edge-middleware","serverless-middleware","static","edge-cache","lambda","serverless","edge-function","data-cache"],r=s.indexOf(e),a=s.indexOf(t);return(-1===r?999:r)-(-1===a?999:a)}).map((e,s,r)=>(0,t.jsx)("div",{style:s!==r.length-1?{clipPath:"path('M13.7639 0H0V16.7324C0.294173 16.9026 0.635713 17 1 17H15C15.1543 17 15.3045 16.9825 15.4487 16.9495C14.0552 16.6906 13 15.4685 13 14V2C13 1.23165 13.2889 0.530757 13.7639 0Z')"}:{},children:(0,t.jsx)(t0.Tooltip,{text:su(e),children:(0,t.jsx)(sc,{type:e})})},e))})}),(0,t.jsx)("div",{className:"flex min-w-[max(12%,180px)]  max-w-[400px] items-center justify-start truncate pr-2",children:(0,t.jsx)(e4.HighlightText,{className:"truncate",search:o,text:m.requestPath})}),m.logs.length>0&&(0,t.jsxs)("div",{className:(0,u.clsx)(t7.default.rowItem,t7.default.separated,t7.default.truncate,"shrink",C.style),children:[m.logs.length>1&&(0,t.jsx)("div",{className:"mr-2 rounded-full bg-gray-300 px-1 text-[11px] text-gray-800",children:m.logs.length}),h?(0,t.jsx)(tX.Ansi,{newLines:!0,renderNewLine:()=>(0,t.jsx)("span",{className:t7.default.breakSpaces,children:" "}),renderText:e=>(0,t.jsx)(e4.HighlightText,{as:"span",className:t7.default.breakSpaces,search:o,text:e}),children:C.text}):(0,t.jsx)(e4.HighlightText,{search:o,text:C.text})]})]})});function sa(){let e=to.LOGS_PAGE_SIZE;return(0,t.jsx)("div",{className:"py-1",children:[...Array(e)].map((e,s)=>(0,t.jsx)(sl,{},`${Date.now()}-${s}`))})}function sl(){return(0,t.jsx)("div",{className:(0,u.clsx)("px-2 py-0.5"),children:(0,t.jsx)(r.Stack,{className:(0,u.clsx)(t7.default.rowContainer,"border-b-transparent!"),direction:"row",children:(0,t.jsx)(ef.Skeleton,{className:t7.default.rowItem,height:24,width:"100%"})})})}function so(){let{team:e}=(0,ev.useTeam)(),{maxRetention:s,billingPlan:a}=(0,ey.useUserRetention)(),{setState:l}=(0,D.useLogsQueryState)(),o=`You have reached your ${(0,ex.formatDuration)(s)} of maximum retention limit.`;return(0,t.jsxs)(r.Stack,{align:"center",className:t7.default.loadingError,direction:"column",gap:6,justify:"center",children:[(0,t.jsx)(sp,{}),(0,t.jsxs)(_.Text,{color:"gray-900",size:14,style:{maxWidth:"380px"},children:[o," ",(0,t.jsx)(e5.Link,{external:!0,href:"/docs/runtime-logs",type:"highlight",children:"Learn more"})]}),(0,t.jsx)(r.Stack,{children:"pro"===a&&e?(0,t.jsx)(e5.ButtonLink,{href:`/${e.slug}/~/settings/billing`,size:"small",touchEventWorkaround:!0,children:"Upgrade to Enterprise"}):(0,t.jsx)(d.Button,{onClick:()=>l({timeline:"past30Minutes"}),prefix:(0,t.jsx)(t2.RefreshCounterClockwise,{color:"currentColor"}),size:"small",type:"secondary",children:"Reset timeline to past 30 mins"})})]})}function sn(e){let s,{errorName:r}=e;return s="WrongRequestIdFormat"===r?(0,t.jsxs)(t.Fragment,{children:["You may have input the wrong format for request id. At least a partial string is required, example:"," ",(0,t.jsx)("code",{className:"text-[10px] before:text-gray-500 before:content-['ID='] ",children:"abcde-1678961364403-a1b2c3d4f5e6"})]}):`We could not find logs for the selected filters, we've been notified
    of the issue, try to clear your filters. If the issue persists,
    contact our support.`,(0,t.jsx)(_.Text,{className:t7.default.screenReaderSelect,color:"gray-900",size:14,style:{maxWidth:"380px"},tabIndex:0,children:s})}function si(e){let{error:s}=e,{setState:a}=(0,D.useLogsQueryState)(),l=(0,f.useIsMobile)(),{isDeploymentEditable:o}=(0,ei.usePageConfig)();return"ExceedsBillingLimitError"===s.name?(0,t.jsx)(so,{}):(0,t.jsxs)(r.Stack,{align:"center",className:t7.default.loadingError,direction:"column",gap:6,justify:"center",children:[(0,t.jsx)(sp,{}),(0,t.jsx)(sn,{errorName:s.name}),(0,t.jsx)(r.Stack,{children:(0,t.jsx)(d.Button,{onClick:()=>{let e={levels:void 0,sources:void 0,caches:void 0,domains:void 0,routes:void 0,requestMethods:void 0,requestPaths:void 0,statusCodes:void 0,environments:void 0,branches:void 0,requestIds:void 0,deploymentDomains:void 0,timeline:"past30Minutes"};o&&(e.deploymentDomains=void 0,e.deploymentIds=void 0),l||(e.searchQuery=""),a(e)},prefix:(0,t.jsx)(t2.RefreshCounterClockwise,{color:"currentColor"}),size:"small",type:"secondary",children:"Reset filters"})})]})}function sd(){let{state:{hasTraces:e},hasActiveFilters:s,setState:a}=(0,D.useLogsQueryState)(),{mutate:l,isValidating:o}=(0,to.useGroupLogs)(),n=s();return n&&e?(0,t.jsxs)(r.Stack,{align:"center",className:t7.default.loadingError,"data-testid":(0,p.tid)("group-logs","no-logs"),direction:"column",gap:6,justify:"center",children:[(0,t.jsx)(sp,{icon:"traces"}),(0,t.jsx)(_.Text,{color:"gray-900",size:16,weight:500,className:(0,u.clsx)(t7.default.screenReaderSelect,"max-w-[420px] text-center"),tabIndex:0,children:"No traces found for the selected filters"}),(0,t.jsx)("div",{className:"flex flex-col gap-3 max-w-[420px] text-left",children:(0,t.jsxs)("div",{className:"border rounded-md p-4 flex flex-col gap-2",children:[(0,t.jsx)(_.Text,{size:14,weight:500,color:"gray-1000",children:"Start tracing in 3 steps:"}),(0,t.jsxs)("ol",{className:"list-decimal list-inside space-y-1 marker:text-gray-600",children:[(0,t.jsxs)("li",{children:["Open the"," ",(0,t.jsx)(e5.Link,{href:"/docs/vercel-toolbar/in-production-and-localhost/add-to-production",type:"highlight",children:"Vercel Toolbar"})," ","on your deployment"]}),(0,t.jsxs)("li",{children:["Select ",(0,t.jsx)("strong",{children:"Run Page Trace"})," and wait for the page to reload"]}),(0,t.jsx)("li",{children:"Click the notification to view the trace"})]})]})}),(0,t.jsxs)(r.Stack,{direction:{sm:"column",md:"row"},gap:4,children:[(0,t.jsx)(e5.ButtonLink,{href:"/docs/tracing/session-tracing",size:"small",children:"Learn More about Tracing"}),(0,t.jsx)(d.Button,{disabled:o,onClick:()=>void l(),prefix:o?(0,t.jsx)(td.Spinner,{color:"var(--accents-5)",size:16}):void 0,size:"small",type:"secondary",children:"Refresh"})]})]}):(0,t.jsxs)(r.Stack,{align:"center",className:t7.default.loadingError,"data-testid":(0,p.tid)("group-logs","no-logs"),direction:"column",gap:6,justify:"center",children:[(0,t.jsx)(sp,{icon:n?"logs":"function"}),(0,t.jsx)(_.Text,{className:t7.default.screenReaderSelect,color:"gray-900",size:14,style:{maxWidth:"380px"},tabIndex:0,children:n?"No logs found for the selected filters":"There are no runtime logs in this time range"}),(0,t.jsx)(r.Stack,{direction:{sm:"column",md:"row"},gap:4,children:n?(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(d.Button,{onClick:()=>a({},!0,!0),size:"small",children:"Reset Filters"}),(0,t.jsx)(d.Button,{disabled:o,onClick:()=>void l(),prefix:o?(0,t.jsx)(td.Spinner,{color:"var(--accents-5)",size:16}):void 0,size:"small",type:"secondary",children:"Refresh"})]}):(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(d.Button,{disabled:o,onClick:()=>void l(),prefix:o?(0,t.jsx)(td.Spinner,{color:"var(--accents-5)",size:16}):void 0,size:"small",children:"Refresh Query"}),(0,t.jsx)(e5.ButtonLink,{href:"/docs/runtime-logs",size:"small",tab:!0,type:"secondary",children:"Learn More"})]})})]})}function sc(e){let{type:s}=e;switch(s){case"request":return(0,t.jsx)(t9.File,{size:16});case"serverless":return(0,t.jsx)(G.FunctionSquare,{size:16});case"serverless-middleware":case"edge-middleware":return(0,t.jsx)(H.FunctionMiddleware,{size:16});case"edge-function":return(0,t.jsx)(W.FunctionEdge,{size:16});case"data-cache":return(0,t.jsx)(eV.DataCache,{size:16});case"external":return(0,t.jsx)(Z.ArrowGlobe,{size:16});case"redirect":return(0,t.jsx)(Q.ArrowRight,{size:16});default:return(0,t.jsx)(U,{size:16})}}function su(e){switch(e){case"request":return"Request";case"serverless":return"Vercel Function";case"serverless-middleware":case"edge-middleware":return"Middleware";case"edge-function":return"Edge Function";case"data-cache":case"static":return"Cache";case"external":return"Rewrite";case"redirect":return"Redirect";default:return e}}function sp(e){let{icon:s="logs"}=e;return(0,t.jsx)(t3.EmptyState.Icon,{icon:"function"===s?(0,t.jsx)(G.FunctionSquare,{}):"traces"===s?(0,t.jsx)(t6.Traces,{}):(0,t.jsx)(t5.Logs,{}),size:40})}var sm=e.i(4597921),sx=e.i(9224004);let sh=()=>{let{selectedTrace:e}=(0,sx.useLogs)();return e};var sg=e.i(5851942),sf=e.i(7867910);function sj(e){let{level:s}=e;switch(s){case"fatal":return(0,t.jsx)(tQ.Stop,{"aria-hidden":"true",className:"-ml-1"});case"warning":return(0,t.jsx)(tV.Warning,{"aria-hidden":"true"});case"error":return(0,t.jsx)(tU.CrossCircle,{"aria-hidden":"true"});default:return(0,t.jsx)("div",{style:{width:"16px",height:"16px"}})}}function sv(e){return e.includes("process exited with")&&e.includes("The logs above can help with debugging the issue.")}function sy(e){let{timestamp:s,message:r,level:a,error:l,onShowError:o,invocationId:n,concurrency:i,handleViewConcurrentRequests:d,isInvocationFiltered:c}=e,m=tn(),x=`${r.replaceAll("\r","\n")}`,{value:h}=(0,tG.useEnableAnsiLogs)(),g=(0,sm.useServerFlag)("enable-observability-error-dashboard",!1);return(0,t.jsxs)("div",{className:(0,u.clsx)("log-message","group -mt-px flex flex-col border-y py-1.5 pl-4 pr-2 font-mono text-[13px] @[480px]:flex-row @[480px]:gap-3",{info:"text-gray-1000 bg-background-200",error:"-my-px border-y border-red-300 bg-red-100 text-red-900",warning:"-my-px border-y border-amber-300 bg-amber-100 text-amber-900",fatal:"border-l-4 border-l-red-900 -my-px border-y border-red-300 text-red-900 bg-gradient-to-r from-red-400 to-red-100 to-5%"}[a]),children:[(0,t.jsxs)("div",{className:"flex items-center @[480px]:items-start",children:[(0,t.jsx)("div",{className:(0,u.clsx)("mr-2  mt-[2px] flex @[480px]:mt-[5px] @[480px]:size-4","info"===a&&"hidden @[480px]:block"),children:(0,t.jsx)(sj,{level:a})}),(0,t.jsxs)("span",{className:"select-none whitespace-nowrap pt-px font-mono",children:[(0,tH.isToday)(new Date(s))?null:(0,t.jsxs)("span",{className:"uppercase opacity-65",children:[(0,e0.format)(new Date(s),"MMM dd")," "]}),(0,t.jsx)("span",{className:"opacity-75",children:(0,e0.format)(new Date(s),"HH:mm:ss")}),(0,t.jsx)("span",{className:"opacity-50",children:(0,e0.format)(new Date(s),".SSS")})]}),(0,t.jsx)("div",{className:"flex flex-1 justify-end @[480px]:hidden",children:(0,t.jsx)(t$.CopyButton,{label:"Copy",shape:"square",style:{width:"28px",height:"28px"},textToCopy:x,title:"Copy message to the clipboard",type:"tertiary"})})]}),(0,t.jsx)("span",{className:"flex-1 whitespace-pre-wrap break-all pt-px","data-testid":(0,p.tid)("group-logs","detail-message"),children:(0,t.jsxs)("div",{className:"flex items-center flex-wrap",children:[(0,t.jsx)("span",{children:h?(0,t.jsx)(tX.Ansi,{newLines:!0,renderText:e=>(0,t.jsx)(e4.HighlightText,{as:"span",search:m,text:e}),children:x}):(0,t.jsx)(e4.HighlightText,{search:m,text:x})}),sv(x)&&void 0!==i&&i>1&&n&&d&&!c&&(0,t.jsx)("span",{className:"block w-full mt-2 mb-2 text-xs",children:(0,t.jsxs)("div",{className:"flex items-center gap-2 text-gray-900",children:[(0,t.jsx)(tZ.Question,{size:14,className:"color-gray-700 flex-shrink-0"}),(0,t.jsxs)("span",{className:"text-gray-700",children:["This error may be caused by other concurrent requests."," ",(0,t.jsx)("button",{type:"button",className:"text-gray-900 underline hover:text-black bg-transparent border-none p-0 m-0 cursor-pointer font-medium",onClick:()=>d(n),children:"View concurrent requests"})]})]})})]})}),g&&"error"===a&&l?(0,t.jsxs)("button",{className:"sticky top-11 -mx-1 -mr-2 flex h-[30px] cursor-pointer flex-row items-center gap-1 whitespace-nowrap rounded-md border border-[hsla(var(--ds-red-700-value),0.2)] bg-[hsla(var(--ds-red-800-value),0.1)] px-2 py-1 font-sans text-red-900 transition-colors duration-100 ease-in-out hover:bg-[hsla(var(--ds-red-800-value),0.3)]",onClick:()=>o?.(l),type:"button",children:[(0,t.jsx)(eH.Eye,{size:16}),(0,t.jsxs)("span",{children:["Seen ",new Intl.NumberFormat().format(l.countErrors)," times"]})]}):null,"fatal"===a?(0,t.jsx)("div",{className:"flex items-center",children:(0,t.jsx)(en.Badge,{variant:"red",size:"sm",children:"Fatal"})}):null,(0,t.jsx)("div",{className:(0,u.clsx)("-my-0.5 hidden opacity-0 group-hover:opacity-100 @[480px]:block focus-within:focus-visible:opacity-100"),children:(0,t.jsx)(t$.CopyButton,{label:"Copy",shape:"square",style:{width:"28px",height:"28px"},textToCopy:x,title:"Copy message to the clipboard",type:"tertiary"})})]})}function sC(e){let{logs:s,source:r,onShowError:a,invocationId:l,concurrency:o,handleViewConcurrentRequests:n,isInvocationFiltered:i}=e;return(0,t.jsxs)("div",{className:"relative flex flex-col",children:[(0,t.jsxs)("div",{className:"sticky -top-px z-10 -mt-px flex select-none flex-row gap-2 border-y bg-background-100 px-4 py-2",children:[(0,t.jsx)(sc,{type:r}),(0,t.jsx)(_.Text,{color:"gray-1000",size:13,weight:500,children:su(r)})]}),(0,t.jsx)("div",{className:"flex flex-col @container",children:s.map((e,s)=>(0,t.jsx)(sy,{error:e.error,level:e.level,message:e.message,onShowError:a,timestamp:e.timestamp,invocationId:l,concurrency:o,handleViewConcurrentRequests:n,isInvocationFiltered:i},`${e.timestamp}-${s}`))})]})}function sb(e){let{onToggleCollapse:r,collapsed:a}=e,[l,o]=(0,s.useState)(!1),{data:n}=(0,tr.useSelectedLog)(),i=sh(),{state:c,setState:p}=(0,D.useLogsQueryState)(),m=(0,h.useParams)(),x=(0,s.useMemo)(()=>{let e=i?.spans.find(e=>e.spanId===i.rootSpanId);if(!e)return"";let[t,s]=e.duration,r=1e3*t+s/1e6;return r>1e3?`${new Intl.NumberFormat(void 0,{maximumFractionDigits:2}).format(.001*r)}s`:`${Math.round(r)}ms`},[i]),g=!!(n?.traceId&&n.sessionId),f=l&&g?"trace":"logs",[j,v]=(0,s.useState)(null),[y,w]=(0,s.useState)(null),{data:S}=(0,tJ.useErrors)(),N=(0,s.useCallback)(()=>{let e=!a;r?.(e)},[a,r]),k=(0,s.useCallback)(e=>{p({invocationIds:[e]})},[p]);if((0,sf.useHotkey)(N,"l"),(0,s.useEffect)(()=>{if(!n)return;let e=n.logs.some(e=>null===j||e.level===j);j&&!e&&v(null)},[n,j]),(0,s.useEffect)(()=>{let e=e=>{if(a)return;let t=document.activeElement,s=t&&["input","select","textarea"].includes(t.tagName.toLowerCase());if((e.metaKey||e.ctrlKey)&&"a"===e.key&&!s){e.preventDefault();let t=document.querySelectorAll(".log-message"),s=document.createRange();if(t.length>0){s.setStartBefore(t[0]),s.setEndAfter(t[t.length-1]);let e=window.getSelection();e?.removeAllRanges(),e?.addRange(s)}}};return document.addEventListener("keydown",e),()=>document.removeEventListener("keydown",e)},[a]),!n)return null;let L=n.logs.reduce((e,t)=>{e[t.source]||(e[t.source]=[]);let s=S?.rows.find(e=>sw(t.message)===sw(e.errorName)),r={...t,error:s};return e[t.source].push(r),e},{}),T=n.logs.reduce((e,t)=>(e[t.level]=(e[t.level]||0)+1,e),{info:0,warning:0,error:0,fatal:0}),E=Object.values(T).filter(e=>e>0).length,M=E>1||1===E&&T.info>0,I=Object.entries(Object.entries(L).reduce((e,t)=>{let[s,r]=t,a=j?r.filter(e=>e.level===j):r;return a.length>0&&(e[s]=a),e},{})).sort((e,t)=>{let[,s]=e,[,r]=t,a=s[0]?.timestamp??"",l=r[0]?.timestamp??"";return new Date(a).getTime()-new Date(l).getTime()}),F=I.find(e=>{let[,t]=e;return t.some(e=>sv(e.message))})?.[0],q=n.events?.find(e=>"serverless"===F&&"middleware"===e.pathType?void 0:e.source===F)?.invocationId;q||(q=n.events?.[0]?.invocationId);let A=n.events?.reduce((e,t)=>t.concurrency&&t.concurrency>e?t.concurrency:e,0),R=!!r;return(0,t.jsx)("div",{className:(0,u.clsx)("flex h-full flex-1 flex-col transition-all duration-200 ease-in-out sm:flex-initial"),children:(0,t.jsxs)(t.Fragment,{children:[(0,t.jsxs)("div",{className:(0,u.clsx)("flex items-center justify-between border-b bg-background-100 py-2 pr-2",y?"pl-4":"pl-1"),onClick:e=>{e.target!==e.currentTarget||y||N()},children:[(0,t.jsx)("div",{className:"flex items-center gap-2",children:R?y?(0,t.jsxs)("header",{className:"text-heading-14",children:["Error Details",(0,t.jsx)(en.Badge,{className:"ml-2",children:"Internal"})]}):(0,t.jsxs)("div",{className:"flex flex-row items-center gap-1",children:[(0,t.jsx)("div",{className:"flex flex-row items-center gap-1",children:(0,t.jsx)("button",{className:(0,u.clsx)("text-button-14 rounded px-3 py-1.5 transition-colors",g&&"cursor-pointer hover:bg-gray-200",g&&"logs"===f?"bg-gray-100":"bg-transparent"),onClick:e=>{e.stopPropagation(),o(!1),a&&N(),C.analytics.track(b.AnalyticsEvent.LOGS_CONTEXT_ACTION_CLICKED,{field:"logs-tab",action:"View Logs"})},type:"button",children:"Logs"})}),g?(0,t.jsx)("button",{className:(0,u.clsx)("text-button-14 cursor-pointer rounded px-3 py-1.5 transition-colors hover:bg-gray-200","trace"===f?"bg-gray-100":"bg-transparent"),onClick:e=>{e.stopPropagation(),o(!0),a&&N(),C.analytics.track(b.AnalyticsEvent.LOGS_CONTEXT_ACTION_CLICKED,{field:"trace-tab",action:"View Trace"})},type:"button",children:"Trace"}):null]}):null}),R?(0,t.jsx)("div",{className:"flex items-center gap-1",children:y?(0,t.jsx)(d.Button,{"aria-label":"Close Error Details",onClick:()=>w(null),svgOnly:!0,size:"small",type:"tertiary",shape:"square",children:(0,t.jsx)(eY.Cross,{size:16})}):(0,t.jsxs)("div",{className:"flex flex-row items-center gap-2",children:["logs"===f?(0,t.jsxs)(t.Fragment,{children:[M?(0,t.jsxs)(en.Badge,{className:"cursor-pointer",onClick:()=>v(null),size:"sm",variant:"gray-subtle",children:[n.logs.length," Total"]}):null,T.warning>0&&(0,t.jsxs)(en.Badge,{className:"cursor-pointer",onClick:()=>v("warning"===j?null:"warning"),size:"sm",variant:"warning"===j?"amber":"amber-subtle",children:[T.warning," Warning"]}),T.error>0&&(0,t.jsxs)(en.Badge,{className:"cursor-pointer",onClick:()=>v("error"===j?null:"error"),size:"sm",variant:"error"===j?"red":"red-subtle",children:[T.error," Error"]}),T.fatal>0&&(0,t.jsxs)(en.Badge,{className:`cursor-pointer border ${"fatal"===j?"border-red-900":"border-red-700"}`,onClick:()=>v("fatal"===j?null:"fatal"),size:"sm",variant:"red",children:[T.fatal," Fatal"]}),n.logs.length>0?(0,t.jsx)(t$.CopyButton,{label:"Copy Logs",shape:"square",style:{width:"28px",height:"28px"},textToCopy:n.logs.map(e=>`${e.timestamp} [${e.level}] ${e.message}`).join("\n"),title:"Copy full logs to clipboard",type:"tertiary"}):null]}):(0,t.jsxs)(t.Fragment,{children:[i?(0,t.jsx)(en.Badge,{size:"sm",variant:"gray-subtle",children:x}):null,m&&g?(0,t.jsx)(e5.ButtonLink,{"aria-label":"Open Trace in New tab",className:"-mr-2",href:`/${m.teamSlug}/${m.project}/logs/traces/${n.traceId}`,svgOnly:!0,target:"_blank",type:"tertiary",width:42,children:(0,t.jsx)(eU.External,{})}):null]}),(0,t.jsx)(d.Button,{"aria-label":a?"Expand Logs Panel":"Collapse Logs Panel",onClick:N,svgOnly:!0,type:"tertiary",size:"small",shape:"square",children:a?(0,t.jsx)(eK.ChevronUp,{size:16}):(0,t.jsx)(eJ.ChevronDown,{size:16})})]})}):null]}),y?(0,t.jsx)(tK.ErrorCard,{row:y,showGoToErrors:!0,className:"sticky z-50 w-4/5 inset-0 rounded-none font-sans h-full text-gray-1000 shadow-none border-none"}):null,"trace"===f?(0,t.jsx)(sg.TraceViewerTimeline,{trace:i,height:"100%"}):n.logs.length>0&&!a?(0,t.jsx)("div",{className:(0,u.clsx)("relative flex flex-1 flex-col overflow-y-auto"),children:I.map(e=>{let[s,r]=e;return(0,t.jsx)(sC,{logs:r.sort((e,t)=>new Date(e.timestamp).getTime()-new Date(t.timestamp).getTime()),onShowError:e=>w(e),source:s,invocationId:q,concurrency:A,handleViewConcurrentRequests:k,isInvocationFiltered:c.invocationIds.length>0},s)})}):!a&&(0,t.jsx)("div",{className:"flex h-full items-center justify-center bg-background-200 p-8",children:(0,t.jsx)(_.Text,{color:"gray-900",size:14,children:"No logs found for this request"})})]})})}function sw(e){let t="";for(let s of[/^\s*⨯ \[(.{3,}?)\] {/,/^\s*⨯ (.{3,}?)(\r\n|\r|\n|$)/,/^\s*(.{3,}?)(\r\n|\r|\n|$)/]){let r=e.match(s);if(r?.[1]){t=r[1];break}}if(!t)return e;let s=t.replace(/\s+/g," ").trim();return(s=(s=s.replace(/(http|ftp|https):\/\/([\w_-]+(?:(?:\.[\w_-]+)+))([\w.,@?^=%&:\/~+#-]*[\w@?^=%&\/~+#-])?/g,"<url>")).replace(/-?\d+\s*(milliseconds?|seconds?|minutes?|mins?|hours?|days?|ms|s|m|h|d)/gi,"<duration>")).replace(/-?\d+/g,"<number>")}function s_(){let e=sh();return(0,t.jsx)(sg.TraceViewer,{height:"100%",trace:e})}function sS(e){return!!e&&("string"==typeof e&&"-"!==e&&""!==e||"number"==typeof e&&-1!==e)}let sN=e=>"STALE"===e.cache||"PRERENDER"===e.cache;function sk(e){let{className:s}=e;return(0,t.jsx)("div",{className:(0,u.default)("absolute left-6 h-16 w-3.5 border-[1.5px] border-r-0 border-gray-400 ",s)})}function sL(e){let{direction:s,through:r,lineClassName:a,className:l,children:o}=e;return(0,t.jsxs)("div",{className:(0,u.default)("relative flex items-center overflow-hidden",o?"h-10 pl-9":"h-2",l),children:["straight"===s?(0,t.jsx)(sk,{className:(0,u.default)(a)}):(0,t.jsxs)(t.Fragment,{children:[r?(0,t.jsx)(sk,{className:(0,u.default)("h-40 rounded-none border-y-0","up"===s?"top-0":"bottom-[47.5%]","dashed"===r&&"top-[55%] border-dashed")}):null,("up"===s||"both"===s)&&(0,t.jsx)(sk,{className:(0,u.default)(a,"bottom-1/2 translate-y-[0.5px] rounded-l")}),("down"===s||"both"===s)&&(0,t.jsx)(sk,{className:(0,u.default)(a,"top-1/2 -translate-y-px rounded-l-md","dashed"===r&&"border-dashed border-t-0 rounded-tl-none translate-y-2")})]}),(0,t.jsx)("div",{className:"relative flex items-center",children:o})]})}function sT(e){let{hasFunctionCrashed:s,requestDurationMs:r}=e;return(0,t.jsx)(sL,{className:"mb-2",direction:"up",children:(0,t.jsx)(ti.RequestFinishedBadge,{hasFunctionCrashed:s,requestDurationMs:r})})}var sE=e.i(9893476);function sM(e){let{requestId:t,projectId:s,eventTime:r}=e,{team:a}=(0,g.useAccount)(),l=a?.billing?.plan,o=(0,k.default)(()=>a&&s&&t&&r&&l&&"hobby"!==l?`/api/logs/tag-state-lookup${(0,L.encode)({ownerId:a.id,requestId:t,projectId:s,eventTime:r})}`:null,e=>(0,tm.fetchAPI)(e,{throwOnHTTPError:!0}),{revalidateOnFocus:!1});return{data:o.data?.data,loading:o.isValidating,error:o.error}}function sD(e){let{requestId:s,projectId:r,eventTime:a}=e,{loading:l,data:o}=sM({requestId:s,projectId:r,eventTime:a});if(l)return null;let n=o?.filter(e=>!e.tagName.startsWith("_N_T_")&&!e.tagName.startsWith("_vc_"));if(!n||0===n.length)return null;let i={};for(let e of n)i[e.tagName]=null;return(0,t.jsx)(tz,{title:"Tags",params:i,hideCopyButton:!0})}function sI(e,t){if("string"==typeof e)try{return(0,ez.default)(BigInt(e),t)}catch{return"unknown"}return(0,ez.default)(e,t)}let sF=new Map([["nodejs",{name:"Node.js",logo:(0,t.jsx)(function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=(0,s.useId)(),a=`${r}_mask0`,l=`${r}_mask1`,o=`${r}_mask2`,n=`${r}_paint0_linear`,i=`${r}_paint1_linear`,d=`${r}_paint2_linear`;return(0,t.jsxs)("svg",{fill:"none",height:"18",viewBox:"0 0 14 16",width:"16",xmlns:"http://www.w3.org/2000/svg",...e,children:[(0,t.jsx)("path",{clipRule:"evenodd",d:"M6.91226 6.4202C6.95713 6.39383 7.01268 6.39383 7.05755 6.4202L8.26282 7.11829C8.30789 7.14449 8.33546 7.19271 8.33546 7.24481V8.64248C8.33546 8.69458 8.30789 8.7428 8.26282 8.769L7.05755 9.46709C7.01268 9.49346 6.95713 9.49346 6.91226 9.46709L5.70773 8.769C5.66213 8.74331 5.63381 8.69498 5.63361 8.64248V7.24481C5.63361 7.19271 5.66029 7.14449 5.70625 7.11829L6.91226 6.4202Z",fill:"#689F63",fillRule:"evenodd"}),(0,t.jsx)("mask",{height:"16",id:a,"mask-type":"alpha",maskUnits:"userSpaceOnUse",width:"14",x:"0",y:"0",children:(0,t.jsx)("path",{d:"M6.62322 0.101176L0.377445 3.72068C0.143899 3.85581 -1.28246e-05 4.10586 8.5718e-10 4.3765V11.6206C8.5718e-10 11.891 0.143506 12.1409 0.377445 12.2764L6.62367 15.8987C6.85722 16.0338 7.14471 16.0338 7.37826 15.8987L13.6234 12.2764C13.8564 12.1408 13.9999 11.8909 14 11.6206V4.3765C14 4.10619 13.8562 3.85613 13.622 3.72068L7.37767 0.101176C7.14355 -0.0337253 6.85571 -0.0337253 6.62159 0.101176",fill:"white"})}),(0,t.jsxs)("g",{mask:`url(#${a})`,children:[(0,t.jsx)("path",{d:"M20.2158 3.09495L2.61633 -5.56644L-6.40765 12.9165L11.1914 21.5783L20.2158 3.09495Z",fill:`url(#${n})`}),(0,t.jsx)("mask",{height:"16",id:l,"mask-type":"alpha",maskUnits:"userSpaceOnUse",width:"14",x:"0",y:"0",children:(0,t.jsx)("path",{d:"M0.148193 12.0591C0.207938 12.137 0.282656 12.2044 0.370569 12.255L5.72833 15.3622L6.62079 15.8772C6.75422 15.9546 6.90632 15.9873 7.05576 15.9762C7.10557 15.9721 7.15538 15.9628 7.20401 15.9489L13.7914 3.83876C13.741 3.78368 13.6819 3.73754 13.6158 3.69884L9.5262 1.32771L7.36442 0.0788888C7.303 0.0439129 7.23718 0.0173793 7.16873 0L0.148193 12.0591Z",fill:"white"})}),(0,t.jsx)("g",{mask:`url(#${l})`,children:(0,t.jsx)("path",{d:"M-7.45789 5.63936L4.96918 22.5265L21.4042 10.335L8.97638 -6.55164L-7.45789 5.63936Z",fill:`url(#${i})`})}),(0,t.jsx)("mask",{height:"16",id:o,"mask-type":"alpha",maskUnits:"userSpaceOnUse",width:"14",x:"0",y:"0",children:(0,t.jsx)("path",{d:"M6.82612 0.00282809C6.7199 0.0136004 6.61712 0.0466642 6.52444 0.0998762L0.296448 3.70896L7.01218 15.9903C7.10558 15.9769 7.19749 15.9457 7.28051 15.8974L13.5263 12.2751C13.7171 12.1642 13.8503 11.9753 13.891 11.7577L7.04479 0.0151824C6.99451 0.00512223 6.94337 3.71091e-05 6.8921 0C6.87134 0 6.85058 0.00104193 6.82983 0.00297693",fill:"white"})}),(0,t.jsx)("g",{mask:`url(#${o})`,children:(0,t.jsx)("path",{d:"M-0.0454712 -0.00238037V16.0731H14.0383V-0.00238037H-0.0454712Z",fill:`url(#${d})`})})]}),(0,t.jsxs)("defs",{children:[(0,t.jsxs)("linearGradient",{gradientUnits:"userSpaceOnUse",id:n,x1:"11.2743",x2:"2.24575",y1:"-1.24934",y2:"17.0954",children:[(0,t.jsx)("stop",{offset:"0.3",stopColor:"#3E863D"}),(0,t.jsx)("stop",{offset:"0.5",stopColor:"#55934F"}),(0,t.jsx)("stop",{offset:"0.8",stopColor:"#5AAD45"})]}),(0,t.jsxs)("linearGradient",{gradientUnits:"userSpaceOnUse",id:i,x1:"-1.114",x2:"15.2951",y1:"14.1796",y2:"2.10394",children:[(0,t.jsx)("stop",{offset:"0.57",stopColor:"#3E863D"}),(0,t.jsx)("stop",{offset:"0.72",stopColor:"#619857"}),(0,t.jsx)("stop",{offset:"1",stopColor:"#76AC64"})]}),(0,t.jsxs)("linearGradient",{gradientUnits:"userSpaceOnUse",id:d,x1:"-0.0406827",x2:"14.041",y1:"8.03582",y2:"8.03582",children:[(0,t.jsx)("stop",{offset:"0.16",stopColor:"#6BBF47"}),(0,t.jsx)("stop",{offset:"0.38",stopColor:"#79B461"}),(0,t.jsx)("stop",{offset:"0.47",stopColor:"#75AC64"}),(0,t.jsx)("stop",{offset:"0.7",stopColor:"#659E5A"}),(0,t.jsx)("stop",{offset:"0.9",stopColor:"#3E863D"})]})]})]})},{"aria-hidden":"true"})}],["bun",{name:"Bun",logo:(0,t.jsx)(e3,{"aria-hidden":"true"})}],["go",{name:"Go",logo:(0,t.jsx)(function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return(0,t.jsx)("svg",{height:"10px",version:"1.1",viewBox:"0 0 261 99",width:"29px",xmlns:"http://www.w3.org/2000/svg",...e,children:(0,t.jsx)("g",{fill:"none",fillRule:"evenodd",id:"Page-1",stroke:"none",strokeWidth:"1",children:(0,t.jsxs)("g",{fill:"#2DBCAF",fillRule:"nonzero",id:"Go-Logo_Aqua",children:[(0,t.jsx)("path",{d:"M19.5076142,29.4191457 C19,29.4191457 18.8730964,29.1559878 19.1269036,28.761251 L21.7918782,25.2086194 C22.0456853,24.8138825 22.680203,24.5507246 23.1878173,24.5507246 L68.4923858,24.5507246 C69,24.5507246 69.1269036,24.9454615 68.8730964,25.3401983 L66.715736,28.761251 C66.4619289,29.1559878 65.8274112,29.5507246 65.4467005,29.5507246 L19.5076142,29.4191457 Z",id:"Path"}),(0,t.jsx)("path",{d:"M0.509858443,41.5507246 C0,41.5507246 -0.127464611,41.2804544 0.127464611,40.875049 L2.80422144,37.2264003 C3.05915066,36.8209949 3.69647371,36.5507246 4.20633215,36.5507246 L62.3301946,36.5507246 C62.8400531,36.5507246 63.0949823,36.95613 62.9675177,37.3615354 L61.9478008,40.6047787 C61.8203362,41.1453192 61.3104777,41.4155895 60.8006193,41.4155895 L0.509858443,41.5507246 Z",id:"Path"}),(0,t.jsx)("path",{d:"M31.5021645,53.4191457 C31,53.4191457 30.8744589,53.0244088 31.1255411,52.629672 L32.8831169,49.3401983 C33.1341991,48.9454615 33.6363636,48.5507246 34.1385281,48.5507246 L59.2467532,48.5507246 C59.7489177,48.5507246 60,48.9454615 60,49.4717773 L59.7489177,52.629672 C59.7489177,53.1559878 59.2467532,53.5507246 58.8701299,53.5507246 L31.5021645,53.4191457 Z",id:"Path"}),(0,t.jsx)("g",{id:"CXHf1q_1_",transform:"translate(69.000000, 0.550725)",children:(0,t.jsxs)("g",{id:"Group",children:[(0,t.jsx)("path",{d:"M94.0875,27.3038462 C86.0881579,29.3346154 80.6282895,30.8576923 72.7559211,32.8884615 C70.8513158,33.3961538 70.7243421,33.5230769 69.0736842,31.6192308 C67.1690789,29.4615385 65.7723684,28.0653846 63.1059211,26.7961538 C55.1065789,22.8615385 47.3611842,24.0038462 40.1236842,28.7 C31.4894737,34.2846154 27.0453947,42.5346154 27.1723684,52.8153846 C27.2993421,62.9692308 34.2828947,71.3461538 44.3138158,72.7423077 C52.9480263,73.8846154 60.1855263,70.8384615 65.8993421,64.3653846 C67.0421053,62.9692308 68.0578947,61.4461538 69.3276316,59.6692308 C64.7565789,59.6692308 59.0427632,59.6692308 44.8217105,59.6692308 C42.1552632,59.6692308 41.5203947,58.0192308 42.4092105,55.8615385 C44.0598684,51.9269231 47.1072368,45.3269231 48.8848684,42.0269231 C49.2657895,41.2653846 50.1546053,39.9961538 52.0592105,39.9961538 C58.5348684,39.9961538 82.4059211,39.9961538 98.2776316,39.9961538 C98.0236842,43.4230769 98.0236842,46.85 97.5157895,50.2769231 C96.1190789,59.4153846 92.6907895,67.7923077 87.1039474,75.1538462 C77.9618421,87.2115385 66.0263158,94.7 50.9164474,96.7307692 C38.4730263,98.3807692 26.9184211,95.9692308 16.7605263,88.3538462 C7.36447368,81.2461538 2.03157895,71.8538462 0.634868421,60.1769231 C-1.01578947,46.3423077 3.04736842,33.9038462 11.4276316,22.9884615 C20.4427632,11.1846154 32.3782895,3.69615385 46.9802632,1.03076923 C58.9157895,-1.12692308 70.3434211,0.269230769 80.6282895,7.25 C87.3578947,11.6923077 92.1828947,17.7846154 95.3572368,25.1461538 C96.1190789,26.2884615 95.6111842,26.9230769 94.0875,27.3038462 Z",id:"Path"}),(0,t.jsx)("path",{d:"M136.115789,97.4923077 C124.561184,97.2384615 114.022368,93.9384615 105.134211,86.3230769 C97.6427632,79.85 92.9447368,71.6 91.4210526,61.8269231 C89.1355263,47.4846154 93.0717105,34.7923077 101.705921,23.4961538 C110.975,11.3115385 122.148684,4.96538462 137.258553,2.3 C150.209868,0.0153846154 162.399342,1.28461538 173.446053,8.77307692 C183.476974,15.6269231 189.698684,24.8923077 191.349342,37.0769231 C193.507895,54.2115385 188.555921,68.1730769 176.747368,80.1038462 C168.367105,88.6076923 158.082237,93.9384615 146.273684,96.35 C142.845395,96.9846154 139.417105,97.1115385 136.115789,97.4923077 Z M166.335526,46.2153846 C166.208553,44.5653846 166.208553,43.2961538 165.954605,42.0269231 C163.669079,29.4615385 152.114474,22.3538462 140.051974,25.1461538 C128.243421,27.8115385 120.625,35.3 117.831579,47.2307692 C115.546053,57.1307692 120.371053,67.1576923 129.513158,71.2192308 C136.496711,74.2653846 143.480263,73.8846154 150.209868,70.4576923 C160.240789,65.2538462 165.700658,57.1307692 166.335526,46.2153846 Z",id:"Shape"})]})})]})})})},{"aria-hidden":"true"})}],["python",{name:"Python",logo:(0,t.jsx)(function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=(0,s.useId)(),a=`${r}_linearGradient-1`,l=`${r}_linearGradient-2`;return(0,t.jsxs)("svg",{height:"15px",version:"1.1",viewBox:"0 0 98 99",width:"15px",xmlns:"http://www.w3.org/2000/svg",...e,children:[(0,t.jsxs)("defs",{children:[(0,t.jsxs)("linearGradient",{id:a,x1:"0.959176447%",x2:"74.0505936%",y1:"9.14856261e-08%",y2:"64.1103734%",children:[(0,t.jsx)("stop",{offset:"0%",stopColor:"#5A9FD4"}),(0,t.jsx)("stop",{offset:"100%",stopColor:"#306998"})]}),(0,t.jsxs)("linearGradient",{id:l,x1:"49.9999998%",x2:"24.2424815%",y1:"82.2756107%",y2:"44.914431%",children:[(0,t.jsx)("stop",{offset:"0%",stopColor:"#FFD43B"}),(0,t.jsx)("stop",{offset:"100%",stopColor:"#FFE873"})]})]}),(0,t.jsx)("g",{fill:"none",fillRule:"evenodd",id:"Page-1",stroke:"none",strokeWidth:"1",children:(0,t.jsxs)("g",{fillRule:"nonzero",id:"Group",children:[(0,t.jsx)("path",{d:"M48.3285309,0.000808961017 C44.2949163,0.0195514649 40.4429046,0.363560535 37.053531,0.963308956 C27.0688609,2.72727229 25.2560319,6.41939877 25.256031,13.228309 L25.256031,22.2208089 L48.8510309,22.2208089 L48.8510309,25.2183089 L25.256031,25.2183089 L16.4010311,25.2183089 C9.5436672,25.2183089 3.53916305,29.3399799 1.66103098,37.1808088 C-0.505370605,46.1682189 -0.601462292,51.776509 1.66103098,61.1608087 C3.33824788,68.1461184 7.34366897,73.1233087 14.2010311,73.1233087 L22.313531,73.1233087 L22.313531,62.3433087 C22.313531,54.555395 29.0518177,47.6858106 37.053531,47.6858088 L60.6210308,47.6858088 C67.1813877,47.6858088 72.4185308,42.2842245 72.4185308,35.6958089 L72.4185308,13.228309 C72.4185308,6.83393069 67.0241484,2.03050484 60.6210308,0.963308956 C56.5677623,0.288590695 52.3621455,-0.0179335429 48.3285309,0.000808961017 Z M35.568531,7.23330901 C38.0057323,7.23330901 39.996031,9.25611748 39.996031,11.743309 C39.996031,14.2216847 38.0057323,16.225809 35.568531,16.225809 C33.1225921,16.225809 31.141031,14.2216838 31.141031,11.743309 C31.141031,9.25611836 33.1225921,7.23330901 35.568531,7.23330901 Z",fill:`url(#${a})`,id:"path1948"}),(0,t.jsx)("path",{d:"M75.3610308,25.2183089 L75.3610308,35.6958089 C75.3610308,43.8188732 68.4742432,50.6558079 60.6210308,50.6558088 L37.053531,50.6558088 C30.597998,50.6558088 25.256031,56.1808738 25.256031,62.6458087 L25.256031,85.1133059 C25.256031,91.5076851 30.8163884,95.2687875 37.053531,97.1033059 C44.5223822,99.2994427 51.6846194,99.6963403 60.6210308,97.1033059 C66.5611672,95.3834427 72.4185334,91.9222091 72.4185308,85.1133059 L72.4185308,76.1208086 L48.8510309,76.1208086 L48.8510309,73.1233087 L72.4185308,73.1233087 L84.2160342,73.1233087 C91.073399,73.1233087 93.6287342,68.3401496 96.0135254,61.1608087 C98.4769358,53.7697891 98.372119,46.6621259 96.0135254,37.1808088 C94.318839,30.3542608 91.0821198,25.2183089 84.2160342,25.2183089 L75.3610308,25.2183089 Z M62.1060308,82.1158086 C64.5519715,82.1158086 66.5335308,84.1199356 66.5335308,86.5983059 C66.5335308,89.0854939 64.5519688,91.1083059 62.1060308,91.1083059 C59.6688268,91.1083059 57.6785309,89.0854939 57.6785309,86.5983059 C57.6785309,84.1199356 59.6688242,82.1158086 62.1060308,82.1158086 Z",fill:`url(#${l})`,id:"path1950"})]})})]})},{"aria-hidden":"true"})}],["ruby",{name:"Ruby",logo:(0,t.jsx)(function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=(0,s.useId)(),a=Array(15).fill().map((e,t)=>`${r}_linearGradient-${t}`);return(0,t.jsxs)("svg",{height:"15px",version:"1.1",viewBox:"0 0 100 100",width:"15px",xmlns:"http://www.w3.org/2000/svg",...e,children:[(0,t.jsxs)("defs",{children:[(0,t.jsxs)("linearGradient",{id:a[0],x1:"84.7503645%",x2:"58.2543962%",y1:"111.399353%",y2:"64.5837087%",children:[(0,t.jsx)("stop",{offset:"0%",stopColor:"#FB7655"}),(0,t.jsx)("stop",{offset:"0%",stopColor:"#FB7655"}),(0,t.jsx)("stop",{offset:"41%",stopColor:"#E42B1E"}),(0,t.jsx)("stop",{offset:"99%",stopColor:"#990000"}),(0,t.jsx)("stop",{offset:"100%",stopColor:"#990000"})]}),(0,t.jsxs)("linearGradient",{id:a[1],x1:"116.651024%",x2:"1.74616041%",y1:"60.8903211%",y2:"19.2879503%",children:[(0,t.jsx)("stop",{offset:"0%",stopColor:"#871101"}),(0,t.jsx)("stop",{offset:"0%",stopColor:"#871101"}),(0,t.jsx)("stop",{offset:"99%",stopColor:"#911209"}),(0,t.jsx)("stop",{offset:"100%",stopColor:"#911209"})]}),(0,t.jsxs)("linearGradient",{id:a[2],x1:"75.7744024%",x2:"38.9781357%",y1:"219.327131%",y2:"7.82868176%",children:[(0,t.jsx)("stop",{offset:"0%",stopColor:"#871101"}),(0,t.jsx)("stop",{offset:"0%",stopColor:"#871101"}),(0,t.jsx)("stop",{offset:"99%",stopColor:"#911209"}),(0,t.jsx)("stop",{offset:"100%",stopColor:"#911209"})]}),(0,t.jsxs)("linearGradient",{id:a[3],x1:"50.012428%",x2:"66.4830414%",y1:"7.23449921%",y2:"79.1354134%",children:[(0,t.jsx)("stop",{offset:"0%",stopColor:"#FFFFFF"}),(0,t.jsx)("stop",{offset:"0%",stopColor:"#FFFFFF"}),(0,t.jsx)("stop",{offset:"23%",stopColor:"#E57252"}),(0,t.jsx)("stop",{offset:"46%",stopColor:"#DE3B20"}),(0,t.jsx)("stop",{offset:"99%",stopColor:"#A60003"}),(0,t.jsx)("stop",{offset:"100%",stopColor:"#A60003"})]}),(0,t.jsxs)("linearGradient",{id:a[4],x1:"46.1741749%",x2:"49.9323342%",y1:"16.347907%",y2:"83.0468449%",children:[(0,t.jsx)("stop",{offset:"0%",stopColor:"#FFFFFF"}),(0,t.jsx)("stop",{offset:"0%",stopColor:"#FFFFFF"}),(0,t.jsx)("stop",{offset:"23%",stopColor:"#E4714E"}),(0,t.jsx)("stop",{offset:"56%",stopColor:"#BE1A0D"}),(0,t.jsx)("stop",{offset:"99%",stopColor:"#A80D00"}),(0,t.jsx)("stop",{offset:"100%",stopColor:"#A80D00"})]}),(0,t.jsxs)("linearGradient",{id:a[5],x1:"36.9653573%",x2:"49.5282324%",y1:"15.5936471%",y2:"92.4776332%",children:[(0,t.jsx)("stop",{offset:"0%",stopColor:"#FFFFFF"}),(0,t.jsx)("stop",{offset:"0%",stopColor:"#FFFFFF"}),(0,t.jsx)("stop",{offset:"18%",stopColor:"#E46342"}),(0,t.jsx)("stop",{offset:"40%",stopColor:"#C82410"}),(0,t.jsx)("stop",{offset:"99%",stopColor:"#A80D00"}),(0,t.jsx)("stop",{offset:"100%",stopColor:"#A80D00"})]}),(0,t.jsxs)("linearGradient",{id:a[6],x1:"13.6086166%",x2:"85.7636612%",y1:"58.3456855%",y2:"-46.7167814%",children:[(0,t.jsx)("stop",{offset:"0%",stopColor:"#FFFFFF"}),(0,t.jsx)("stop",{offset:"0%",stopColor:"#FFFFFF"}),(0,t.jsx)("stop",{offset:"54%",stopColor:"#C81F11"}),(0,t.jsx)("stop",{offset:"99%",stopColor:"#BF0905"}),(0,t.jsx)("stop",{offset:"100%",stopColor:"#BF0905"})]}),(0,t.jsxs)("linearGradient",{id:a[7],x1:"27.6242038%",x2:"50.7445145%",y1:"21.1345847%",y2:"79.0557818%",children:[(0,t.jsx)("stop",{offset:"0%",stopColor:"#FFFFFF"}),(0,t.jsx)("stop",{offset:"0%",stopColor:"#FFFFFF"}),(0,t.jsx)("stop",{offset:"31%",stopColor:"#DE4024"}),(0,t.jsx)("stop",{offset:"99%",stopColor:"#BF190B"}),(0,t.jsx)("stop",{offset:"100%",stopColor:"#BF190B"})]}),(0,t.jsxs)("linearGradient",{id:a[8],x1:"-20.6671297%",x2:"104.241521%",y1:"122.281897%",y2:"-6.34211007%",children:[(0,t.jsx)("stop",{offset:"0%",stopColor:"#BD0012"}),(0,t.jsx)("stop",{offset:"0%",stopColor:"#BD0012"}),(0,t.jsx)("stop",{offset:"7%",stopColor:"#FFFFFF"}),(0,t.jsx)("stop",{offset:"17%",stopColor:"#FFFFFF"}),(0,t.jsx)("stop",{offset:"27%",stopColor:"#C82F1C"}),(0,t.jsx)("stop",{offset:"33%",stopColor:"#820C01"}),(0,t.jsx)("stop",{offset:"46%",stopColor:"#A31601"}),(0,t.jsx)("stop",{offset:"72%",stopColor:"#B31301"}),(0,t.jsx)("stop",{offset:"99%",stopColor:"#E82609"}),(0,t.jsx)("stop",{offset:"100%",stopColor:"#E82609"})]}),(0,t.jsxs)("linearGradient",{id:a[9],x1:"58.7919609%",x2:"11.9636556%",y1:"65.2049657%",y2:"50.1275621%",children:[(0,t.jsx)("stop",{offset:"0%",stopColor:"#8C0C01"}),(0,t.jsx)("stop",{offset:"0%",stopColor:"#8C0C01"}),(0,t.jsx)("stop",{offset:"54%",stopColor:"#990C00"}),(0,t.jsx)("stop",{offset:"99%",stopColor:"#A80D0E"}),(0,t.jsx)("stop",{offset:"100%",stopColor:"#A80D0E"})]}),(0,t.jsxs)("linearGradient",{id:a[10],x1:"79.3194899%",x2:"23.088288%",y1:"62.7538068%",y2:"17.8876818%",children:[(0,t.jsx)("stop",{offset:"0%",stopColor:"#7E110B"}),(0,t.jsx)("stop",{offset:"0%",stopColor:"#7E110B"}),(0,t.jsx)("stop",{offset:"99%",stopColor:"#9E0C00"}),(0,t.jsx)("stop",{offset:"100%",stopColor:"#9E0C00"})]}),(0,t.jsxs)("linearGradient",{id:a[11],x1:"92.8800277%",x2:"59.8414537%",y1:"74.1223655%",y2:"39.7039965%",children:[(0,t.jsx)("stop",{offset:"0%",stopColor:"#79130D"}),(0,t.jsx)("stop",{offset:"0%",stopColor:"#79130D"}),(0,t.jsx)("stop",{offset:"99%",stopColor:"#9E120B"}),(0,t.jsx)("stop",{offset:"100%",stopColor:"#9E120B"})]}),(0,t.jsxs)("radialGradient",{cx:"32.0008013%",cy:"40.2100469%",fx:"32.0008013%",fy:"40.2100469%",gradientTransform:"translate(0.320008,0.402100),scale(0.522539,1.000000),translate(-0.320008,-0.402100)",id:a[12],r:"133.14407%",children:[(0,t.jsx)("stop",{offset:"0%",stopColor:"#A80D00"}),(0,t.jsx)("stop",{offset:"0%",stopColor:"#A80D00"}),(0,t.jsx)("stop",{offset:"99%",stopColor:"#7E0E08"}),(0,t.jsx)("stop",{offset:"100%",stopColor:"#7E0E08"})]}),(0,t.jsxs)("radialGradient",{cx:"13.5493795%",cy:"40.859922%",fx:"13.5493795%",fy:"40.859922%",gradientTransform:"translate(0.135494,0.408599),scale(0.778453,1.000000),translate(-0.135494,-0.408599)",id:a[13],r:"113.540881%",children:[(0,t.jsx)("stop",{offset:"0%",stopColor:"#A30C00"}),(0,t.jsx)("stop",{offset:"0%",stopColor:"#A30C00"}),(0,t.jsx)("stop",{offset:"99%",stopColor:"#800E08"}),(0,t.jsx)("stop",{offset:"100%",stopColor:"#800E08"})]}),(0,t.jsxs)("linearGradient",{id:a[14],x1:"56.5701955%",x2:"3.10480737%",y1:"101.716594%",y2:"11.9932603%",children:[(0,t.jsx)("stop",{offset:"0%",stopColor:"#8B2114"}),(0,t.jsx)("stop",{offset:"0%",stopColor:"#8B2114"}),(0,t.jsx)("stop",{offset:"43%",stopColor:"#9E100A"}),(0,t.jsx)("stop",{offset:"99%",stopColor:"#B3100C"}),(0,t.jsx)("stop",{offset:"100%",stopColor:"#B3100C"})]}),(0,t.jsxs)("linearGradient",{id:a[15],x1:"30.8698732%",x2:"92.4707626%",y1:"35.5989756%",y2:"100.693616%",children:[(0,t.jsx)("stop",{offset:"0%",stopColor:"#B31000"}),(0,t.jsx)("stop",{offset:"0%",stopColor:"#B31000"}),(0,t.jsx)("stop",{offset:"44%",stopColor:"#910F08"}),(0,t.jsx)("stop",{offset:"99%",stopColor:"#791C12"}),(0,t.jsx)("stop",{offset:"100%",stopColor:"#791C12"})]})]}),(0,t.jsx)("g",{fill:"none",fillRule:"evenodd",id:"Page-1",stroke:"none",strokeWidth:"1",children:(0,t.jsxs)("g",{fillRule:"nonzero",id:"ruby",children:[(0,t.jsx)("polygon",{fill:`url(#${a[0]})`,id:"Path",points:"77.0122645 65.4278136 20.2589918 99.1275777 93.7437433 94.1410964 99.4035175 20.0432571"}),(0,t.jsx)("polygon",{fill:`url(#${a[1]})`,id:"Path",points:"93.8641535 94.0904237 87.5481442 50.4969668 70.3440559 73.2143305"}),(0,t.jsx)("polygon",{fill:`url(#${a[2]})`,id:"Path",points:"93.9494437 94.0904237 47.6773646 90.458054 20.504829 99.032755"}),(0,t.jsx)("polygon",{fill:`url(#${a[3]})`,id:"Path",points:"20.5700511 99.0422874 32.1294164 61.1733249 6.69279222 66.6123474"}),(0,t.jsx)("polygon",{fill:`url(#${a[4]})`,id:"Path",points:"70.3395405 73.3397576 59.7033189 31.6778786 29.2646604 60.2100448"}),(0,t.jsx)("polygon",{fill:`url(#${a[5]})`,id:"Path",points:"96.9902992 32.2648777 68.2173133 8.76484857 60.2050274 34.6680617"}),(0,t.jsx)("polygon",{fill:`url(#${a[6]})`,id:"Path",points:"83.5344758 0.386315593 66.6118459 9.73816318 55.9354878 0.260888453"}),(0,t.jsx)("polygon",{fill:`url(#${a[7]})`,id:"Path",points:"0 79.3151066 7.08914198 66.3860772 1.35461312 50.9836241"}),(0,t.jsx)("path",{d:"M0.973314611,50.4969668 L6.74296307,66.8627001 L31.81334,61.2380454 L60.4358134,34.6374574 L68.5133214,8.98058328 L55.7945075,0 L34.1708685,8.09255913 C27.3581679,14.4291382 14.1381473,26.9668352 13.6615241,27.2026383 C13.1899181,27.4434584 4.93179515,43.0516119 0.973314611,50.4969668 L0.973314611,50.4969668 Z",fill:"#FFFFFF",id:"Path"}),(0,t.jsx)("path",{d:"M21.2323064,21.0968451 C35.9975894,6.4569892 55.0324123,-2.19246642 62.3372889,5.17763237 C69.6376501,12.5477311 61.8957855,30.4587268 47.1305023,45.0935658 C32.3652194,59.7284045 13.5661995,68.8544832 6.26633995,61.4843842 C-1.03853672,54.1193026 6.46702339,35.7316838 21.2323064,21.0968451 L21.2323064,21.0968451 Z",fill:`url(#${a[8]})`,id:"Path"}),(0,t.jsx)("path",{d:"M20.5700511,99.0272361 L32.0391088,61.0378639 L70.1288227,73.2745355 C56.356923,86.188514 41.0397605,97.1056924 20.5700511,99.0272361 L20.5700511,99.0272361 Z",fill:`url(#${a[9]})`,id:"Path"}),(0,t.jsx)("path",{d:"M60.4859842,34.5627029 L70.2642842,73.2946038 C81.7684617,61.1984105 92.0936236,48.1941244 97.1503443,32.109348 L60.4859842,34.5627029 L60.4859842,34.5627029 Z",fill:`url(#${a[10]})`,id:"Path"}),(0,t.jsx)("path",{d:"M97.0505043,32.3050143 C100.963831,20.4947948 101.866907,3.55209662 83.4135641,0.406383936 L68.2719995,8.76986569 L97.0505043,32.3050143 L97.0505043,32.3050143 Z",fill:`url(#${a[11]})`,id:"Path"}),(0,t.jsx)("path",{d:"M0,79.1445256 C0.541845246,98.636405 14.6047363,98.9268942 20.5951365,99.0979771 L6.75801434,66.7824268 L0,79.1445256 L0,79.1445256 Z",fill:"#9E1209",id:"Path"}),(0,t.jsx)("path",{d:"M60.5406704,34.6229079 C69.3807754,40.0564118 87.1969484,50.9685728 87.5581785,51.1692563 C88.1195901,51.4853326 95.2393364,39.1633702 96.8548382,32.1996556 L60.5406704,34.6229079 L60.5406704,34.6229079 Z",fill:`url(#${a[12]})`,id:"Path"}),(0,t.jsx)("path",{d:"M32.0240575,61.0378639 L47.3562714,90.6186006 C56.422145,85.7018568 63.5213212,79.7114565 70.0234642,73.2946038 L32.0240575,61.0378639 L32.0240575,61.0378639 Z",fill:`url(#${a[13]})`,id:"Path"}),(0,t.jsx)("path",{d:"M6.69780929,66.8225633 L4.52541124,92.6906571 C8.62437017,98.2897247 14.2635744,98.7763819 20.1787184,98.3398954 C15.8991444,87.6886226 7.35003046,66.3910942 6.69780929,66.8225633 L6.69780929,66.8225633 Z",fill:`url(#${a[14]})`,id:"Path"}),(0,t.jsx)("path",{d:"M68.1821938,8.83508781 L98.6409204,13.1096448 C97.0153848,6.22118618 92.0233846,1.77604831 83.5144071,0.386315593 L68.1821938,8.83508781 L68.1821938,8.83508781 Z",fill:`url(#${a[15]})`,id:"Path"})]})})]})},{"aria-hidden":"true"})}],["v8",{name:"Edge"}]]);function sq(e){let[s,a,l]=e?.match(/(v8|[^0-9]*)([0-9].*)?/)||[],o=sF.get(a),n=e;return s&&o&&(n=o.name,l&&(n+=` ${l}`)),{text:n,reactNode:(0,t.jsxs)(r.Stack,{align:"center",direction:"row",gap:2,children:[o?.logo,(0,t.jsx)(_.Text,{monospace:!0,size:13,children:n})]})}}function sA(e){let{requestMethod:s,requestPath:a,responseStatusCode:l,onUp:o,onDown:n,onClose:i,isScrolled:c=!1}=e;return(0,t.jsxs)(r.Stack,{align:"center",className:(0,u.clsx)("ml-px p-4",c&&"border-b border-gray-300"),direction:"row",gap:1,justify:"space-between",children:[(0,t.jsxs)("div",{className:"flex items-center justify-center gap-1 overflow-hidden p-1",children:[(0,t.jsx)(_.Text,{className:tl.default.title,lineHeight:16,size:13,children:(0,t.jsx)(ti.RequestMethodBadge,{method:s})}),(0,t.jsx)(_.Text,{className:tl.default.title,lineHeight:16,size:13,truncate:!0,children:a})]}),(0,t.jsxs)(r.Stack,{align:"center",direction:"row",gap:2,children:[(0,t.jsxs)("div",{className:"flex flex-row gap-1",style:{display:o||n?void 0:"none"},children:[(0,t.jsx)(ti.StatusCodeBadge,{statusCode:l}),(0,t.jsx)(d.Button,{"aria-label":"Up",className:tl.default.ghostButton,disabled:!o,onClick:o,shape:"square",size:"small",svgOnly:!0,touchEventWorkaround:!0,type:"tertiary",children:(0,t.jsx)(eK.ChevronUp,{color:"gray-700",size:16})}),(0,t.jsx)(d.Button,{"aria-label":"Down",className:tl.default.ghostButton,disabled:!n,onClick:n,shape:"square",size:"small",svgOnly:!0,touchEventWorkaround:!0,type:"tertiary",children:(0,t.jsx)(eJ.ChevronDown,{color:"gray-700",size:16})})]}),(0,t.jsx)(r.Stack,{className:"geist-hide-on-mobile",direction:"row",children:(0,t.jsx)("div",{className:tl.default.buttonRule})}),(0,t.jsx)(r.Stack,{children:(0,t.jsx)(d.Button,{"aria-label":"Close",onClick:i,shape:"square",size:"small",svgOnly:!0,touchEventWorkaround:!0,type:"tertiary",children:(0,t.jsx)(eY.Cross,{color:"gray-700",size:16})})})]})]})}function sR(e){let{selectedLogId:r,onClose:a}=e,l=(0,f.useIsMobile)(),[o,n]=(0,s.useState)(!1),[i,d]=(0,s.useState)(!1),{logRows:c}=(0,to.useGroupLogs)(),{onUp:u,onDown:m,selectedLog:x}=sP({logRows:c,selectedLogId:r,onClose:a}),h=(0,s.useMemo)(()=>(0,e9.withAwaitPaint)(a),[a]);if(!l)return null;let g=!!(x?.traceId&&x?.sessionId),j=x?(0,t.jsx)(sJ,{logGroup:x}):null;return(0,t.jsxs)(S.Modal.Modal,{active:!!r,"data-testid":(0,p.tid)("group-logs","details-panel"),drawerClassname:"h-full [&>div]:flex [&>div]:flex-col  [&>div]:flex-1",drawerHeight:"max",onClickOutside:h,children:[x&&(0,t.jsx)(sA,{onClose:a,onDown:m,onUp:u,requestMethod:x.requestMethod,requestPath:x.requestPath,responseStatusCode:x.statusCode}),(0,t.jsx)(S.Modal.Header,{children:(0,t.jsx)(e1.Switch,{className:"mx-4 -mb-2",children:(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(e1.Switch.Control,{checked:!o&&(!g||!i),label:g?"Request":"Request Details",onClick:()=>{n(!1),d(!1)},size:"large",value:"details"}),(0,t.jsx)(e1.Switch.Control,{checked:o,label:"Logs",onClick:()=>{n(!0),d(!1)},size:"large",value:"logs"}),g&&(0,t.jsx)(e1.Switch.Control,{checked:i,label:"Trace",onClick:()=>{n(!1),d(!0)},size:"large",value:"trace"})]})})}),(0,t.jsx)(S.Modal.Body,{className:"flex flex-1 flex-col !p-0 [&>div:first-child]:flex-1",children:g&&i?(0,t.jsx)(s_,{}):o?(0,t.jsx)(sb,{collapsed:!1}):j})]})}let sO=(0,s.memo)(function(e){let{onClose:s,selectedLogId:r}=e,{logRows:a}=(0,to.useGroupLogs)(),{onUp:l,onDown:o,selectedLog:n}=sP({logRows:a,selectedLogId:r,onClose:s});return n?(0,t.jsx)(sK,{...n,onClose:s,onDown:o,onUp:l}):(0,t.jsx)(sB,{onClose:s})});function sB(e){let{onClose:s}=e,{data:r,error:a}=(0,tr.useSelectedLog)();return a?(0,t.jsx)(s1,{error:a}):r?(0,t.jsx)(sK,{...r,onClose:s}):(0,t.jsx)(s2,{onClose:s})}function sP(e){let{logRows:t,selectedLogId:r,onClose:a}=e,{setState:l}=(0,D.useLogsQueryState)(),o=(0,s.useRef)(null),n=r?t.findIndex(e=>e.requestId===r):-1;n>-1&&(o.current=t[n]);let i=(0,s.useMemo)(()=>n>0?()=>l({selectedLogId:t[n-1].requestId}):void 0,[l,t,n]),d=(0,s.useMemo)(()=>n<t.length-1&&-1!==n?()=>l({selectedLogId:t[n+1].requestId}):void 0,[l,t,n]);return(0,s.useEffect)(()=>{function e(e){let s=e.target&&e.target.tagName.toLowerCase();if(r&&"input"!==s&&"textarea"!==s)switch(e.key){case"ArrowUp":if(i){e.preventDefault(),i();let s=document.querySelector(`[data-log-row-id="${t[n-1].requestId}"]`);s&&(s.focus(),s.scrollIntoView({block:"center"}))}break;case"ArrowDown":if(d){e.preventDefault(),d();let s=document.querySelector(`[data-log-row-id="${t[n+1].requestId}"]`);s&&(s.focus(),s.scrollIntoView({block:"center"}))}break;case"Escape":e.preventDefault(),a()}}return document.addEventListener("keydown",e),()=>document.removeEventListener("keydown",e)},[n,i,d,r,t,a]),{onUp:i,onDown:d,selectedLog:o.current}}function s$(e){let{requestPath:s}=e,r=tn();return(0,t.jsx)(_.Text,{className:"truncate","data-testid":(0,p.tid)("logs","detail-requestPath"),monospace:!0,size:13,children:(0,t.jsx)(e4.HighlightText,{as:"span",search:r,text:s})})}function sz(e){let{used:s,max:r,format:a,className:l}=e;return(0,t.jsxs)(_.Text,{className:(0,t_.twMerge)("font-mono text-[13px]",l),monospace:!0,size:13,children:[(0,t.jsxs)("span",{className:(0,t_.twMerge)(!!r&&s>=.8*r&&"text-amber-900",!!r&&s>=r&&"text-red-900"),children:[a(s)," "]}),(0,t.jsxs)("span",{className:"text-gray-700",children:["/",r?` ${a(r)}`:(0,t.jsx)(ef.Skeleton,{className:"inline-block translate-y-0.5",height:14,width:22})]})]})}function sW(e){let{icon:s,title:r,description:n,subtitle:i,additionalInfo:d,children:c,contextActions:p,isFluidEnabled:m,event:x}=e,h=(0,t.jsxs)("div",{className:(0,u.clsx)("flex w-full items-center gap-2 overflow-hidden px-2 pt-2",c?"pb-0.5":"pb-2"),children:[(0,t.jsxs)("div",{className:"flex flex-1 items-center gap-2 overflow-hidden",children:[s&&(0,t.jsx)("div",{className:"text-gray-800",children:s}),(0,t.jsxs)("div",{className:"flex flex-col overflow-hidden",children:[(0,t.jsx)(_.Text,{className:"truncate",size:14,weight:500,children:r}),i&&(0,t.jsx)(_.Text,{className:"leading-tighter -mt-0.5",color:"gray-800",size:14,children:i})]})]}),(0,t.jsxs)("div",{className:"flex gap-1",children:[(0,t.jsx)(_.Text,{className:"inline-flex items-center gap-2 truncate",color:"gray-900",size:13,children:n}),d&&(0,t.jsx)(_.Text,{color:"gray-700",size:12,children:d})]})]});return(0,t.jsxs)("div",{className:"flex flex-col rounded-md border border-gray-300 bg-background-200",children:[(0,t.jsxs)("div",{className:(0,u.clsx)("flex flex-col rounded-md border-gray-300 bg-background-100 px-2",i?"py-px":"py-1",m&&"border-b border-l border-r -mx-px"),children:[r&&(p?.length?(0,t.jsxs)(o.MenuContainer,{position:"bottom-start",children:[(0,t.jsx)(l.MenuButton,{className:"-mx-1 rounded-sm !px-1 hover:bg-gray-100 [&>span]:px-0",variant:"unstyled",children:h}),(0,t.jsx)(a.Menu,{width:180,children:p.map(e=>(0,t.jsx)(sY,{...e},e.label))})]}):h),(0,t.jsx)("div",{className:"flex flex-col",children:c})]}),m&&x?(0,t.jsx)(s3,{event:x,children:(0,t.jsxs)("div",{className:"flex flex-col",children:[(0,t.jsx)(sU,{event:x}),(0,t.jsx)(sG,{isFluidEnabled:m,event:x}),(0,t.jsx)(sV,{event:x})]})}):null]})}function sH(e){let{event:s}=e,{getProjectUrl:r}=(0,e8.useDashboardNavigation)(),{data:a}=(0,tr.useSelectedLog)(),{deploymentId:l}=a??{},o=-1!==s.durationMs&&("serverless"===s.source||"serverless-middleware"===s.source),{getFunctionMetadata:n}=(0,tP.useFunctionMetadata)("serverless"===s.source||"serverless-middleware"===s.source?l:void 0);if(!o||!s.durationMs)return null;let i=n(s.route),d=i&&"lambda"===i.type&&i.lambda.timeout&&1e3*i.lambda.timeout||-1,c=-1!==d;return(0,t.jsx)(s0,{contextActions:[{icon:(0,t.jsx)(eZ.SettingsGear,{color:"gray-900",size:16}),label:"Configure Function Max Duration",href:r("/settings/functions#function-max-duration")}],label:`Execution Duration${c?" / Maximum":""}`,value:`${sI(s.durationMs,{secondsDecimalDigits:2})}${c?" ":""}`,valueLabel:"Execution Duration",children:(0,t.jsx)(sz,{format:e=>sI(e,{secondsDecimalDigits:2}),max:c?d:void 0,used:s.durationMs})})}function sG(e){let{event:s,isFluidEnabled:r}=e,{getProjectUrl:a}=(0,e8.useDashboardNavigation)(),l=r?"Peak Memory":"Memory Used";return sS(s.functionMaxMemoryUsed)?(0,t.jsx)(s0,{contextActions:[{icon:(0,t.jsx)(eZ.SettingsGear,{color:"gray-900",size:16}),label:"Configure Function CPU & Memory",href:a("/settings/functions#function-cpu")}],label:`${l} / Maximum`,value:`${s.functionMaxMemoryUsed} MB`,valueLabel:l,children:(0,t.jsx)(sz,{format:e=>`${e} MB`,max:s.functionMemorySize,used:s.functionMaxMemoryUsed})}):null}function sV(e){let{event:s}=e,{data:r}=(0,tr.useSelectedLog)(),{deploymentId:a}=r??{},l=-1!==s.durationMs&&("serverless"===s.source||"serverless-middleware"===s.source),{getFunctionMetadata:o}=(0,tP.useFunctionMetadata)("serverless"===s.source||"serverless-middleware"===s.source?a:void 0),{getProjectUrl:n}=(0,e8.useDashboardNavigation)(),i=o(s.route),d=!i&&!s.functionRuntime&&("serverless"===s.source||"serverless-middleware"===s.source),c=null;return(s.functionRuntime?c=sq(s.functionRuntime):i?.type==="lambda"&&(c=sq(i.lambda.runtime)),c&&l)?(0,t.jsx)(s0,{contextActions:c?.text.includes("Node.js")?[{icon:(0,t.jsx)(eZ.SettingsGear,{color:"gray-900",size:16}),label:"Configure Node.js Version",href:n("/settings/build-and-deployment#node.js-version")}]:void 0,isLoading:d,label:"Runtime",value:c?.text,children:c?.reactNode}):null}function sU(e){let{event:s}=e,r=(0,c.useToasts)(),{handleFilter:a}=s9(),{concurrency:l,invocationId:o}=s;return void 0===l||l<1?null:(0,t.jsx)(s0,{label:(0,t.jsx)(t.Fragment,{children:"Peak Concurrency"}),contextActions:[{icon:(0,t.jsx)(x.Filter,{}),label:"View concurrent requests",onClick:()=>o?a("invocationIds",o):void 0},{icon:(0,t.jsx)(eW.Copy,{}),label:"Copy Invocation ID",onClick:()=>{o&&((0,e7.copyToClipboard)(o),r.success("Invocation ID copied to clipboard"),C.analytics.track(b.AnalyticsEvent.LOGS_CONTEXT_ACTION_CLICKED,{field:"Copy Invocation ID",action:"Copy"}))}}],value:`${l} Request${1===l?"":"s"}`})}function sZ(e){let{event:r,onClick:a,groupLog:l,projectId:o,children:n,additionalInfo:i,hasExternalApiAccess:d}=e,c=(0,tt.useO11yNavigation)(),{handleFilter:u}=s9(),p=(0,h.useParams)(),{data:m}=(0,sE.useDashboardDeployment)({teamSlug:p?.teamSlug,projectName:p?.project,deploymentId:l.deploymentId},{revalidateOnFocus:!1,revalidateOnReconnect:!1}),x=(0,sm.useServerFlag)("enable-logs-show-cache-details",!1),{pathType:g,source:f,httpStatus:j,cache:v,invocationId:y}=r,C=!!(m?.config?.functionType!=="standard"&&y&&("serverless"===f||"serverless-middleware"===f)),b=null,w=f,_="",S="",N=!1;"serverless"===f?(w="Function Invocation","background_func"===g?(w="ISR Function Invocation",b=(0,t.jsx)(G.FunctionSquare,{color:"gray-900",size:16}),_=i?.isServingRevalidation?"Dynamic Rendering":"Background Revalidation",N=!0):"middleware"===g?(b=(0,t.jsx)(H.FunctionMiddleware,{color:"gray-900",size:16}),w="Middleware"):b=(0,t.jsx)(G.FunctionSquare,{color:"gray-900",size:16})):"middleware"===g?(b=(0,t.jsx)(H.FunctionMiddleware,{color:"gray-900",size:16}),w="Middleware"):"edge-function"===f?(b=(0,t.jsx)(W.FunctionEdge,{color:"gray-900",size:16}),w="Edge Function Invocation"):"static"===f?(b=(0,t.jsx)(U,{color:"gray-900",size:16}),w="Cache","PRERENDER"===v?(w="ISR Cache",b=(0,t.jsx)(eV.DataCache,{color:"gray-900",size:16})):"HIT"===v&&(S=""),"partial_prerender"===g&&(w="Cache",_="Partial Prerender")):"external"===f?(b=(0,t.jsx)(Z.ArrowGlobe,{color:"gray-800",size:16}),w="Rewrite"):"redirect"===f?(b=(0,t.jsx)(Q.ArrowRight,{color:"gray-800",size:16}),w="Redirect"):b=(0,t.jsx)(eH.Eye,{color:"gray-900",size:16});let k=(0,t.jsx)(ti.StatusCodeBadge,{className:"shrink !flex-row-reverse",full:200!==j,statusCode:j}),L="serverless"===f||"edge-function"===f,T="static"===f&&"MISS"!==v,E=(0,s.useMemo)(()=>[{icon:(0,t.jsx)(eH.Eye,{className:"mr-2 shrink-0 text-gray-800"}),label:"Open in Observability",href:c(`/route/${encodeURIComponent(r.route)}`,{removeExistingParams:!0,additionalParams:"edge-function"===r.source?{type:"edge"}:void 0})}],[c,r.route,r.source]),M=(0,s.useMemo)(()=>{try{let e=new URLSearchParams(r.targetQuery??"");return{...sS(r.route)?{[r.route]:null}:{},...Object.fromEntries(e.entries())}}catch{return{}}},[r.route,r.targetQuery]);return(0,t.jsxs)(sW,{description:(0,t.jsxs)(t.Fragment,{children:[S,k]}),icon:b,isFluidEnabled:C,onClick:a,subtitle:_,title:w,event:r,children:[n,sS(r.route)&&L&&"middleware"!==g&&(0,t.jsx)(s0,{contextActions:E,label:"Route",onFilter:()=>u("routes",r.route),value:r.route,children:(0,t.jsx)(te.RouteHighlighter,{route:r.route})}),sS(v)&&T&&(0,t.jsx)(s0,{label:"Status",onFilter:()=>u("caches",v),value:v}),"external"===f&&r.externalRewriteTargetHost&&r.externalRewriteTargetPath&&(0,t.jsx)(s0,{label:"Target",value:`${r.externalRewriteTargetHost}${r.externalRewriteTargetPath}`}),"redirect"===f&&r.redirectLocation&&(0,t.jsx)(s0,{label:"Redirect Location",value:r.redirectLocation}),x&&T&&Object.keys(M).length>0&&(0,t.jsx)(tz,{title:"Key",params:M,hideCopyButton:!0}),x&&T&&(0,t.jsx)(sD,{requestId:l.requestId,projectId:o??"",eventTime:r.timestamp}),x&&N&&(0,t.jsx)(t.Fragment,{children:(0,t.jsx)(s4,{requestId:l.requestId,projectId:o??"",eventTime:r.timestamp,isServingRevalidation:i?.isServingRevalidation})}),!C&&(0,t.jsx)(sV,{event:r}),(0,t.jsx)(sH,{event:r}),!C&&(0,t.jsx)(sG,{isFluidEnabled:C,event:r}),"static"!==f&&"HIT"!==v&&"STALE"!==v&&"external"!==f&&"redirect"!==f&&d&&(0,t.jsx)("div",{className:"p-2",children:(0,t.jsx)(tB,{enableDataCacheMetrics:!0,endTime:new Date(new Date(r.timestamp).getTime()+Number(r.durationMs??5e3)),projectId:o??"",requestId:l.requestId,source:f,startTime:new Date(r.timestamp),pathType:g})})]})}function sQ(e){let{events:a,groupLog:l,projectId:o,hasExternalApiAccess:n}=e,i=(0,s.useMemo)(()=>{let e=[...a].sort((e,t)=>{let s=new Date(e.timestamp).getTime(),r=new Date(t.timestamp).getTime(),a="middleware"===e.pathType,l="middleware"===t.pathType,o="static"===e.source||"redirect"===e.source||"external"===e.source,n="static"===t.source||"redirect"===t.source||"external"===t.source;return a&&n?-1:l&&o?1:s===r?"background_func"===e.pathType?1:"background_func"===t.pathType?-1:0:s-r}),t=Math.max(...e.map(e=>"background_func"===e.pathType?e.httpStatus:-1));return e.filter(e=>"background_func"!==e.pathType||"static"!==e.source).map(e=>"background_func"===e.pathType?{...e,httpStatus:t}:e)},[a]);return 0===a.length?(0,t.jsx)(sL,{direction:"up",children:(0,t.jsx)(ti.RequestInProgressBadge,{})}):(0,t.jsx)(r.Stack,{direction:"column",gap:0,children:i.map((e,r)=>{var a,d,c,u;let p,m,x,h=r===i.length-1,g=null,f=i[r-1],j=!i.some(e=>"static"===e.source&&"prerender"===e.pathType&&"REVALIDATED"!==e.cache)&&"serverless"===e.source&&"background_func"===e.pathType;if("partial_prerender"!==e.pathType||h)if(sN(e))g=h?(0,t.jsx)(sT,{hasFunctionCrashed:l.hasFunctionCrashed,requestDurationMs:l.requestDurationMs??0}):(0,t.jsx)(sL,{direction:"up",through:"dashed",children:(0,t.jsx)(ti.RequestFinishedBadge,{hasFunctionCrashed:l.hasFunctionCrashed,requestDurationMs:l.requestDurationMs??0})});else if(h){let s=f&&sN(f)&&"background_func"===e.pathType,r=f&&"MISS"===f.cache&&"serverless"===f.source&&"middleware"!==f.pathType&&"background_func"===e.pathType,o=200===(a=e.httpStatus)||404===a||301===a||308===a||307===a||302===a;g=s||r?o?(0,t.jsx)(sL,{className:"mb-2",direction:"up",lineClassName:"border-dashed",children:(0,t.jsx)(ti.DataCacheUpdatedBadge,{})}):null:j?(0,t.jsxs)("div",{className:"",children:[(0,t.jsx)(sL,{direction:"up",through:o?"dashed":void 0,children:(0,t.jsx)(ti.RequestFinishedBadge,{hasFunctionCrashed:l.hasFunctionCrashed,requestDurationMs:l.requestDurationMs??0})}),o?(0,t.jsx)(sL,{className:"h-5",direction:"up",lineClassName:"border-dashed",children:(0,t.jsx)(ti.DataCacheUpdatedBadge,{})}):null]}):(0,t.jsx)(sT,{hasFunctionCrashed:l.hasFunctionCrashed,requestDurationMs:l.requestDurationMs??0})}else g=(0,t.jsx)(sL,{direction:"straight"});else g="STALE"===e.cache||"PRERENDER"===e.cache||"HIT"===e.cache?(0,t.jsx)(sL,{direction:"up",through:!0,children:(0,t.jsx)(ti.ResponseStreamingStartedBadge,{})}):(0,t.jsx)(sL,{direction:"up",through:"dashed"});let v=(d=e,c=f,u=l,p=c?.region,m=d.region,x=u.clientRegion,sX(d)?null:(c&&sX(c)&&(p=x),s6(d.region)&&"middleware"!==d.pathType&&p!==m&&x!==m)?m:null);return(0,t.jsxs)(s.default.Fragment,{children:[v&&(0,t.jsx)(sL,{direction:"both",className:"-mt-2",lineClassName:f&&sX(f)?"border-dashed h-[30px]":"",children:(0,t.jsx)(ti.RegionBadge,{region:v})}),(0,t.jsx)(sZ,{additionalInfo:{isServingRevalidation:j},event:e,groupLog:l,hasExternalApiAccess:n,projectId:o}),g]},`${e.timestamp}-${e.source}-${r}`)})})}function sX(e){return"prerender"===e.pathType&&"static"===e.source||"streaming_func"===e.pathType&&"static"===e.source}function sJ(e){let a,{logGroup:l}=e,{timestamp:o,clientUserAgent:n,events:i,domain:d,requestPath:c,deploymentId:p,requestId:m,requestSearchParams:x,environment:g,branch:f,traceId:j,sessionId:v,clientRegion:y}=l,C=(0,h.useParams)(),{data:b}=(0,M.useProject)(C?.project),{team:w}=(0,ev.useTeam)(),S=b?.id,N=(0,tt.useO11yNavigation)(),{getProjectUrl:k}=(0,e8.useDashboardNavigation)(),L=m.split("::").at(-1)??m,{data:T}=(0,sE.useDashboardDeployment)({deploymentId:p,teamSlug:C?.teamSlug,projectName:C?.project},{revalidateOnFocus:!1,revalidateOnReconnect:!1}),E=(0,ts.useDeploymentLink)(T),{isDeploymentEditable:D}=(0,ei.usePageConfig)(),{handleFilter:I}=s9(),F=(0,s.useMemo)(()=>[{icon:(0,t.jsx)(eU.External,{size:16}),label:"Visit Path",onClick:()=>window.open(`https://${d}${c}`,"_blank","noopener")},{icon:(0,t.jsx)(eH.Eye,{}),label:"Open in Observability",href:N(`/requestPath/${encodeURIComponent(c)}`,{removeExistingParams:!0})}],[N,c,d]),q=(0,s.useMemo)(()=>[{icon:(0,t.jsx)(eZ.SettingsGear,{size:16}),label:"Configure Rules",href:k("/firewall/configure")}],[k]),A=(0,s.useMemo)(()=>[{icon:(0,t.jsx)(eQ.Linked,{size:16}),label:"Open Deployment",href:E}],[E]),{data:R}=(0,ed.useRollingRelease)({teamIdOrSlug:w?.id,projectSlug:S}),O=R?.rollingRelease!==null,B=!1;O&&"production"===g&&(R?.rollingRelease?.state==="ACTIVE"&&p===R.rollingRelease.canaryDeployment?.id?(a="Current Canary",B=!0):R?.rollingRelease?.state==="ACTIVE"&&p===R.rollingRelease.currentDeployment?.id?(a="Current Base",B=!0):(R?.rollingRelease?.state,a="Unspecified"));let P=new Date(o);return(0,t.jsxs)(r.Stack,{className:(0,u.clsx)("min-h-full flex flex-col pb-4"),tabIndex:-1,children:[(0,t.jsxs)("div",{className:"flex-1 px-3",children:[(0,t.jsxs)("div",{className:"ml-1 flex items-center justify-between gap-2 p-1",children:[(0,t.jsx)(ti.RequestStartedBadge,{}),(0,t.jsx)(t8.TimestampTooltip,{content:{timestamp:P.getTime()},showRelativeToNow:!0,children:(0,t.jsx)("span",{className:"text-right font-mono text-[13px] leading-tight",children:(0,t.jsxs)("span",{children:[(0,t.jsxs)("span",{className:"uppercase text-gray-900",children:[(0,e0.format)(P,"MMM dd")," ",(0,e0.format)(P,"HH:mm:ss"),(0,t.jsxs)("span",{className:"text-gray-900",children:[".",(0,e0.format)(P,"SS")]})]}),(0,t.jsx)("span",{className:"inline-bock ml-1.5 rounded-sm px-1 py-px font-mono text-gray-900",children:(0,e0.format)(P,"OO")})]})})})]}),(0,t.jsxs)(sW,{children:[(0,t.jsx)(s0,{label:"Request ID",onFilter:()=>I("requestIds",L,{override:!0}),value:L||"No request ID"}),(0,t.jsx)(s0,{contextActions:F,label:"Path",onFilter:()=>I("requestPaths",c),value:c,children:(0,t.jsx)(s$,{requestPath:c})}),(0,t.jsx)(s0,{label:"Host",onFilter:()=>I("domains",d),value:d}),sS(n)&&(0,t.jsx)(s0,{label:"User Agent",value:n}),Object.keys(x).length>0&&(0,t.jsx)(tz,{title:"Search Params",params:x}),sS(j)&&sS(v)&&(0,t.jsx)(s0,{label:"Trace ID",onFilter:()=>I("traceIds",j),value:j}),sS(v)&&(0,t.jsx)(s0,{label:"Session ID",onFilter:()=>I("sessionIds",v),value:v})]}),s6(y)?(0,t.jsx)(sL,{direction:"both",children:(0,t.jsx)(ti.RegionBadge,{isEdgeRegion:!0,region:y})}):(0,t.jsx)(sL,{direction:"straight"}),(0,t.jsx)(sW,{contextActions:q,description:(0,t.jsx)("span",{className:"px-1",children:"Allowed"}),icon:(0,t.jsx)(eG.FirewallFlame,{color:"gray-900",size:16}),title:"Firewall"}),(0,t.jsx)(sL,{direction:"straight"}),(0,t.jsx)(sQ,{events:i,groupLog:l,hasExternalApiAccess:!0,projectId:S})]}),(0,t.jsxs)("div",{className:"mt-4 border-t px-4 pt-4",children:[(0,t.jsx)(_.Text,{className:"mb-2 pl-2",weight:500,children:"Deployment Information"}),(0,t.jsx)(s0,{contextActions:A,isLoading:!T,label:"Deployment ID",onFilter:D?()=>I("deploymentIds",p):void 0,value:p}),sS(g)&&(0,t.jsx)(s0,{label:"Environment",onFilter:()=>I("environments",g),value:g}),a&&(0,t.jsx)(s0,{label:"Rolling Release",onFilter:B?()=>I("deploymentIds",p):void 0,value:a}),sS(f)&&(0,t.jsx)(s0,{label:"Branch",onFilter:()=>I("branches",f),value:f})]})]})}function sK(e){let{onClose:a,onDown:l,onUp:o,...n}=e,{requestMethod:i,requestPath:d,statusCode:c}=n,[m,x]=(0,s.useState)(!1);return(0,t.jsxs)(r.Stack,{className:(0,u.clsx)(tl.default.root,"dark:bg-background-200"),"data-testid":(0,p.tid)("group-logs","details-panel"),direction:"column",gap:0,children:[(0,t.jsx)(sA,{isScrolled:m,onClose:a,onDown:l,onUp:o,requestMethod:i,requestPath:d,responseStatusCode:c}),(0,t.jsx)("div",{onScroll:e=>{x(e.currentTarget.scrollTop>0)},className:"flex-1 overflow-y-auto",children:(0,t.jsx)(sJ,{logGroup:n})})]})}function sY(e){let{icon:s,label:r,onClick:a,href:l}=e,o=(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)("span",{className:"mr-2 flex size-4 shrink-0 items-center text-gray-900",children:s}),r]});return l?(0,t.jsx)(e2.MenuLink,{className:"flex items-center",href:l,onMouseUp:()=>a?.(),children:o}):(0,t.jsx)(i.MenuItem,{className:"flex items-center",icon:!0,onClick:a,children:o})}function s0(e){let{label:r,value:n,valueLabel:i,isLoading:d=!1,children:p,onFilter:m,contextActions:h=[],styleProps:g={},valueClassName:f}=e,j=(0,c.useToasts)(),v=i??r,y=(0,s.useCallback)(()=>{n&&!d&&"string"==typeof v&&((0,e7.copyToClipboard)(n),j.message(`${v} copied to clipboard`))},[v,n,j,d]),w=(0,s.useCallback)(e=>{"string"==typeof v&&C.analytics.track(b.AnalyticsEvent.LOGS_CONTEXT_ACTION_CLICKED,{field:v,action:e})},[v]);return(0,t.jsx)("div",{className:"border-b py-1 last:border-none",children:(0,t.jsxs)(o.MenuContainer,{position:"bottom-start",children:[(0,t.jsxs)(l.MenuButton,{className:"flex min-h-[32px] w-full cursor-pointer overflow-visible rounded-sm border-none bg-transparent py-1 pl-0.5 pr-1 hover:bg-gray-100 focus:bg-gray-100 focus:outline-none [&>span]:flex [&>span]:w-full [&>span]:items-center [&>span]:justify-between [&>span]:gap-4",disabled:d,style:g,variant:"unstyled",children:[(0,t.jsx)(_.Text,{as:"dt",color:"gray-900",style:{flexShrink:0},children:r}),(0,t.jsx)(ef.Skeleton,{as:"dd",className:(0,u.clsx)(tl.default.logDetailRowSkeleton,"!flex"),show:d,children:(0,t.jsx)("span",{className:(0,u.clsx)("truncate font-mono !text-[13px] text-gray-1000",f),title:n,children:p||n})})]}),(0,t.jsxs)(a.Menu,{width:Math.max(200,70+7*Math.max(...h.map(e=>e.label.length))),children:[m&&(0,t.jsx)(sY,{icon:(0,t.jsx)(x.Filter,{}),label:"Add Filter",onClick:()=>{m(),w("Add Filter")}}),h.map(e=>(0,t.jsx)(sY,{...e,onClick:()=>{e.onClick?.(),w(e.label)}},e.label)),"string"==typeof v&&(0,t.jsx)(sY,{icon:(0,t.jsx)(eW.Copy,{}),label:`Copy ${v}`,onClick:()=>{y(),w("Copy")}})]})]})})}function s1(e){let{error:s}=e,{maxRetention:a}=(0,ey.useUserRetention)();return(0,t.jsxs)(r.Stack,{align:"center",className:tl.default.noLogsSelected,direction:"column",gap:5,children:[(0,t.jsx)(r.Stack,{flex:"1 0 auto",justify:"center",children:(0,t.jsxs)(r.Stack,{align:"center",gap:3,justify:"center",children:[(0,t.jsx)(ta,{}),(0,t.jsx)(_.Text,{align:"center",color:"inherit",children:s?.name==="ExceedsBillingLimitError"?s.message:"Error loading selected log or the selected log does not exist, please try again"})]})}),(0,t.jsx)(r.Stack,{className:tl.default.setupLogDrain,children:(0,t.jsxs)(_.Text,{color:"inherit",size:12,children:["To store logs for longer than ",(0,ex.formatDuration)(a),", set up a Log Drain.",(0,t.jsxs)(e5.Link,{className:tl.default.learnMore,href:"/docs/deployments/logs",tab:!0,children:["Learn more ",(0,t.jsx)(eU.External,{align:"top",size:16})]})]})})]})}function s2(e){let{onClose:s}=e;return(0,t.jsxs)(r.Stack,{className:tl.default.root,"data-testid":(0,p.tid)("group-logs","details-panel"),direction:"column",gap:0,children:[(0,t.jsxs)(r.Stack,{align:"center",className:"ml-px p-4",direction:"row",gap:1,justify:"space-between",children:[(0,t.jsx)("div",{className:"flex items-center justify-center gap-1 overflow-hidden p-1",children:(0,t.jsx)(ef.Skeleton,{className:"w-16",show:!0,children:(0,t.jsx)(_.Text,{className:tl.default.title,lineHeight:16,size:13,children:"GET"})})}),(0,t.jsxs)(r.Stack,{align:"center",direction:"row",gap:2,children:[(0,t.jsx)(r.Stack,{direction:"row",children:(0,t.jsx)("div",{className:tl.default.buttonRule})}),(0,t.jsx)(d.Button,{"aria-label":"Close",onClick:s,shape:"square",size:"small",svgOnly:!0,touchEventWorkaround:!0,type:"tertiary",children:(0,t.jsx)(eY.Cross,{color:"gray-700",size:20})})]})]}),(0,t.jsx)("div",{className:"flex-1 overflow-y-auto",children:(0,t.jsxs)(r.Stack,{className:"min-h-full flex flex-col pb-4",tabIndex:-1,children:[(0,t.jsxs)("div",{className:"flex-1 px-3",children:[(0,t.jsxs)("div",{className:"flex items-center justify-between gap-2 px-1 py-2",children:[(0,t.jsx)(ti.RequestStartedBadge,{}),(0,t.jsx)(ef.Skeleton,{className:"w-48",show:!0,children:(0,t.jsx)("span",{className:"text-right text-[13px] tabular-nums leading-tight",children:"Loading timestamp..."})})]}),(0,t.jsxs)(sW,{children:[(0,t.jsx)(s0,{isLoading:!0,label:"Request ID",value:"Loading"}),(0,t.jsx)(s0,{isLoading:!0,label:"Path",value:"Loading"}),(0,t.jsx)(s0,{isLoading:!0,label:"Host",value:"Loading"}),(0,t.jsx)(s0,{isLoading:!0,label:"User Agent",value:"Loading"})]}),(0,t.jsx)(sL,{direction:"both",children:(0,t.jsx)(ti.AnatomyBadge,{className:"font-normal text-gray-800 text-sm",icon:(0,t.jsx)(ti.GlobeSmallIcon,{className:"text-gray-800"}),children:(0,t.jsxs)("div",{className:"w-full flex gap-1",children:[(0,t.jsx)("span",{children:"Received in"})," ",(0,t.jsx)(ef.Skeleton,{show:!0,children:"Region"})]})})}),(0,t.jsx)(sW,{description:(0,t.jsx)(ef.Skeleton,{className:"w-16",show:!0,children:(0,t.jsx)("span",{children:"Allowed"})}),icon:(0,t.jsx)(eG.FirewallFlame,{color:"gray-800",size:16}),title:"Firewall"}),(0,t.jsx)(sL,{direction:"straight"}),(0,t.jsxs)(sW,{description:(0,t.jsx)(ef.Skeleton,{className:"w-24",show:!0,children:(0,t.jsx)("span",{children:"Description"})}),icon:(0,t.jsx)(ef.Skeleton,{height:16,width:16}),title:(0,t.jsx)(ef.Skeleton,{show:!0,children:"Function Invocation"}),children:[(0,t.jsx)(s0,{isLoading:!0,label:(0,t.jsx)(ef.Skeleton,{show:!0,children:"Route"}),value:"Loading"}),(0,t.jsx)(s0,{isLoading:!0,label:(0,t.jsx)(ef.Skeleton,{show:!0,children:"Runtime"}),value:"Loading"}),(0,t.jsx)(s0,{isLoading:!0,label:(0,t.jsx)(ef.Skeleton,{show:!0,children:"Execution Duration"}),value:"Loading"}),(0,t.jsx)(s0,{isLoading:!0,label:(0,t.jsx)(ef.Skeleton,{show:!0,children:"Memory Used / Maximum"}),value:"Loading"})]})]}),(0,t.jsxs)("div",{className:"mt-4 border-t px-4 pt-4",children:[(0,t.jsx)(_.Text,{className:"mb-2 pl-2",weight:500,children:"Deployment Information"}),(0,t.jsx)(s0,{isLoading:!0,label:"Deployment ID",value:"Loading"}),(0,t.jsx)(s0,{isLoading:!0,label:"Environment",value:"Loading"}),(0,t.jsx)(s0,{isLoading:!0,label:"Branch",value:"Loading"})]})]})})]})}function s3(e){let{children:r,event:a}=e,[l,o]=(0,s.useState)(!1);return(0,t.jsxs)("div",{className:"rounded-md overflow-hidden text-gray-800 px-2 cursor-pointer",children:[(0,t.jsxs)("button",{type:"button",className:"w-full flex items-center justify-between py-2 text-xs bg-inherit cursor-pointer",onClick:()=>o(!l),children:[(0,t.jsxs)("div",{className:"flex items-center gap-1",children:[(0,t.jsx)(eX.Fluid,{color:"gray-700",className:"size-3"}),(0,t.jsx)(_.Text,{color:"gray-800",size:12,weight:400,children:"Fluid"})]}),(0,t.jsxs)("div",{className:"flex items-center gap-3",children:[a?.functionMaxMemoryUsed&&a.functionMaxMemoryUsed>0&&a?.functionMemorySize&&a.functionMemorySize>0&&(0,t.jsxs)("div",{className:(0,u.clsx)("flex items-center gap-2 text-gray-500 transition-all duration-100",l&&"opacity-0 translate-y-1"),children:[(0,t.jsx)(s5,{usage:a.functionMaxMemoryUsed,max:a.functionMemorySize}),(0,t.jsxs)("span",{className:"text-gray-900 text-xs font-regular font-mono",children:[a.functionMaxMemoryUsed," MB"]})]}),(0,t.jsx)(eJ.ChevronDown,{color:"gray-900",size:12,className:(0,u.clsx)("transform transition-transform",{"rotate-180":l})})]})]}),(0,t.jsx)(e$.AnimatePresence,{initial:!1,children:l&&(0,t.jsx)(eP.motion.div,{initial:"collapsed",animate:"open",exit:"collapsed",variants:{open:{opacity:1,height:"auto"},collapsed:{opacity:0,height:0}},transition:{duration:.3,ease:[.04,.62,.23,.98]},className:"overflow-hidden",children:(0,t.jsx)("div",{className:"border-gray-200 space-y-1",children:r})},"content")})]})}let s5=e=>{let{usage:s,max:r}=e,a=r>0?Math.max(0,Math.min(100,s/r*100)):0;return(0,t.jsx)("div",{className:"w-[2px] h-[10px] rounded-full bg-gray-300 flex items-end overflow-hidden",children:(0,t.jsx)("div",{className:(0,ej.cn)("w-full bg-gray-900 rounded-full",a>80&&"bg-amber-700",a>99&&"bg-red-700"),style:{height:`${a}%`}})})},s9=()=>{let{setState:e}=(0,D.useLogsQueryState)();return{handleFilter:(0,s.useCallback)(function(t,s){let{replace:r=!1,override:a=!1,additionalParams:l={}}=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};e({[t]:[s],...l},r,a)},[e])}};function s6(e){return sS(e)&&""!==e&&e in e6.regions}function s4(e){let{requestId:s,projectId:r,eventTime:a,isServingRevalidation:l}=e,{loading:o,data:n}=sM({requestId:s,projectId:r,eventTime:a}),i=l?"Invocation Reason":"Revalidation Reason";if(o)return(0,t.jsx)(s0,{label:i,value:"Loading...",isLoading:!0});let d=n?.[0]?.triggeringTag;return d?(0,t.jsxs)(s0,{label:i,value:d,children:["Tag"," ",(0,t.jsx)("span",{className:"inline-flex max-w-full cursor-pointer overflow-hidden rounded-sm border border-gray-300 text-xs font-mono p-1",children:d})]}):l?(0,t.jsx)(s0,{label:i,value:"ISR Cache Miss",valueClassName:"font-sans"}):(0,t.jsx)(s0,{label:i,value:"Time-based",valueClassName:"font-sans"})}var s8=e.i(3327755),s7=e.i(1991452),re=e.i(3734840),rt=e.i(6357175),rs=e.i(3162826),rr=e.i(6881349),ra=e.i(7797615),rl=e.i(2458511);function ro(e,t){let[s,r]=function(e,t){let s=e=>/\s/.exec(e),r=t-1,a=t;for(;r>=0&&!s(e[r]);)r-=1;for(r=Math.max(0,r+1);a<e.length&&!s(e[a]);)a+=1;return a=Math.max(r,a),[r,a]}(e,t);return e.substr(s,r)+e.substr(r)}function rn(e,t,s,r){return void 0!==r&&r!==t?e.substr(0,t)+s+e.substr(r):e.substr(0,t)+s+e.substr(t)}let ri=["requestId","sessionId","traceId","deploymentId","invocationId"];function rd(){let e=(0,s7.useRouter)(),{state:{levels:r,domains:a,deploymentDomains:l,deploymentIds:o,sources:n,requestTags:i,routes:d,requestPaths:c,statusCodes:u,searchQuery:m,requestIds:x,requestMethods:h,caches:g,environments:f,branches:j,sessionIds:v,traceIds:y,invocationIds:C,live:b},setState:w}=(0,D.useLogsQueryState)(),{trackFilterUse:_}=z(),{isDeploymentEditable:S}=(0,ei.usePageConfig)(),N=et;S&&(N=ee);let{isLoading:k}=(0,to.useGroupLogs)(),[L,T]=(0,s.useState)(null),[E,M]=(0,s.useState)(""),[I,F]=(0,s.useState)(!0),[A,R]=(0,s.useState)(""),[O,B]=(0,s.useState)(0),$=(0,s.useRef)(null),W=(0,s.useRef)({}),H=(0,s.useRef)(null),G=(0,s.useRef)(null),V=(0,s.useRef)({query:{levels:[],sources:[],requestTags:[],deploymentDomains:[],deploymentIds:[],domains:[],routes:[],requestPaths:[],requestIds:[],requestMethods:[],statusCodes:[],caches:[],environments:[],branches:[],sessionId:[],traceIds:[]},searchQuery:""}),U=(0,rt.useDebouncedCallback)(e=>M(e),300),[Z,Q]=(0,s.useState)(!1);(0,s.useEffect)(()=>{let e=s8.daumtools.userAgent();Q("safari"===e?.browser?.name)},[]);let X=(0,s.useCallback)(e=>{R(e),$.current?.setValue(e)},[]),J=(0,s.useMemo)(()=>L?.attributeName==="source"||L?.attributeName==="requestTags"||L?.attributeName==="level"||L?.attributeName==="statusCode"||L?.attributeName==="cache"||L?.attributeName==="requestMethod"||L?.attributeName==="environment",[L]),K=(0,s.useMemo)(()=>!!L?.attributeName&&ri.includes(L.attributeName),[L]),{data:Y,isLoading:es}=q({attributeName:!L||K?null:L.attributeName,attributeNameSearchQuery:E,levels:L?.attributeName==="level"?void 0:r,caches:L?.attributeName==="cache"?void 0:g,requestMethods:L?.attributeName==="requestMethod"?void 0:h,domains:L?.attributeName==="domain"?void 0:a,deploymentDomains:L?.attributeName==="deploymentDomain"?void 0:l,sources:L?.attributeName==="source"?void 0:n,requestTags:L?.attributeName==="requestTags"?void 0:i,routes:L?.attributeName==="route"?void 0:d,requestPaths:L?.attributeName==="requestPath"?void 0:c,statusCodes:L?.attributeName==="statusCode"?void 0:u,environments:L?.attributeName==="environment"?void 0:f,branches:L?.attributeName==="branch"?void 0:j,sessionIds:L?.attributeName==="sessionId"?void 0:v,traceIds:L?.attributeName==="traceId"?void 0:y,invocationIds:L?.attributeName==="invocationId"?void 0:C}),{data:er,isLoading:ea}=q({attributeName:"environment",domains:a,deploymentDomains:l,deploymentIds:o,sources:n,requestTags:i,routes:d,requestMethods:h,levels:r,statusCodes:u,requestPaths:c,caches:g,branches:j,sessionIds:v,traceIds:y,invocationIds:C}),el=(er?.rows??[]).reduce((e,t)=>e+t.total,0),eo=(0,s.useMemo)(()=>{if(L?.attributeName!=="requestId")return Y?.rows?.map(e=>({label:String(e.attributeValue),value:String(e.attributeValue)}))},[L,Y]),en=(0,s.useCallback)(()=>{R(""),w({levels:void 0,sources:void 0,requestTags:void 0,deploymentDomains:void 0,deploymentIds:void 0,domains:void 0,routes:void 0,requestPaths:void 0,searchQuery:"",requestIds:void 0,requestMethods:void 0,statusCodes:void 0,caches:void 0,preset:null,environments:void 0,branches:void 0,sessionIds:void 0,traceIds:void 0,invocationIds:void 0})},[w]),ed=(0,s.useCallback)(()=>{let e={levels:[],sources:[],requestTags:[],deploymentDomains:[],deploymentIds:[],domains:[],routes:[],requestPaths:[],requestIds:[],requestMethods:[],statusCodes:[],caches:[],environments:[],branches:[],sessionIds:[],traceIds:[],invocationIds:[]},t=(H.current?.value||"").split(" "),s=t.filter(e=>!N.find(t=>e.includes(`${t.name}:`))&&!/^\s*$/.test(e)).join(" ");return t.map(e=>{if(e.includes(":")){let t=e.indexOf(":"),s=e.slice(0,t),r=e.slice(t+1),a=N.find(e=>e.name===s);if(""!==r&&a)return{name:ru(a.attributeName),filterValue:r.split(",")}}return null}).filter(e=>null!==e).forEach(t=>{let{name:s,filterValue:r}=t;s in e?e[s]=[...e[s],...r]:e[s]=r}),{query:e,searchQuery:s}},[N]);(0,s.useEffect)(()=>{ea&&$.current?.close()},[ea]),(0,s.useEffect)(()=>{let e=e=>{let t=document.activeElement,s=t&&["input","select","textarea"].includes(t.tagName.toLowerCase());"/"!==e.key||!H.current||t&&s||(e.preventDefault(),H.current.focus({preventScroll:!0}))};return document.addEventListener("keydown",e),()=>{document.removeEventListener("keydown",e)}},[]),(0,s.useEffect)(()=>{let e=H.current;if(e&&!Z){let t=()=>{B(e.scrollLeft)};return e.addEventListener("scroll",t),window.addEventListener("resize",t),()=>{e.removeEventListener("scroll",t),window.removeEventListener("resize",t)}}},[Z]),(0,s.useEffect)(()=>{let t={levels:r,deploymentDomains:l,deploymentIds:o,sources:n,requestTags:i,domains:a,routes:d,requestPaths:c,requestIds:x,requestMethods:h,statusCodes:u,caches:g,environments:f,branches:j,sessionIds:v,traceIds:y,invocationIds:C},s="";(0,re.default)(W.current,e.query)||setTimeout(()=>{let r=Object.keys({...e.query,searchQuery:m}).filter(e=>e in t||"searchQuery"===e&&m);0===r.length?X(""):(r.forEach(e=>{if("searchQuery"===e&&m){s+=`${m.replaceAll("+"," ")} `;return}let r=function(e){if("requestTags"===e)return e;let t=0;return"branches"===e?t=-2:e.endsWith("s")&&(t=-1),e.slice(0,t)}(e),a=N.find(e=>e.attributeName===r);a&&t[e].length>0&&(s+=`${a.name}:${t[e].join(",")} `)}),X(s))}),W.current=e.query},[e.query,r,X,l,o,m,n,i,a,d,c,x,N,h,u,g,f,j,v,y,C]);let ec=(0,s.useCallback)(()=>{let{query:e,searchQuery:t}=ed();w({...e,searchQuery:t,preset:null}),t&&t!==V.current.searchQuery?_({eventTrigger:"search bar",filter:"searchQuery",value:[""]}):Object.keys(e).forEach(t=>{e[t].length>V.current.query[t].length&&_({eventTrigger:"search bar",filter:t,value:P.includes(t)?e[t]:Array(e[t].length).fill("")})}),V.current={query:e,searchQuery:t}},[w,ed,_]),eu=(0,s.useCallback)(()=>{let e=H.current?.selectionStart||0,t=ro(H.current?.value||"",e);if(t.includes(":")){let[e]=t.split(":"),s=N.find(t=>t.name===e);s&&T(s)}else T(null);M("")},[N]),ep=(0,s.useCallback)((e,t)=>{let s=H.current?.selectionStart||0;if(L&&!J)return e;let r=t=>{let s=(0,eS.matchSorter)(e,t,{keys:["value","label"]}),r=e.find(e=>"confirm search"===e.label);return r&&s.unshift(r),s};if(L){let e=ro(t,s).split(" ")[0].replaceAll(":","$").replaceAll(",","$").split("$");return r(e[e.length-1].split(" ")[0])}if(t.includes(" ")){let e=ro(t,s),a=ro(t,s-e.length-1),l=!a.includes(":")&&!m.includes(a.split(" ")[0]);return(N.find(e=>a.includes(e.name)),l)?[]:r(e.split(" ")[0])}return r(t)},[L,m,J,N]),em=(0,s.useMemo)(()=>{if(!eo||!L||0===eo.length||"requestId"===L.attributeName)return null;F(!0);let{query:e}=ed(),t=e[ru(L.attributeName)];return eo.filter(e=>!t.includes(e.value))},[L,ed,eo]),ex=em&&L&&!es||E&&I&&L,eh=A.includes(":");return(0,t.jsxs)("div",{className:rl.default.comboboxWrapper,style:{"--word-gap":eh?"10px":"0px"},children:[(0,t.jsx)("label",{className:"geist-sr-only",htmlFor:"search-logs",children:"Search Logs"}),(0,t.jsxs)(rr.Combobox,{className:rl.default.combobox,filter:ep,noNegativeIndex:!0,noTextSelection:!0,onChange:e=>{let t=H.current?.selectionStart||0,s=H.current?.value||"";if($.current?.setSelectedIndex(0),!e)return;let r=N.find(t=>t.name===e.split(":")[0]);if(""===s){X(e),r&&T(r);return}if(r){let a=ro(s,t);if(s.includes(`${r.name}:`)){let e=s.split(" ").find(e=>e.includes(r.name))||"",{query:t}=ed(),l=t[ru(r.attributeName)].length>0;X(s.replace(e,`${e}${l?",":""}`).split(" ").filter(e=>e!==a).join(" ")),T(r);return}if(a){let r=s.slice(0,t-a.length),l=s.slice(t-a.length,s.length+a.length);X(r+(l=l.replace(a,e)))}else{let r=0===t;X(rn(s,t,e)),r&&setTimeout(()=>{H.current?.setSelectionRange(e.length,e.length)})}T(r);return}if(L){let r=ro(s,t).split(" ")[0].replaceAll(":","$").replaceAll(",","$").split("$"),a=r[r.length-1];if(a){let r=a.split(" ")[0],l=/^\s*$/.test(r),o=ro(s,t),n=o.split(":")[0];if(s.split(":").filter(e=>e.includes(n)).length>1){let t=s.split(" ").find(e=>e.includes(L.name))||"";X(s.replace(t,`${t},${e}`).split(" ").filter(e=>e!==o).join(" "))}else X(s.replace(l?" ":a,`${e} `))}else X(rn(s,t,`${e} `));$.current?.setSelectedIndex(-1),T(null),setTimeout(()=>{ec()})}},onChangeOpen:e=>{$.current?.setSelectedValue(null),!e&&(M(""),G.current||$.current?.close())},onClear:en,placeholder:ea||0===el||b?"Search logs…":`${(0,ra.abbreviateNumber)(el).toUpperCase()} total ${1===el?"log":"logs"} found...`,ref:$,shouldContinue:!0,children:[(0,t.jsx)(rr.Combobox.Input,{className:rl.default.input,"data-testid":(0,p.tid)("group-logs","search-input"),id:"search-logs",loading:!!(es&&L||k),onBlur:()=>{T(null)},onPaste:e=>{try{let t=e.clipboardData.getData("text/plain"),s=/[a-z0-9]{5}-\d{13}-[a-z0-9]{12}/i.exec(t),r=e.currentTarget,a=r.selectionStart||0,l=r.selectionEnd||a,o=r.value.substring(a,l);if(s&&!t.includes("requestId")&&(!r.value.includes("requestId:")||o.includes("requestId"))){e.preventDefault();let s=rn(r.value,a,`requestId:${t}`,l);X(s)}}catch(e){}},onChange:t=>{if(R(t.target.value),""===t.target.value){T(null);let t={levels:r,deploymentDomains:l,deploymentIds:o,sources:n,requestTags:i,domains:a,routes:d,requestPaths:c,requestIds:x,requestMethods:h,statusCodes:u,caches:g,environments:f,branches:j};Object.keys({...e.query,searchQuery:m}).filter(e=>e in t||"searchQuery"===e&&m).length>0&&(en(),X(""));return}X(t.target.value);let s=t.target.selectionStart||0;eu();let p=ro(t.target.value,s);if(p.includes(":")){let e=N.find(e=>e.name===p.split(":")[0]);if(e){let t=p.split(":")[1].split(",");U((t=t[t.length-1]).split(" ")[0]),T(e)}else T(null)}},onClick:eu,onKeyDown:e=>{let t=H.current?.value||"",s=G.current;if("Enter"===e.key&&s&&ec(),"ArrowLeft"===e.key||"ArrowRight"===e.key){let s=e.target.selectionStart||0;/^\s*$/.test(t.split("")[s-1])&&T(null)}},ref:H}),(0,t.jsx)(rr.Combobox.List,{className:rl.default.comboboxList,emptyMessage:(0,t.jsxs)("button",{className:rl.default.confirm,onClick:()=>{$.current?.close(),ec()},ref:G,type:"button",children:["Confirm search"," ",(0,t.jsx)("kbd",{className:rl.default.suffix,children:(0,t.jsx)(rs.CornerDownRight,{})})]}),hideOptions:!0,children:ex?(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(rp,{onSelect:()=>{$.current?.close(),ec()}}),em?em.map(e=>(0,t.jsx)(rr.Combobox.Option,{className:rl.default.option,value:e.value,children:`${e.value}`},e.value)):[]]}):(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(rp,{onSelect:()=>{$.current?.close(),ec()}},"first-option"),N.map(e=>(0,t.jsxs)(rr.Combobox.Option,{className:rl.default.option,value:`${e.name}:`,children:[(0,t.jsx)("span",{className:rl.default.filter,children:`${e.name}:`}),(0,t.jsx)("div",{className:rl.default.suggestions,children:e.suggestions.map(e=>(0,t.jsxs)("span",{children:["[",e,"]"]},e))})]},e.name))]})})]}),!Z&&(0,t.jsx)("div",{"aria-hidden":!0,className:rl.default.textOverlay,style:{transform:`translateX(-${O}px)`},children:A.split(/\s/).map((e,s)=>e.includes(":")?(0,t.jsxs)("span",{className:rl.default.highlight,children:[e," "]},e):(0,t.jsx)("span",{style:""===e&&0===s?{marginLeft:-4,marginRight:0}:{},children:e},`${e}${s}`))})]})}function rc(){return(0,t.jsxs)(rr.Combobox,{className:(0,u.clsx)(rl.default.combobox,"geist-show-on-desktop"),placeholder:"Search logs…",children:[(0,t.jsx)(rr.Combobox.Input,{className:rl.default.input,id:"search-logs"}),(0,t.jsx)(rr.Combobox.List,{className:rl.default.comboboxList})]})}function ru(e){return"requestTags"===e?e:"branch"===e?`${e}es`:`${e}s`}function rp(e){let{onSelect:s}=e;return(0,t.jsx)(rr.Combobox.Option,{label:"confirm search",onCustomSelect:s,value:"",children:(0,t.jsxs)(r.Stack,{className:"flex w-full flex-row justify-between",children:[(0,t.jsx)(_.Text,{weight:500,children:"Confirm search"})," ",(0,t.jsx)(rs.CornerDownRight,{})]})})}var rm=e.i(8510056),rx=e.i(6870754),rh=e.i(7437286);function rg(){let{state:{page:e},setState:a}=(0,D.useLogsQueryState)(),{data:l,isLoading:o,isValidating:n,size:i,setSize:d}=(0,to.useGroupLogs)(),c=(0,s.useRef)(null),u=(0,s.useRef)(void 0),m=(0,rh.useIntersectionObserver)(c,{rootMargin:"200px"}),x=l&&l.length>0,h=l?.[l.length-1].hasMoreRows,f=o||i>0&&l&&void 0===l[i-1],{team:j}=(0,g.useAccount)(),v=j?.billing?.plan??"hobby",{maxRetention:y}=(0,ey.useUserRetention)(),C=function(e,t){let s=(0,eh.sub)(Date.now(),e).getTime(),r=t?.[t.length-1].rows;if(!r||0===r.length)return!0;let a=new Date(r[r.length-1].timestamp).getTime(),l=new Date(r[0].timestamp).getTime();return!!(a&&a>=s&&l&&l>=s)}(y,l),b=(0,s.useCallback)(()=>{!o&&!n&&x&&h&&C&&a({page:e+1},!0)},[x,h,o,n,e,a,C]);return(0,s.useEffect)(()=>{d(e)},[e]),(0,s.useEffect)(()=>{m?.isIntersecting&&!u.current&&b(),u.current=m?.isIntersecting},[m?.isIntersecting,b]),(0,t.jsx)(r.Stack,{align:"center",children:(0,t.jsx)("div",{"data-testid":(0,p.tid)("group-logs","load-more-logs"),ref:c,style:{padding:"var(--geist-gap) 0",visibility:void 0===l?"hidden":"visible",minWidth:"12rem"},children:h&&C&&(!n||f)||void 0===l?(0,t.jsx)(rx.LoadMoreButton,{disabled:!1,loading:f||void 0===l,noGap:!0,onClick:b}):(!1===h||!C)&&(0,t.jsx)("div",{style:{padding:"var(--geist-gap)"},children:(0,t.jsx)(_.Text,{className:t7.default.screenReaderSelect,style:{color:"var(--accents-5)"},tabIndex:0,children:C||"enterprise"===v?"No more logs to show within selected timeline":"The older logs have expired. You can upgrade your plan to store more logs"})})})})}var rf=e.i(5431818),rj=e.i(615673);let rv=(0,s.forwardRef)(function(e,s){let{showSkeleton:r=!1,onScroll:a}=e;return r?(0,t.jsx)(rb,{}):(0,t.jsx)(ry,{onScroll:a,ref:s})}),ry=(0,s.forwardRef)(function(e,r){let{onScroll:a}=e,{setState:l,state:{selectedLogId:o,panelState:n}}=(0,D.useLogsQueryState)(),{data:i,error:d}=(0,to.useGroupLogs)(),c=tn(),u=!i,[p,m]=(0,s.useState)({rows:[],rowsIdSet:new Set});(0,s.useEffect)(()=>{let e=function e(t){if(0===t.length)return[];if(1===t.length)return t[0];if(t.length>2){let s=Math.floor(t.length/2);return e([e(t.slice(0,s)),e(t.slice(s))])}let[s,r]=t,a=[],l=0,o=0;for(;l<s.length&&o<r.length;){let e=s[l],t=r[o],n=new Date(t.timestamp).getTime()-new Date(e.timestamp).getTime();n<0?(a.push(e),l++):(n>0?a.push(t):(a.push(e),l++),o++)}return a.concat(s.slice(l)).concat(r.slice(o))}((i||[]).map(e=>e.rows??[]));m(t=>{let{rowsIdSet:s}=t;return{rows:e.map(e=>({...e,isNew:!s.has(e.requestId)})),rowsIdSet:new Set(e.map(e=>e.requestId))}})},[i]);let x=(0,s.useMemo)(()=>{if(!c.length||0===p.rows.length)return p.rows;let e=c.map(e=>e.toLowerCase()),t=p.rows.filter(t=>{let s=t.logs.some(t=>e.some(e=>t.message.toLowerCase().includes(e))),r=e.some(e=>t.requestPath.toLowerCase().includes(e)),a=e.some(e=>t.domain.toLowerCase().includes(e));return s||r||a});return t.length>0?t:p.rows},[p.rows,c]),h=(0,s.useCallback)(e=>{o===e.requestId?l({panelState:"closed"===n?"opened":"closed"}):l({selectedLogId:e.requestId})},[l,o,n]);if(d)return(0,t.jsx)(rC,{children:(0,t.jsx)(si,{error:d})});if(u)return(0,t.jsx)(rb,{});let g=x.length>0;return(0,t.jsx)(rC,{hasLogs:g,children:g?(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)("div",{className:rf.default.logRowsContainer,onScroll:a,ref:r,children:(0,t.jsx)("div",{className:rf.default.logRowsWrapper,style:{paddingTop:"var(--geist-space)"},children:(0,t.jsx)(st,{logRows:x,onRowSelect:h,selectedLogId:o})})}),(0,t.jsx)(rg,{})]}):(0,t.jsx)(sd,{})})});function rC(e){let{children:s,hasLogs:r=!1}=e;return(0,t.jsx)("div",{className:(0,u.clsx)(rj.default.container,{[rj.default.hasLogs]:r}),style:{position:"relative",zIndex:2,flex:1},children:s})}function rb(){return(0,t.jsx)("div",{style:{padding:"var(--geist-space) 0"},children:(0,t.jsx)(sa,{})})}var rw=e.i(4819890),r_=e.i(1793900),rS=e.i(198667);function rN(){var e;let t,{skip:s}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},{data:r}=(0,M.useProject)((0,E.useProjectIdOrName)()),{team:a,isLoading:l}=(0,g.useAccount)(),{deploymentDomains:o,deploymentIds:n,domains:i,levels:d,routes:c,sources:u,requestTags:p,startDate:m,endDate:x,searchQuery:h,requestIds:f,requestMethods:j,requestPaths:v,statusCodes:y,caches:C,environments:b,branches:w,live:_,myLogs:S,sessionIds:N,hasTraces:F,traceIds:q,invocationIds:A,useClickHouseLogs:R}=(0,D.useLogsApiParams)(),O=x??new Date,B=(e=m,(t=O.getTime()-e.getTime())<=(0,tL.default)("2m")?1:t<=(0,tL.default)("5m")?2:t<=(0,tL.default)("10m")?5:t<=(0,tL.default)("30m")?10:t<=(0,tL.default)("50m")?20:t<=(0,tL.default)("75m")?30:t<=(0,tL.default)("2.5h")?60:t<=(0,tL.default)("5h")?120:t<=(0,tL.default)("7.5h")?300:t<=(0,tL.default)("24h")?600:t<=(0,tL.default)("48h")?1200:t<=(0,tL.default)("75h")?1800:t<=(0,tL.default)("150h")?3600:t<=(0,tL.default)("300h")?7200:t<=(0,tL.default)("600h")?14400:t<=(0,tL.default)("1200h")?28800:t<=(0,tL.default)("1800h")?43200:86400);return{...(0,k.default)(()=>{if(s||l||!r)return;let e=null!==a?a.id:null;if(null===e)return;let t=(0,L.encode)({interval:B,startDate:m.getTime(),endDate:_?void 0:O.getTime(),searchQuery:(0,I.stringifyArrayContent)((0,I.tokenizeSearchQuery)(h)),projectId:r.id,deploymentDomain:rk(o),deploymentId:rk(n),domain:rk(i),level:rk(d),ownerId:e,source:rk(u),requestTags:rk(p),route:rk(c),requestPath:rk(v),requestMethod:rk(j),requestId:f.map(e=>e.split("::").pop()),statusCode:rk(y),cache:rk(C),environment:rk(b),branch:rk(w),myLogs:!!S||void 0,sessionId:rk(N),hasTraces:!!F||void 0,traceId:rk(q),invocationId:rk(A),useClickHouseLogs:R});return`${T.API_LOGS}/request-logs/timeseries${t}`},e=>(0,tm.fetchAPI)(e,{throwOnHTTPError:!0}),{refreshInterval:5e3*!!_,keepPreviousData:!0,revalidateOnFocus:_,revalidateOnReconnect:_}),interval:B}}function rk(e){if(0!==e.length)return e.join(",")}function rL(e){let{showSkeleton:a}=e,{setState:l}=(0,D.useLogsQueryState)(),{live:o,startDate:n,endDate:i}=(0,D.useLogsApiParams)(),c=(0,s.useRef)(null),{isLoading:u,mutate:p,isValidating:m}=(0,to.useGroupLogs)(),{mutate:x}=rN(),h=(0,s.useCallback)(()=>{u||c.current&&Date.now()-c.current<1e3||(c.current=Date.now(),l({refreshedAt:Date.now()}),p(),x())},[u,p,x,l]);return(0,t.jsxs)(r.Stack,{direction:"row",gap:2,children:[(0,t.jsx)(d.Button,{className:o?"!ring-1 ring-blue-700":"",disabled:a,onClick:()=>{!o&&window.scrollY>=80&&window.scrollTo(0,0),o&&l({startDate:n,endDate:i}),o||l({live:!0})},prefix:o?(0,t.jsx)(r_.PauseCircle,{className:"!text-blue-900"}):(0,t.jsx)(rw.PlayCircle,{}),type:"secondary",children:(0,t.jsx)("span",{className:o?"!text-blue-900":"",children:"Live"})}),(0,t.jsx)(d.Button,{"aria-label":"Refresh Logs",disabled:a||u,onClick:h,shape:"square",svgOnly:!0,type:"secondary",children:m?(0,t.jsx)(td.Spinner,{color:"var(--accents-5)",size:16}):(0,t.jsx)(rS.RefreshClockwise,{})})]})}var rT=e.i(8556491),rE=e.i(7957424),rM=e.i(1903055),rD=e.i(167223);function rI(){let e=null!==(0,h.useSearchParams)(),{state:{searchQuery:r,levels:a,domains:l,deploymentDomains:o,sources:n,requestTags:i,routes:d,requestPaths:c,statusCodes:u,requestMethods:m,caches:x,branches:g,sessionIds:f,traceIds:j,invocationIds:v,live:y},setState:C}=(0,D.useLogsQueryState)(),[b,w]=(0,s.useState)(""),[_,S]=(0,s.useState)(!1),N=(0,s.useRef)(null),k=(0,rt.useDebouncedCallback)(e=>{C({searchQuery:e,preset:null})},300),{data:L,isLoading:T}=q({attributeName:"environment",domains:l,deploymentDomains:o,sources:n,requestTags:i,routes:d,requestMethods:m,levels:a,statusCodes:u,requestPaths:c,caches:x,branches:g,sessionIds:f,traceIds:j,invocationIds:v}),E=(L?.rows??[]).reduce((e,t)=>e+t.total,0);return(0,s.useEffect)(()=>{e&&!_&&w(r||"")},[e,r,_]),(0,s.useEffect)(()=>{let e=e=>{let t=document.activeElement,s=t&&["input","select","textarea"].includes(t.tagName.toLowerCase());"/"!==e.key||!N.current||t&&s||(e.preventDefault(),N.current.focus({preventScroll:!0}))};return document.addEventListener("keydown",e),()=>{document.removeEventListener("keydown",e)}},[]),(0,t.jsxs)("div",{style:{width:"100%"},children:[(0,t.jsx)("label",{className:"geist-sr-only",htmlFor:"search-logs",children:"Search Logs"}),(0,t.jsx)(rD.default,{"data-testid":(0,p.tid)("group-logs","search-input"),id:"search-logs",onBlur:()=>S(!1),onChange:e=>{k(e.target.value),w(e.target.value)},onFocus:()=>S(!0),placeholder:T||0===E||y?"Search logs…":`${(0,ra.abbreviateNumber)(E)} total ${1===E?"log":"logs"} found...`,ref:N,scrollOnClear:!1,value:_?b:r,width:"100%"})]})}function rF(){return(0,t.jsxs)("div",{className:"geist-show-on-mobile",style:{width:"100%"},children:[(0,t.jsx)("label",{className:"geist-sr-only",htmlFor:"search-logs",children:"Search Logs"}),(0,t.jsx)(rD.default,{"data-testid":(0,p.tid)("group-logs","search-input"),id:"search-logs",placeholder:"Search logs…",scrollOnClear:!1,width:"100%"})]})}var rq=e.i(9321858),rA=e.i(7230346),rR=e.i(512540);let rO="logsSidebarWidth";function rB(e){let{left:t,right:s,bottom:r}=e,a=rR.default.get(rO);if(a){let{left:e,right:l,bottom:o}=JSON.parse(a);rR.default.set(rO,JSON.stringify({left:t??e,right:s??l,bottom:r??o}))}else rR.default.set(rO,JSON.stringify({left:t??270,right:s??400,bottom:r??400}))}var rP=e.i(1764537),r$=e.i(5092691),rz=e.i(9639095),rW=e.i(2721340),rH=e.i(8876176),rG=e.i(9576862),rV=e.i(925863),rU=(0,rW.generateCategoricalChart)({chartName:"BarChart",GraphicalChild:rH.Bar,defaultTooltipEventType:"axis",validateTooltipEventTypes:["axis","item"],axisComponents:[{axisType:"xAxis",AxisComp:rP.XAxis},{axisType:"yAxis",AxisComp:rG.YAxis}],formatAxisMap:rV.formatAxisMap}),rZ=e.i(9840192),rQ=e.i(9108284);let rX={error:"var(--ds-red-700)",success:"hsla(var(--ds-gray-500-value), 0.8)"},rJ={error:"Error",success:"Success"};function rK(e){let{value:s,color:r,label:a}=e;return(0,t.jsxs)("div",{className:"flex flex-1 items-center gap-x-2",children:[(0,t.jsx)("div",{className:"size-1.5 rounded-full",style:{backgroundColor:r}}),(0,t.jsxs)("div",{className:"flex flex-1 justify-between gap-x-2",children:[(0,t.jsx)("span",{children:a})," ",(0,t.jsx)("span",{className:"font-medium tabular-nums",children:(0,ra.formatNumberCompact)(s)})]})]})}function rY(e){let{interval:s}=rN({skip:!0});return e.payload&&0!==e.payload.length&&e.active?(0,t.jsxs)("div",{className:"items-center rounded bg-background-100 px-0.5 py-1 text-xs shadow-tooltip",children:[(0,t.jsx)("div",{className:"flex flex-col gap-1 px-2 py-0.5",children:e.payload.map(e=>(0,t.jsx)(rK,{color:rX[e.dataKey],label:rJ[e.dataKey],value:Number(e.value)},e.dataKey))}),(0,t.jsx)("div",{className:"px-1 pt-0.5 text-center text-gray-900",children:(0,e0.format)(new Date(e.payload[0].payload.name),`HH:mm${s%60==0?"":":ss"} ${s>300?"iii MMM dd":""}`)})]},`ts-${e.label}`):null}function r0(){let[e,r]=(0,s.useState)(""),[a,l]=(0,s.useState)(""),[o,n]=(0,s.useState)("dataMin"),[i,d]=(0,s.useState)("dataMax"),{onSelectionChange:c}=(()=>{let{interval:e}=rN({skip:!0}),{setState:t}=(0,D.useLogsQueryState)();return{onSelectionChange:(0,s.useCallback)(s=>{if(1===s.length){let[r]=s;t({startDate:new Date(r.name),endDate:(0,tc.addSeconds)(new Date(r.name),e)});return}let r=s[0],a=s[s.length-1];"name"in r&&"name"in a&&t({startDate:new Date(r.name),endDate:new Date(a.name)})},[t,e])}})(),{startDate:p,endDate:m}=(0,D.useLogsApiParams)(),{data:x,interval:h,isLoading:g}=rN(),f=(0,s.useMemo)(()=>x&&x.data?x.data:(0,rQ.default)(p.getTime(),m?.getTime(),1e3*h).map(e=>({name:new Date(e).toISOString(),error:0,success:0})),[x,h,p,m]),j=(0,s.useCallback)(e=>{r(e.activeLabel||"")},[]),v=(0,s.useCallback)(t=>{e&&l(t.activeLabel||"")},[e]),y=(0,s.useCallback)(t=>{let s=a||t.activeLabel||"";if(!e||!s){r(""),l("");return}let[o,i]=[new Date(e).getTime(),new Date(s).getTime()];o>i&&([o,i]=[i,o]),n(o),d(i),r(""),l("")},[e,a]);return(0,s.useEffect)(()=>{"number"==typeof o&&"number"==typeof i&&(c(f.slice(o,i+1)),n("dataMin"),d("dataMax"))},[o,i,f,c]),(0,t.jsx)(rz.ResponsiveContainer,{height:54,width:"100%",children:(0,t.jsxs)(rU,{className:(0,u.clsx)({"!cursor-crosshair":!g,"pointer-events-none":g,"opacity-50 transition-opacity duration-500":x&&g}),data:f,margin:{top:15,right:4,bottom:-10},onMouseDown:j,onMouseMove:v,onMouseUp:y,children:[!g&&(0,t.jsx)(r$.Tooltip,{allowEscapeViewBox:{y:!0},animationDuration:0,content:rY,cursor:{fill:"var(--ds-gray-300)"},position:{y:5}}),(0,t.jsx)(rH.Bar,{animationDuration:0,dataKey:"error",fill:rX.error,fillOpacity:1,isAnimationActive:!1,stackId:"grouped",width:2}),(0,t.jsx)(rH.Bar,{animationDuration:0,dataKey:"success",fill:rX.success,fillOpacity:1,isAnimationActive:!1,stackId:"grouped",width:2}),e&&a?(0,t.jsx)(rZ.ReferenceArea,{strokeOpacity:.3,x1:e,x2:a}):null,(0,t.jsx)(rP.XAxis,{axisLine:{stroke:"var(--ds-gray-300)"},interval:"preserveStartEnd",minTickGap:300,style:{fontSize:"0.6rem"},tickFormatter:e=>{let t=f[e].name;return h<60?(0,e0.format)(new Date(t),"HH:mm:ss"):h<=600?(0,e0.format)(new Date(t),"HH:mm"):(0,e0.format)(new Date(t),"MMM dd")},tickLine:{stroke:"var(--ds-gray-300)"}})]})})}var r1=e.i(9166951);function r2(e){let{className:s,tooltipClassName:r}=e,{state:a,setState:l}=(0,D.useLogsQueryState)();return(0,t.jsx)(t0.Tooltip,{className:r,desktopOnly:!0,text:"Show requests from this browser",children:(0,t.jsxs)(d.Button,{"aria-label":"Enable My Logs",className:(0,u.clsx)("*:overflow-visible",a.myLogs&&"geist-active !bg-gray-100 !ring-1 !ring-gray-1000",s),"data-active":a.myLogs,onClick:()=>{let e=!a.myLogs;l({myLogs:e,preset:null}),C.analytics.track(b.AnalyticsEvent.LOGS_CONTEXT_ACTION_CLICKED,{field:"my-logs-toggle",action:e?"Enable My Logs":"Disable My Logs"})},shape:"square",svgOnly:!0,type:"secondary",children:[(0,t.jsx)(r1.User,{className:(0,u.clsx)(a.myLogs&&"translate-y-[-3px]","transition-transform duration-100")}),(0,t.jsx)("div",{className:(0,u.clsx)("absolute bottom-1.5 left-1/2 size-[3px] -translate-x-1/2 rounded-full bg-gray-1000","transition-all duration-100",a.myLogs?"translate-y-0 opacity-100":"translate-y-0.5 opacity-0")})]})})}var r3=e.i(6097977);function r5(e){let{className:s,tooltipClassName:r}=e,{state:a,setState:l}=(0,D.useLogsQueryState)();return(0,t.jsx)(t0.Tooltip,{className:r,desktopOnly:!0,text:"Show requests that have traces",children:(0,t.jsxs)(d.Button,{"aria-label":"Enable Has Traces",className:(0,u.clsx)("*:overflow-visible",a.hasTraces&&"geist-active !bg-gray-100 !ring-1 !ring-gray-1000",s),"data-active":a.hasTraces,onClick:()=>{let e=!a.hasTraces;l({hasTraces:e,preset:null}),C.analytics.track(b.AnalyticsEvent.LOGS_CONTEXT_ACTION_CLICKED,{field:"has-traces-toggle",action:e?"Enable Has Traces":"Disable Has Traces"})},shape:"square",svgOnly:!0,type:"secondary",children:[(0,t.jsx)(t6.Traces,{className:(0,u.clsx)(a.hasTraces&&"translate-y-[-3px]","transition-transform duration-100")}),(0,t.jsx)("div",{className:(0,u.clsx)("absolute bottom-1.5 left-1/2 size-[3px] -translate-x-1/2 rounded-full bg-gray-1000","transition-all duration-100",a.hasTraces?"translate-y-0 opacity-100":"translate-y-0.5 opacity-0")})]})})}var r9=e.i(3748432),r6=e.i(60582),r4=e.i(7837522),r8=e.i(7780974),r7=e.i(7589392);function ae(e){let{sidebarWidth:r,...a}=e,{project:l}=(0,h.useParams)()??{},o=(0,M.useProject)(l),{trackLogPageVisit:n}=z(),{data:{environments:i},isLoading:d}=(0,rE.useAllEnvironments)(o.data?.id??"");return(0,s.useEffect)(()=>{n()},[n]),(0,s.useEffect)(()=>{let e=document.documentElement.style.overscrollBehaviorY,t=document.body.style.overscrollBehaviorY;return document.documentElement.style.overscrollBehaviorY="none",document.body.style.overscrollBehaviorY="none",()=>{document.documentElement.style.overscrollBehaviorY=e,document.body.style.overscrollBehaviorY=t}},[]),(0,rM.default)(o.error),(0,t.jsx)(ei.PageConfigProvider,{...a,children:(0,t.jsx)(sx.GroupLogsProvider,{children:(0,t.jsx)(at,{allEnvironments:i,isLoadingEnvs:d,sidebarWidth:r})})})}function at(e){var w;let _,{isLoadingEnvs:S,allEnvironments:N,sidebarWidth:k}=e,{state:L,setState:T}=(0,D.useLogsQueryState)(),{selectedLogId:E,panelState:M}=L,{team:I,isLoading:F}=(0,g.useAccount)(),q=(0,f.useIsMobile)(),A=(0,f.useIsTablet)(),{topOffset:R}=(0,ei.usePageConfig)(),O=r6.IS_DASH&&A?0:R,[B,P]=(0,s.useState)(!1),{getExport:$}=(0,r3.useGroupLogsExport)(),{data:z}=(0,tr.useSelectedLog)(),{track:W}=(0,r4.useTrackActivity)(),H=(0,h.useParams)(),{can:G,isLoading:V}=(0,v.default)(),U=!I||G(y.Action.Read,y.Resource.Logs),Z=V||F,{success:Q}=(0,c.useToasts)(),[X,J]=(0,s.useState)(!1),K=I?.billing?.plan==="hobby",Y=I?.billing?.plan==="pro"&&"trialing"===I.billing.status,ee=G(y.Action.Create,y.Resource.Drain)&&!(K||Y),et=(0,sm.useServerFlag)("enable-marketplace-drains",!1),es=(0,s.useCallback)(e=>{W(r8.VercelActivityAction.DrainsModalConverted,{source:"logs-more-options",drainType:e.drainType,kind:e.kind,isLegacy:e.isLegacy}),H?.teamSlug&&H?.project&&Q({text:"Drain successfully added",action:"View project drains",actionHref:`/${H.teamSlug}/${H.project}/settings/drains`})},[W,H?.teamSlug,H?.project,Q]),er="auto"===M?(z?.logs.length||0)>0:"opened"===M;(0,s.useEffect)(()=>{er&&T({panelState:"auto"===M?"opened":M})},[er,M]);let ea=(0,s.useCallback)(()=>{T({selectedLogId:void 0})},[T]),el=(0,s.useRef)(null),eo=(0,s.useRef)(null),en=(0,s.useRef)(null),ed=(0,s.useRef)(null),ec=(0,s.useRef)(null),eu=(0,s.useRef)(null),ep=(0,s.useRef)(null),em=(0,s.useRef)(null),[ex,eh]=(0,s.useState)(k.left),[eg,ef]=(0,s.useState)(k.right),[ej,ev]=(0,s.useState)(k.bottom),[ey,eC]=(0,s.useState)(!1),eb=e=>{eh(e),rB({left:e})},ew=e=>{ef(e),rB({right:e})},e_=`${ex}px calc(100% - ${ex}px)`,eS=(w=e=>{let t=null!==ep.current;ep.current=e.currentTarget.scrollLeft,t||requestAnimationFrame(()=>{ec.current&&null!==ep.current&&(ec.current.scrollLeft=ep.current),ep.current=null})},_=(0,s.useRef)(0),e=>{let t=e.currentTarget.scrollLeft;t!==_.current&&(_.current=t,w(e))});(0,s.useEffect)(()=>{function e(){if(null===ed.current)return;let e=Math.max(O,ed.current.getBoundingClientRect().top),t=e+147;ed.current.style.height=`calc(100vh - ${e}px)`,eo.current&&(eo.current.style.top=`${t}px`),en.current&&(en.current.style.height=`calc(100vh - ${t}px)`)}return e(),window.addEventListener("scroll",e),()=>{window.removeEventListener("scroll",e)}},[O,E]);let eN=function(e,t){let[r,a]=(0,s.useState)(!1);return(0,s.useEffect)(()=>{let s=(0,j.default)(()=>{if(!t.current||!e.current)return;let{top:s}=t.current.getBoundingClientRect(),{bottom:r}=e.current.getBoundingClientRect();s<=r?a(!0):a(!1)},200);return window.addEventListener("scroll",s),()=>{window.removeEventListener("scroll",s)}},[e,t]),r}(ec,eu),[ek,eL]=(0,s.useState)(null),eT=`max(min(${eg}px, 50vw), 350px)`;return(0,t.jsxs)(r9.ConditionalNavigationMarker,{enabled:!S,phase:"content",label:"LogsMain",children:[(0,t.jsxs)("div",{className:"tailwind-preflight",style:{display:"flex",flexFlow:"column"},children:[U||Z||!I?null:(0,t.jsx)(rT.AdditionalPermissionsRequiredModal,{actionLabel:"view Runtime Logs",role:I.membership?.role,team:I,dataTestId:(0,p.tid)("group-logs","no-permissions-card")}),U||V?(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)("div",{style:{flexGrow:1},children:(0,t.jsxs)("div",{className:"block h-full md:grid",style:{gridTemplateColumns:e_},children:[(0,t.jsxs)("div",{className:"geist-hide-on-mobile",ref:el,style:{borderRight:"1px solid var(--accents-2)",position:"relative",zIndex:1},children:[(0,t.jsx)(rm.DraggableBorder,{element:el,onReset:()=>{eb(270)},onWidthChange:e=>{let t=Math.min(e,window.innerWidth/3);eb(t=t<230?0:t)},position:"right"}),(0,t.jsx)("div",{ref:ed,style:{position:"sticky",top:O,height:"100%",background:"var(--geist-background)",contain:"layout"},children:(0,t.jsx)("div",{className:"flex flex-col overflow-auto h-full p-3",tabIndex:-1,children:(0,t.jsx)(eI,{allEnvironments:N,isLoadingEnvs:S})})})]}),(0,t.jsxs)("div",{style:{display:"flex",flexFlow:"column",position:"relative",height:"100%",zIndex:2},children:[(0,t.jsxs)(r.Stack,{className:rA.default.logHeader,style:{background:"var(--geist-background)",position:"sticky",top:O,zIndex:3},children:[(0,t.jsxs)("div",{style:{padding:"var(--geist-gap-half) var(--geist-gap-half) 0 var(--geist-gap-half)"},children:[(0,t.jsxs)(r.Stack,{direction:{sm:"column",md:"column",lg:"row"},gap:2,children:[(0,t.jsxs)(r.Stack,{className:"grow",direction:"row",gap:2,children:[(0,t.jsx)(d.Button,{"aria-label":"filter sidebar",className:"hidden shrink-0 lg:block",onClick:()=>0===ex?eb(270):eb(0),shape:"square",svgOnly:!0,type:"secondary",children:(0,t.jsx)(x.Filter,{})}),(0,t.jsx)(r2,{tooltipClassName:"hidden lg:block shrink-0"}),(0,t.jsx)(r5,{tooltipClassName:"hidden lg:block shrink-0"}),(0,t.jsx)(s.Suspense,{fallback:(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(rF,{}),(0,t.jsx)(rc,{})]}),children:q?(0,t.jsx)(rI,{}):(0,t.jsx)(rd,{})})]}),(0,t.jsxs)(r.Stack,{direction:"row",gap:2,children:[(0,t.jsx)(eA,{onClick:()=>P(!0)}),(0,t.jsx)(r2,{className:"shrink-0",tooltipClassName:"lg:hidden"}),(0,t.jsx)(r5,{className:"shrink-0",tooltipClassName:"lg:hidden"}),(0,t.jsx)("div",{className:"flex-1 lg:hidden"}),(0,t.jsx)(rL,{showSkeleton:V}),(0,t.jsxs)(o.MenuContainer,{position:"bottom-end",children:[(0,t.jsx)(l.MenuButton,{"aria-label":"Query Actions",shape:"square",size:"small",style:{height:"40px",width:"40px"},svgOnly:!0,type:"secondary",children:(0,t.jsx)(m.MoreVertical,{})}),(0,t.jsxs)(a.Menu,{width:"160px",children:[Z?null:(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(i.MenuItem,{disabled:!ee,onClick:()=>{J(!0),W(r8.VercelActivityAction.DrainsModalOpened,{source:"logs-more-options"})},children:"Add Drain"}),(0,t.jsx)(n.MenuDivider,{})]}),(0,t.jsx)(i.MenuItem,{onClick:()=>{C.analytics.track(b.AnalyticsEvent.LOGS_CONTEXT_ACTION_CLICKED,{field:"global-dropdown",action:"Export Logs as CSV"}),eL("csv")},children:"Export to CSV"}),(0,t.jsx)(i.MenuItem,{onClick:()=>{C.analytics.track(b.AnalyticsEvent.LOGS_CONTEXT_ACTION_CLICKED,{field:"global-dropdown",action:"Export Logs as JSON"}),eL("json")},children:"Export to JSON"})]})]})]})]}),(0,t.jsx)(r0,{}),(0,t.jsx)(se,{ref:ec})]}),(0,t.jsx)("div",{className:(0,u.clsx)(rA.default.logGradient,{[rA.default.show]:eN})})]}),(0,t.jsx)(rv,{onScroll:eS,ref:eu,showSkeleton:V}),(0,t.jsxs)("div",{className:"fixed bottom-0 hidden transform-gpu border-t border-gray-300 bg-background-100 md:block",ref:em,style:{left:`calc(var(--sidebar-width, 0px) + ${ex}px)`,right:eT,height:er?400===ej?"min(400px, 35vh)":`max(min(70vh, ${ej}px), 240px)`:49,boxShadow:"var(--ds-shadow-large)",transition:ey?"none":"height 0.2s",display:E?"block":"none",zIndex:3},children:[er?(0,t.jsx)(rm.DraggableBorder,{element:em,onStartDrag:()=>{eC(!0)},onStopDrag:()=>{eC(!1)},onWidthChange:e=>{ev(e),rB({bottom:e})},position:"top"}):null,(0,t.jsx)(sb,{collapsed:!er,onToggleCollapse:()=>{T({panelState:er?"closed":"opened"})}})]})]}),E?(0,t.jsxs)("div",{className:"fixed bottom-0 right-0 hidden h-full translate-x-0 translate-y-0 transform-gpu overflow-y-auto border-t border-t-gray-400 bg-background-100 md:block z-[2]",ref:eo,style:{width:eT,boxShadow:"var(--ds-shadow-large)",top:247},children:[(0,t.jsx)(rm.DraggableBorder,{element:eo,onReset:()=>{ew(400)},onWidthChange:e=>{ew(Math.min(Math.max(e,400),window.innerWidth/2))},position:"left"}),(0,t.jsx)("div",{className:"hidden overflow-y-auto md:flex",ref:en,children:(0,t.jsx)(sg.TraceViewerPanel,{className:"z-0 border-none",children:(0,t.jsx)(sO,{onClose:ea,selectedLogId:E})})})]}):null]})}),(0,t.jsx)(eF,{active:B,allEnvironments:N,isLoadingEnvs:S,onDismiss:()=>P(!1)}),(0,t.jsx)(sR,{onClose:ea,selectedLogId:E}),H?.teamSlug&&ee?(0,t.jsx)(r7.DrainModals,{isOpen:X,closeModal:()=>J(!1),teamSlug:H.teamSlug,projectIdOrSlug:H.project,onDrainCreated:es,drain:null,drainType:"logs",enableMarketplaceDrains:et}):null]}):null]}),ek?(0,t.jsx)(rq.GroupExportModal,{format:ek,getExport:$,onClose:()=>{eL(null)}}):null]})}e.s(["GroupLogs",()=>ae],6687520)}]);

//# sourceMappingURL=f218affc051c468f.js.map
//# debugId=f157ca1e-c6d6-541e-889b-1c325e0c8752
