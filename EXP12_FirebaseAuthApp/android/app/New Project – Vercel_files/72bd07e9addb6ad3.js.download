
!function(){try{var e="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:{},n=(new e.Error).stack;n&&(e._sentryDebugIds=e._sentryDebugIds||{},e._sentryDebugIds[n]="4a3eaf0d-4e5d-55b0-885e-ccab8ccb5b3f")}catch(e){}}();
(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,8530316,e=>{"use strict";var t=e.i(3911483),a=e.i(8042625),i=e.i(277234),s=e.i(4244280),n=e.i(5338940);function o(e){let{endDatetime:o,startDatetime:r,projectId:d,skip:u,buckets:l}=e,{isReady:g,team:c}=(0,n.useTeam)();return(0,t.default)(()=>g&&!u&&r&&o&&(!l||l.length)?`${s.API_USAGE_IMAGE_OPTIMIZATIONS}${(0,a.encode)({owner_id:c?.id,teamId:c?.id,projectId:d,buckets:l,from:"object"==typeof r?r.toISOString():new Date(r).toISOString(),to:"object"==typeof o?o.toISOString():new Date(o).toISOString()})}`:null,e=>(0,i.fetchAPI)(e),{revalidateIfStale:!1,revalidateOnFocus:!1,revalidateOnReconnect:!1,refreshInterval:void 0})}e.s(["useUsageImageOptimizations",()=>o])},3993304,7162201,e=>{"use strict";var t=e.i(3911483),a=e.i(8042625),i=e.i(277234),s=e.i(4244280),n=e.i(5338940),o=e.i(5140444),r=e.i(6696646),d=e.i(7917902),u=e.i(6272763);function l(e,t){let a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:u.sumAggregate,{team:i}=(0,d.useAccount)(),s=(0,r.useMemo)(()=>(0,u.calculateDataUsed)({type:e,data:t,aggregator:a}),[t,e,a]);return(0,u.calculateUsage)({team:i,type:e,used:s})}function g(e){let{endDatetime:r,startDatetime:d,projectId:l,skip:g=!1}=e,{isReady:c,team:m}=(0,n.useTeam)(),{user:f,isNorthstar:b}=(0,o.useUser)(),{data:p,isLoading:T,error:h}=(0,t.default)(()=>!g&&c&&f&&(!b||f.defaultTeamId||m)&&d&&r?`${s.API_USAGE_WEB_ANALYTICS}${(0,a.encode)({projectId:l,from:"object"==typeof d?d.toISOString():new Date(d).toISOString(),to:"object"==typeof r?r.toISOString():new Date(r).toISOString(),teamId:m?.id})}`:null,async e=>{let t=await (0,i.fetchAPI)(e);if(!Array.isArray(t))throw Error("Invalid response");return t},{revalidateIfStale:!1,revalidateOnFocus:!1,revalidateOnReconnect:!1,refreshInterval:void 0}),v=p??[],D=v.reduce((e,t)=>e+t.count,0);return{data:{rows:v,usage:(0,u.calculateUsage)({type:"webAnalyticsEvent",team:m,used:D})},isLoading:T,error:h}}e.s(["default",()=>l],7162201),e.s(["getHobbyPeriod",0,function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new Date,t=new Date(e);t.setDate(t.getDate()-30),t.setUTCHours(0,0,0,0);let a=new Date(e);return a.setUTCHours(23,59,59,999),{start:t,end:a}},"useUsageWebAnalytics",()=>g],3993304)},7391816,2053970,e=>{"use strict";var t=e.i(9100551),a=e.i(7917902),i=e.i(1670878),s=e.i(6696646),n=e.i(7162201),o=e.i(1683927),r=e.i(8530316),d=e.i(1803156);e.i(2243470);var u=e.i(696150),l=e.i(3993304);function g(e){let{start:t,end:a,include:i=["bandwidth","execution"]}=e,g=new Set(i),c=g.has("bandwidth")||g.has("execution"),m=g.has("images"),f=g.has("artifacts"),b=g.has("edgeMiddleware"),p=g.has("edgeFunctions"),T=g.has("builds"),h=g.has("monitoring"),v=g.has("edgeConfigReads")||g.has("edgeConfigWrites"),D=g.has("cronJobInvocations"),w=g.has("dataCacheBandwidth"),y=g.has("webAnalyticsEvent"),{data:_,isLoading:R}=(0,o.useUsageMetrics)({type:"requests",start:t,end:a,skip:!c}),{data:C,isLoading:I}=(0,o.useUsageMetrics)({type:"artifacts",start:t,end:a,skip:!f}),{data:S,isLoading:O}=(0,o.useUsageMetrics)({type:"edge",start:t,end:a,skip:!b}),{data:E,isLoading:U}=(0,o.useUsageMetrics)({type:"edge",start:t,end:a,skip:!p,edgeInvocationType:"edge-function"}),{data:x,isLoading:A}=(0,o.useUsageMetrics)({type:"monitoring",start:t,end:a,skip:!h}),{data:B,isLoading:M}=(0,o.useUsageMetrics)({type:"builds",start:t,end:a,skip:!T}),{data:L,isLoading:W}=(0,o.useUsageMetrics)({type:"edge_config",start:t,end:a,skip:!v}),{data:k,isLoading:q}=(0,r.useUsageImageOptimizations)({startDatetime:t,endDatetime:a,skip:!m}),{data:F,isLoading:z}=(0,o.useUsageMetrics)({start:t,end:a,type:"cron_jobs",skip:!D}),{data:Z,isLoading:N}=(0,o.useUsageMetrics)({start:t,end:a,type:"data_cache",skip:!w}),{data:j,isLoading:G}=(0,l.useUsageWebAnalytics)({startDatetime:t,endDatetime:a,skip:!y}),H=(0,s.useMemo)(()=>{var e;let t,a,i;return{images:(e=k?.data||[],t=(0,d.default)(e,"timestamp"),a=0,i=Object.keys(t).reduce((e,i)=>{let s,n=t[i];if(i.endsWith("Z"))s=u.DateTime.fromISO(i).toJSDate();else{let e=`${i.split(" ").join("T")}.000Z`;s=u.DateTime.fromISO(e).toJSDate()}let o=n.reduce((e,t)=>e+t.count,0),r=n.map(e=>({name:e.projectName,id:e.projectId,title:e.projectName,percent:o?e.count/o:0})).sort((e,t)=>t.percent-e.percent),d=r.slice(0,3).map(e=>({...e,percent:Math.round(100*e.percent)})),l=r.slice(3).reduce((e,t)=>({...e,percent:e.percent+t.percent}),{id:null,name:"",title:"Other",percent:0});return d.push({...l,percent:Math.round(100*l.percent)}),a+=o,e.push({date:s.getTime(),sum:o,0:o,1:0,2:0,breakdown:d}),e},[]),a?i:[])}},[k?.data]),P=(0,n.default)("images",H),J=(0,n.default)("artifacts",C),V=(0,n.default)("bandwidth",_),$=(0,n.default)("builds",B),K=(0,n.default)("execution",_),Y=(0,n.default)("edgeMiddleware",S),Q=(0,n.default)("edgeFunctions",E),X=(0,n.default)("monitoring",x),ee=(0,n.default)("edgeConfigReads",L),et=(0,n.default)("edgeConfigWrites",L),ea=(0,n.default)("cronJobInvocations",F),ei=(0,n.default)("dataCacheBandwidth",Z),es=(0,n.default)("dataCacheRevalidations",Z),en=j.usage,eo={artifacts:C,bandwidth:_,builds:B,execution:_,images:k,edgeMiddleware:S,edgeFunctions:E,monitoring:x,edgeConfigReads:L,edgeConfigWrites:L,cronJobInvocations:F,dataCacheBandwidth:Z,dataCacheRevalidations:Z,postgresDatabase:void 0,postgresComputeTime:void 0,postgresDataStorage:void 0,postgresDataTransfer:void 0,postgresWrittenData:void 0,storageRedisTotalCommands:void 0,storageRedisTotalBandwidthInBytes:void 0,storageRedisTotalDailyAvgStorageInBytes:void 0,storageRedisTotalDatabases:void 0,webAnalyticsEvent:en,analyticsUsage:void 0};return{metricsAvailable:i.map(e=>eo[e]).every(Boolean),artifactMeta:J,bandwidthMeta:V,buildsMeta:$,executionsMeta:K,imagesMeta:P,edgeMiddlewareMeta:Y,edgeFunctionsMeta:Q,monitoringMeta:X,edgeConfigReadsMeta:ee,edgeConfigWritesMeta:et,cronJobInvocationsMeta:ea,dataCacheBandwidthMeta:ei,webAnalyticsMeta:en,isLoading:R||I||O||U||A||M||W||q||z||N||G,dataCacheRevalidationsMeta:es}}let c={LOW:50,MEDIUM:75,HIGH:100},m={LOW:50,MEDIUM:75,HIGH:95},f={SERVERLESS:"serverless-functions",NETWORK:"networking",EDGE_MIDDLEWARE:"edge-middleware",EDGE_FUNCTIONS:"edge-functions",BUILDS:"builds",ARTIFACTS:"artifacts",IMAGES:"image-optimization",MONITORING:"monitoring",LOG_DRAINS:"log-drain"},b={[f.LOG_DRAINS]:{LOW:50,MEDIUM:75,HIGH:100}};function p(e){let{usage:t,override:a,type:i,THRESHOLD:s}=e,{percentage:n}=t,o=void 0===a?n??0:a;return o>=s.HIGH?{threshold:s.HIGH,percent:o,type:i}:o>=s.MEDIUM?{threshold:s.MEDIUM,percent:o,type:i}:o>=s.LOW?{threshold:s.LOW,percent:o,type:i}:{threshold:0,percent:o,type:i}}function T(e){let{data:t,overrides:a,THRESHOLD:i,thresholdOverrides:s,isReady:n}=e,o=function(e){let t=e[0];for(let a of e)a.percent>t.percent&&(t=a);return t}([p({THRESHOLD:i,usage:t.artifacts,type:f.ARTIFACTS,override:a.artifacts?Number(a.artifacts):void 0}),p({THRESHOLD:i,usage:t.bandwidth,type:f.NETWORK,override:a.bandwidth?Number(a.bandwidth):void 0}),p({THRESHOLD:i,usage:t.builds,type:f.BUILDS,override:a.builds?Number(a.builds):void 0}),p({THRESHOLD:i,usage:t.executions,type:f.SERVERLESS,override:a.executions?Number(a.executions):void 0}),p({THRESHOLD:i,usage:t.edgeMiddleware,type:f.EDGE_MIDDLEWARE,override:a.edgeMiddleware?Number(a.edgeMiddleware):void 0}),p({THRESHOLD:i,usage:t.edgeFunctions,type:f.EDGE_FUNCTIONS,override:a.edgeFunctions?Number(a.edgeFunctions):void 0}),p({THRESHOLD:i,usage:t.images,type:f.IMAGES,override:a.images?Number(a.images):void 0}),p({THRESHOLD:i,usage:t.monitoring,type:f.MONITORING,override:a.monitoring?Number(a.monitoring):void 0})]),r=s?.[o.type]??i;return o.threshold>=r.LOW?{isReady:n,shouldNotify:!0,threshold:o.threshold,percentage:o.percent,type:o.type}:{isReady:n,shouldNotify:!1,type:o.type}}function h(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],{account:s,isLoading:n}=(0,a.useAccount)(),o=(0,t.useSearchParams)(),r=!n,d=o?.get("trialUsageLimitArtifactsOverride")??void 0,u=o?.get("trialUsageLimitBandwidthOverride")??void 0,l=o?.get("trialUsageLimitBuildsOverride")??void 0,c=o?.get("trialUsageLimitExecutionsOverride")??void 0,f=o?.get("trialUsageLimitMiddlewareOverride")??void 0,p=o?.get("trialUsageLimitEdgeFunctionsOverride")??void 0,h=o?.get("trialUsageLimitImagesOverride")??void 0,v=o?.get("trialUsageLimitMonitoringOverride")??void 0,D=o?.get("trialUsageLimitLogDrainsOverride")??void 0,w=d||u||l||c||f||p||h||v||D,y=e||!w&&(!r||s?.billing?.plan!=="pro"||"trialing"!==s.billing.status||!s.billing.trial),{start:_,end:R}=(0,i.getBillingRange)(s),C=[];d||C.push("artifacts"),u||C.push("bandwidth"),l||C.push("builds"),c||C.push("execution"),f||C.push("edgeMiddleware"),p||C.push("edgeFunctions"),h||C.push("images"),v||C.push("monitoring"),D||C.push("logDrainsVolume");let{artifactMeta:I,bandwidthMeta:S,buildsMeta:O,executionsMeta:E,edgeMiddlewareMeta:U,edgeFunctionsMeta:x,imagesMeta:A,metricsAvailable:B,monitoringMeta:M}=g({start:_,end:R,include:y?[]:C});return s?.billing?.plan==="pro"&&"trialing"===s.billing.status&&s.billing.trial&&B&&r||w&&!n?T({data:{artifacts:I,bandwidth:S,builds:O,executions:E,edgeMiddleware:U,edgeFunctions:x,images:A,monitoring:M},overrides:{artifacts:d,bandwidth:u,builds:l,executions:c,edgeMiddleware:f,edgeFunctions:p,images:h,monitoring:v},THRESHOLD:m,thresholdOverrides:b,isReady:r}):{isReady:r,shouldNotify:!1}}function v(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],s=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],{account:n,isLoading:o}=(0,a.useAccount)(),r=(0,t.useSearchParams)(),d=!o,u=r?.get("hobbyUsageLimitArtifactsOverride")??void 0,l=r?.get("hobbyUsageLimitBandwidthOverride")??void 0,m=r?.get("hobbyUsageLimitBuildsOverride")??void 0,f=r?.get("hobbyUsageLimitExecutionsOverride")??void 0,b=r?.get("hobbyUsageLimitMiddlewareOverride")??void 0,p=r?.get("hobbyUsageLimitEdgeFunctionOverride")??void 0,h=r?.get("hobbyUsageLimitImagesOverride")??void 0,v=r?.get("hobbyUsageLimitDataCacheOverride")??void 0,D=u||l||m||f||b||p||h,w=e||!D&&(!d||n?.billing?.plan!=="hobby");0===s.length&&(u||s.push("artifacts"),l||s.push("bandwidth"),m||s.push("builds"),f||s.push("execution"),b||s.push("edgeMiddleware"),p||s.push("edgeFunctions"),h||s.push("images"),v||s.push("dataCacheBandwidth"));let{start:y,end:_}=(0,i.getBillingRange)(n),{artifactMeta:R,bandwidthMeta:C,buildsMeta:I,executionsMeta:S,edgeMiddlewareMeta:O,edgeFunctionsMeta:E,imagesMeta:U,metricsAvailable:x,monitoringMeta:A}=g({start:y,end:_,include:w?[]:s});return n?.billing?.plan==="hobby"&&d&&x||D&&!o?T({data:{artifacts:R,builds:I,bandwidth:C,executions:S,edgeMiddleware:O,edgeFunctions:E,images:U,monitoring:A},overrides:{artifacts:u,builds:m,bandwidth:l,executions:f,edgeMiddleware:b,edgeFunctions:p,images:h},THRESHOLD:c,isReady:d}):{isReady:d,shouldNotify:!1}}e.s(["HOBBY_THRESHOLDS",0,c,"LIMIT_TYPES",0,f,"TRIAL_THRESHOLDS",0,m,"TRIAL_THRESHOLD_OVERRIDES",0,b,"USAGE_TOAST_DISMISSAL_DURATION",0,"30 days","USAGE_TOAST_ID",0,"usage-limit"],2053970),e.s(["useHobbyUsageData",()=>v,"useTrialUsageData",()=>h],7391816)},205493,(e,t,a)=>{t.exports=function(e,t,a,i){for(var s=-1,n=null==e?0:e.length;++s<n;){var o=e[s];t(i,o,a(o),e)}return i}},1688292,(e,t,a)=>{var i=e.r(9835496);t.exports=function(e,t,a,s){return i(e,function(e,i,n){t(s,e,a(e),n)}),s}},1095905,(e,t,a)=>{var i=e.r(205493),s=e.r(1688292),n=e.r(8357529),o=e.r(4272098);t.exports=function(e,t){return function(a,r){var d=o(a)?i:s,u=t?t():{};return d(a,e,n(r,2),u)}}},1803156,(e,t,a)=>{var i=e.r(5930215),s=e.r(1095905),n=Object.prototype.hasOwnProperty;t.exports=s(function(e,t,a){n.call(e,a)?e[a].push(t):i(e,a,[t])})},5055462,e=>{"use strict";let t=!1;function a(){return!!t||"undefined"!=typeof document&&!!document.hidden}window.addEventListener("beforeunload",()=>{t=!0,setTimeout(()=>{t=!1},50)}),e.s(["isUnloading",()=>a])},6807320,e=>{"use strict";var t=e.i(6468255),a=e.i(8735244),i=e.i(9100551),s=e.i(6696646);let n=0,o=new Map,r=null,d=null;function u(){let e=(0,i.usePathname)();return(0,s.useEffect)(()=>{n=0,o.clear(),r?.setHiding(),d&&clearTimeout(d)},[e]),null}function l(e){if(d&&clearTimeout(d),r=e,n>1){d=setTimeout(()=>{document.hidden||e.setMessage({key:"fetch-swr-loading",preserve:!0,text:(0,t.jsxs)("div",{style:{display:"flex"},children:[(0,t.jsx)(a.Spinner,{}),(0,t.jsx)("span",{children:"  Failed to load data, retrying…"})]})})},1e4);return}e.setHiding()}function g(e,t){!document.hidden&&(o.get(e)||(o.set(e,!0),++n,l(t)))}function c(e,t){o.get(e)&&(o.set(e,!1),--n,l(t))}e.s(["SWRResetState",()=>u,"recoverError",()=>c,"renderError",()=>g])},1683927,e=>{"use strict";var t=e.i(3911483),a=e.i(455575),i=e.i(8042625),s=e.i(277234),n=e.i(4244280),o=e.i(5338940),r=e.i(5140444),d=e.i(1717203),u=e.i(7557283),l=e.i(6807320),g=e.i(7432042),c=e.i(5055462);let m={bandwidth:["bandwidth_outgoing_bytes","bandwidth_incoming_bytes"],requests:["request_hit_count","request_miss_count"],invocations:["function_invocation_successful_count","function_invocation_error_count","function_invocation_timeout_count"],edgeFunctionExecutionUnits:["edge_function_execution_units"],execution:["function_execution_successful_gb_hours","function_execution_error_gb_hours","function_execution_timeout_gb_hours"],workerInvocations:["worker_invocation_count"],throttles:["function_invocation_throttle_count"],buildTime:["build_build_seconds","build_queued_seconds"],buildNumber:["build_completed_count","build_failed_count"],images:["images_sources_count"],artifactsTaskDuration:["artifacts_downloaded_task_duration_ms","artifacts_local_cache_hit_task_duration_ms"],artifactsSize:["artifacts_downloaded_size_bytes","artifacts_uploaded_size_bytes"],artifactsCount:["artifacts_downloaded_count","artifacts_uploaded_count"],monitoring:["monitoring_metric_count"],edgeConfigReads:["edge_config_reads"],edgeConfigWrites:["edge_config_writes"],postgresDatabase:["postgres_databases"],postgresComputeTime:["postgres_compute_seconds"],postgresDataTransfer:["postgres_transfer_bytes"],postgresWrittenData:["postgres_written_bytes"],storageRedisTotalCommands:["redis_commands"],storageRedisTotalBandwidthInBytes:["redis_bandwidth_max_bytes"],storageRedisTotalDatabases:["redis_databases"],cronJobInvocations:["cron_job_invocations"],dataCacheBandwidth:["data_cache_total_received_bytes","data_cache_total_sent_bytes"],dataCacheRevalidations:["data_cache_total_revalidates"]},f={workerExecutionAvg:["worker_execution_time_avg"],storageRedisTotalDailyAvgStorageInBytes:["redis_storage_max_avg_bytes"],postgresDataStorage:["postgres_storage_byte_hours"]},b={bandwidth:"bandwidth",requests:"requests",invocations:"function_invocations",execution:"function_execution",throttles:"function_throttle_count",workerExecutionAvg:"worker_execution_time_avg",workerInvocations:"worker_invocations",buildTime:"build_time",buildNumber:"build_count",images:"image_sources",artifactsSize:"artifacts_size_breakdown",artifactsCount:"artifacts_count_breakdown",artifactsTaskDuration:"artifacts_time_breakdown",monitoring:"monitoring",edgeConfigReads:"edge_config_reads",edgeConfigWrites:"edge_config_writes",postgresDatabase:"postgres_databases",postgresComputeTime:"postgres_compute_seconds",postgresDataStorage:"postgres_storage_byte_hours",postgresDataTransfer:"postgres_transfer_bytes",postgresWrittenData:"postgres_written_bytes",storageRedisTotalCommands:"redis_commands",storageRedisTotalBandwidthInBytes:"redis_bandwidth_max_bytes",storageRedisTotalDailyAvgStorageInBytes:"redis_storage_max_avg_bytes",storageRedisTotalDatabases:"redis_databases",cronJobInvocations:"cron_job_invocations",dataCacheBandwidth:"data_cache_bandwidth",dataCacheRevalidations:"data_cache_revalidations"},p=e=>({revalidateOnFocus:!1,revalidateOnReconnect:!1,refreshInterval:0,onError:(t,a)=>{let i=t.statusCode||t.status;404===i||403===i||"missing_team_param"===t.code||"cancelled"===t.message||"TypeError"===t.name||(0,c.isUnloading)()||"pending"===t.message||(console.table(t),(0,l.renderError)(a,e),console.error(t))},onSuccess:(t,a)=>{(0,l.recoverError)(a,e)},onErrorRetry:(e,t,a,i,s)=>{if("pending"===e.message)return setTimeout(i,3e3);((e,t,a)=>{let i;if(!(!(void 0===document.hidden||!document.hidden)||"cancelled"===e.message||(0,c.isUnloading)())&&!0!==e.missingToken&&!e.saml){switch(e.code){case"not_found":i=(0,g.default)("30s");break;case"network_error":i=(0,g.default)("10s");break;case"rate_limited":case"too_many_requests":i=(0,g.default)("60s");break;case"not_acceptable":return;default:i=~~((Math.random()+.5)*(1<<Math.min(a.retryCount,8)))*(0,g.default)("5s")}setTimeout(()=>void t(a),i)}})(e,i,s)}});function T(e,d){let{type:u,projectId:l=null,storeId:g=null,functionName:c=null,edgeConfigId:T=null,edgeInvocationType:h=null,sourceName:v=null,skip:D=!1,granularity:w,start:y,end:_}=e,{isReady:R,team:C}=(0,o.useTeam)(),{user:I,isNorthstar:S}=(0,r.useUser)(),O=(0,a.useToasts)();return(0,t.default)(()=>R&&I&&y&&_&&!D&&void 0!==l&&void 0!==c&&(!S||I.defaultTeamId||C)?function(e){let{type:t,projectId:a=null,storeId:s=null,functionName:o=null,edgeConfigId:r=null,edgeInvocationType:d=null,sourceName:u=null,granularity:l,start:g,end:c,teamId:m}=e;return`${n.API_USAGE}${(0,i.encode)({type:t,teamId:m,projectId:a,storeId:s,edgeConfigId:r,functionName:o,edgeInvocationType:d,sourceName:u,granularity:l,from:"object"==typeof g?g.toISOString():new Date(g).toISOString(),to:"object"==typeof c?c.toISOString():new Date(c).toISOString()})}`}({type:u,projectId:l,storeId:g,functionName:c,edgeConfigId:T,edgeInvocationType:h,sourceName:v,granularity:w,start:y,end:_,teamId:C?.id}):null,async e=>(function(e){let{data:t,from:a,to:i,team:s,queryContext:n}=e;if("pending"in t)throw Error("pending");let o=[];if(t.data.length)for(let e=0;e<t.data.length;e++)o.push(t.data[e]);let r={workerExecutionAvg:"2022-05-24T00:00:00.000Z",postgresDataStorage:"2023-04-01T00:00:00.000Z",storageRedisTotalDailyAvgStorageInBytes:"2023-04-01T00:00:00.000Z"},d={bandwidth:"2021-01-26T00:00:09.000Z",requests:"2021-01-26T00:00:09.000Z",invocations:"2021-02-16T00:00:00.000Z",edgeFunctionExecutionUnits:"2021-02-16T00:00:00.000Z",execution:"2021-02-16T00:00:00.000Z",workerInvocations:"2021-10-22T00:00:00.000Z",throttles:"2021-02-16T00:00:00.000Z",buildTime:"2021-02-19T00:00:00.000Z",buildNumber:"2021-02-19T00:00:00.000Z",images:"2021-07-01T00:00:00.000Z",artifactsTaskDuration:"2021-12-14T00:00:00.000Z",artifactsSize:"2021-12-14T00:00:00.000Z",artifactsCount:"2021-12-14T00:00:00.000Z",monitoring:"2023-03-06T00:00:00.000Z",edgeConfigReads:"2023-03-14T00:00:00.000Z",edgeConfigWrites:"2023-03-14T00:00:00.000Z",postgresDatabase:"2023-04-01T00:00:00.000Z",postgresComputeTime:"2023-04-01T00:00:00.000Z",postgresDataTransfer:"2023-04-01T00:00:00.000Z",postgresWrittenData:"2023-04-01T00:00:00.000Z",storageRedisTotalCommands:"2023-04-01T00:00:00.000Z",storageRedisTotalBandwidthInBytes:"2023-04-01T00:00:00.000Z",storageRedisTotalDatabases:"2023-04-01T00:00:00.000Z",cronJobInvocations:"2023-04-01T00:00:00.000Z",dataCacheBandwidth:"2023-05-01T00:00:00.000Z",dataCacheRevalidations:"2023-05-01T00:00:00.000Z",logDrainsVolume:"2024-05-02T00:00:00.000Z",analyticsUsage:"2021-01-01T00:00:00.000Z",...r},u={edge:new Date(t.lastUpdate).getTime(),builds:new Date(t.lastUpdate).getTime(),images:new Date(t.lastUpdate).getTime(),artifacts:new Date(t.lastUpdate).getTime(),monitoring:new Date(t.lastUpdate).getTime(),edgeConfigReads:new Date(t.lastUpdate).getTime(),edgeConfigWrites:new Date(t.lastUpdate).getTime(),postgresDatabase:new Date(t.lastUpdate).getTime(),postgresComputeTime:new Date(t.lastUpdate).getTime(),postgresDataStorage:new Date(t.lastUpdate).getTime(),postgresDataTransfer:new Date(t.lastUpdate).getTime(),postgresWrittenData:new Date(t.lastUpdate).getTime(),storageRedisTotalCommands:new Date(t.lastUpdate).getTime(),storageRedisTotalBandwidthInBytes:new Date(t.lastUpdate).getTime(),storageRedisTotalDailyAvgStorageInBytes:new Date(t.lastUpdate).getTime(),storageRedisTotalDatabases:new Date(t.lastUpdate).getTime(),cronJobInvocations:new Date(t.lastUpdate).getTime(),dataCacheBandwidth:new Date(t.lastUpdate).getTime(),dataCacheRevalidations:new Date(t.lastUpdate).getTime(),logDrainsVolume:new Date(t.lastUpdate).getTime(),analyticsUsage:new Date(t.lastUpdate).getTime()},l={bandwidth:[],requests:[],invocations:[],edgeFunctionExecutionUnits:[],execution:[],workerInvocations:[],workerExecutionAvg:[],throttles:[],buildTime:[],buildNumber:[],images:[],artifactsTaskDuration:[],artifactsSize:[],artifactsCount:[],monitoring:[],edgeConfigReads:[],edgeConfigWrites:[],postgresDatabase:[],postgresComputeTime:[],postgresDataStorage:[],postgresDataTransfer:[],postgresWrittenData:[],storageRedisTotalCommands:[],storageRedisTotalBandwidthInBytes:[],storageRedisTotalDailyAvgStorageInBytes:[],storageRedisTotalDatabases:[],cronJobInvocations:[],dataCacheBandwidth:[],dataCacheRevalidations:[],logDrainsVolume:[],analyticsUsage:[]},g={bandwidth:[],requests:[],invocations:[],edgeFunctionExecutionUnits:[],execution:[],workerInvocations:[],throttles:[],buildTime:[],buildNumber:[],images:[],artifactsSize:[],artifactsTaskDuration:[],artifactsCount:[],monitoring:[],edgeConfigReads:[],edgeConfigWrites:[],postgresDatabase:[],postgresComputeTime:[],postgresDataTransfer:[],postgresWrittenData:[],storageRedisTotalCommands:[],storageRedisTotalBandwidthInBytes:[],storageRedisTotalDatabases:[],cronJobInvocations:[],dataCacheBandwidth:[],dataCacheRevalidations:[],logDrainsVolume:[],analyticsUsage:[]},c={workerExecutionAvg:[],postgresDataStorage:[],storageRedisTotalDailyAvgStorageInBytes:[]},p={},T={};for(let e=0;e<o.length;e++){let t=o[e];for(let e in m){let a=new Date(t.first_event).getTime(),i={date:new Date(t.date).getTime(),sum:0,0:0,1:0,2:0};if((a||i.date)<Date.parse(d[e]))continue;let s=0;for(let a=0;a<m[e].length;a++){let n=a;i[n]=t[m[e][a]]||0,i.sum+=i[n],t.previous&&(s+=i[n],s-=t.previous[m[e][a]]??0),T[e]=T[e]??{},T[e][a]=(T[e][a]??0)+i[n]}g[e].push(i),p[e]=(p[e]||0)+s}for(let e in f){let a={date:new Date(t.date).getTime(),0:[0,0],1:[0,0],2:[0,0]};for(let i=0;i<f[e].length;i++){let s=(a.date>=Date.parse(r[e])?t[f[e][i]]:void 0)||[0,0];a[i]="number"==typeof s?[s,1]:s}c[e].push(a)}}let h="number"==typeof a?a:a.getTime(),v=h-(("number"==typeof i?i:i.getTime())-h);for(let e in m)new Date(d[e]).getTime()>v&&delete p[e];if(s&&T.buildTime?.[1]&&Math.round(T.buildTime[1]/3600)>=1&&l.buildTime.push({type:"tooManySecondsQueued",secondsQueued:T.buildTime[1],teamSlug:s.slug,warning:!0}),T.invocations?.[1]&&T.invocations[1]>=1&&l.invocations.push({type:"tooManyInvocationErrors",errorCount:T.invocations[1],warning:!0}),T.execution?.[1]&&T.execution[1]>=.01&&l.execution.push({type:"tooManyExecutionErrors",errorTime:T.execution[1],warning:!0}),T.images?.[0]?(!s||s.billing?.plan==="hobby")&&T.images[0]>1e3&&l.images.push({type:"aboveImagesFairUseLimit",optimizedImages:T.images[0],warning:!0}):l.images.push({type:"noImageData",warning:!0}),!s&&"edge"===n.type&&"middleware"===n.edgeInvocationType){let e={sum:0,count:0};for(let t of c.workerExecutionAvg){let{date:a,breakdown:i,...s}=t;for(let[t,a]of Object.values(s))e.sum+=t,e.count+=a}e.sum/e.count>5e4&&l.workerExecutionAvg.push({type:"aboveEdgeMiddlewareCpuTimeFairUseLimit",warning:!0})}let D=Object.entries(b),w=Object.entries({...g,...c});return D.forEach(e=>{let[a,i]=e;w.forEach(e=>{let[s,n]=e;if(s===a){let e=t.data.length-n.length;for(let a=0;a<t.data.slice(e).length;a++){let e=t.data[a].breakdown,s=e[i];e&&s&&(n[a].breakdown=s)}}})}),{from:new Date(a),to:new Date(i),granularity:t.granularity,change:p,started:d,lastUpdate:u,insight:l,...g,...c}})({data:await (0,s.fetchAPI)(e,{throwOnHTTPError:!0}),from:y,to:_,team:C,queryContext:{type:u,edgeInvocationType:h}}),{...p(O),...d})}function h(e){let{type:r,skip:d=!1,start:u,end:l,edgeInvocationType:g}=e,{isReady:c,team:m}=(0,o.useTeam)(),f=(0,a.useToasts)();return(0,t.default)(()=>c&&u&&l&&!d?`${n.API_USAGE}${(0,i.encode)({type:r,edgeInvocationType:g,teamId:m?.id,from:"object"==typeof u?u.toISOString():new Date(u).toISOString(),to:"object"==typeof l?l.toISOString():new Date(l).toISOString()})}`:null,async e=>{var t=await (0,s.fetchAPI)(e);let a={workerExecutionAvg:[]};for(let e of t.data){let t=new Date(e.date).getTime();a.workerExecutionAvg.push({date:t,data:e.worker_execution_time_avg})}return{from:new Date(u),to:new Date(l),granularity:t.granularity,lastUpdate:new Date(t.lastUpdate).getTime(),data:a}},p(f))}function v(e,a){let{isReady:r,team:l}=(0,o.useTeam)(),{isLoading:g,can:c}=(0,d.default)(),m=!g&&c(u.Action.Read,u.Resource.UsageCycle);return(0,t.default)(()=>!r||!m||e?.skip?null:`${n.API_USAGE}${(0,i.encode)({teamId:l?.id,cycles:"1"})}`,e=>(0,s.fetchAPI)(e,{throwOnHTTPError:!0}),a)}e.s(["useBillingCycles",()=>v,"useUsageConfig",0,p,"useUsageGroupByProjectMetrics",()=>h,"useUsageMetrics",()=>T],1683927)},6272763,e=>{"use strict";var t=e.i(7432042);let a={bandwidth:"bandwidth",execution:"serverlessFunctionExecution",images:"sourceImages",artifacts:"artifacts",edgeMiddleware:"edgeMiddlewareInvocations",edgeFunctions:"edgeFunctionExecutionUnits",monitoring:"monitoringMetric",edgeConfigReads:"edgeConfigRead",edgeConfigWrites:"edgeConfigWrite",postgresDatabase:"postgresDatabase",postgresComputeTime:"postgresComputeTime",postgresDataStorage:"postgresDataStorage",postgresDataTransfer:"postgresDataTransfer",postgresWrittenData:"postgresWrittenData",storageRedisTotalCommands:"storageRedisTotalCommands",storageRedisTotalBandwidthInBytes:"storageRedisTotalBandwidthInBytes",storageRedisTotalDailyAvgStorageInBytes:"storageRedisTotalDailyAvgStorageInBytes",storageRedisTotalDatabases:"storageRedisTotalDatabases",cronJobInvocations:"cronJobInvocation",dataCacheBandwidth:"dataCacheBandwidth",dataCacheRevalidations:"dataCacheRevalidations",logDrainsVolume:"logDrainsVolume",analyticsUsage:"analyticsUsage",webAnalyticsEvent:"webAnalyticsEvent",observabilityEvent:"observabilityEvent",blobTotalAdvancedRequests:"blobTotalAdvancedRequests",blobTotalSimpleRequests:"blobTotalSimpleRequests",blobTotalGetResponseObjectSizeInBytes:"blobTotalGetResponseObjectSizeInBytes",blobTotalAvgSizeInBytes:"blobTotalAvgSizeInBytes",blobDataTransfer:"blobDataTransfer",fastDataTransfer:"fastDataTransfer",fastOriginTransfer:"fastOriginTransfer",edgeRequest:"edgeRequest",functionInvocation:"functionInvocation",functionDuration:"functionDuration",fluidDuration:"fluidDuration",fluidCpuDuration:"fluidCpuDuration",imageOptimizationTransformation:"imageOptimizationTransformation",imageOptimizationCacheRead:"imageOptimizationCacheRead",imageOptimizationCacheWrite:"imageOptimizationCacheWrite",dataCacheRead:"dataCacheRead",dataCacheWrite:"dataCacheWrite",edgeRequestAdditionalCpuDuration:"edgeRequestAdditionalCpuDuration",wafOwaspRequests:"wafOwaspRequests",wafOwaspExcessBytes:"wafOwaspExcessBytes",wafEdgeRateLimits:"wafEdgeRateLimits",wafRateLimitRequest:"wafRateLimitRequest",elasticConcurrencyBuildSlots:"elasticConcurrencyBuildSlots",onDemandConcurrencyMinutes:"onDemandConcurrencyMinutes",connectDataTransfer:"connectDataTransfer",sandboxInvocations:"sandboxInvocations",sandboxCpuTime:"sandboxCpuTime",sandboxDuration:"sandboxDuration",sandboxDataTransfer:"sandboxDataTransfer",edgeConfigRead:"edgeConfigRead",edgeConfigWrite:"edgeConfigWrite",microfrontendsRequest:"microfrontendsRequest"},i={bandwidth:"bandwidth",execution:"execution",images:"images",artifacts:"artifactsSize",edgeMiddleware:"workerInvocations",edgeFunctions:"edgeFunctionExecutionUnits",builds:"buildTime",monitoring:"monitoring",edgeConfigReads:"edgeConfigReads",edgeConfigWrites:"edgeConfigWrites",postgresDatabase:"postgresDatabase",postgresComputeTime:"postgresComputeTime",postgresDataStorage:"postgresDataStorage",postgresDataTransfer:"postgresDataTransfer",postgresWrittenData:"postgresWrittenData",storageRedisTotalCommands:"storageRedisTotalCommands",storageRedisTotalBandwidthInBytes:"storageRedisTotalBandwidthInBytes",storageRedisTotalDailyAvgStorageInBytes:"storageRedisTotalDailyAvgStorageInBytes",storageRedisTotalDatabases:"storageRedisTotalDatabases",cronJobInvocations:"cronJobInvocations",dataCacheBandwidth:"dataCacheBandwidth",dataCacheRevalidations:"dataCacheRevalidations",logDrainsVolume:"logDrainsVolume"},s={bandwidth:"sum",execution:"sum",functionInvocation:"sum",functionDuration:"sum",fluidDuration:"sum",fluidCpuDuration:"sum",images:"sum",artifacts:"0",edgeMiddleware:"sum",edgeFunctions:"sum",builds:"sum",monitoring:"sum",edgeConfigReads:"sum",edgeConfigWrites:"sum",postgresDatabase:"sum",postgresComputeTime:"sum",postgresDataStorage:"0",postgresDataTransfer:"sum",postgresWrittenData:"sum",storageRedisTotalCommands:"sum",storageRedisTotalBandwidthInBytes:"sum",storageRedisTotalDailyAvgStorageInBytes:"0",storageRedisTotalDatabases:"sum",cronJobInvocations:"sum",dataCacheBandwidth:"sum",dataCacheRevalidations:"sum",webAnalyticsEvent:"sum",analyticsUsage:"sum",observabilityEvent:"sum",logDrainsVolume:"sum",wafOwaspRequests:"sum",wafOwaspExcessBytes:"sum",wafEdgeRateLimits:"sum",wafRateLimitRequest:"sum",elasticConcurrencyBuildSlots:"sum",onDemandConcurrencyMinutes:"sum",connectDataTransfer:"sum",sandboxInvocations:"sum",sandboxCpuTime:"sum",sandboxDuration:"sum",sandboxDataTransfer:"sum",edgeConfigRead:"sum",edgeConfigWrite:"sum",microfrontendsRequest:"sum"},n={bandwidth:100,builds:36e4,execution:100,images:1e3,artifacts:10,edgeMiddleware:1e6,edgeFunctions:5e5,monitoring:0,webAnalyticsEvent:5e4,observabilityEvent:null,edgeConfigReads:5e4,edgeConfigWrites:250,postgresDatabase:1,postgresComputeTime:216e3,postgresDataStorage:256e6,postgresDataTransfer:256e6,postgresWrittenData:256e6,storageRedisTotalCommands:3e4,storageRedisTotalBandwidthInBytes:256e6,storageRedisTotalDailyAvgStorageInBytes:256e6,storageRedisTotalDatabases:1,cronJobInvocations:null,dataCacheBandwidth:1,dataCacheRevalidations:100,logDrainsVolume:0,analyticsUsage:1e4,blobTotalAdvancedRequests:2e3,blobTotalSimpleRequests:1e4,blobTotalGetResponseObjectSizeInBytes:10,blobTotalAvgSizeInBytes:1,blobDataTransfer:10,fastDataTransfer:100,fastOriginTransfer:10,edgeRequest:1e6,dataCacheRead:1e6,dataCacheWrite:2e5,edgeRequestAdditionalCpuDuration:(0,t.default)("1h"),imageOptimizationTransformation:5e3,imageOptimizationCacheRead:3e5,imageOptimizationCacheWrite:1e5,functionInvocation:new Date<new Date("2025-06-25T14:30:00Z")?1e5:1e6,functionDuration:100,fluidDuration:360,fluidCpuDuration:4,sandboxInvocations:5e3,sandboxCpuTime:5,sandboxDuration:420,sandboxDataTransfer:20,wafOwaspRequests:null,wafOwaspExcessBytes:null,wafEdgeRateLimits:null,wafRateLimitRequest:null,elasticConcurrencyBuildSlots:null,onDemandConcurrencyMinutes:1,connectDataTransfer:0,edgeConfigRead:null,edgeConfigWrite:null,microfrontendsRequest:5e4},o={bandwidth:null,builds:144e4,execution:null,images:5e3,artifacts:10,edgeMiddleware:1e6,edgeFunctions:1e6,monitoring:25e4,webAnalyticsEvent:1e5,observabilityEvent:1e6,edgeConfigReads:1e6,edgeConfigWrites:500,postgresDatabase:null,postgresComputeTime:100,postgresDataStorage:.512,postgresDataTransfer:.512,postgresWrittenData:.512,storageRedisTotalCommands:null,storageRedisTotalBandwidthInBytes:null,storageRedisTotalDailyAvgStorageInBytes:null,storageRedisTotalDatabases:null,cronJobInvocations:null,dataCacheBandwidth:5,dataCacheRevalidations:100,logDrainsVolume:null,analyticsUsage:null,blobTotalAdvancedRequests:1e4,blobTotalSimpleRequests:1e5,blobTotalGetResponseObjectSizeInBytes:100,blobTotalAvgSizeInBytes:5,blobDataTransfer:100,fastDataTransfer:1e3,fastOriginTransfer:100,edgeRequest:1e7,dataCacheRead:1e7,dataCacheWrite:2e6,edgeRequestAdditionalCpuDuration:(0,t.default)("1h"),imageOptimizationTransformation:1e4,imageOptimizationCacheRead:6e5,imageOptimizationCacheWrite:2e5,functionInvocation:1e6,functionDuration:1e3,fluidDuration:1440,fluidCpuDuration:16,sandboxInvocations:null,sandboxCpuTime:null,sandboxDuration:null,sandboxDataTransfer:null,wafOwaspRequests:null,wafOwaspExcessBytes:null,wafEdgeRateLimits:null,wafRateLimitRequest:null,elasticConcurrencyBuildSlots:null,onDemandConcurrencyMinutes:null,connectDataTransfer:null,edgeConfigRead:null,edgeConfigWrite:null,microfrontendsRequest:null};function r(e){let{team:t,type:i,used:s,ignoreProDefaultLimits:r,skipUnitConversion:d}=e,u=!t||t.billing?.plan==="hobby",l=t?.billing?.invoiceItems||{},g="builds"===i?"builds":a[i],c="builds"===g?null:l[g];"serverlessFunctionExecution"!==g||c||(c=l.functionDuration??null),"functionDuration"!==g||c||(c=l.serverlessFunctionExecution??null);let m=u?0:c?.batch??null,f=c?.price??null,b=r?null:o[i],p=u?n[i]:c?.threshold??b;(p=d?p:function(e){let{limit:t,type:a,invoiceKey:i,invoiceItem:s}=e;return t&&("bandwidth"===a||"dataCacheBandwidth"===a||"fastDataTransfer"===a||"sandboxDataTransfer"===a||"fastOriginTransfer"===a||"blobDataTransfer"===a||"blobTotalAvgSizeInBytes"===a||"blobTotalGetResponseObjectSizeInBytes"===a)?1e9*t:t&&"fluidCpuDuration"===a?36e5*t:t&&"fluidDuration"===a||t&&"functionDuration"===a?1e3*t*36e5:t&&"sandboxCpuTime"===a?36e5*t:t&&"sandboxDuration"===a?1e3*t*36e5:t&&s&&"edgeRequestAdditionalCpuDuration"===i?36e5*t:t}({limit:p,type:i,invoiceKey:g,invoiceItem:c}))&&"artifacts"===i&&(p=null);let T=null!==p&&s>p,h=null!==p&&p>0?Math.ceil(s/p*100):null;return{exceeded:T,increment:m,limit:p,percentage:h,used:s,pricePerIncrement:f}}function d(e){return e.reduce((e,t)=>e+t,0)}function u(e){let{data:t,type:a,aggregator:n}=e;return t?n(t[i[a]].map(e=>{let t=s[a];if("sum"===t){if("sum"in e)return e.sum;throw Error("Invalid data point")}let i=e[t];if(Array.isArray(i)){let[e,t]=i;return 0===t?0:e/t}return i})):0}e.s(["calculateDataUsed",()=>u,"calculateUsage",()=>r,"sumAggregate",()=>d],6272763)}]);

//# sourceMappingURL=fafbc8eec4e46cdd.js.map
//# debugId=4a3eaf0d-4e5d-55b0-885e-ccab8ccb5b3f
