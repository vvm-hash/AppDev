
!function(){try{var e="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:{},n=(new e.Error).stack;n&&(e._sentryDebugIds=e._sentryDebugIds||{},e._sentryDebugIds[n]="9d09132c-10ef-5fc0-9540-a586aeb8ec04")}catch(e){}}();
(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,6625292,e=>{"use strict";var t=e.i(9171423),a=e.i(7629563),i=e.i(8042625),r=e.i(4244280),n=e.i(134877);function s(e){let{teamId:t,state:a}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=(0,i.encode)({teamId:t,state:a,withMetadata:!0});return`${(0,r.API_PROJECTS_VERSION)("v1")}/${e}/feature-flags/flags${n}`}async function l(e){try{return{flags:(await (0,t.fetchApi)(e,{throwOnHTTPError:!0,contentType:"json"})).data}}catch(e){throw(0,a.isInternalNextError)(e),e}}async function o(e){try{return await (0,t.fetchApi)(e,{throwOnHTTPError:!0,contentType:"json"})}catch(e){if((0,a.isInternalNextError)(e))throw e;if((0,n.isAPIError)(e)&&404===e.status)return;throw e}}async function d(e,a){let n=(0,i.encode)({teamId:e.teamSlug}),s=`${(0,r.API_PROJECTS_VERSION)("v1")}/${e.project}/feature-flags/settings${n}`;return(0,t.fetchApi)(s,{method:"PATCH",throwOnHTTPError:!0,headers:{"Content-Type":"application/json"},body:JSON.stringify(a),contentType:"json"})}async function u(e){return(0,t.fetchApi)(e,{throwOnHTTPError:!0,contentType:"json"})}e.s(["getFlagList",()=>l,"getFlagListUrl",()=>s,"getFlagsForDeployment",()=>o,"query",()=>u,"submitSettingsUpdate",()=>d])},7639215,e=>{"use strict";function t(e,t,a){let i=JSON.stringify(e,t,a);return"string"==typeof i?i.replace(/</g,"\\u003c"):i}e.s(["safeJsonStringify",()=>t])},9385057,e=>{"use strict";let t=e=>crypto.getRandomValues(new Uint8Array(e)),a=function(e){let a,i,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:21;return i=-~(1.6*(a=(2<<Math.log(e.length-1)/Math.LN2)-1)*r/e.length),function(){let n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:r,s="";for(;;){let r=t(i),l=i;for(;l--;)if((s+=e[r[l]&a]||"").length===n)return s}}},i=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:21;return crypto.getRandomValues(new Uint8Array(e)).reduce((e,t)=>((t&=63)<36?e+=t.toString(36):t<62?e+=(t-26).toString(36).toUpperCase():t>62?e+="-":e+="_",e),"")};e.s(["customAlphabet",()=>a,"nanoid",()=>i],9385057)},7589011,e=>{"use strict";var t=e.i(6468255),a=e.i(4585051),i=e.i(5468328);function r(e){let{uid:r,name:n,size:s=24,showUsername:l=!1,className:o}=e;if(!r)return null;let d=(0,t.jsx)(a.Avatar,{size:s,uid:r,title:n});return l&&n?(0,t.jsxs)("div",{className:`flex items-center gap-1 ${o||""}`,children:[d,l&&n&&(0,t.jsx)("span",{className:"text-xs text-gray-600 truncate max-w-[120px]",children:n})]}):(0,t.jsx)("div",{className:`flex ${o||""}`,children:n||n?(0,t.jsx)(i.Tooltip,{text:n||n,children:d}):d})}e.s(["CreatorAvatar",()=>r])},5384518,1154769,3696332,e=>{"use strict";var t=e.i(6468255),a=e.i(3306538);function i(e){let{kind:i}=e;return(0,t.jsx)(a.Badge,{variant:{string:"green-subtle",boolean:"blue-subtle",number:"purple-subtle"}[i],children:i.toUpperCase()})}e.s(["KindBadge",()=>i],5384518);var r=e.i(5468328),n=e.i(6696646),s=e.i(3911483),l=e.i(6625292);function o(e){let{data:t,...a}=(0,s.default)(e,l.getFlagsForDeployment,{refreshInterval:12e4,keepPreviousData:!0});return{data:(0,n.useMemo)(()=>new Map(t?.flags?.map(e=>[e.slug,e])),[t]),...a}}function d(e){let{slug:i,deploymentFlagsUrl:n,className:s}=e,{data:l,error:d}=o(n);return l.has(i)||d||null===n?null:(0,t.jsx)(r.Tooltip,{className:s,text:"This feature flag is not referenced by your latest production deployment.",children:(0,t.jsx)(a.Badge,{className:"uppercase hidden sm:block",variant:"amber-subtle",children:"Unreferenced"})})}function u(e){let{slug:i,deploymentFlagsUrl:n,className:s}=e,{data:l,error:d}=o(n);return!l.has(i)||d||null===n?null:(0,t.jsx)(r.Tooltip,{className:s,text:"This archived feature flag is still referenced by your latest production deployment.",children:(0,t.jsx)(a.Badge,{className:"uppercase hidden sm:block",variant:"red-subtle",children:"Referenced"})})}e.s(["UnreferencedBadge",()=>d],1154769),e.s(["ReferencedArchivedBadge",()=>u],3696332)},8986490,(e,t,a)=>{var i=e.r(8762952);t.exports=function(e){return e&&e.length?i(e):[]}},6373608,e=>{"use strict";var t=e.i(6468255),a=e.i(6696646),i=e.i(4004502),r=e.i(8042625),n=e.i(277234),s=e.i(4244280),l=e.i(8128646),o=e.i(5486173);e.i(3512434);var d=e.i(9835407),u=e.i(3500331),c=e.i(9334091),m=e.i(8923565),v=e.i(5323212),g=e.i(1906681),h=e.i(1344973),f=e.i(4030453),p=e.i(455575),b=e.i(2504781),x=e.i(5468328),y=e.i(5806401),j=e.i(9100551),w=e.i(7722264),S=e.i(9385057),N=e.i(7957251),k=e.i(5883567);let C=d.z.object({key:d.z.string().min(1,"Key is required").regex(/^[a-zA-Z0-9_-]+$/,"Key may contain alphanumeric characters, _ and - only"),description:d.z.string().optional().default(""),options:d.z.array(d.z.object({label:d.z.string().min(1,"Label is required"),value:d.z.union([d.z.string(),d.z.number(),d.z.boolean()]).refine(e=>"string"!=typeof e||e.trim().length>0,{message:"Value cannot be empty"})})).min(1,"At least one option is required").optional(),defaultValue:d.z.union([d.z.string(),d.z.number(),d.z.boolean()]).optional()});function T(e,t){let a=e.touched.has(t),i=e.errors.get(t);return e.submitAttempted||a?i:void 0}function I(e){return e.variantsByKind[e.kind]}function $(e){return e.environmentsByKind[e.kind]}function A(e,t){return Object.values($(t)).some(t=>t.selectedVariantId===e)}function B(e){let t=new Map;return 0===e.slug.trim().length?t.set("slug",{message:"Missing value"}):/^[a-zA-Z0-9_-]+$/.test(e.slug.trim())||t.set("slug",{message:"Key may contain alphanumeric characters, _ and - only"}),e.kind||t.set("kind",{message:"Missing kind"}),I(e).forEach((a,i)=>{"boolean"!==e.kind&&(a.label&&""!==a.label.trim()||t.set(`variants.${i}.label`,{message:"Name is required"}),"string"===e.kind?("string"!=typeof a.value||""===a.value.trim())&&t.set(`variants.${i}.value`,{message:"Value is required"}):"number"===e.kind&&("number"!=typeof a.value||Number.isNaN(a.value))&&t.set(`variants.${i}.value`,{message:"Valid number is required"}))}),t}function O(e){let{open:d,setOpen:O,team:F,params:P}=e;(0,a.useEffect)(()=>(0,l.enableMapSet)(),[]);let V=(0,p.useToasts)(),z=(0,j.useRouter)(),E=(0,j.useSearchParams)(),R=E?.get("create"),K=(0,a.useRef)(null),U=(0,a.useRef)({slug:null,description:null}),M=(0,a.useMemo)(()=>({slug:"",kind:"boolean",description:"",variantsByKind:{boolean:[{id:"var0",label:"Off",description:"not enabled",value:!1},{id:"var1",label:"On",description:"enabled",value:!0}],string:[{id:"str0",label:"",description:"",value:""},{id:"str1",label:"",description:"",value:""}],number:[{id:"num0",label:"",description:"",value:0},{id:"num1",label:"",description:"",value:1}]},environmentsByKind:{boolean:{development:{selectedVariantId:"var1"},preview:{selectedVariantId:"var0"},production:{selectedVariantId:"var0"}},string:{development:{selectedVariantId:"str0"},preview:{selectedVariantId:"str0"},production:{selectedVariantId:"str0"}},number:{development:{selectedVariantId:"num0"},preview:{selectedVariantId:"num0"},production:{selectedVariantId:"num0"}}}}),[]),L=(0,a.useMemo)(()=>{if(R){if("1"===R)return M;try{let e=JSON.parse(R),t=C.safeParse(e);if(!t.success)return console.warn("Invalid create param format:",t.error),M;let a=t.data,i=!a.options||0===a.options.length||a.options.every(e=>"boolean"==typeof e.value)?"boolean":a.options.every(e=>"string"==typeof e.value)?"string":a.options.every(e=>"number"==typeof e.value)?"number":"boolean",r={...M};if(a.options&&a.options.length>0){let e=a.options.map((e,t)=>({id:`var${t}`,label:e.label||"",description:"",value:e.value}));r.variantsByKind[i]=e;let t=e[0]?.id||r.variantsByKind[i][0]?.id;r.environmentsByKind[i]={development:{selectedVariantId:t},preview:{selectedVariantId:t},production:{selectedVariantId:t}}}return{...r,slug:a.key,kind:i,description:a.description}}catch(e){console.warn("Failed to parse create param:",e)}}return M},[R,M]),[D,_]=(0,a.useState)({isDisabled:!1,isSubmitting:!1,submitAttempted:!1,values:L,errors:new Map,touched:new Set}),J=(0,a.useMemo)(()=>{let e=e=>{_(t=>{let a=(0,l.produce)(t,e);return{...a,errors:B(a.values)}})};return{formState:D,setFormState:_,adjust:e,refs:U,handleChange:t=>{t.target.name&&e(e=>{(0,o.set)(e.values,t.target.name,t.target.value)})},handleBlur:t=>{t.target.name&&e(e=>{e.touched.add(t.target.name)})},handleRef:e=>{if(!e)return;let t="name"in e?e.name:e.dataset.name;t&&(U.current[t]=e)}}},[D]),{adjust:H}=J;(0,a.useEffect)(()=>{if(d&&K.current){let e=setTimeout(()=>{K.current?.focus()},100);return()=>clearTimeout(e)}},[d]);let q=(0,a.useCallback)(()=>{O(!1)},[O]),Q=async e=>{e.preventDefault();let t=D.values,a=I(t),i=e=>{let a=$(t)[e].selectedVariantId;return{revision:0,active:!1,pausedOutcome:{type:"variant",variantId:a},fallthrough:{type:"variant",variantId:a},rules:[],reuse:{active:!1,environment:""}}},l={slug:t.slug.trim(),kind:t.kind,description:t.description,variants:a,environments:{production:i("production"),preview:i("preview"),development:i("development")}},o=B(t);if(o.size>0)return void H(e=>{e.errors=o,e.submitAttempted=!0});H(e=>{e.isSubmitting=!0,e.isDisabled=!0});try{await (0,n.fetchAPI)(`${(0,s.API_PROJECTS_VERSION)("v1")}/${P.project}/feature-flags/flags${(0,r.encode)({teamId:F?.id})}`,{method:"PUT",throwOnHTTPError:!0,body:l}),V.success("Flag created"),O(!1);let e=new URLSearchParams,a=E?.get("env");a&&e.set("env",a),z.push(`/${P.teamSlug}/${P.project}/flag/${t.slug.trim()}?${e.toString()}`)}catch(e){if((0,w.isError)(e)){if(e.message.includes("Flag already exists"))return void V.error("Could not save flag — Name is in use by an active or archived flag.");V.error(e.message);return}throw e}},Z=(0,a.useMemo)(()=>D.values.variantsByKind[D.values.kind].every(e=>{if(e.label.trim().length>0)return!0;switch(D.values.kind){case"boolean":return"boolean"==typeof e.value;case"string":return"string"==typeof e.value&&e.value.trim().length>0;case"number":return"number"==typeof e.value&&!Number.isNaN(e.value)}return!1}),[D.values]);return(0,t.jsxs)(y.Sheet,{open:d,onOpenChange:O,modal:!0,children:[(0,t.jsx)(y.SheetOverlay,{}),(0,t.jsx)(y.SheetContent,{side:"right",className:"m-3 h-[calc(100%-1.5rem)] w-[calc(100%-1.5rem)] rounded-[1rem] bg-white p-0 lg:w-[512px] sm:max-w-[auto] flex flex-col",children:(0,t.jsxs)("div",{className:"h-full flex flex-col",children:[(0,t.jsxs)(y.SheetHeader,{className:"p-6 border-b flex-shrink-0",children:[(0,t.jsx)("div",{className:"flex items-center justify-between",children:(0,t.jsx)(y.SheetTitle,{children:"Create Feature Flag"})}),(0,t.jsx)(y.SheetDescription,{children:"Enter the details of your new feature flag."})]}),(0,t.jsx)("div",{className:"flex flex-col h-full flex-auto overflow-y-scroll",children:(0,t.jsx)("form",{id:(0,i.tid)("vercel-flags","create-form","form"),"data-testid":(0,i.tid)("vercel-flags","create-form","form"),onSubmit:Q,className:"flex flex-col h-full",children:(0,t.jsx)("div",{className:"flex-1 overflow-y-auto p-6",children:(0,t.jsxs)("div",{className:"flex flex-col gap-4",children:[(0,t.jsx)(u.Input,{"aria-labelledby":"Slug","data-testid":(0,i.tid)("vercel-flags","create-form","slug"),disabled:D.isSubmitting,label:"Slug",name:"slug",value:D.values.slug,onChange:J.handleChange,onBlur:J.handleBlur,ref:e=>{K.current=e,J.handleRef(e)},error:T(D,"slug"),placeholder:"my-flag"}),(0,t.jsx)(c.Textarea,{"aria-labelledby":"Description","data-testid":(0,i.tid)("vercel-flags","create-form","description"),disabled:D.isSubmitting,label:"Description",name:"description",value:D.values.description,onChange:J.handleChange,onBlur:J.handleBlur,ref:J.handleRef,placeholder:"Describe what this feature flag controls…",rows:3}),(0,t.jsxs)("div",{children:[(0,t.jsx)(h.Text,{color:"gray-900",variant:"label-13",children:"Type"}),(0,t.jsx)("div",{className:"mt-2",children:(0,t.jsxs)(m.Switch,{name:"kind",children:[(0,t.jsx)(m.Switch.Control,{checked:"boolean"===D.values.kind,disabled:D.isSubmitting,label:"Boolean",value:"boolean",onChange:()=>{H(e=>{e.values.kind="boolean"})}}),(0,t.jsx)(m.Switch.Control,{checked:"string"===D.values.kind,disabled:D.isSubmitting,label:"String",value:"string",onChange:()=>{H(e=>{e.values.kind="string"})}}),(0,t.jsx)(m.Switch.Control,{checked:"number"===D.values.kind,disabled:D.isSubmitting,label:"Number",value:"number",onChange:()=>{H(e=>{e.values.kind="number"})}})]})}),T(D,"kind")?(0,t.jsx)(f.Error,{className:"mt-2",children:T(D,"kind")?.message}):null]}),D.values.kind&&"boolean"!==D.values.kind&&(0,t.jsxs)("div",{children:[(0,t.jsx)(h.Text,{color:"gray-900",variant:"label-13",children:"Variants"}),(0,t.jsx)("div",{className:"mt-3 space-y-3",children:I(D.values)?.map((e,a)=>(0,t.jsxs)("div",{className:"bg-gray-50 border border-gray-200 rounded-lg p-4 hover:border-gray-300 transition-colors",children:[(0,t.jsxs)("div",{className:"grid grid-cols-1 gap-3",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{htmlFor:`variant-${e.id}-name`,className:"block text-xs font-medium text-gray-700 mb-1",children:"Name"}),(0,t.jsx)(u.Input,{id:`variant-${e.id}-name`,value:e.label,onChange:e=>{H(t=>{t.values.variantsByKind[D.values.kind][a].label=e.target.value})},disabled:D.isSubmitting,error:T(D,`variants.${a}.label`)})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{htmlFor:`variant-${e.id}-value`,className:"block text-xs font-medium text-gray-700 mb-1",children:"Value"}),(0,t.jsx)(u.Input,{id:`variant-${e.id}-value`,value:String(e.value),onChange:e=>{H(t=>{t.values.variantsByKind[D.values.kind][a].value="number"===D.values.kind?Number.parseFloat(e.target.value)||0:e.target.value})},disabled:D.isSubmitting,typeName:"number"===D.values.kind?"number":"text",error:T(D,`variants.${a}.value`)})]})]}),I(D.values).length>2&&(0,t.jsx)("div",{className:"flex items-start justify-end mt-3",children:(0,t.jsx)(x.Tooltip,{text:!D.isSubmitting&&A(e.id,D.values)?"This variant can not be deleted as it is selected as an outcome for one of the environments":void 0,children:(0,t.jsx)(b.Button,{"aria-label":`Remove variant ${a+1}`,size:"small",type:"tertiary",disabled:D.isSubmitting||A(e.id,D.values),onClick:()=>{H(e=>{e.values.variantsByKind[D.values.kind].splice(a,1)})},prefix:(0,t.jsx)(N.MinusCircle,{}),children:"Remove variant"})})})]},e.id))}),(0,t.jsx)(b.Button,{type:"tertiary",onClick:()=>{H(e=>{e.values.variantsByKind[D.values.kind].push({id:(0,S.nanoid)(),label:"",description:"",value:"number"===D.values.kind?0:""})})},disabled:D.isSubmitting,typeName:"button",className:"mt-2",prefix:(0,t.jsx)(k.PlusCircle,{}),size:"small",children:"Add variant"})]}),I(D.values)&&I(D.values).length>0&&(0,t.jsxs)("div",{className:"pt-4 border-t border-gray-200",children:[(0,t.jsx)(h.Text,{color:"gray-900",variant:"label-13",children:"Environments"}),Z?(0,t.jsx)("div",{className:"mt-4 space-y-8",children:["production","preview","development"].map((e,a)=>{let i=$(D.values),r=i[e]?.selectedVariantId,n=I(D.values),s=n.reduce((e,t)=>e+(t.label||String(t.value)).length,0),l="boolean"!==D.values.kind&&s>24||n.length>8;return(0,t.jsxs)("div",{children:[a>0&&"boolean"===D.values.kind&&(0,t.jsx)("div",{className:"border-t border-gray-100 -mt-4 mb-6"}),"boolean"===D.values.kind?null:(0,t.jsxs)("div",{className:"flex items-center gap-2 mb-3",children:[(0,t.jsx)("div",{className:`size-2.5 rounded-full ${"production"===e?"bg-green-600":"preview"===e?"bg-purple-600":"bg-blue-600"}`}),(0,t.jsx)(h.Text,{variant:"copy-14",className:"font-medium capitalize",children:e})]}),"boolean"===D.values.kind?(0,t.jsxs)("div",{className:"flex items-center justify-between",children:[(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[(0,t.jsx)("div",{className:`size-2.5 rounded-full ${"production"===e?"bg-green-600":"preview"===e?"bg-purple-600":"bg-blue-600"}`}),(0,t.jsx)(h.Text,{variant:"copy-14",className:"font-medium capitalize",children:e})]}),(0,t.jsx)(g.Toggle,{size:"medium",checked:r===n.find(e=>!0===e.value)?.id,disabled:D.isSubmitting,onChange:t=>{let a=t?n.find(e=>!0===e.value)?.id:n.find(e=>!1===e.value)?.id;a&&H(t=>{t.values.environmentsByKind[D.values.kind][e].selectedVariantId=a})},children:r===n.find(e=>!0===e.value)?.id?"On":"Off"})]}):l?(0,t.jsx)(v.Select,{value:r,onChange:t=>{H(a=>{a.values.environmentsByKind[D.values.kind][e].selectedVariantId=t.target.value})},disabled:D.isSubmitting,children:n.map(e=>(0,t.jsx)("option",{value:e.id,children:e.label||String(e.value)},e.id))}):(0,t.jsx)(m.Switch,{name:`environment-${e}`,children:n.map(a=>(0,t.jsx)(m.Switch.Control,{checked:r===a.id,disabled:D.isSubmitting,label:a.label||String(a.value),value:a.id,onChange:()=>{H(t=>{t.values.environmentsByKind[D.values.kind][e].selectedVariantId=a.id})}},a.id))})]},e)})}):(0,t.jsx)("div",{className:"mt-2 text-gray-800 text-sm",children:"Configure variants above before configuring environments"})]})]})})})}),(0,t.jsx)(y.SheetFooter,{className:"flex-shrink-0 px-6 py-4 border-t border-gray-200",children:(0,t.jsxs)("div",{className:"flex gap-3 justify-end",children:[(0,t.jsx)(b.Button,{"data-testid":(0,i.tid)("vercel-flags","create-form","cancel"),disabled:D.isSubmitting,onClick:q,type:"secondary",children:"Cancel"}),(0,t.jsx)(b.Button,{"data-testid":(0,i.tid)("vercel-flags","create-form","submit"),disabled:D.isSubmitting,loading:D.isSubmitting,typeName:"submit",form:(0,i.tid)("vercel-flags","create-form","form"),children:"Create"})]})})]})})]})}e.s(["CreateFlagForm",()=>O])},3281894,e=>{"use strict";var t=e.i(6468255),a=e.i(8248823),i=e.i(5338940),r=e.i(9100551),n=e.i(4004502),s=e.i(2504781),l=e.i(8161149),o=e.i(8232741),d=e.i(8835183),u=e.i(8923565),c=e.i(1344973),m=e.i(5468328),v=e.i(2155064),g=e.i(6198010),h=e.i(2065543),f=e.i(8986490),p=e.i(747275),b=e.i(9574532),x=e.i(4744856),y=e.i(57106),j=e.i(6696646),w=e.i(3911483),S=e.i(9722978),N=e.i(7639215),k=e.i(5384518),C=e.i(7589011),T=e.i(6625292),I=e.i(3748432),$=e.i(6373608),A=e.i(1913530),B=e.i(2447497),O=e.i(1154769),F=e.i(3696332);let P=(0,A.createFuzzySearch)({keys:["slug","description"]});function V(e){let{flagDefinition:a,flagEnv:i}=e,r=function e(t,a){var i;let r=t.environments[a];if("boolean"!==t.kind)return"on";let n=t.variants.find(e=>!1===e.value);return r.active?r.reuse?.active?e(t,r.reuse.environment):r.rules.length>0||(i=r.targets)&&Object.values(i).some(e=>Object.values(e).some(e=>Object.values(e).some(e=>e.length>0)))?"on":"variant"===r.fallthrough.type&&r.fallthrough.variantId===n?.id?"off":"on":"variant"===r.pausedOutcome.type&&r.pausedOutcome.variantId===n?.id?"off":"on"}(a,i);return(0,t.jsx)("div",{className:(0,S.clsx)("rounded-full w-2.5 h-2.5","on"===r?"bg-geist-cyan":"bg-gray-200")})}function z(e){let{flag:i,outcomes:r}=e,n=r.flatMap(e=>{switch(e.type){case"variant":return i.variants.find(t=>t.id===e.variantId)??[];case"split":return(0,f.default)([e.defaultVariantId,...Object.keys(e.weights).filter(t=>e.weights[t]>0)]).flatMap(e=>i.variants.find(t=>t.id===e)??[]);default:{let{type:t}=e;(0,a.exhaustivenessCheck)(t)}}}),s=(0,p.default)(n,"id").map(e=>e.label?(0,N.safeJsonStringify)(e.label).replace(/^"(?<s>.+)"$/g,"$<s>"):(0,N.safeJsonStringify)(e.value)).join(", ");return s.length>32?(0,t.jsxs)(m.Tooltip,{as:"span",text:`Possible values: ${s}`,children:[s.slice(0,32),"…"]}):s}function E(e){let{flag:a,flagEnv:i}=e;if(!(i in a.environments))return null;let r=a.environments[i];return(r.active&&r.reuse?.active&&(r=a.environments[r.reuse.environment]),r.active)?(0,t.jsx)(z,{flag:a,outcomes:[r.fallthrough,...r.rules.map(e=>e.outcome)]}):(0,t.jsx)(z,{flag:a,outcomes:[r.pausedOutcome]})}function R(e){let{flagDefinition:a,flagEnv:i,deploymentFlagsUrl:r,params:s,deferredSearch:l,from:d}=e,u=d?`?from=${d}`:"";return(0,t.jsxs)(o.Entity,{className:"flex min-h-[60px] list-none justify-center px-4",children:[(0,t.jsx)("div",{className:"w-6 place-items-center",children:(0,t.jsx)(V,{flagDefinition:a,flagEnv:i})}),(0,t.jsx)(y.Link,{className:"text-decoration-none flex flex-auto font-mono text-black no-underline","data-testid":(0,n.tid)("vercel-flags","browse","flag",a.slug),href:`/${s.teamSlug}/${s.project}/flag/${a.slug}${u}`,children:(0,t.jsxs)("span",{className:"flex items-center gap-2",children:[(0,t.jsx)("span",{children:(0,t.jsx)(B.Highlight,{text:a.slug,searchQuery:l})}),"archived"===a.state?(0,t.jsx)(F.ReferencedArchivedBadge,{slug:a.slug,deploymentFlagsUrl:r}):(0,t.jsx)(O.UnreferencedBadge,{slug:a.slug,deploymentFlagsUrl:r})]})}),(0,t.jsx)("div",{className:"ml-4 grow justify-self-end truncate text-right font-mono text-sm text-gray-800 hidden sm:block",children:(0,t.jsx)(E,{flag:a,flagEnv:i})}),(0,t.jsx)("div",{className:"ml-4 min-w-20 text-right hidden sm:block",children:(0,t.jsx)(k.KindBadge,{kind:a.kind})}),(0,t.jsx)("div",{className:"flex items-center ml-2",children:(0,t.jsx)(C.CreatorAvatar,{uid:a.createdBy,name:a.metadata?.creator?.name,size:24,showUsername:!1})})]})}function K(e){let{params:a,searchParams:m,deploymentFlagsUrl:f,state:p,initialFlagsResponse:S}=e,{team:N}=(0,i.useTeam)(),[k,C]=(0,b.useQueryState)("env",(0,x.parseAsArrayOf)(x.parseAsString).withOptions({history:"push"}).withDefault(["production"])),A=k[0],B=(0,r.useSearchParams)(),[O,F]=(0,j.useState)(m.search??""),[V,z]=(0,j.useState)(O);(0,j.useEffect)(()=>{(0,j.startTransition)(()=>{z(O)})},[O]),(0,j.useEffect)(()=>{(0,j.startTransition)(()=>{let e=new URL(location.href);V?e.searchParams.set("search",V):e.searchParams.delete("search"),history.replaceState(null,"",e.toString())})},[V]);let E=(0,T.getFlagListUrl)(a.project,{teamId:a.teamSlug,state:p}),{data:K}=(0,w.default)(E,T.getFlagList,{refreshInterval:7e3,fallbackData:S}),U=(0,j.useMemo)(()=>{if(K&&0===K.flags.length)return;let e=K?.flags;if(e)return e.sort((e,t)=>(t.updatedAt||t.createdAt||0)-(e.updatedAt||e.createdAt||0))},[K]),M=(0,j.useMemo)(()=>Array.isArray(U)?0===V.trim().length?U:P(V,U):U,[U,V]),L=!M?.length&&U?.length,D=function(e){let t=e||null,[a,i]=(0,j.useState)(t);return t!==a&&t&&i(t),a}(B?.get("create"));return(0,t.jsxs)("div",{className:"mx-auto w-full",children:[(0,t.jsxs)("div",{className:"flex w-full items-center justify-between gap-4 flex-row",children:[(0,t.jsx)(d.SearchInput,{id:"flag-search",onChange:e=>F(e.target.value),placeholder:"Search flags…",value:O,width:"100%"}),(0,t.jsx)("div",{className:"hidden flex-1 items-center md:flex",children:(0,t.jsxs)(u.Switch,{className:"w-full",children:[(0,t.jsx)(u.Switch.Control,{checked:"production"===A,"data-testid":(0,n.tid)("vercel-flags","browse","env.switch","production"),label:"Production",onChange:()=>{C(["production"])},value:"production"}),(0,t.jsx)(u.Switch.Control,{checked:"preview"===A,"data-testid":(0,n.tid)("vercel-flags","browse","env.switch","preview"),label:"Preview",onChange:()=>{C(["preview"])},value:"preview"}),(0,t.jsx)(u.Switch.Control,{checked:"development"===A,"data-testid":(0,n.tid)("vercel-flags","browse","env.switch","development"),label:"Development",onChange:()=>{C(["development"])},value:"development"})]})}),"active"===p?(0,t.jsx)(s.Button,{"data-testid":(0,n.tid)("vercel-flags","create-form","trigger"),disabled:!N,onClick:()=>{(0,j.startTransition)(()=>{let e=new URL(window.location.href);e.searchParams.set("create","1"),window.history.pushState(null,"",e.href)})},prefix:(0,t.jsx)(g.Plus,{}),type:"default",typeName:"button",children:"Create Flag"}):null,N?(0,t.jsx)($.CreateFlagForm,{open:B?.has("create")||!1,params:a,setOpen:e=>{e||(0,j.startTransition)(()=>{let e=new URL(window.location.href);e.searchParams.delete("create"),window.history.pushState(null,"",e.href)})},team:N},D):null]}),(0,t.jsx)("div",{className:"mt-4 bg-white sm:rounded-md",children:M?(0,t.jsx)(o.Entity.List,{className:"shadow-border",children:M?.map((e,i)=>(0,t.jsx)(I.ConditionalNavigationMarker,{label:"FlagList",phase:"content",enabled:0===i,children:(0,t.jsx)(R,{flagDefinition:e,flagEnv:A,deploymentFlagsUrl:f,params:a,deferredSearch:V,from:e.state})},e.slug))??null},"list"):(0,t.jsx)(l.EmptyState.Root,{description:"archived"===p?"You have not archived any flags yet":(0,t.jsxs)("p",{children:["Create a feature flag or"," ",(0,t.jsx)(y.Link,{variant:"highlight",href:`/${a.teamSlug}/${a.project}/flags/onboarding`,children:"learn more"})," ","about how to get started with Vercel Flags"]}),icon:(0,t.jsx)(l.EmptyState.Icon,{icon:"archived"===p?(0,t.jsx)(v.Archive,{size:32}):(0,t.jsx)(h.ToggleOnAlt,{size:32})}),title:"archived"===p?"Archived Flags":"Flags"},"empty")}),L?(0,t.jsxs)("div",{className:"mt-5 rounded-md text-center",children:[(0,t.jsx)(c.Text,{as:"span",color:"gray-700",children:"No results found for"})," ",'"',V,'"']}):null]})}e.s(["FlagList",()=>K,"FlagListItem",()=>R])}]);

//# sourceMappingURL=4deac2dee0d65258.js.map
//# debugId=9d09132c-10ef-5fc0-9540-a586aeb8ec04
