
!function(){try{var e="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:{},n=(new e.Error).stack;n&&(e._sentryDebugIds=e._sentryDebugIds||{},e._sentryDebugIds[n]="3628a215-9116-56e5-9b26-827a822ed7d0")}catch(e){}}();
(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,7418298,e=>{"use strict";var t=e.i(6468255),a=e.i(6582838),s=e.i(85322),i=e.i(9100551),r=e.i(9928621);function n(){let e=(0,i.useParams)()||{teamSlug:"",project:""},{data:n}=(0,a.useDashboardProject)({teamSlug:e.teamSlug,project:e.project}),l=(0,s.isFeatureEnabled)(n.webAnalytics),o=!!(l&&n.microfrontendsConfig?.enabled&&!n.microfrontendsConfig?.isDefaultApp&&!n.microfrontendsConfig?.routeObservabilityToThisProject);return(0,t.jsx)(r.DefaultValuesSetter,{defaultValues:{isLoadingDefaults:!1,isFeatureEnabled:l,microfrontendsDataInDefaultApp:o}})}e.s(["ContextLoader",()=>n])},916685,e=>{"use strict";var t=e.i(6696646),a=e.i(3911483),s=e.i(8042625),i=e.i(277234),r=e.i(5338940),n=e.i(1138941),l=e.i(7946377),o=e.i(9576722),c=e.i(933103),d=e.i(188217),u=e.i(9928621),m=e.i(2415772);let p={keepPreviousData:!0,shouldRetryOnError:e=>403!==(e.statusCode||e.status)},x=(e,c)=>{let{range:d,filter:u,environment:m,limit:x=250,pause:h,...y}=e,{isReady:g,team:f}=(0,r.useTeam)(),j=(0,n.useProjectIdOrName)(),{isEnabled:v,isLoading:b}=(0,o.useWebAnalyticsStatus)(),S=(0,t.useCallback)(function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return(0,s.encode)({from:d.from.toISOString(),to:d.to.toISOString(),tz:(0,l.getClientTimezone)(),teamId:f?.id,projectId:j,filter:JSON.stringify(u),environment:m,limit:x,...y,...e})},[m,u,x,j,d.from,d.to,y,f?.id]),T="/api/web-analytics/stats",w=(0,t.useCallback)(async e=>{let{type:t,search:a}=e;return(0,i.fetchAPI)(`${T}${S({type:t,search:a})}`,{throwOnHTTPError:!0})},[T,S]),{data:k,isLoading:A}=(0,a.default)(g&&v&&!b&&!h?`${T}${S()}`:"",e=>(0,i.fetchAPI)(e,{throwOnHTTPError:!0}),{...p,...c});return{data:(0,t.useMemo)(()=>k?.data||[],[k]),isLoading:!g||A||b,searchTopStats:w}};e.s(["isBreakdownData",0,e=>"topGroups"in e,"useAsyncSearchTopStats",0,()=>{let{hasData:e}=(0,u.useWebAnalyticsContext)(),[a]=(0,c.useWebAnalyticsQueryState)(),s=(0,d.useGenericOptions)(),{searchTopStats:i}=x({type:a.client_type,...s},{fallbackData:e?void 0:{data:[]}});return(0,t.useCallback)(async(e,t)=>(await i({search:e,type:t})).data,[i])},"useOverviewData",0,(e,t)=>{let{range:c,filter:d,environment:u}=e,{isReady:m,team:x}=(0,r.useTeam)(),h=(0,n.useProjectIdOrName)(),{isEnabled:y,isLoading:g}=(0,o.useWebAnalyticsStatus)();return(0,a.default)(m&&y&&!g?`/api/web-analytics/overview${(0,s.encode)({from:c.from.toISOString(),to:c.to.toISOString(),tz:(0,l.getClientTimezone)(),teamId:x?.id,projectId:h,filter:JSON.stringify(d),environment:u})}`:"",e=>(0,i.fetchAPI)(e,{throwOnHTTPError:!0}),{...p,...t})},"useRealtimeData",0,(e,t)=>{let{filter:l,environment:c}=e,{isReady:d,team:u}=(0,r.useTeam)(),m=(0,n.useProjectIdOrName)(),{isEnabled:x,isLoading:h}=(0,o.useWebAnalyticsStatus)();return(0,a.default)(d&&x&&!h?`/api/web-analytics/realtime${(0,s.encode)({teamId:u?.id,projectId:m,filter:JSON.stringify(l),environment:c})}`:"",e=>(0,i.fetchAPI)(e,{throwOnHTTPError:!0}),{...p,...t})},"useTimeseriesData",0,(e,c,d)=>{let{range:u,filter:m,environment:x,groupBy:h,jsonProperty:y}=e,{isReady:g,team:f}=(0,r.useTeam)(),j=(0,n.useProjectIdOrName)(),{isEnabled:v,isLoading:b}=(0,o.useWebAnalyticsStatus)(),S=!!h,{data:T,isLoading:w}=(0,a.default)(g&&v&&!b&&!c.pause?`${S?"/api/web-analytics/timeseries-breakdown":"/api/web-analytics/timeseries"}${(0,s.encode)({from:u.from.toISOString(),to:u.to.toISOString(),tz:(0,l.getClientTimezone)(),teamId:f?.id,projectId:j,groupBy:h,filter:JSON.stringify(m),jsonProperty:y,environment:x})}`:"",e=>(0,i.fetchAPI)(e,{throwOnHTTPError:!0}),{...p,...d}),k=(0,t.useMemo)(()=>c.showPlaceholder?[76,73,80,75,40,56,58,60,65,56,52,48,34,40,40,35,33,25,30,16,12,10].map(e=>e/5).map((e,t)=>({key:new Date(Date.now()-24*t*36e5).toISOString().slice(0,10),devices:1e3*e,total:1e4*e,bounceRate:50})).reverse():[],[c.showPlaceholder]);return{data:T?.data??k,isLoading:!g||w}},"useTopStatsData",0,x,"useUserEvents",0,(e,t)=>{let{range:l,filter:c,environment:d,userId:u}=e,{isReady:x,team:h}=(0,r.useTeam)(),y=(0,n.useProjectIdOrName)(),{isEnabled:g,isLoading:f}=(0,o.useWebAnalyticsStatus)(),j=(0,a.default)(x&&g&&!f&&u&&""!==u?`/api/web-analytics/users/${u}/events${(0,s.encode)({from:l.from.toISOString(),to:l.to.toISOString(),teamId:h?.id,projectId:y,filter:JSON.stringify(c),environment:d})}`:"",e=>(0,i.fetchAPI)(e,{throwOnHTTPError:!0}),{shouldRetryOnError:p.shouldRetryOnError,...t});return{isLoading:j.isLoading,data:{events:j.data?.events.map(e=>({...e,timestamp:(0,m.fromTbDateTimeString)(e.timestamp)}))||[]}}},"useUserList",0,(e,t)=>{let{range:l,filter:c,environment:d}=e,{isReady:u,team:x}=(0,r.useTeam)(),h=(0,n.useProjectIdOrName)(),{isEnabled:y,isLoading:g}=(0,o.useWebAnalyticsStatus)(),f=(0,a.default)(u&&y&&!g?`/api/web-analytics/users/list${(0,s.encode)({from:l.from.toISOString(),to:l.to.toISOString(),teamId:x?.id,projectId:h,filter:JSON.stringify(c),environment:d})}`:"",e=>(0,i.fetchAPI)(e,{throwOnHTTPError:!0}),{...p,...t});return{isLoading:f.isLoading,data:{users:f.data?.users.map(e=>({...e,lastActivity:(0,m.fromTbDateTimeString)(e.lastActivity)}))||[]}}}])},2296385,e=>{"use strict";var t=e.i(933103);function a(){let[e]=(0,t.useWebAnalyticsQueryState)();return e.filter.hostname&&"values"in e.filter.hostname?e.filter.hostname.values[0]:null}e.s(["useFilterHostname",()=>a])},7320407,3663372,449488,9547191,e=>{"use strict";var t=e.i(6468255),a=e.i(5074502),s=e.i(9239936),i=e.i(4313344),r=e.i(1649649),n=e.i(3343953),l=e.i(7952834),o=e.i(7917902),c=e.i(6352514),d=e.i(119294),u=e.i(9508212),m=e.i(5255926),p=e.i(1794286),x=e.i(9100551),h=e.i(6696646),y=e.i(4614946),g=e.i(9928621),f=e.i(188217),j=e.i(933103),v=e.i(9576722),b=e.i(60582),S=e.i(7432042),T=e.i(916685),w=e.i(9161090);function k(e){let{hasData:a}=e,[s]=(0,j.useWebAnalyticsQueryState)(),{data:i}=(0,T.useRealtimeData)({..."all"!==s.environment?{environment:s.environment}:{},...s.filter.hostname?{filter:{hostname:s.filter.hostname}}:{}},{refreshInterval:(0,S.default)("5s"),fallbackData:a?void 0:{devices:0}});return(0,t.jsx)("span",{className:"ml-2 inline-block border-0 border-l border-[var(--accents-2)] pl-2",children:(0,t.jsx)(w.VisitorCount,{count:i?.devices||0,loading:!i})})}e.s(["OnlineVisitorCounter",()=>k],3663372);var A=e.i(5468328),N=e.i(992159),C=e.i(57106),P=e.i(376725);function I(e){let{hostname:a,children:s,withFavicon:i=!0}=e;return(0,t.jsxs)("span",{className:"flex h-6 flex-row items-center gap-1",children:[(0,t.jsx)(C.Link,{external:!0,href:`https://${a}`,style:{paddingTop:1,gap:2},children:(0,t.jsxs)("span",{className:"flex flex-row items-center gap-1",children:[i?(0,t.jsx)(P.Favicon,{url:a},`favicon-${a}`):null,(0,t.jsx)("p",{className:"max-w-80 truncate font-[500] text-gray-1000",children:a})]})}),(0,t.jsx)("span",{className:"flex flex-row items-center",children:s})]})}function D(e){let{domains:a,production:s,filteredDomain:i,children:r}=e,n=i??s??"";return(0,t.jsxs)(I,{hostname:n,children:[i?(0,t.jsx)(N.Filter,{}):(0,t.jsx)(_,{domains:a,production:s}),r]})}function _(e){let{domains:a,production:s}=e;if(!a||a.length<=1||!s)return null;let i=a.filter(e=>e.name!==s).toSorted((e,t)=>e.name.localeCompare(t.name));return(0,t.jsxs)(A.Tooltip,{className:"mt-px cursor-pointer text-xs tracking-wider",delay:!1,maxWidth:"auto",position:"bottom",text:(0,t.jsx)("span",{className:"p4",children:i.map(e=>(0,t.jsx)(I,{hostname:e.name,withFavicon:!1},e.name))}),children:["+",a.length-1]})}var L=e.i(2296385);function O(e){let{domains:a,production:s,children:i}=e,r=(0,L.useFilterHostname)();return(0,t.jsx)(D,{domains:a,filteredDomain:r,production:s,children:i})}e.s(["PageHostnameWithFilter",()=>O],449488);var W=e.i(5343305),F=e.i(215852),E=e.i(4244280),B=e.i(8042625);function R(){let e=(0,x.useParams)()??{teamSlug:"",project:""};return function(e,t){let{limit:a=10,gitBranch:s,production:i,target:r,redirect:n,redirects:l,verified:o,order:c}=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},d=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},u=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"v9";return(0,F.useIsomorphicSuspenseSWR)(`${(0,E.API_PROJECTS_DOMAINS_VERSION)(u)}/${t}/domains${(0,B.encode)({limit:a,gitBranch:s,production:i,target:r,redirects:l,redirect:n,verified:o,order:c,teamId:e})}`,async(e,t)=>(await t(e)).domains,d)}(e.teamSlug,e.project)}e.s(["useCurrentProjectDomains",()=>R],9547191);var U=e.i(579135),M=e.i(6143247);function H(){let e=(0,x.useRouter)(),[S,T]=(0,j.useWebAnalyticsQueryState)(),{environment:w}=S,{user:k,team:A}=(0,o.useAccount)(),N=A||k,C=N?.billing?.plan||"hobby",P=(0,U.useCurrentProjectNameAndIdSuspense)(),{mutate:I}=(0,y.useSWRConfig)(),{isEnabled:D}=(0,v.useWebAnalyticsStatus)(),{setUpgradeModalSource:_,microfrontendsDataInDefaultApp:L}=(0,g.useWebAnalyticsContext)(),{isPlus:O}=(0,r.useIsWebAnalyticsBilling)(),W=(0,f.useTimeSelection)(C,"webAnalyticsPlans",O,"7d"),F=(0,h.useMemo)(()=>(0,a.findAvailablePresets)(C,"webAnalyticsPlans",O),[C,O]);return L?null:(0,t.jsxs)(u.Stack,{align:{sm:"start",md:"start",lg:"end"},direction:"column",gap:2,justify:"center",style:{alignSelf:"stretch"},children:[D?(0,t.jsx)(s.LimitBanner,{onClickUpgrade:()=>{d.analytics.track(c.AnalyticsEvent.ANALYTICS_UPSELL_CLICKED,{currentPlan:C,projectId:P.id,teamId:A?.id||k?.uid,type:"usage-banner"}),_("limit_banner")}}):null,(0,t.jsxs)("div",{className:"flex w-full flex-row items-center justify-between gap-4",children:[b.IS_DASH?(0,t.jsx)("div",{className:(0,M.cn)("-mt-1 flex-1",b.IS_DASH&&"pl-1"),children:(0,t.jsx)(h.Suspense,{fallback:(0,t.jsx)(m.Skeleton,{width:100}),children:(0,t.jsx)($,{})})}):null,(0,t.jsxs)(u.Stack,{className:"-mx-4 md:mx-0",direction:"row",gap:2,children:[(0,t.jsx)(i.EnvironmentSelector,{environment:w,onChange:e=>{T({environment:e})}}),(0,t.jsx)(p.Calendar,{compact:!0,minValue:W.minAllowedDate,onChange:(e,t)=>{let{start:a,end:s}=e;t?T({period:t}):T({from:new Date(a),to:new Date(s)})},onLockedClick:()=>{d.analytics.track(c.AnalyticsEvent.ANALYTICS_UPSELL_CLICKED,{currentPlan:C,projectId:P.id,teamId:A?.id||k?.uid,type:"calendar"}),_("calendar")},presetIndex:Object.values(F).findIndex(e=>e.period===W.period),presets:F,value:{start:W.range.from,end:W.range.to},width:"164px"}),b.IS_DASH?null:(0,t.jsx)(n.OptionsMenu,{revalidateFeatureState:()=>{(0,l.revalidateProject)(I,P),e.refresh()}})]})]})]})}function $(){let{hasData:e,microfrontendsDataInDefaultApp:a}=(0,g.useWebAnalyticsContext)(),{data:s}=(0,W.useCurrentDashboardProject)(),{data:i}=R();return(0,t.jsx)(O,{domains:i,production:s.domain||null,children:a?null:(0,t.jsx)(k,{hasData:e})})}e.s(["ControlBar",()=>H],7320407)},5521320,e=>{"use strict";var t=e.i(6468255),a=e.i(6696646),s=e.i(9722978),i=e.i(60582),r=e.i(9928621),n=e.i(5838627),l=e.i(57106),o=e.i(2327481),c=e.i(6292193),d=e.i(3969752),u=e.i(9576722);let m=[{id:"nextjs",name:"Next.js",addStep:{snippet:'import { Analytics } from "@vercel/analytics/next"',title:"Add the React component",description:(0,t.jsxs)(t.Fragment,{children:["Import and use the ",(0,t.jsx)(c.InlineCode,{children:"<Analytics/>"})," React component into your app's layout."]})}},{id:"remix",name:"Remix",addStep:{snippet:'import { Analytics } from "@vercel/analytics/remix"',title:"Add the React component",description:(0,t.jsxs)(t.Fragment,{children:["Import and use the ",(0,t.jsx)(c.InlineCode,{children:"<Analytics/>"})," React component into your root file."]})}},{id:"create-react-app",name:"React",addStep:{snippet:'import { Analytics } from "@vercel/analytics/react"',title:"Add the React component",description:(0,t.jsxs)(t.Fragment,{children:["Import and use the ",(0,t.jsx)(c.InlineCode,{children:"<Analytics/>"})," React component into your main app file."]})}},{id:"sveltekit",name:"Sveltekit",addStep:{snippet:"import { injectAnalytics } from '@vercel/analytics/sveltekit'",title:"Add injectAnalytics()",description:(0,t.jsxs)(t.Fragment,{children:["Import and use the ",(0,t.jsx)(c.InlineCode,{children:"injectAnalytics()"})," function in your main layout file."]})}},{id:"nuxtjs",name:"Nuxt",addStep:{snippet:"import { Analytics } from '@vercel/analytics/nuxt'",title:"Add the Vue component",description:(0,t.jsxs)(t.Fragment,{children:["Import and use the ",(0,t.jsx)(c.InlineCode,{children:"<Analytics/>"})," Vue component into main component."]})}},{id:"astro",name:"Astro",addStep:{snippet:"import Analytics from '@vercel/analytics/astro'",title:"Add the Astro component",description:(0,t.jsxs)(t.Fragment,{children:["Import and use the ",(0,t.jsx)(c.InlineCode,{children:"<Analytics/>"})," Astro component into your base layout."]})}},{id:"other",name:"Other",addStep:{snippet:'import { inject } from "@vercel/analytics"',title:"Call inject()",description:(0,t.jsxs)(t.Fragment,{children:["Import the ",(0,t.jsx)(c.InlineCode,{children:"inject()"})," function and call it in your app's layout or main component."]})}}].map(e=>{let{id:a,name:s,addStep:i}=e;return{id:a,name:s,icon:(0,t.jsx)("div",{}),steps:function(e){let{snippet:a,title:s,description:i}=e;return[{title:"Install our package",content:(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)("span",{children:"Start by installing @vercel/analytics in your existing project."}),(0,t.jsx)(d.DependencySnippet,{dependency:"@vercel/analytics"})]})},{title:(0,t.jsx)("span",{className:"whitespace-nowrap",children:s}),content:(0,t.jsxs)("span",{children:[i,(0,t.jsx)(n.CodeBlock,{className:"grid",hideLineNumbers:!0,language:"javascript",textToCopy:a,children:a}),(0,t.jsxs)("span",{children:["For full examples and further reference, please refer to our"," ",(0,t.jsx)(l.Link,{external:!0,href:"/docs/analytics/quickstart#add-the-analytics-component-to-your-app",variant:"highlight",children:"documentation"})]})]})},{title:"Deploy & Visit your Site",content:(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)("p",{children:"Deploy your changes and visit the deployment to collect your page views."}),(0,t.jsx)("p",{className:"text-gray-900",children:"If you don't see data after 30 seconds, please check for content blockers and try to navigate between pages on your site."})]})}]}(i)}});function p(e){let{hasData:a,isEnabled:s}=e,{isEnabled:i,isLoading:r,hasData:n}=(0,u.useWebAnalyticsStatus)();return(0,t.jsx)(o.Onboarding,{description:"To start counting visitors and page views, follow these steps.",frameworks:m,title:"Get Started",visible:r?s&&!a:i&&!n})}var x=e.i(8522580),h=e.i(5255926),y=e.i(9307255),g=e.i(9148191);function f(e){let{hasData:a}=e,{defaultProjectName:s,defaultProjectBaseUrl:i,groupName:r,isLoading:n}=(0,g.useMicrofrontendsProjectInfo)(),{getProjectUrl:o}=(0,y.useDashboardNavigation)();return n?(0,t.jsx)(j,{children:(0,t.jsx)(h.Skeleton,{height:124,width:512})}):(0,t.jsxs)(j,{children:[(0,t.jsxs)("span",{className:"inline-block",children:[(0,t.jsx)("span",{className:"font-medium",children:"Web Analytics"})," is enabled for this project, ",a?"but data is being":"and data will be"," sent to"," ",(0,t.jsx)(l.Link,{className:"underline",href:`${i}/analytics`,children:s}),", the default app for the"," ",(0,t.jsx)(l.Link,{className:"underline",href:`${i}/settings/microfrontends`,children:r})," ","microfrontends group.",(0,t.jsx)("br",{}),"To send data to this project instead, visit the"," ",(0,t.jsx)(l.Link,{className:"underline",href:o("/settings/microfrontends#observability-routing"),children:"microfrontends settings"}),"."]}),(0,t.jsxs)("div",{className:"flex flex-row gap-4",children:[(0,t.jsx)(l.ButtonLink,{href:`${i}/analytics`,children:"View Default App"}),(0,t.jsx)(l.ButtonLink,{href:"/docs/microfrontends/managing-microfrontends#observability-data-routing",tab:!0,type:"secondary",children:"Learn More"})]}),a?null:(0,t.jsxs)(x.Note,{type:"warning",children:["You still need to install the package in your project.",(0,t.jsx)("br",{})]})]})}function j(e){let{children:a}=e;return(0,t.jsx)("div",{className:"bg-background-100 border rounded-lg py-10",children:(0,t.jsx)("span",{className:"flex flex-col items-center text-center gap-4 mx-auto max-w-[360px] md:max-w-[512px]",children:a})})}var v=e.i(7320407);function b(e){let{children:n}=e,{hasData:l,isFeatureEnabled:o,microfrontendsDataInDefaultApp:c}=(0,r.useWebAnalyticsContext)();return(0,t.jsxs)("div",{className:(0,s.clsx)("container",{"-mt-6":!i.IS_DASH,"max-h-[880px] overflow-y-hidden pt-px":!o}),children:[i.IS_DASH&&o?(0,t.jsx)("div",{className:"pb-4 pt-0",children:(0,t.jsx)(v.ControlBar,{})}):null,o?(0,t.jsx)(a.Suspense,{fallback:null,children:(0,t.jsx)(p,{hasData:l,isEnabled:o})}):null,c?(0,t.jsx)(f,{hasData:l}):n,o?null:(0,t.jsx)("div",{className:"absolute inset-0 -mt-6 bg-gradient-to-b from-transparent from-0% via-background-100 to-background-100"})]})}e.s(["DynamicPageWrapper",()=>b],5521320)},4951496,e=>{"use strict";var t=e.i(6468255),a=e.i(6696646),s=e.i(9928621),i=e.i(5903121),r=e.i(579135);function n(){let{upgradeModalSource:e,setUpgradeModalSource:n}=(0,s.useWebAnalyticsContext)(),l=(0,r.useCurrentProjectNameAndId)(),o=(0,a.useCallback)(()=>n(null),[n]);return(0,t.jsx)(i.UpgradeModal,{onClose:o,projectId:l?.id,source:e})}e.s(["UpgradeModalEntry",()=>n])},963717,e=>{"use strict";var t=e.i(6468255),a=e.i(2590593),s=e.i(9834685),i=e.i(933103);e.s(["useFilterProps",0,e=>{let{filter:r={},removeFilter:n,toggleFilter:l}=(0,s.useWebAnalyticsFilter)(),[o,c]=(0,i.useWebAnalyticsQueryState)(),d=i.allowedGroupBys.includes(e),u=r[e],m=[];return u&&(m=(0,i.isPropertiesFilterValue)(u)?Object.entries(u.properties):u.values.map(e=>[e])),{filterTags:m,enableBreakdown:d,activeBreakdown:o.group_by===e,onRowClick:t=>{l({[e]:{values:[t.key],operator:"eq"}})},onBreakdownClick:()=>{o.group_by===e?c({group_by:null}):d&&c({group_by:e})},getKey:e=>e[1]?.toString()||e[0],renderFilterTag:s=>2===s.length?(0,t.jsx)(a.FilterTag,{onRemoveTag:()=>{n(e,s[0])},value:s[0],children:s.join(": ")}):(0,t.jsx)(a.FilterTag,{onRemoveTag:()=>{n(e)},value:s[0],children:"Clear Filter"})}}])},5104554,e=>{"use strict";var t=e.i(6468255),a=e.i(57106),s=e.i(992159),i=e.i(2640326);function r(e){let{emptyIcon:r,emptyMessage:n}=function(e){let{hasFilter:r,type:n}=e;return r?{emptyIcon:(0,t.jsx)(s.Filter,{className:"!text-gray-700"}),emptyMessage:"No data for active filter"}:{emptyIcon:(0,t.jsx)(i.Analytics,{className:"!text-gray-700"}),emptyMessage:"route"===n?(0,t.jsxs)(t.Fragment,{children:["No route data found.",(0,t.jsx)("br",{}),"If you have not already, please"," ",(0,t.jsx)(a.Link,{external:!0,href:"/docs/analytics/quickstart#add-@vercel/analytics-to-your-project",children:"upgrade"})," ","to the latest version of ",(0,t.jsx)("code",{children:"@vercel/analytics"})]}):"No data found for selected period."}}(e);return(0,t.jsxs)("div",{className:"flex flex-1 flex-col items-center justify-center gap-2",children:[r,(0,t.jsx)("span",{className:"px-8 text-center text-sm text-gray-900",children:n})]})}e.s(["EmptyState",()=>r])},3218526,e=>{"use strict";var t=e.i(6468255),a=e.i(3162826),s=e.i(5756088),i=e.i(2504781),r=e.i(57106),n=e.i(6696646),l=e.i(2590593),o=e.i(4394132),c=e.i(205804),d=e.i(376725),u=e.i(1649649),m=e.i(963717),p=e.i(9834685),x=e.i(933103),h=e.i(5104554),y=e.i(916685),g=e.i(7432042),f=e.i(188217),j=e.i(119294),v=e.i(6352514),b=e.i(7917902),S=e.i(9576722),T=e.i(9928621);e.i(6483798);var w=e.i(8287059),k=e.i(579135);let A=new Map(Array.from(x.UTMLabelByParam).map(e=>{let[t,a]=e;return[a,t]}));function N(){return(0,t.jsx)(n.Suspense,{fallback:(0,t.jsx)(P,{loading:!0,items:[],type:o.AnalyticsType.Visitors}),children:(0,t.jsx)(C,{})})}function C(){let{user:e,team:n,isTeam:o}=(0,b.useAccount)(),N=n||e,C=N?.billing?.plan||"hobby",I=(0,k.useCurrentProjectNameAndId)(),{isPlus:D,plan:_}=(0,u.useIsWebAnalyticsBilling)(),L=D||"enterprise"===C,{showPlaceholder:O}=(0,S.useWebAnalyticsStatus)(),W=(0,w.useOpenUpgradeModal)(),{setUpgradeModalSource:F,hasData:E}=(0,T.useWebAnalyticsContext)(),B={fallbackData:E?void 0:{data:[]}},R=(0,f.useGenericOptions)(),[U,M]=(0,x.useWebAnalyticsQueryState)(),{data:H,isLoading:$}=(0,y.useTopStatsData)({type:"referrer",...R},{refreshInterval:(0,g.default)("60s"),...B}),{data:q,isLoading:G}=(0,y.useTopStatsData)({type:"query_params",jsonProperty:U.search_param,pause:!L||"utm"!==U.source_type,...R},B),V=(0,y.useAsyncSearchTopStats)(),z="referrer"===U.source_type?$:G,Q=U.tab,J="referrer"===U.source_type?H:q,K=R.range,Y=!o,Z=()=>{j.analytics.track(v.AnalyticsEvent.ANALYTICS_UPSELL_CLICKED,{currentPlan:C,projectId:I?.id,teamId:n?.id||e?.uid,type:"utm-parameters"}),o?F("utm_parameters"):W({source:"web-analytics-utm-parameters-upsell",forceCreateTeam:!0})},X="utm"===U.source_type,ee=X?"query_params":"referrer",et=(0,m.useFilterProps)(ee),{filter:ea,removeFilter:es,toggleFilter:ei}=(0,p.useWebAnalyticsFilter)(),er=D||"enterprise"===_,en="Referrers";return X&&(en="UTM Parameters"),(0,t.jsx)(P,{...et,items:J,loading:z,onSearch:e=>V(e,ee),range:K,renderEmptyState:()=>er||!X?(0,t.jsx)(h.EmptyState,{hasFilter:Object.keys(ea).length>0}):(0,t.jsxs)("div",{className:"flex flex-1 flex-col items-center justify-center gap-3",children:[(0,t.jsx)(s.LockClosed,{color:"gray-800"}),(0,t.jsxs)("span",{className:"text-sm text-gray-900",children:[Y?"Create a pro team, then upgrade to ":"Upgrade to ",(0,t.jsx)("span",{className:"font-medium text-gray-1000",children:"Web Analytics Plus"})," ","to access this feature"]}),(0,t.jsxs)("div",{className:"mt-1 flex items-center justify-center gap-4",children:["pro"===_?(0,t.jsx)(i.Button,{onClick:Z,size:"small",type:"secondary",children:Y?"Create a team":"Upgrade"}):null,(0,t.jsx)(r.Link,{external:!0,href:"/docs/analytics/limits-and-pricing",title:"Learn more about Web Analytics Plus",type:"highlight",children:"Learn more"})]})]}),renderItemPrefix:e=>"referrer"!==U.source_type?null:""===e.key?(0,t.jsx)(a.CornerDownRight,{color:"gray-700"}):(0,t.jsx)(d.Favicon,{url:e.key},e.key),renderItemTitle:e=>{let a=e.key,s=`https://${a}`;return"referrer"!==U.source_type?(0,t.jsx)(t.Fragment,{children:e.key}):""===a||"unknown"===a?"Direct":ea.referrer&&"values"in ea.referrer&&"t.co"===ea.referrer.values[0]?(0,t.jsx)(r.Link,{className:c.default["hover-link"],href:`https://x.com/search?q=${encodeURIComponent(s)}`,prefetch:!1,referrerPolicy:"no-referrer",children:a}):(0,t.jsx)(r.Link,{className:c.default["hover-link"],href:s,prefetch:!1,referrerPolicy:"no-referrer",children:a})},skeleton:O,title:en,titleSwitcherItems:["Referrers","UTM Parameters"],..."utm"===U.source_type&&{filterTags:Object.entries(ea.query_params&&(0,x.isPropertiesFilterValue)(ea.query_params)?ea.query_params.properties:{}),onRowClick:e=>{ei({query_params:{properties:{[U.search_param]:e.key},operator:"eq"}})},renderFilterTag:e=>(0,t.jsx)(l.FilterTag,{onRemoveTag:()=>{es("query_params",e[0])},value:e[0],children:`${x.UTMLabelByParam.get(e[0])||"Unknown"}: ${e[1]||"Unknown"}`}),renderTabBar:()=>(0,t.jsx)(l.PanelTabBar,{activeTab:x.UTMLabelByParam.get(U.search_param)??"Source",onSelectTab:e=>{M({search_param:A.get(e)})},tabs:Array.from(x.UTMLabelByParam.values())})},onTitleSwitcherChange:e=>{"Referrers"===e&&M({source_type:"referrer"}),"UTM Parameters"===e&&M({source_type:"utm"})},type:Q})}function P(e){return(0,t.jsx)(l.Panel,{description:"Which sites refer the most traffic to your project",filterTags:[],title:"Referrers",titleSwitcherItems:["Referrers","UTM Parameters"],...e})}e.s(["TopReferrers",()=>N])},4870288,e=>{"use strict";var t=e.i(6468255),a=e.i(6696646),s=e.i(57106),i=e.i(2590593),r=e.i(4394132),n=e.i(205804),l=e.i(963717),o=e.i(933103),c=e.i(9459801),d=e.i(5104554),u=e.i(2296385),m=e.i(916685),p=e.i(188217),x=e.i(7432042),h=e.i(9928621),y=e.i(9576722),g=e.i(3748432);function f(){return(0,t.jsx)(a.Suspense,{fallback:(0,t.jsx)(b,{loading:!0,items:[],type:r.AnalyticsType.Visitors}),children:(0,t.jsx)(v,{})})}let j=["Pages","Routes","Hostnames"];function v(){let{showPlaceholder:e}=(0,y.useWebAnalyticsStatus)(),{hasData:i}=(0,h.useWebAnalyticsContext)(),r=(0,p.usePageHostname)(),f=(0,p.useGenericOptions)(),[j,v]=(0,o.useWebAnalyticsQueryState)(),{data:S,isLoading:T}=(0,m.useTopStatsData)({type:j.page_type,...f},{refreshInterval:(0,x.default)("60s"),...{fallbackData:i?void 0:{data:[]}}}),w=(0,m.useAsyncSearchTopStats)(),k=(0,l.useFilterProps)(j.page_type),A=(0,u.useFilterHostname)(),N=(0,a.useMemo)(()=>"route"===j.page_type?"Routes":"hostname"===j.page_type?"Hostnames":"Pages",[j.page_type]),C=A||r;return(0,t.jsx)(g.ConditionalNavigationMarker,{enabled:!T,phase:"content",label:"InternalTopPages",children:(0,t.jsx)(b,{...k,type:j.tab,loading:T,skeleton:e,items:S,range:f.range,onSearch:e=>w(e,j.page_type),onTitleSwitcherChange:e=>{"Pages"===e&&v({page_type:"path"}),"Routes"===e&&v({page_type:"route"}),"Hostnames"===e&&v({page_type:"hostname"})},renderEmptyState:()=>(0,t.jsx)(d.EmptyState,{hasFilter:Object.keys(j.filter).length>0,type:j.page_type}),renderItemTitle:e=>C&&"path"===j.page_type?(0,t.jsx)(s.Link,{className:n.default["hover-link"],href:`https://${C}${e.key}`,prefetch:!1,children:(0,t.jsx)(c.RouteHighlighter,{route:e.key})}):(0,t.jsx)(c.RouteHighlighter,{route:e.key}),title:N})})}function b(e){return(0,t.jsx)(i.Panel,{description:"Which pages are the most visited in your project",filterTags:[],title:j[0],titleSwitcherItems:j,...e})}e.s(["TopPages",()=>f])},5607014,e=>{"use strict";var t=e.i(6468255),a=e.i(6696646),s=e.i(2590593),i=e.i(4394132),r=e.i(963717),n=e.i(9928621),l=e.i(9576722),o=e.i(916685),c=e.i(188217),d=e.i(933103);function u(){return(0,t.jsx)(a.Suspense,{fallback:(0,t.jsx)(p,{loading:!0,items:[],type:i.AnalyticsType.Visitors}),children:(0,t.jsx)(m,{})})}function m(){let e=(0,r.useFilterProps)("os_name"),[a]=(0,d.useWebAnalyticsQueryState)(),{hasData:s}=(0,n.useWebAnalyticsContext)(),{showPlaceholder:i}=(0,l.useWebAnalyticsStatus)(),u=(0,c.useGenericOptions)(),{data:m,isLoading:x}=(0,o.useTopStatsData)({type:"os_name",...u},{fallbackData:s?void 0:{data:[]}});return(0,t.jsx)(p,{...e,items:m,range:u.range,loading:x,skeleton:i,type:a.tab})}function p(e){return(0,t.jsx)(s.Panel,{filterTags:[],...e,description:"Which operating systems your visitors are using",limit:5,title:"Operating Systems",valueDisplayMode:"percentage"})}e.s(["TopOperatingSystems",()=>u])},5717396,e=>{"use strict";var t=e.i(6468255),a=e.i(4962639),s=e.i(2504781),i=e.i(9508212),r=e.i(57106),n=e.i(6696646),l=e.i(2590593),o=e.i(205804),c=e.i(4394132),d=e.i(9834685),u=e.i(963717),m=e.i(5104554),p=e.i(9928621),x=e.i(9576722),h=e.i(916685),y=e.i(188217),g=e.i(933103),f=e.i(7917902),j=e.i(119294),v=e.i(6352514);e.i(6483798);var b=e.i(8287059),S=e.i(579135);function T(){return(0,t.jsx)(n.Suspense,{fallback:(0,t.jsx)(A,{loading:!0,items:[],type:c.AnalyticsType.Visitors}),children:(0,t.jsx)(w,{})})}function w(){let{filter:e}=(0,d.useWebAnalyticsFilter)(),{user:a,team:s,isTeam:i}=(0,f.useAccount)(),r=s||a,l=r?.billing?.plan||"hobby",o="hobby"===l,c=(0,b.useOpenUpgradeModal)(),{setUpgradeModalSource:u,hasData:m}=(0,p.useWebAnalyticsContext)(),{showPlaceholder:T}=(0,x.useWebAnalyticsStatus)(),w=(0,y.useGenericOptions)(),{range:A}=w,[N,C]=(0,g.useWebAnalyticsQueryState)(),P=N.tab,I=N.event_property,[D,_]=(0,n.useState)([]),[L,O]=(0,n.useState)(null),{data:W,isLoading:F}=(0,h.useTopStatsData)({type:L||e.event_name?"event_data":"event_name",...w,...L&&{jsonProperty:L},pause:o},{fallbackData:m?void 0:{data:[]}}),E=(0,n.useMemo)(()=>o?[]:W,[W,o]),B=(0,n.useCallback)(e=>{e?C({event_property:e}):C({event_property:null})},[C]);if((0,n.useEffect)(()=>{L&&L!==I&&B(L)},[I,L,B]),e.event_name&&!F&&W.length>0&&!L){let e=W[0];_(W.map(e=>e.key)),I?O(I):e.key===L||I||O(e.key)}!e.event_name&&L&&(O(null),_([]),B(void 0));let R=(0,S.useCurrentProjectNameAndId)();return(0,t.jsx)(k,{data:E,eventProperties:D,loading:F,onClickUpgrade:()=>{j.analytics.track(v.AnalyticsEvent.ANALYTICS_UPSELL_CLICKED,{currentPlan:l,projectId:R?.id,teamId:s?.id||a?.uid,type:"custom-events"}),i?u("top_events"):c({source:"web-analytics-custom-event-upsell",forceCreateTeam:!0})},onSelectProperty:O,range:A,requiresCreation:!i,requiresUpgrade:o,selectedProperty:L,skeleton:T,type:P})}function k(e){let{data:a,loading:s,skeleton:i,selectedProperty:r,type:n,range:o,eventProperties:c,onSelectProperty:p,requiresCreation:x,requiresUpgrade:y,onClickUpgrade:g}=e,{filter:f,removeFilter:j,toggleFilter:v}=(0,d.useWebAnalyticsFilter)(),b=(0,u.useFilterProps)("event_name"),S=(0,u.useFilterProps)("event_data"),T=[...b.filterTags||[],...S.filterTags||[]],w=Object.keys(f).length>0,k=(0,h.useAsyncSearchTopStats)();return(0,t.jsx)(l.Panel,{...f.event_name?S:b,description:"Which events are triggered the most",filterTags:T,items:a,limit:5,loading:s,onRowClick:e=>{f.event_name?v({event_data:{properties:{[r??""]:e.key},operator:"eq"}}):v({event_name:{values:[e.key],operator:"eq"}})},onSearch:e=>k(e,r||f.event_name?"event_data":"event_name"),range:o,valueDisplayMode:"all-values",...f.event_name&&r&&p&&c?{renderTabBar:()=>(0,t.jsx)(l.PanelTabBar,{activeTab:r,onSelectTab:p,tabs:c})}:{},renderEmptyState:()=>w?(0,t.jsx)(m.EmptyState,{hasFilter:!0}):(0,t.jsx)(N,{onClickUpgrade:g,requiresCreation:x,requiresUpgrade:y}),renderFilterTag:e=>2===e.length?(0,t.jsx)(l.FilterTag,{onRemoveTag:()=>{j("event_data",e[0])},value:e[0],children:e.join(": ")}):(0,t.jsx)(l.FilterTag,{onRemoveTag:()=>{j("event_name")},value:e[0],children:e[0]}),renderItemTitle:e=>e.key||"Unknown",skeleton:i,title:"Events",totalCountLabel:"Total",type:n})}function A(e){return(0,t.jsx)(l.Panel,{filterTags:[],...e,description:"Which events are triggered the most",limit:5,valueDisplayMode:"all-values",renderItemTitle:e=>e.key||"Unknown",title:"Events",totalCountLabel:"Total"})}function N(e){let{requiresUpgrade:n,onClickUpgrade:l,requiresCreation:c}=e;return(0,t.jsx)("div",{className:o.default["empty-state-wrapper"],children:(0,t.jsxs)(i.Stack,{align:"center",gap:3,children:[(0,t.jsx)("div",{className:"rounded-full border border-gray-100 p-2",children:(0,t.jsx)("svg",{fill:"none",height:"24",viewBox:"0 0 32 32",width:"24",xmlns:"http://www.w3.org/2000/svg",children:(0,t.jsx)("path",{d:"M17.1111 5L6 18.3333H15.9999L14.8889 27.2222L25.9999 13.8889H15.9999L17.1111 5Z",stroke:"var(--accents-5)",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2"})})}),(0,t.jsx)("h4",{className:"font-semibold text-gray-1000",children:"No custom events"}),(0,t.jsxs)("div",{className:o.default["empty-state-description"],children:[(0,t.jsx)(a.Balancer,{children:"Set up custom events to gain a deeper understanding of user behavior on your site."}),(0,t.jsx)("div",{style:{marginTop:2},children:(0,t.jsxs)(a.Balancer,{children:[n?(0,t.jsxs)(t.Fragment,{children:[c?"Create ":"Upgrade to "," a ",(0,t.jsx)("b",{children:"Pro"})," ","team to access this feature."," "]}):(0,t.jsxs)(t.Fragment,{children:["Track button clicks, form submissions, and other user actions."," "]}),(0,t.jsx)(r.Link,{external:!0,href:"/docs/analytics/custom-events",variant:"highlight",children:"Learn more"})]})}),n?(0,t.jsx)("div",{children:(0,t.jsx)(i.Stack,{align:"center",children:(0,t.jsx)("div",{style:{marginTop:"var(--geist-gap-half)"},children:(0,t.jsx)(s.Button,{onClick:l,size:"small",children:c?"Create a team":"Upgrade to Pro"})})})}):null]})]})})}e.s(["TopEvents",()=>T])},8230391,e=>{"use strict";var t=e.i(6468255),a=e.i(6696646),s=e.i(2590593),i=e.i(4394132),r=e.i(7946377),n=e.i(7950227),l=e.i(963717),o=e.i(9928621),c=e.i(9576722),d=e.i(916685),u=e.i(188217),m=e.i(933103);function p(){return(0,t.jsx)(a.Suspense,{fallback:(0,t.jsx)(h,{loading:!0,items:[],type:i.AnalyticsType.Visitors}),children:(0,t.jsx)(x,{})})}function x(){let e=(0,l.useFilterProps)("country"),{hasData:a}=(0,o.useWebAnalyticsContext)(),{showPlaceholder:s}=(0,c.useWebAnalyticsStatus)(),i=(0,u.useGenericOptions)(),[r]=(0,m.useWebAnalyticsQueryState)(),{data:n,isLoading:p}=(0,d.useTopStatsData)({type:"country",...i},{fallbackData:a?void 0:{data:[]}});return(0,t.jsx)(h,{...e,items:n,range:i.range,loading:p,skeleton:s,type:r.tab})}function h(e){return(0,t.jsx)(s.Panel,{filterTags:[],...e,description:"Which countries your visitors are from",limit:5,renderItemPrefix:e=>(0,t.jsx)(n.Flag,{countryCode:e.key}),renderItemTitle:e=>(0,r.getCountryName)(e.key),title:"Countries",valueDisplayMode:"percentage"})}e.s(["TopCountries",()=>p])},6692046,e=>{"use strict";var t=e.i(6468255),a=e.i(6696646),s=e.i(2590593),i=e.i(4394132),r=e.i(963717),n=e.i(933103),l=e.i(9928621),o=e.i(9576722),c=e.i(916685),d=e.i(188217);function u(){return(0,t.jsx)(a.Suspense,{fallback:(0,t.jsx)(p,{loading:!0,items:[],type:i.AnalyticsType.Visitors}),children:(0,t.jsx)(m,{})})}function m(){let[e,s]=(0,n.useWebAnalyticsQueryState)(),i=(0,r.useFilterProps)(e.client_type),{hasData:u}=(0,l.useWebAnalyticsContext)(),{showPlaceholder:m}=(0,o.useWebAnalyticsStatus)(),x=(0,d.useGenericOptions)(),{data:h,isLoading:y}=(0,c.useTopStatsData)({type:e.client_type,...x},{fallbackData:u?void 0:{data:[]}}),g={items:h,range:x.range,loading:y,skeleton:m,type:e.tab},f=(0,a.useMemo)(()=>"device_type"===e.client_type?"Devices":"Browsers",[e.client_type]),j=(0,a.useMemo)(()=>"device_type"===e.client_type?"Which devices your visitors are using":"Which browsers your visitors are using",[e.client_type]);return(0,t.jsx)(p,{...i,...g,description:j,onTitleSwitcherChange:e=>{"Devices"===e&&s({client_type:"device_type"}),"Browsers"===e&&s({client_type:"client_name"})},renderItemTitle:t=>"device_type"===e.client_type&&n.DeviceLabelByValue.get(t.key)||t.key,title:f})}function p(e){return(0,t.jsx)(s.Panel,{description:"Which devices your visitors are using",filterTags:[],title:"Devices",...e,limit:5,titleSwitcherItems:["Devices","Browsers"],valueDisplayMode:"percentage"})}e.s(["TopBrowsers",()=>u])},6577918,e=>{"use strict";var t=e.i(6468255),a=e.i(9722978),s=e.i(6696646),i=e.i(4201247),r=e.i(9771394),n=e.i(9576722),l=e.i(9834685),o=e.i(205804);function c(e){let{children:n}=e,[l,c]=(0,s.useState)(!1),[u,m]=(0,s.useState)(!1);return(0,t.jsx)(i.motion.div,{className:(0,a.clsx)(l&&"no-skeleton-animations",!u&&o.default["fast-filter-tooltip"]),layout:"position",children:(0,t.jsxs)(r.PlaceholderContext.Provider,{value:l,children:[(0,t.jsx)(s.Suspense,{fallback:null,children:(0,t.jsx)(d,{setShowPlaceholder:c,setUsedWebAnalyticsFilter:m})}),n]})})}function d(e){let{setShowPlaceholder:t,setUsedWebAnalyticsFilter:a}=e,{showPlaceholder:i}=(0,n.useWebAnalyticsStatus)();(0,s.useEffect)(()=>{t(i)},[t,i]);let{usedWebAnalyticsFilter:r}=(0,l.useWebAnalyticsFilter)();return(0,s.useEffect)(()=>{a(r)},[a,r]),null}e.s(["PlaceholderProvider",()=>c])},1738815,e=>{e.v({chart:"page-module__r1m6Pq__chart",faded:"page-module__r1m6Pq__faded",gray:"page-module__r1m6Pq__gray",headerWrapper:"page-module__r1m6Pq__headerWrapper"})},3814106,e=>{"use strict";var t=e.i(6468255),a=e.i(9722978),s=e.i(6696646),i=e.i(188217),r=e.i(9928621),n=e.i(933103),l=e.i(9576722),o=e.i(9834685),c=e.i(916685),d=e.i(5657713),u=e.i(2798756),m=e.i(8185979),p=e.i(8545185),x=e.i(7407064),h=e.i(9091333),y=e.i(3489437),g=e.i(9629316),f=e.i(7615591),j=e.i(4322153),v=e.i(9275907),b=e.i(8134100),S=e.i(2952713),T=e.i(1764746),w=e.i(8125826),k=e.i(4085287),A=e.i(388027),N=e.i(7013170),C=e.i(4905664),P=e.i(1230902),I=e.i(351890),D=e.i(1344973),_=e.i(9806773),L=e.i(931197),O=e.i(3322724);e.i(5406151);var W=e.i(1376250),F=e.i(7946377);e.i(7286972);var E=e.i(5693388);let B=["var(--ds-blue-700)","var(--ds-amber-700)","var(--ds-purple-700)","var(--ds-pink-700)","var(--ds-blue-600)","var(--ds-amber-500)","var(--ds-purple-600)"],R=e=>B[e%B.length];function U(e){var a,i;let{data:r,width:l,type:o,overwriteUnitLabel:c,height:d,formatKey:B,groupBy:U,groupByProperty:M}=e,H=(0,O.useIsMobile)(),$=(0,s.useMemo)(()=>Object.fromEntries(Object.entries(r.topGroups).map(e=>{let[t,a]=e;return[t,a.map(e=>({...e,date:10===e.key.length?(0,W.toZonedTime)(e.key,(0,F.getClientTimezone)()):new Date(e.key||0)}))]})),[r]),q=(0,s.useMemo)(()=>Object.keys($).sort((e,t)=>{let a=$[e].reduce((e,t)=>e+t[o],0);return $[t].reduce((e,t)=>e+t[o],0)-a}),[$,o]),G=r.totalGroupCount-q.length,V=l-60-30,z=d-25-50,Q=q[0],J=e=>e.date,K=e=>e[o],Y=(0,w.bisector)(e=>e.date).left,Z=$[Q]??[],X=(0,k.extent)(Z,J),ee=(0,g.scaleTime)({range:[0,V],domain:X}),et=(0,y.scaleLinear)({domain:[0,1.04*((0,A.max)(Z,K)||100)],range:[z,0],nice:!0}),{tooltipData:ea,tooltipLeft:es,showTooltip:ei,hideTooltip:er}=(0,T.useTooltip)(),en=(a=X[0],i=X[1],1>=(0,C.differenceInDays)(i,a)?L.Granularity.Hour:L.Granularity.Day);return(0,t.jsxs)("div",{className:"relative *:select-none",children:[(0,t.jsx)("svg",{height:d,onMouseLeave:er,onMouseMove:e=>{let t=(0,p.localPoint)(e)||{x:0,y:0},a=ee.invert(t.x-60),s={dataPoints:[],date:new Date(a)};if(q.forEach((e,t)=>{let i,r=$[e],n=Y(r,a,1),l=r[n-1],c=r[n];i=l&&c?a.valueOf()-l.date.valueOf()>c.date.valueOf()-a.valueOf()?c:l:l||c,0===t&&(s.range=(0,E.formatRangeWithGranularity)(i.date,en),s.end=(0,P.format)(i.date,"MMM d, yyyy"),s.relativeTime=(0,E.formatRelativeTime)(i.date,en,"1h"!==en?(0,I.startOfToday)():void 0)),i&&s.dataPoints.push({...i,value:i[o]})}),!s.dataPoints.length)return void er();let i=ee(s.dataPoints[0].date),r=et(K(s.dataPoints[0]));ei({tooltipData:s,tooltipLeft:i,tooltipTop:r})},width:"100%",children:(0,t.jsxs)(h.Group,{left:60,top:25,children:[(0,t.jsx)(x.GridRows,{numTicks:3,pointerEvents:"none",scale:et,stroke:"var(--accents-2)",width:V}),q.map((e,a)=>(0,t.jsxs)(s.default.Fragment,{children:[(0,t.jsx)(f.AreaClosed,{data:$[e]??[],fill:R(a),fillOpacity:.01,x:e=>ee(J(e)),y:e=>et(K(e)),yScale:et}),(0,t.jsx)(v.LinePath,{data:$[e]??[],stroke:R(a),strokeWidth:2,x:e=>ee(J(e)),y:e=>et(K(e))})]},e)),(0,t.jsx)(m.AxisLeft,{hideAxisLine:!0,hideTicks:!0,numTicks:3,scale:et,tickFormat:e=>Number(e)%1!=0?"":(0,F.formatNumberCompact)(Number(e)),tickLabelProps:()=>({dx:"-0.5em",dy:"0.25em",textAnchor:"end",fontSize:12,fill:"var(--accents-4)"})}),(0,t.jsx)(u.AxisBottom,{hideAxisLine:!0,hideTicks:!0,numTicks:H?2:7,scale:ee,tickFormat:e=>{var t,a;return t=String(e),a=(0,N.differenceInHours)(X[1],X[0]),(0,_.timeToAutomaticLocale)(t,a<24?{hour:"numeric",minute:"numeric",hour12:!1}:{month:"numeric",day:"numeric"})},tickLabelProps:()=>({dy:"0.25em",fill:"var(--accents-4)",fontSize:12,textAnchor:"middle"}),top:z}),ea?(0,t.jsx)(t.Fragment,{children:(0,t.jsx)(j.Line,{from:{x:es,y:0},pointerEvents:"none",stroke:"var(--geist-foreground)",strokeWidth:2,to:{x:es,y:z+7}})}):null]})}),ea?(0,t.jsxs)(t.Fragment,{children:[(0,t.jsxs)(S.TooltipWithBounds,{className:"pointer-events-none absolute flex flex-col justify-center whitespace-nowrap rounded bg-background-100 px-4 py-2 text-sm text-gray-1000 shadow-tooltip",left:(es??0)+60,style:{background:"auto"},top:40,children:[(0,t.jsxs)("div",{className:"flex flex-row items-center gap-2",children:[(0,t.jsx)("span",{className:"flex-1 font-normal",children:c||(0,F.labelFromType)(o)}),(0,t.jsx)("span",{className:"text-gray-900",children:ea.range})]}),(0,t.jsxs)("div",{className:"-mx-4 my-1 flex gap-1 border-y bg-background-200 px-4 py-1",children:[(0,t.jsx)("span",{children:"split by"}),(0,t.jsx)("span",{className:"inline-block max-w-[min(400px,40vw)] truncate font-medium",children:M||n.StatLabelByParam.get(U)||U})]}),q.map((e,a)=>(0,t.jsxs)("div",{className:"flex flex-row items-center gap-2 py-1.5",children:[(0,t.jsx)("div",{className:"size-2 rounded-full",style:{backgroundColor:R(a)}}),(0,t.jsx)("span",{className:"max-w-[min(400px,40vw)] flex-1 truncate",title:B?.(e),children:B?.(e)||(0,t.jsx)("span",{className:"text-gray-800",children:"Not set"})}),(0,t.jsx)("span",{className:"self-end pl-2 font-mono font-bold",children:(0,F.formatNumber)("number"==typeof ea.dataPoints[a]?.value?ea.dataPoints[a].value:0)})]},B?.(e)||a)),G>0&&(0,t.jsxs)("span",{className:"text-gray-800",children:["+",(0,F.formatNumber)(G)," more"]})]},Math.random()),(0,t.jsx)(b.Tooltip,{className:"pointer-events-none absolute flex -translate-x-1/2 flex-col items-center justify-center whitespace-nowrap rounded-[99px] bg-[var(--geist-background)] px-[var(--geist-space-2x)] py-[var(--geist-space)] shadow-[var(--ds-shadow-tooltip)] dark:shadow-none",left:es??0,offsetLeft:60,offsetTop:32,top:d-25-50,unstyled:!0,children:(0,t.jsx)(D.Text,{color:"gray-1000",size:12,weight:500,children:ea.relativeTime||ea.end||"Now"})})]}):null]})}var M=e.i(9028632);function H(e){let{data:a,type:s,loading:i,range:r,overwriteUnitLabel:l,groupBy:o,formatKey:u,formatYAxis:m}=e,[p,x]=(0,n.useWebAnalyticsQueryState)();return i||Array.isArray(a)&&0===a.length?null:(0,t.jsx)(d.ParentSize,{children:e=>{let{width:i,height:n}=e;return(0,c.isBreakdownData)(a)?(0,t.jsx)(U,{data:a,formatKey:u,groupBy:o||"",height:n,overwriteUnitLabel:l,type:s,width:i}):(0,t.jsx)(M.Graph,{data:a,formatYAxis:m,height:n,onSelectionChange:e=>{let[t,a]=e;x({from:t,to:a})},overwriteUnitLabel:l,range:r,type:s,width:i})}})}var $=e.i(4394132),q=e.i(1738815),G=e.i(7432042);function V(){return(0,t.jsx)(s.Suspense,{fallback:(0,t.jsx)(Q,{}),children:(0,t.jsx)(z,{})})}function z(){let{hasData:e,microfrontendsDataInDefaultApp:s}=(0,r.useWebAnalyticsContext)(),[d]=(0,n.useWebAnalyticsQueryState)(),{showPlaceholder:u}=(0,l.useWebAnalyticsStatus)(),{filter:m,groupBy:p,groupByProperty:x}=(0,o.useWebAnalyticsFilter)(),h=m.event_name&&!(0,n.isPropertiesFilterValue)(m.event_name)?m.event_name.values[0]:void 0,y=(0,i.useGenericOptions)(),g=!!m.event_name,f=!!(("event_name"===p||"event_data"===p)&&g&&!d.event_property),{data:j,isLoading:v}=(0,c.useTimeseriesData)({...y,groupBy:p||void 0,jsonProperty:x||void 0},{showPlaceholder:u,pause:f},{refreshInterval:(0,G.default)(p?"30s":"10s"),fallbackData:e?void 0:{data:Array(7).fill(0).map((e,t)=>({key:new Date(Date.now()-24*t*36e5).toISOString().slice(0,10),devices:0,total:0})).reverse()}}),b=d.tab;return(0,t.jsxs)("div",{className:(0,a.clsx)((v||f)&&`${q.default.faded} pointer-events-none`,u&&"grayscale"),style:{position:"relative",height:400},children:[(0,t.jsx)(H,{data:s?[]:j,formatKey:e=>"country"===p?(0,F.getCountryName)(e):e,groupBy:x||p||void 0,loading:(0,c.isBreakdownData)(j)?0===Object.keys(j).length:0===j.length,overwriteUnitLabel:b===$.AnalyticsType.TotalCount?h:void 0,range:y.range,type:b,...b===$.AnalyticsType.BounceRate&&{formatYAxis:e=>`${e}%`}}),u&&!s?(0,t.jsx)("div",{className:"absolute right-6 top-2 rounded bg-gray-100 px-1.5 py-0.5 text-xs font-medium text-gray-800",children:"Demo Data"}):null]})}function Q(){return(0,t.jsx)("div",{className:(0,a.clsx)(q.default.faded,"pointer-events-none"),style:{position:"relative",height:400}})}e.s(["TimeseriesChart",()=>V],3814106)},7944103,e=>{"use strict";var t=e.i(6468255),a=e.i(1649649),s=e.i(6696646),i=e.i(188217),r=e.i(9928621),n=e.i(7433697),l=e.i(933103),o=e.i(9576722),c=e.i(9834685),d=e.i(916685),u=e.i(4394132),m=e.i(9031150),p=e.i(2979333),x=e.i(7300),h=e.i(7432042),y=e.i(5307161);function g(){return(0,t.jsx)(s.Suspense,{fallback:(0,t.jsx)(j,{}),children:(0,t.jsx)(f,{})})}function f(){let e=(0,y.useBillingPlan)(),{isPlus:g}=(0,a.useIsWebAnalyticsBilling)(),{period:f,range:j}=(0,i.useTimeSelection)(e,"webAnalyticsPlans",g),{hasData:v}=(0,r.useWebAnalyticsContext)(),{setEnvironment:b}=(0,n.useEnvironment)(),[S,T]=(0,l.useWebAnalyticsQueryState)(),{showPlaceholder:w,isEnabled:k,hasData:A,isLoading:N}=(0,o.useWebAnalyticsStatus)();(0,s.useEffect)(()=>{!N&&(A||b("all"))},[A,k,N,b]);let{filter:C}=(0,c.useWebAnalyticsFilter)(),P=C.event_name&&!(0,l.isPropertiesFilterValue)(C.event_name)?C.event_name.values[0]:void 0,I=(0,i.useGenericOptions)(),{data:D}=(0,d.useOverviewData)(I,{refreshInterval:(0,h.default)("10s"),fallbackData:v?void 0:{devices:0,total:0}}),{data:_}=(0,d.useOverviewData)({...I,range:(0,i.getDateRangeBefore)(j)},{revalidateOnFocus:!1}),L=S.tab;return(0,t.jsxs)(x.Tabs,{children:[(0,t.jsx)(x.Tab,{active:L===u.AnalyticsType.Visitors,label:"Visitors",loading:!D||w,onClick:(0,m.withAwaitPaint)(()=>T({tab:u.AnalyticsType.Visitors})),period:f,trend:_&&D?(0,p.getPercentageTrend)(_.devices,D.devices):void 0,value:w?0:D?.devices??0}),(0,t.jsx)(x.Tab,{active:L===u.AnalyticsType.TotalCount,label:P||"Page Views",loading:!D||w,onClick:(0,m.withAwaitPaint)(()=>T({tab:u.AnalyticsType.TotalCount})),period:f,trend:_&&D?(0,p.getPercentageTrend)(_.total,D.total):void 0,value:w?0:D?.total??0}),(0,t.jsx)(x.Tab,{active:L===u.AnalyticsType.BounceRate,className:"!border-r",label:"Bounce Rate",loading:!D||w,onClick:(0,m.withAwaitPaint)(()=>T({tab:u.AnalyticsType.BounceRate})),period:f,trend:_&&D?(0,p.getPercentageTrend)(_.bounceRate,D.bounceRate,{isPercent:!0,isNegativeGood:!0}):void 0,value:w?0:D?.bounceRate??0,valueSuffix:(0,t.jsx)("span",{children:"%"})})]})}function j(){return(0,t.jsxs)(x.Tabs,{children:[(0,t.jsx)(x.Tab,{active:!1,label:"Visitors",loading:!0,period:"7d",value:0}),(0,t.jsx)(x.Tab,{active:!1,label:"Page Views",loading:!0,period:"7d",value:0}),(0,t.jsx)(x.Tab,{active:!1,className:"!border-r",label:"Bounce Rate",loading:!0,period:"7d",value:0,valueSuffix:(0,t.jsx)("span",{children:"%"})})]})}e.s(["CategoryTabs",()=>g])},7906826,e=>{"use strict";var t=e.i(6468255),a=e.i(6696646),s=e.i(5255926),i=e.i(1344973),r=e.i(2652226),n=e.i(3663372),l=e.i(449488),o=e.i(5343305),c=e.i(9547191),d=e.i(9928621),u=e.i(7320407),m=e.i(60582);function p(){return(0,t.jsx)(r.default,{buttonsClassName:"self-stretch",dashPreventButtonPortaling:!m.IS_DASH,...!m.IS_DASH?{buttons:(0,t.jsx)(a.Suspense,{fallback:null,children:(0,t.jsx)(u.ControlBar,{})})}:{},description:(0,t.jsx)("div",{className:"-mt-1",children:(0,t.jsx)(a.Suspense,{fallback:(0,t.jsx)(s.Skeleton,{width:100}),children:(0,t.jsx)(x,{})})}),title:(0,t.jsx)(i.Text,{as:"h1",size:32,weight:500,children:"Web Analytics"})})}function x(){let{hasData:e,microfrontendsDataInDefaultApp:a}=(0,d.useWebAnalyticsContext)(),{data:s}=(0,o.useCurrentDashboardProject)(),{data:i}=(0,c.useCurrentProjectDomains)();return(0,t.jsx)(l.PageHostnameWithFilter,{domains:i,production:s.domain||null,children:a?null:(0,t.jsx)(n.OnlineVisitorCounter,{hasData:e})})}var h=e.i(4654174),y=e.i(57106),g=e.i(2504781),f=e.i(2640326),j=e.i(1101517),v=e.i(9658738),b=e.i(3228096),S=e.i(3884708),T=e.i(2375916),w=e.i(2442931),k=e.i(5155984),A=e.i(5468328),N=e.i(9100551);e.i(6483798);var C=e.i(8287059),P=e.i(6000680),I=e.i(7952834),D=e.i(5338940),_=e.i(6891161),L=e.i(455575),O=e.i(4614946),W=e.i(9957872),F=e.i(1438473),E=e.i(1513230);function B(e){let{plan:a,planIteration:s}=e;return(0,t.jsx)(W.ChoiceboxGroup.Item,{contentClassName:"p-2 px-4",description:"Included in your plan",tabIndex:0,title:(0,t.jsxs)(i.Text,{weight:500,children:["Web Analytics ","hobby"===a?"on Hobby":""]}),value:"included",children:"pro"===a?(0,t.jsx)(E.ProFeatures,{isProPlus:"pro"===a&&"plus"===s}):(0,t.jsx)(E.HobbyFeatures,{})})}var R=e.i(6450656);function U(e){let{currency:a}=e;return(0,t.jsx)(W.ChoiceboxGroup.Item,{contentClassName:"p-2 px-4",description:(0,R.withPricing)("{fee} / month (once for your entire team)",{currency:a}),tabIndex:0,title:(0,t.jsx)(i.Text,{weight:500,children:"Web Analytics Plus"}),value:"addon",children:(0,t.jsx)(E.PlusFeatures,{})})}var M=e.i(2924439),H=e.i(2466450);function $(e){let{currency:a,isVercelPlusEnabled:s}=e;return(0,t.jsx)(W.ChoiceboxGroup.Item,{contentClassName:"p-2 px-4",description:`${(0,H.formatCurrency)(M.pricingMenu.pro.price,a)} / month`,tabIndex:0,title:(0,t.jsx)(i.Text,{weight:500,children:"Web Analytics on Pro"}),value:"upgraded",children:(0,t.jsx)(E.ProFeatures,{isProPlus:s})})}var q=e.i(2692457),G=e.i(6352514),V=e.i(119294);e.i(1307729);var z=e.i(7416719);let Q="web-analytics-enable-modal",J={step:"choose",isProcessing:!1,selectedOption:"included"},K=(0,q.create)((e,t)=>({...J,team:null,projectId:null,plan:"hobby",planIteration:void 0,currency:"USD",isPlusEnabled:!1,isTrialing:!1,setProps:t=>{let{isPlusEnabled:a,team:s,projectId:i,source:r,onSuccess:n,onClose:l,onError:o,upgradeTeamModalStore:c}=t,d=s?.billing?.plan??"hobby",u=s?.billing?.planIteration;e({team:s,projectId:i,plan:d,planIteration:u,source:r,currency:s?.billing?.currency??"USD",isTrialing:"pro"===d&&s?.billing?.status==="trialing",isPlusEnabled:a,onSuccess:n,onError:o,onClose:l,upgradeTeamModalStore:c})},open:async a=>{e(J);let{isPlusEnabled:s,isProcessing:i,doNext:r,plan:n,onClose:l,onSuccess:o}=t();(!1===a||"enterprise"===n||"pro"===n&&s)&&!i&&(l?.(),await r(),o?.("included"))},select:a=>{let{plan:s,projectId:i}=t();e({selectedOption:a,addOnToBeEnabled:{type:"pro"===s?"webAnalyticsPlus":"webAnalytics",additionalConfigurations:{projectId:i,source:"enable-modal"}}})},startProcessing:()=>e({isProcessing:!0}),stopProcessing:()=>e({isProcessing:!1}),doNext:async()=>{let{addOnToBeEnabled:a,isTrialing:s,onClose:i,onSuccess:r,plan:n,projectId:l,selectedOption:o,step:c,team:d,upgradeTeamModalStore:u,source:m,onError:p}=t();function x(){e({isProcessing:!0})}function h(){e({isProcessing:!1})}if("confirm"===c||"included"===o)try{x(),await (0,z.enableWebAnalytics)({team:d,projectId:l,withPlus:"addon"===o,source:m}),r?.(o)}catch(e){p?.(e?.message??"Unknown error")}finally{h(),i?.()}else"pro"!==n||s?(i?.(),e({step:"closed"}),u?.open({source:Q,teamHint:d?.id,trialBehavior:"disallow-trial",forceImmediateUpgrade:s,addOn:a,onConversionStart:x,onConversionError:h,onConversionSuccess:()=>{h(),r?.(o)},disabledSteps:["team-members"]}),V.analytics.track(G.AnalyticsEvent.ANALYTICS_UPSELL_CLICKED,{currentPlan:n,type:"enable-modal"})):e({step:"confirm"})}}));var Y=e.i(4597921);function Z(e){let{onClose:a}=e,{currency:s,isProcessing:r,plan:n,planIteration:l,selectedOption:o,select:c,doNext:d}=K(),u=(0,Y.useServerFlag)("active-pro-plan-iteration",!1),m=K(e=>(function(e){let{selectedOption:a}=e;return"included"===a?{label:"Enable"}:{label:"Continue",type:"secondary",suffix:(0,t.jsx)(F.ArrowRight,{})}})(e));return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsxs)(_.Modal.Body,{className:"tailwind-preflight",children:[(0,t.jsx)(_.Modal.Header,{children:(0,t.jsx)(_.Modal.Title,{children:"Enable Web Analytics"})}),(0,t.jsx)(i.Text,{color:"gray-900",style:{marginBottom:"0.5rem"},variant:"label-13",children:"Options"}),(0,t.jsxs)(W.ChoiceboxGroup,{direction:"column",label:"plan",onChange:e=>{c(e)},type:"radio",value:o,children:[(0,t.jsx)(B,{plan:n,planIteration:l}),"pro"===n?(0,t.jsx)(U,{currency:s}):(0,t.jsx)($,{currency:s,isVercelPlusEnabled:u})]})]}),(0,t.jsxs)(_.Modal.Actions,{children:[(0,t.jsx)(_.Modal.Action,{onClick:a,type:"secondary",children:"Cancel"}),(0,t.jsx)(_.Modal.Action,{loading:r,onClick:()=>void d(),suffix:m.suffix,type:m.type,children:m.label})]})]})}function X(e){let{project:s,active:i,onClose:r,onEnabling:n,source:l}=e,{mutate:o}=(0,O.useSWRConfig)(),{isProcessing:c,setProps:d,step:u,open:m,doNext:p,startProcessing:x,stopProcessing:h}=K(),y=(0,L.useToasts)(),g=(0,N.useRouter)(),f=(0,C.useOpenUpgradeModal)(),j=(0,C.useUpgradeModalIsOpen)(),{enableWebAnalyticsPlus:v,WebAnalyticsPlusModal:b,isWebAnalyticsPlusEnabled:S}=(0,P.useToggleWebAnalyticsPlus)({source:Q,skipPostConfirm:!0,onStart:x,onSuccess:()=>void p(),onClose:()=>{r(),h()}}),{team:T,isTeam:w}=(0,D.useTeam)();return(0,a.useEffect)(()=>d({team:T,projectId:s.id,source:l,upgradeTeamModalStore:{isOpen:j,open:f},isPlusEnabled:S,onClose:r,onSuccess(){let e=new URL(window.location.toString());e.searchParams.delete("enable"),(0,I.revalidateProject)(o,s),g.replace(e.toString()),g.refresh()},onError(e){y.error(e)}}),[S,r,f,s,g,d,T,l,j,o,y.error]),(0,a.useEffect)(()=>n?.(c),[c,n]),(0,a.useEffect)(()=>{i&&m(w)},[i,m,w]),(0,a.useEffect)(()=>{"confirm"===u&&i&&v?.()},[i,v,u]),"choose"===u?(0,t.jsx)(_.Modal.Modal,{active:i,onClickOutside:r,children:(0,t.jsx)(Z,{onClose:r})}):b}function ee(e){let s=(0,w.useCanToggleWebAnalytics)(),i=(0,N.useSearchParams)(),[r,n]=(0,a.useState)(!1),[l,o]=(0,a.useState)(!1),c=(0,a.useCallback)(()=>n(!1),[n]),d=(0,a.useCallback)(()=>n(!0),[n]);return(0,a.useEffect)(()=>{i?.get("enable")==="1"&&n(!0)},[i]),(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(A.Tooltip,{text:s?void 0:"Additional permissions are required to enable this feature.",children:(0,t.jsx)(g.Button,{disabled:!s,loading:l,onClick:d,width:120,children:"Enable"})}),e.project?(0,t.jsx)(k.CompatRouterAllowed,{children:(0,t.jsx)(X,{active:r,onClose:c,onEnabling:e=>o(e),project:e.project,source:i?.get("source")??void 0})}):null]})}function et(e){let{project:a}=e;return(0,t.jsx)(h.EnablementHeading,{cards:[{icon:(0,t.jsx)(f.Analytics,{}),title:"Real-time insights into your traffic",children:(0,t.jsx)(i.Text,{children:"Ensure smooth performance with real-time bandwidth analysis."})},{icon:(0,t.jsx)(S.Lightning,{}),title:"Deeper insights with custom events",children:(0,t.jsx)(i.Text,{children:"Track whatever is relevant for your website."})},{icon:(0,t.jsx)(T.Shield,{}),title:"Respects visitor privacy",children:(0,t.jsx)(i.Text,{children:"Web Analytics doesn't rely on cookies and doesn't store personal information."})},{icon:(0,t.jsx)(b.Globe,{}),title:"First-party, at the edge",children:(0,t.jsx)(i.Text,{children:"Data is collected through your own domain."})},{icon:(0,t.jsx)(j.CodeBlock,{}),title:"Easy integration",children:(0,t.jsx)(i.Text,{children:"Start collecting data with one line of code. Supports all major frameworks."})},{icon:(0,t.jsx)(v.Gauge,{}),title:"Your site stays fast",children:(0,t.jsx)(i.Text,{children:"The light-weight trackings script is less than 5kb."})}],description:"Collect valuable insights on user behavior and site performance with detailed page view metrics. Gain knowledge on top pages.",title:(0,t.jsxs)(i.Text,{as:"h1",size:32,weight:500,children:[" ","Web Analytics"," "]}),children:(0,t.jsxs)("span",{className:"flex items-center gap-3",children:[(0,t.jsx)(ee,{project:a}),(0,t.jsx)(g.Button,{type:"tertiary",children:(0,t.jsx)(y.Link,{external:!0,href:"/docs/analytics/limits-and-pricing",children:"Limits & Pricing"})})]})})}function ea(){let{isFeatureEnabled:e}=(0,d.useWebAnalyticsContext)();return e?(0,t.jsx)(p,{}):(0,t.jsx)(a.Suspense,{fallback:(0,t.jsx)(et,{project:null}),children:(0,t.jsx)(es,{})})}function es(){let{data:e}=(0,o.useCurrentDashboardProject)();return(0,t.jsx)(et,{project:e})}e.s(["DynamicHeading",()=>ea],7906826)},5670055,e=>{"use strict";var t=e.i(6468255),a=e.i(4962639),s=e.i(3306538),i=e.i(2504781),r=e.i(9508212),n=e.i(57106),l=e.i(7917902),o=e.i(119294),c=e.i(6352514),d=e.i(2065543),u=e.i(6696646),m=e.i(2590593),p=e.i(205804),x=e.i(4394132),h=e.i(9834685),y=e.i(963717),g=e.i(5104554),f=e.i(933103),j=e.i(9928621),v=e.i(9576722),b=e.i(916685),S=e.i(188217),T=e.i(5307161),w=e.i(579135);function k(){return(0,t.jsx)(u.Suspense,{fallback:(0,t.jsx)(N,{loading:!0,items:[],type:x.AnalyticsType.Visitors}),children:(0,t.jsx)(C,{children:(0,t.jsx)(A,{})})})}function A(){let{filter:e,setFilter:a,removeFilter:s,toggleFilter:i}=(0,h.useWebAnalyticsFilter)(),r=(0,y.useFilterProps)("flags"),n=Object.keys(e).length>0,l="hobby"===(0,T.useBillingPlan)(),{hasData:o}=(0,j.useWebAnalyticsContext)(),{showPlaceholder:c}=(0,v.useWebAnalyticsStatus)(),d=(0,S.useGenericOptions)(),{range:p}=d,[x]=(0,f.useWebAnalyticsQueryState)(),w=x.tab,k=(0,u.useMemo)(()=>{let e=x.filter.flags;if(e)return(0,f.isPropertiesFilterValue)(e)?Object.keys(e.properties)[0]:e.values[0]},[x.filter.flags]),{data:A,isLoading:C}=(0,b.useTopStatsData)({type:"flags",...d,jsonProperty:k},{fallbackData:o?void 0:{data:[]}}),I=(0,u.useMemo)(()=>l?[]:A,[A,l]);return(0,t.jsx)(N,{...r,filterTags:r.filterTags,items:I,loading:C,onRowClick:t=>{e.flags?(0,f.isPropertiesFilterValue)(e.flags)?i({flags:{properties:{[k??""]:t.key},operator:"eq"}}):a({flags:{properties:{[k??""]:t.key},operator:"eq"}}):i({flags:{values:[t.key],operator:"eq"}})},range:p,renderEmptyState:()=>n?(0,t.jsx)(g.EmptyState,{hasFilter:!0}):(0,t.jsx)(P,{}),renderFilterTag:e=>2===e.length?(0,t.jsx)(m.FilterTag,{onRemoveTag:()=>{s("flags",e[0])},value:e[0],children:e.join(": ")}):(0,t.jsx)(m.FilterTag,{onRemoveTag:()=>{s("flags")},value:e[0],children:e[0]}),skeleton:c,type:w})}function N(e){return(0,t.jsx)(m.Panel,{filterTags:[],...e,description:"Which flags are recorded the most",limit:5,renderItemTitle:e=>e.key||"Unknown",title:"Flags",titleBadge:(0,t.jsx)(s.Badge,{size:"sm",variant:"pink",children:"Beta"}),totalCountLabel:"Total",valueDisplayMode:"all-values"})}function C(e){let{children:a}=e,{user:s,team:i}=(0,l.useAccount)(),r=i||s,n=r?.billing?.plan||"hobby",d=(0,w.useCurrentProjectNameAndId)();return(0,t.jsx)("div",{className:"tailwind flex-1",onClick:()=>{setTimeout(()=>{let e=!1;try{let t=JSON.parse(new URL(location.href).searchParams.get("filter")||"{}");e="flags"in t}catch{}o.analytics.track(c.AnalyticsEvent.ANALYTICS_CLICKED_ON_FLAGS,{currentPlan:n,projectId:d?.id,teamId:i?.id||s?.uid,hasFlagsFilter:e})},100)},children:a})}function P(e){let{requiresUpgrade:s,onClickUpgrade:l,requiresCreation:o}=e;return(0,t.jsx)("div",{className:p.default["empty-state-wrapper"],children:(0,t.jsxs)(r.Stack,{align:"center",gap:3,children:[(0,t.jsx)("div",{className:"flex size-[42px] items-center justify-center rounded-full border border-gray-100 p-2 text-gray-800",children:(0,t.jsx)(d.ToggleOnAlt,{size:16})}),(0,t.jsx)("h4",{className:"font-semibold text-gray-1000",children:"No flags"}),(0,t.jsxs)("div",{className:p.default["empty-state-description"],children:[(0,t.jsx)(a.Balancer,{children:"Gain insights into how active feature flags impact user behavior."}),(0,t.jsx)("div",{style:{marginTop:2},children:(0,t.jsxs)(a.Balancer,{children:[s?(0,t.jsxs)(t.Fragment,{children:[o?"Create ":"Upgrade to "," a ",(0,t.jsx)("b",{children:"Pro"})," ","team to access this feature."," "]}):(0,t.jsx)(t.Fragment,{children:"Get started by setting up flag tracking. "}),(0,t.jsx)(n.Link,{external:!0,href:"/docs/feature-flags/integrate-with-web-analytics",variant:"highlight",children:"Learn more"})]})}),s?(0,t.jsx)("div",{children:(0,t.jsx)(r.Stack,{align:"center",children:(0,t.jsx)("div",{style:{marginTop:"var(--geist-gap-half)"},children:(0,t.jsx)(i.Button,{onClick:l,size:"small",children:o?"Create a team":"Upgrade to Pro"})})})}):null]})]})})}e.s(["TopFlags",()=>k])},2090290,e=>{"use strict";var t=e.i(6468255),a=e.i(6696646),s=e.i(188217),i=e.i(916685),r=e.i(4597921),n=e.i(5806401),l=e.i(2504781),o=e.i(1344973),c=e.i(8735244),d=e.i(9508212),u=e.i(5255926),m=e.i(3306538),p=e.i(6942035),x=e.i(6143247),h=e.i(9722978),y=e.i(3683485),g=e.i(7432042),f=e.i(3285452),j=e.i(1933683),v=e.i(3884708),b=e.i(7399351),S=e.i(376725),T=e.i(9459801);let w=e=>{let a,{url:s,className:i}=e;try{a=new URL(s).hostname.replace("www.","")}catch{a=s}return(0,t.jsxs)("div",{title:s,className:(0,h.default)(i,"flex items-center space-x-1.5 text-xs text-gray-700 bg-white shadow-sm rounded-full px-2 py-1"),children:[(0,t.jsx)(S.Favicon,{url:s,size:14}),(0,t.jsx)("span",{className:"truncate",children:a})]})},k=e=>{let t="undefined"!=typeof navigator?navigator.language:"en-US";return e.toLocaleTimeString(t,{hour:"numeric",minute:"numeric"})},A=e=>e?(0,g.default)(1e3*e,{long:!0}):"",N=e=>e.toISOString().split("T")[0],C=e=>t=>{if(0===t.length)return[];let a=[],s=[t[0]];for(let i=1;i<t.length;i++){let r=t[i];e(s[s.length-1],r)?s.push(r):(a.push(s),s=[r])}return a.push(s),a},P=C((e,t)=>t.timestamp.getTime()-e.timestamp.getTime()<(0,g.default)("30m")),I=C((e,t)=>{let a=e?.[0]?.[0],s=t?.[0]?.[0];return!!a&&!!s&&N(a.timestamp)===N(s.timestamp)}),D=e=>{let{event:a,active:s,onClick:i,showTime:r=!0}=e,n="pageview"===a.type,l=n?a.route||a.path:"event"===a.type?a.eventName:"Unknown Event",o;return(0,t.jsxs)("div",{className:(0,h.default)("relative w-full first:rounded-t last:rounded-b","transition-all duration-200",s?"bg-blue-50 shadow-md":"bg-white hover:bg-gray-50"),children:[(0,t.jsxs)("button",{type:"button",onClick:i,className:(0,h.default)("flex items-center w-full px-2 py-1.5 pr-4 text-left bg-transparent","cursor-pointer transition-all duration-200",s&&"transform translate-y-1"),children:[(0,t.jsxs)("div",{className:(0,h.default)("flex items-center justify-center w-8 h-8 mr-1 relative",n?"text-blue-500":"text-amber-500"),children:[(0,t.jsx)("div",{className:(0,h.default)("absolute inset-0 rounded-full transition-all duration-200",n?"bg-blue-500":"bg-amber-500",s?"opacity-20":"opacity-0 hover:opacity-10")}),n?(0,t.jsx)(j.Eye,{color:"currentColor",className:"w-4 h-4"}):(0,t.jsx)(v.Lightning,{color:"currentColor",className:"w-4 h-4"})]}),(0,t.jsx)("div",{className:"flex-1 min-w-0",children:(0,t.jsxs)("div",{className:"flex items-center justify-between",children:[(0,t.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,t.jsx)("p",{className:"text-sm font-medium text-gray-1000 truncate",children:n?(0,t.jsx)(_,{route:a.route||"",path:a.path}):l}),!n&&"event"===a.type&&a.eventData&&(0,t.jsx)("p",{className:"text-xs text-gray-700 truncate",children:Object.entries(a.eventData).filter(e=>{let[t]=e;return"eventName"!==t}).map(e=>{let[t,a]=e;return`${t}: ${a}`}).join("  ")})]}),(0,t.jsxs)("div",{className:"flex items-center space-x-2 text-xs text-gray-700",children:[o&&(0,t.jsx)("span",{children:A(o)}),s?(0,t.jsx)(b.ChevronUp,{color:"gray-700",className:"w-4 h-4"}):r&&(0,t.jsx)("span",{children:k(a.timestamp)})]})]})})]}),s&&(0,t.jsxs)("div",{className:"px-3 pb-3 text-xs text-gray-800",children:[(0,t.jsxs)("div",{className:"grid grid-cols-2 gap-2 mt-2",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("span",{className:"font-medium",children:"Time:"})," ",k(a.timestamp)]}),n&&o&&(0,t.jsxs)("div",{children:[(0,t.jsx)("span",{className:"font-medium",children:"Duration:"})," ",A(o)]})]}),(0,t.jsxs)("div",{className:"mt-2",children:[(0,t.jsx)("span",{className:"font-medium",children:"Event Data:"}),(0,t.jsx)("pre",{className:"mt-1 text-xs bg-white p-2 rounded bg-background-200 overflow-x-auto",children:JSON.stringify("event"===a.type?{path:a.path,route:a.route,referrer:a.referrer,queryParams:a.queryParams,eventName:a.eventName,eventData:a.eventData}:{path:a.path,route:a.route,referrer:a.referrer,queryParams:a.queryParams},null,2)})]})]})]})},_=e=>{let{route:a,path:s,className:i}=e;return(0,t.jsx)("div",{className:(0,h.default)("flex truncate relative",i),title:s,children:(0,t.jsx)("span",{className:"text-gray-1000 mr-2",children:(0,t.jsx)(T.RouteHighlighter,{route:a||s,path:s})})})},L=e=>{let{className:a}=e;return(0,t.jsx)("div",{className:(0,h.default)("flex items-center justify-start px-6",a),children:(0,t.jsx)("div",{className:"w-px h-2 bg-gray-300"})})},O=e=>{let{pageGroup:a,activeEventId:s,onEventClick:i,direction:r}=e,n=[...a].sort((e,t)=>e.type!==t.type?"pageview"===e.type?-1:1:e.timestamp.getTime()-t.timestamp.getTime()),l=e=>e.toLocaleTimeString([],{hour:"numeric",minute:"numeric"});return(0,t.jsx)("div",{className:(0,h.default)("bg-white rounded-md shadow-sm overflow-hidden flex divide-y divide-gray-200","asc"===r?"flex-col-reverse":"flex-col"),children:n.map((e,a)=>{let r=0===a||l(e.timestamp)!==l(n[a-1].timestamp);return(0,t.jsx)(D,{event:e,active:s===R(e),onClick:()=>i(R(e)),showTime:r},R(e))})})},W=e=>{let{referrer:a}=e;return(0,t.jsx)("div",{className:"relative flex flex-col items-start ml-2",children:a?(0,t.jsx)(w,{url:a}):(0,t.jsx)("div",{className:"flex items-center space-x-1.5 text-xs text-gray-700 bg-white shadow-sm rounded-full px-2 py-1",children:(0,t.jsx)("span",{children:"Direct"})})})},F=e=>{let{session:s,activeEventId:i,onEventClick:r,direction:n}=e,l=[...s].sort((e,t)=>{let a=e[0],s=t[0];return a&&s?a.timestamp.getTime()-s.timestamp.getTime():0}),o=l[0],c=o?.[0],d=c?.referrer;return(0,t.jsx)("div",{className:"relative",children:(0,t.jsxs)("div",{className:(0,h.default)("pl-1.5 flex","asc"===n?"flex-col-reverse":"flex-col"),children:[(0,t.jsx)(W,{referrer:d}),(0,t.jsx)(L,{}),l.map((e,s)=>(0,t.jsxs)(a.default.Fragment,{children:[(0,t.jsx)(O,{pageGroup:e,activeEventId:i,onEventClick:r,direction:n},R(e[0])),s<l.length-1&&(0,t.jsx)(L,{})]},R(e[0])))]})})},E=e=>{let{day:s,activeEventId:i,onEventClick:r,direction:n}=e,l=s?.[0]?.[0]?.[0];if(!l)return null;let o=(e=>{let t=new Date,a=new Date(t);if(a.setDate(t.getDate()-1),N(e)===N(t))return"Today";{if(N(e)===N(a))return"Yesterday";let t="undefined"!=typeof navigator?navigator.language:"en-US";return e.toLocaleDateString(t,{weekday:"long",year:"numeric",month:"long",day:"numeric"})}})(l.timestamp),c=s.flat().flat().length,d=[...s].sort((e,t)=>{let a=e[0]?.[0],s=t[0]?.[0];return a&&s?a.timestamp.getTime()-s.timestamp.getTime():0});return(0,t.jsxs)("div",{className:"mb-8",children:[(0,t.jsx)("div",{className:"sticky top-0 z-10 flex items-center justify-center py-2 bg-gradient-to-b from-background-200 to-transparent",children:(0,t.jsxs)("div",{className:"px-3 py-1 bg-gray-300 text-gray-1000 text-xs font-medium rounded-full",children:[o,"  ",c," events"]})}),(0,t.jsx)("div",{className:(0,h.default)("max-w-2xl mx-auto flex gap-10 pt-10","asc"===n?"flex-col-reverse":"flex-col"),children:d.map(e=>(0,t.jsx)(a.default.Fragment,{children:(0,t.jsx)(F,{session:e,activeEventId:i,onEventClick:r,direction:n})},R(e[0][0])))})]})},B=e=>{let{direction:a,onClick:s}=e;return(0,t.jsx)("button",{type:"button",onClick:s,className:(0,h.default)("flex items-center justify-center w-10 h-10 bg-white border border-gray-300 rounded-lg","hover:bg-gray-100 active:bg-gray-100 transition-colors duration-200","text-gray-800 hover:text-gray-900","bg-transparent"),children:(0,t.jsx)(f.ArrowDown,{className:(0,h.default)("w-5 h-5 transition-transform duration-200","asc"===a&&"rotate-180")})})},R=e=>{let t="pageview"===e.type?{path:e.path,route:e.route,referrer:e.referrer,queryParams:e.queryParams}:"event"===e.type?{path:e.path,route:e.route,referrer:e.referrer,queryParams:e.queryParams,eventName:e.eventName,eventData:e.eventData}:{path:e.path,route:e.route,referrer:e.referrer,queryParams:e.queryParams};return`${e.type}-${e.timestamp.getTime()}-${JSON.stringify(t).split("").reduce((e,t)=>e+t.charCodeAt(0),0)}`};function U(e){let{events:s=[]}=e,[i,r]=(0,a.useState)("desc"),[n,l]=(0,a.useState)(null),o=(0,a.useMemo)(()=>{let e=[...s].sort((e,t)=>e.timestamp.getTime()-t.timestamp.getTime()),t=e=>{let t=[],a=[];for(let s of e)"pageview"===s.type?(a.length>0&&t.push(a),a=[s]):0===a.length?t.push([s]):a.push(s);return a.length>0&&t.push(a),t};return[...(0,y.pipe)(e,P,e=>e.map(t),I)].reverse()},[s]),c=e=>{l(t=>t===e?null:e)};return 0===o.length?(0,t.jsx)("div",{className:"text-center py-12",children:(0,t.jsx)("p",{className:"text-gray-700",children:"No events found"})}):(0,t.jsxs)("div",{className:"bg-background-200",children:[(0,t.jsx)("div",{className:"absolute top-12 right-4 z-20",children:(0,t.jsx)(B,{direction:i,onClick:()=>{r(e=>"asc"===e?"desc":"asc")}})}),(0,t.jsx)("div",{className:"container mx-auto px-4 py-8",children:o.map((e,a)=>{let s=e?.[0]?.[0]?.[0];return(0,t.jsx)(E,{day:e,activeEventId:n,onEventClick:c,direction:i},s?R(s):`day-${a}`)})})]})}var M=e.i(2590593),H=e.i(205804),$=e.i(7950227),q=e.i(7946377);let G=e=>{let{user:a,onClick:s}=e;return(0,t.jsxs)("div",{className:"flex items-center px-4 py-2 hover:bg-gray-100 cursor-pointer border-b border-gray-100 last:border-b-0 gap-3",onClick:s,role:"button",tabIndex:0,children:[(0,t.jsx)("div",{className:"flex-shrink-0 w-8 h-8 bg-gray-200 rounded-full flex items-center justify-center",children:(0,t.jsx)(o.Text,{className:"text-xs font-medium text-gray-600",children:a.id.slice(-3).toUpperCase()})}),(0,t.jsx)(o.Text,{className:"truncate font-medium text-sm ml-2",children:"Anonymous"}),(0,t.jsxs)(o.Text,{className:"text-xs text-gray-700 ml-4 flex items-center gap-2",children:[(0,t.jsx)($.Flag,{countryCode:a.country.toUpperCase()}),(0,q.getCountryName)(a.country)]}),(0,t.jsx)("div",{className:"flex-1"}),(0,t.jsxs)(o.Text,{className:"truncate text-xs text-gray-500 ml-1",children:["#",a.id.slice(-8)]}),(0,t.jsxs)(o.Text,{className:"text-xs text-gray-700 ml-4",children:[a.events," events"]}),(0,t.jsx)(o.Text,{className:"text-xs text-gray-500 ml-auto w-20 text-right",children:(e=>{let t=Math.floor((new Date().getTime()-e.getTime())/36e5);if(t<1)return"Just now";{if(t<24)return`${t}h ago`;let e=Math.floor(t/24);return`${e}d ago`}})(a.lastActivity)})]})},V=()=>(0,t.jsxs)(d.Stack,{className:(0,h.clsx)("tailwind flex-1",H.default.container),children:[(0,t.jsx)(M.PanelHeader,{title:"User Journeys",titleBadge:(0,t.jsx)(m.Badge,{size:"sm",variant:"gray",children:"Internal"}),description:"User journey data",className:"min-h-[73px]",labels:["Last Seen"]}),(0,t.jsx)("div",{className:"flex flex-col my-2",children:Array.from({length:5},(e,t)=>`skeleton-${t}`).map(e=>(0,t.jsx)("div",{className:"flex items-center px-3",style:{height:40},children:(0,t.jsx)(u.Skeleton,{animated:!0,height:32,style:{opacity:.5,width:"100%"}})},e))})]}),z=e=>{let{user:a,onClose:s,events:i,loading:r=!1}=e;return a?(0,t.jsxs)(n.Sheet,{onOpenChange:e=>!e&&s(),open:!!a,children:[(0,t.jsx)(n.SheetOverlay,{}),(0,t.jsx)(n.SheetContent,{className:(0,x.cn)("m-3 h-[calc(100%-1.5rem)] w-[calc(100%-1.5rem)] rounded-[1rem] bg-white p-0 lg:w-3/4 sm:max-w-[auto] overflow-hidden"),side:"right",children:(0,t.jsxs)("div",{className:"flex h-full flex-col",children:[(0,t.jsxs)("div",{className:"flex items-center justify-between p-6 border-b border-gray-200",children:[(0,t.jsxs)("div",{className:"flex items-center gap-4",children:[(0,t.jsx)("div",{className:"flex-shrink-0 w-12 h-12 bg-gray-200 rounded-full flex items-center justify-center",children:(0,t.jsx)(o.Text,{className:"text-sm font-bold text-gray-600",children:a.id.slice(-3).toUpperCase()})}),(0,t.jsxs)("div",{children:[(0,t.jsx)(o.Text,{className:"text-lg font-bold",children:"Anonymous User"}),(0,t.jsxs)(o.Text,{className:"text-sm text-gray-700",children:["#",a.id.slice(-8)]}),(0,t.jsx)(o.Text,{className:"text-sm text-gray-600",children:a.country})]})]}),(0,t.jsx)(l.Button,{"aria-label":"Close",className:"!px-1.5",onClick:s,size:"medium",svgOnly:!0,type:"tertiary",children:(0,t.jsx)(p.Cross,{})})]}),(0,t.jsx)("div",{className:"flex-1 overflow-y-auto bg-background-200",children:r?(0,t.jsxs)("div",{className:"flex items-center justify-center py-8",children:[(0,t.jsx)(c.Spinner,{}),(0,t.jsx)(o.Text,{className:"ml-2 text-sm text-gray-600",children:"Loading events..."})]}):(0,t.jsx)(U,{events:i})})]})})]}):null};function Q(e){let{users:a=[],loading:s=!1,onClickUser:i}=e;return s?(0,t.jsx)(V,{}):(0,t.jsxs)(d.Stack,{className:(0,h.clsx)("tailwind flex-1",H.default.container),children:[(0,t.jsx)(M.PanelHeader,{title:"User Journeys",titleBadge:(0,t.jsx)(m.Badge,{size:"sm",variant:"gray",children:"Internal"}),description:"User journey data",labels:["Last Seen"],className:"min-h-[73px]"}),(0,t.jsx)("div",{className:"flex flex-col",children:0===a.length?(0,t.jsx)("div",{className:"flex items-center justify-center py-8",children:(0,t.jsx)(o.Text,{className:"text-sm text-gray-600",children:"No users found"})}):a.slice(0,6).map(e=>(0,t.jsx)(G,{user:e,onClick:()=>i?.(e)},e.id))})]})}var J=e.i(409142);function K(){return(0,r.useServerFlag)("enable-analytics-journey-view",!1)?(0,t.jsx)(a.Suspense,{fallback:null,children:(0,t.jsx)(Y,{})}):null}function Y(){let{state:e,set:r}=(0,J.useSearchParamsState)({userId:{defaultValue:void 0}}),[n,l]=(0,a.useState)(null),o=(0,s.useGenericOptions)(),{data:c,isLoading:d}=(0,i.useUserList)({...o}),{data:u,isLoading:m}=(0,i.useUserEvents)({...o,userId:e.userId??""}),p=e.userId&&u?.events||[];return(0,t.jsxs)("div",{children:[(0,t.jsx)(Q,{users:c?.users||[],loading:d,onClickUser:e=>{l(e),r({userId:e.id})}}),(0,t.jsx)(z,{events:p,user:n,loading:m,onClose:()=>{l(null),r({userId:void 0})}})]})}e.s(["UserList",()=>K],2090290)}]);

//# sourceMappingURL=3fdc33f941421e43.js.map
//# debugId=3628a215-9116-56e5-9b26-827a822ed7d0
