
!function(){try{var e="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:{},n=(new e.Error).stack;n&&(e._sentryDebugIds=e._sentryDebugIds||{},e._sentryDebugIds[n]="ae79c909-856d-5bbe-8c97-4e3555e308d6")}catch(e){}}();
(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,7921976,e=>{"use strict";var t=e.i(5046355);e.s(["isModifierPressed",0,e=>(0,t.isAppleDevice)()?e.metaKey:e.ctrlKey])},9156249,e=>{e.v({circle:"step-indicator-module__5gZ_RG__circle",current:"step-indicator-module__5gZ_RG__current","step-indicator":"step-indicator-module__5gZ_RG__step-indicator"})},5184244,e=>{e.v({"close-button":"survey-prompt-toast-module__JkO0_W__close-button",description:"survey-prompt-toast-module__JkO0_W__description",prompt:"survey-prompt-toast-module__JkO0_W__prompt"})},8457113,e=>{e.v({"align-left":"survey-module__3DCdiW__align-left","back-button":"survey-module__3DCdiW__back-button",buttons:"survey-module__3DCdiW__buttons",fadeIn:"survey-module__3DCdiW__fadeIn",footer:"survey-module__3DCdiW__footer",header:"survey-module__3DCdiW__header",hidden:"survey-module__3DCdiW__hidden",info:"survey-module__3DCdiW__info",instructions:"survey-module__3DCdiW__instructions",modal:"survey-module__3DCdiW__modal","no-padding":"survey-module__3DCdiW__no-padding",single:"survey-module__3DCdiW__single","skip-button":"survey-module__3DCdiW__skip-button","skip-text":"survey-module__3DCdiW__skip-text",stacked:"survey-module__3DCdiW__stacked","step-indicator":"survey-module__3DCdiW__step-indicator","submit-button":"survey-module__3DCdiW__submit-button",survey:"survey-module__3DCdiW__survey",tip:"survey-module__3DCdiW__tip",title:"survey-module__3DCdiW__title"})},255537,e=>{e.v({list:"checkbox-select-module__u-_xrG__list"})},8820139,e=>{e.v({heading:"checkbox-option-module__aiX9dq__heading",hidden:"checkbox-option-module__aiX9dq__hidden",input:"checkbox-option-module__aiX9dq__input",keyboard:"checkbox-option-module__aiX9dq__keyboard",option:"checkbox-option-module__aiX9dq__option",selected:"checkbox-option-module__aiX9dq__selected","selected-icon":"checkbox-option-module__aiX9dq__selected-icon"})},9169214,e=>{e.v({text:"survey-prompt-module__kD9QzG__text"})},1585898,2066827,e=>{"use strict";e.i(942336);var t=e.i(6468255),s=e.i(6696646),i=e.i(9722978),l=e.i(9499865),d=e.i(550542),a=e.i(6499772),n=e.i(6362863),o=e.i(9508212),r=e.i(1344973),u=e.i(2504781),c=e.i(6891161),p=e.i(455575),f=e.i(119294),x=e.i(6352514),_=e.i(7921976);function v(e){let t=e.lastIndexOf(" ");return -1===t?e:`${e.substring(0,t)}\u00A0${e.substring(t+1)}`}var h=e.i(2020034),y=e.i(9156249);function E(e){let{currentStep:l,steps:d,className:a}=e,n=(0,s.useRef)(null),[r,u]=(0,s.useState)({top:0,left:0});return(0,s.useEffect)(()=>{n.current&&u({top:n.current.offsetTop,left:n.current.offsetLeft})},[l]),(0,t.jsxs)(o.Stack,{className:(0,i.clsx)(a,y.default["step-indicator"]),direction:"row",gap:1,children:[(0,t.jsx)("span",{"aria-hidden":!0,className:(0,i.clsx)(y.default.circle,y.default.current),style:r}),d.map((e,s)=>(0,t.jsx)("span",{"aria-hidden":!0,className:y.default.circle,ref:s===l?n:void 0},e.key)),(0,t.jsxs)("span",{className:"geist-sr-only",children:["Step ",l+1," of ",d.length]})]})}let b=(0,s.createContext)({accountId:void 0,cancel:()=>void 0,dataTestIdContext:[],dispatch:()=>void 0,hasMultipleSteps:!1,invalidFields:[],originalSteps:[],setInvalidFields:()=>void 0,setStatus:()=>void 0,status:"idle",submit:()=>Promise.resolve(),surveyState:null,team:null,updateCookie:()=>void 0,user:null});b.displayName="SurveyContext";var m=e.i(6942035),S=e.i(5184244);function k(e){let{id:i,onAction:l,surveyName:d,updateCookie:a}=e,n=(0,p.useToasts)(),c=()=>{n.removeToastByKey(i)};(0,s.useEffect)(()=>{f.analytics.track(x.AnalyticsEvent.SURVEY_TOAST_SHOWN,{surveyName:d})},[d]);let _=()=>{f.analytics.track(x.AnalyticsEvent.SURVEY_TOAST_DISMISSED,{surveyName:d}),a(),c()};return(0,t.jsxs)(o.Stack,{className:S.default.prompt,gap:4,children:[(0,t.jsxs)(o.Stack,{direction:"row",children:[(0,t.jsx)(r.Text,{as:"h1",size:16,weight:500,children:"Help us improve your Vercel experience"}),(0,t.jsx)(u.Button,{"aria-label":"dismiss",className:S.default["close-button"],onClick:_,svgOnly:!0,variant:"unstyled",children:(0,t.jsx)(m.Cross,{})})]}),(0,t.jsx)(r.Text,{className:S.default.description,children:"Please help us better understand how we can improve your Vercel experience with this 2 minute survey."}),(0,t.jsxs)(o.Stack,{direction:"row",gap:2,justify:"end",children:[(0,t.jsx)(u.Button,{onClick:_,size:"small",type:"secondary",children:"No Thanks"}),(0,t.jsx)(u.Button,{onClick:()=>{l(),c()},size:"small",children:"Start"})]})]})}var I=e.i(8457113),T=e.i(4004502),g=e.i(8248823);function C(e){for(var t=arguments.length,s=Array(t>1?t-1:0),i=1;i<t;i++)s[i-1]=arguments[i];return(0,T.tid)("survey-modal",e,...s)}function j(e){if("checkbox"!==e.as)throw Error(`Expected a checkbox select list, but got a ${e.as} select list instead.`);return e}let D=e=>{let t=[],s={},i=[],l={},{surveyName:d,surveySlug:a,surveySteps:n}=e,o=0;for(let e=0;e<n.length;e++){let d=n[e];for(let a of(i[e]={title:d.title,description:d.description,start:o,end:o+1},d.fields))if("select"===a.type){switch(a.as){case"dropdown":l[a.id]={as:"dropdown",id:a.id,start:o,end:o+1,label:a.label};break;case"combobox":l[a.id]={as:"combobox",id:a.id,start:o,end:o+1,label:a.label,placeholder:a.placeholder??null};break;default:l[a.id]={as:a.as??"checkbox",id:a.id,start:o,end:o+1,label:a.label,selectMultiple:!!a.selectMultiple}}for(let d of a.options){let n=`${e}-${a.id}-${d.id}`,r={fqid:n,stepIndex:e,inputId:d.id,selectListId:a.id,label:d.label,selected:!!d.selected,type:"option",reveals:d.reveals?{fqid:`${n}-${d.reveals.id}`,stepIndex:e,inputId:d.reveals.id,label:d.reveals.label??"",value:d.reveals.value??"",size:d.reveals.size??"short",validationRegex:d.reveals.validationRegex,validationErrorMessage:d.reveals.validationErrorMessage,inputTypeName:d.reveals.inputTypeName,type:"text"}:void 0};t.push(r),s[n]=o,i[e].end=o+1,l[a.id].end=o+1,o++}}else{let l=`${e}-${a.id}`,d={fqid:l,stepIndex:e,inputId:a.id,label:a.label,instructions:a.instructions,value:a.value||"",size:a.size||"short",validationRegex:a.validationRegex,validationErrorMessage:a.validationErrorMessage,inputTypeName:a.inputTypeName,type:"text"};t.push(d),s[l]=o,i[e].end=o+1,o++}}return{surveyName:d,surveySlug:a,fields:t,fieldLookup:s,stepLookup:i,selectListLookup:l,currentStep:0,previousStep:null,lastStep:n.length-1,isFirstStep:!0,isLastStep:n.length-1==0}},F=["a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z"];var N=e.i(255537),q=e.i(8761240),L=e.i(9689002),w=e.i(8820139),O=e.i(7534323),U=e.i(3500331),P=e.i(9334091);function M(e){let{type:i,optionFqid:l,field:d,className:a,"data-testid":n,showLabel:o,...u}=e,{setInvalidFields:c,invalidFields:p,surveyState:f,dispatch:x}=(0,s.useContext)(b),{fqid:_,inputId:h,inputTypeName:y,label:E,size:m="short",value:S,validationErrorMessage:k,validationRegex:T}=d,{focusedField:g,focusedNestedField:C}=f,j=(0,s.useRef)(null),D=(0,s.useRef)(null),[F,N]=(0,s.useState)(!1);(0,s.useEffect)(()=>{p.includes(_)?F||c(p.filter(e=>e!==_)):F&&c([...p,_])},[F,_,c]),(0,s.useEffect)(()=>{("top-level"===i?g?.fqid===_:C?.fqid===_)&&(j.current??D.current)?.focus()},[g?.fqid,C?.fqid,_,i]);let q=()=>{"top-level"===i&&g?.fqid!==_?x({type:"SET_FOCUSED_FIELD",fqid:_}):"nested"===i&&C?.fqid!==_&&x({type:"SET_FOCUSED_NESTED_FIELD",optionFqid:l})},L=e=>{"nested"===i?x({type:"UPDATE_NESTED_TEXT_FIELD",optionFqid:l,value:e.target.value}):x({type:"UPDATE_TEXT_FIELD",fqid:_,value:e.target.value}),S?A(e.target.value):N(!1)},w=e=>{let t=e.target;"nested"===i?x({type:"UPDATE_NESTED_TEXT_FIELD",optionFqid:l,value:e.target.value}):x({type:"UPDATE_TEXT_FIELD",fqid:_,value:e.target.value}),F&&A(t.value)},M=k??(y?({email:"Please enter a valid email.",url:"Please enter a valid URL."})[y]:void 0),A=e=>{let t;if(T&&k)t=T;else switch(y){case"email":t=/^\S+@\S+\.\S+$/;break;case"url":N(!(0,O.default)(e));return}t&&N(!t.test(e))},R=d.instructions?(0,t.jsx)(r.Text,{className:I.default.instructions,size:16,children:v(d.instructions)}):null;return"short"===m?(0,t.jsxs)(t.Fragment,{children:[R,(0,t.jsx)(U.Input,{"aria-label":E,autoComplete:"off",className:a,"data-testid":n,id:h,label:o?E:void 0,maxLength:256,onBlur:L,onChange:w,onFocus:q,placeholder:o?void 0:E||"Add your answer…",...u,error:F?M:void 0,ref:j,typeName:y,value:S})]}):(0,t.jsxs)(t.Fragment,{children:[R,(0,t.jsx)(P.Textarea,{"aria-label":E,className:a,"data-testid":n,id:h,label:o?E:void 0,maxLength:4e3,onBlur:L,onChange:w,onFocus:q,placeholder:o?void 0:E||"Add your answer…",rows:3,...u,error:F?M:void 0,ref:D,value:S})]})}function A(e){let{index:n,listId:u,option:c,dataTestIdContext:p=[]}=e,[f,{height:x}]=(0,l.default)(),_=(0,s.useRef)(null),{surveyState:v,dispatch:h}=(0,s.useContext)(b),{focusedField:y,focusedNestedField:E,selectListLookup:m}=v,{selectMultiple:S}=j(m[c.selectListId]),k=c.selected&&c.reveals,I=!!c.reveals,T=y?.fqid===c.fqid,g="30px";(0,s.useEffect)(()=>{T&&null===E&&_.current?.focus()},[E,T,c.fqid]);let[D,N]=(0,a.useSpring)(()=>({config:{...a.config.default,clamp:!0},height:k?`${x}px`:g}),[k]);return(0,s.useEffect)(()=>{k?N.start({height:`${x}px`,onStart:()=>{h({type:"SET_FOCUSED_NESTED_FIELD",optionFqid:c.fqid})}}):I&&N.start({height:g,onStart:()=>{h({type:"SET_FOCUSED_FIELD",fqid:c.fqid})}})},[I,h,x,k,T,c.fqid,N]),(0,t.jsxs)("li",{"aria-checked":c.selected,"aria-labelledby":c.inputId,"aria-selected":c.selected,className:(0,i.clsx)(w.default.option,{[w.default.selected]:c.selected}),"data-testid":C("form-input",u,"checkbox",c.inputId,...p),id:F[n],onClick:e=>{T||h({type:"SET_FOCUSED_FIELD",fqid:c.fqid});let t=e.target;t.dataset.reveal&&t.focus(),"INPUT"!==t.tagName&&h({type:"TOGGLE_OPTION",fqid:c.fqid})},onFocus:()=>{T||h({type:"SET_FOCUSED_FIELD",fqid:c.fqid})},onKeyDown:void 0,ref:_,role:"option",tabIndex:0,value:c.inputId,children:[S?(0,t.jsx)("input",{"aria-readonly":!0,checked:c.selected,className:w.default.input,"data-list-id":u,id:c.inputId,readOnly:!0,type:"checkbox",value:c.label||""}):(0,t.jsx)("input",{checked:c.selected,className:w.default.input,"data-list-id":u,id:c.inputId,readOnly:!0,type:"radio",value:c.label||""}),(0,t.jsx)(d.animated.div,{style:void 0,children:(0,t.jsxs)(o.Stack,{gap:3,ref:f,children:[(0,t.jsxs)("div",{className:w.default.heading,children:[(0,t.jsx)(L.Kbd,{"aria-hidden":!0,className:w.default.keyboard,children:F[n]}),(0,t.jsx)(r.Text,{weight:500,children:(0,t.jsx)("label",{htmlFor:c.inputId,children:c.label})}),c.selected?(0,t.jsx)("span",{"aria-hidden":!0,className:w.default["selected-icon"],children:(0,t.jsx)(q.CheckCircleFill,{color:"green-700"})}):null]}),c.reveals?(0,t.jsx)("div",{className:(0,i.clsx)({[w.default.hidden]:!c.selected}),"data-testid":C("form-input-wrapper",u,"checkbox",c.inputId,"revealed-textbox",...p),children:(0,t.jsx)(M,{"data-testid":C("form-input",u,"checkbox",c.inputId,"revealed-textbox",...p),field:c.reveals,optionFqid:c.fqid,type:"nested"})}):null]})})]},c.inputId)}function R(e){let{id:i,options:l,selectMultiple:d,dataTestIdContext:a=[]}=e,{surveyState:n,dispatch:r}=(0,s.useContext)(b),{focusedField:u,focusedNestedField:c,selectListLookup:p}=n,{label:f}=j(p[l[0].selectListId]),x=(0,s.useCallback)(e=>{let t=l.findIndex(e=>e.fqid===u?.fqid),s=null!==c;switch(e.key){case"ArrowUp":e.preventDefault(),-1===t?r({type:"SET_FOCUSED_FIELD",fqid:l[0].fqid}):r({type:"SET_FOCUSED_FIELD",fqid:l.at(t-1)?.fqid??null});break;case"ArrowDown":e.preventDefault(),-1===t?r({type:"SET_FOCUSED_FIELD",fqid:l[0].fqid}):r({type:"SET_FOCUSED_FIELD",fqid:l.at(t+1)?.fqid??l.at(0)?.fqid??null});break;case" ":if(-1===t||s)return;e.preventDefault(),r({type:"TOGGLE_OPTION",fqid:l[t].fqid});break;default:if(F.includes(e.key)){if(s)return;let t=l[F.indexOf(e.key)]?.fqid;t&&(r({type:"TOGGLE_OPTION",fqid:t}),r({type:"SET_FOCUSED_FIELD",fqid:t}))}}},[l,c,u?.fqid,r]);return(0,s.useEffect)(()=>{let e=e=>{e.target&&"dataset"in e.target&&"surveyContainer"in e.target.dataset&&x(e)};return window.addEventListener("keydown",e),()=>{window.removeEventListener("keydown",e)}},[x]),(0,t.jsx)(o.Stack,{"aria-label":f,"aria-multiselectable":d,as:"ul",className:N.default.list,"data-testid":C("form-input",i,...a),gap:2,onKeyDown:x,role:"listbox",children:l.map((e,s)=>(0,t.jsx)(A,{dataTestIdContext:a,index:s,listId:i,option:e},e.inputId))})}var B=e.i(5323212);function G(e){let{id:i,options:l,dataTestIdContext:d=[]}=e,{surveyState:a,dispatch:n}=(0,s.useContext)(b),{selectListLookup:r}=a,u=function(e){if("dropdown"!==e.as)throw Error(`Expected a dropdown select list, but got a ${e.as} select list instead.`);return e}(r[l[0].selectListId]),{label:c}=u,p=(0,s.useMemo)(()=>l.find(e=>e.selected),[l]);return(0,t.jsxs)(o.Stack,{gap:4,role:"group",children:[(0,t.jsx)(B.Select,{"aria-label":c,"data-testid":C("form-input",i,...d),defaultValue:p?.inputId,id:u.id,onChange:e=>{let t=c?e.target.selectedIndex-1:e.target.selectedIndex;n({type:"TOGGLE_OPTION",fqid:l[t].fqid}),n({type:"SET_FOCUSED_FIELD",fqid:l[t].fqid})},onFocus:()=>{n({type:"SET_FOCUSED_FIELD",fqid:p?.fqid??l[0].fqid})},placeholder:c,value:p?.inputId,children:l.map(e=>(0,t.jsx)("option",{"aria-selected":e.selected,selected:e.selected,value:e.inputId,children:e.label},e.inputId))}),p?.reveals?(0,t.jsx)(M,{"data-testid":C("form-input",u.id,"dropdown",p.inputId,"revealed-textbox",...d),field:p.reveals,optionFqid:p.fqid,type:"nested"}):null]})}var W=e.i(6881349),$=e.i(3671642);function V(e){let{id:i,options:l,dataTestIdContext:d=[]}=e,{surveyState:a,dispatch:n}=(0,s.useContext)(b),{selectListLookup:r}=a,u=function(e){if("combobox"!==e.as)throw Error(`Expected a combobox select list, but got a ${e.as} select list instead.`);return e}(r[l[0].selectListId]),{label:c,placeholder:p}=u,f=(0,s.useMemo)(()=>l.find(e=>e.selected),[l]);return(0,t.jsxs)(o.Stack,{gap:2,children:[(0,t.jsxs)(W.Combobox,{"aria-label":c,"data-testid":C("form-input",i,...d),onChange:e=>{if(!e){f&&n({type:"TOGGLE_OPTION",fqid:f.fqid});return}let t=l.findIndex(t=>t.inputId===e),s=l[t];f?.fqid!==s.fqid&&(f&&n({type:"TOGGLE_OPTION",fqid:f.fqid}),s.reveals&&n({type:"SET_FOCUSED_NESTED_FIELD",optionFqid:s.fqid}),n({type:"TOGGLE_OPTION",fqid:l[t].fqid}))},placeholder:p??c,value:f?.inputId,children:[(0,t.jsx)($.Label,{value:c}),(0,t.jsx)(W.Combobox.Input,{}),(0,t.jsx)(W.Combobox.List,{children:l.map(e=>(0,t.jsx)(W.Combobox.Option,{"aria-selected":e.selected,value:e.inputId,children:e.label},e.inputId))})]}),f?.reveals?(0,t.jsx)(M,{"data-testid":C("form-input",u.id,"combobox",f.inputId,"revealed-textbox",...d),field:f.reveals,optionFqid:f.fqid,type:"nested"}):null]})}function X(e){let{showInputLabels:i,dataTestIdContext:l=[]}=e,{surveyState:d}=(0,s.useContext)(b),{fields:a,selectListLookup:n,stepLookup:r,currentStep:u}=d,{start:c,end:p}=r[u],f=a.slice(c,p),x=[];for(let e=0;e<f.length;e++){let t=f[e];if("text"===t.type&&x.push(t),"option"===t.type){let{start:s,end:i}=n[t.selectListId],l=a.slice(s,i);x.push(l),e=i-c-1}}return(0,t.jsx)(o.Stack,{gap:6,children:x.map(e=>{if(Array.isArray(e)){let s=n[e[0].selectListId].as,i="checkbox"===s?n[e[0].selectListId].selectMultiple:void 0;return"dropdown"===s?(0,t.jsx)("div",{children:(0,t.jsx)(G,{dataTestIdContext:l,id:e[0].selectListId,options:e})},e[0].selectListId):"combobox"===s?(0,t.jsx)("div",{children:(0,t.jsx)(V,{id:e[0].selectListId,options:e})},e[0].selectListId):(0,t.jsx)("div",{children:(0,t.jsx)(R,{dataTestIdContext:l,id:e[0].selectListId,options:e,selectMultiple:i})},e[0].selectListId)}return(0,t.jsx)("div",{children:(0,t.jsx)(M,{"data-testid":C("form-input",e.inputId,...l),field:e,showLabel:i,type:"top-level"},e.inputId)},e.inputId)})})}var z=e.i(5523169),Y=e.i(7917902);let K=(0,e.i(8128646).default)((e,t)=>{switch(t.type){case"RESET_SURVEY_INFO":return{...D(t.surveyInfo),focusedItem:null,focusedField:null,focusedNestedField:null,focusedButton:null,backButtonExists:!1,skipButtonExists:e.enableSkip,submitButtonExists:!0,enableSkip:e.enableSkip};case"TOGGLE_SKIP_ENABLED":e.enableSkip=t.enableSkip;break;case"SET_FOCUSED_BUTTON":e.focusedItem={type:"button",buttonId:t.buttonId};break;case"SET_FOCUSED_FIELD":e.focusedItem=t.fqid?{type:"field",fqid:t.fqid}:null;break;case"SET_FOCUSED_NESTED_FIELD":{let s=e.fields[e.fieldLookup[t.optionFqid]];"option"===s.type&&s.reveals&&(e.focusedItem={type:"nested-field",optionFqid:t.optionFqid,nestedFqid:s.reveals.fqid});break}case"INCREMENT_STEP":e.currentStep<e.lastStep&&(e.previousStep=e.currentStep,e.currentStep++,e.focusedItem={type:"survey"});break;case"DECREMENT_STEP":e.currentStep>0&&(e.previousStep=e.currentStep,e.currentStep--,e.focusedItem={type:"survey"});break;case"SET_STEP":t.to>=0&&t.to<=e.lastStep&&(e.previousStep=e.currentStep,e.currentStep=t.to,e.focusedItem={type:"survey"});break;case"UPDATE_TEXT_FIELD":{let s=e.fields[e.fieldLookup[t.fqid]];"text"===s.type&&(s.value=t.value);break}case"UPDATE_NESTED_TEXT_FIELD":{let s=e.fields[e.fieldLookup[t.optionFqid]];"option"===s.type&&s.reveals&&(s.reveals.value=t.value);break}case"TOGGLE_OPTION":{let s=e.fields[e.fieldLookup[t.fqid]];if("option"===s.type){let t=e.selectListLookup[s.selectListId],{start:i,end:l}=t;if("checkbox"===t.as&&t.selectMultiple)s.selected=!s.selected;else{let t=s.selected;for(let t of e.fields.slice(i,l))"option"===t.type&&t.selectListId===s.selectListId&&(t.selected=!1);s.selected=!t}}break}default:(0,g.exhaustivenessCheck)(t)}switch(e.isFirstStep=0===e.currentStep,e.isLastStep=e.currentStep===e.lastStep,e.skipButtonExists=e.isFirstStep&&e.enableSkip,e.backButtonExists=!e.isFirstStep,e.focusedItem?.type){case"field":e.focusedField=e.fields[e.fieldLookup[e.focusedItem.fqid]],e.focusedNestedField=null,e.focusedButton=null;break;case"nested-field":{let t=e.fields[e.fieldLookup[e.focusedItem.optionFqid]];"option"===t.type&&t.reveals&&(e.focusedField=t,e.focusedNestedField=t.reveals,e.focusedButton=null);break}case"button":e.focusedField=null,e.focusedNestedField=null,e.focusedButton=e.focusedItem.buttonId;break;case"survey":case void 0:e.focusedField=null,e.focusedNestedField=null,e.focusedButton=null;break;default:(0,g.exhaustivenessCheck)(e.focusedItem)}});function H(e){let{children:i,...l}=e,{dataTestIdContext:d=[],showThankYouToast:a=!0,onDismiss:n=z.default,onSubmit:o,overrideTeamId:r,surveyInfo:u,submitOnSkip:c}=l,{surveySteps:_}=u,v=_.length>1,[y,E]=(0,s.useReducer)(K,(e=>{let{enableSkip:t=!1}=e;return{...D(e.surveyInfo),focusedItem:null,focusedField:null,focusedNestedField:null,focusedButton:null,backButtonExists:!1,skipButtonExists:t,submitButtonExists:!0,enableSkip:t}})(l)),{surveyName:m,surveySlug:S,isLastStep:k,fields:I}=y,[T,C]=(0,s.useState)("idle"),[j,F]=(0,s.useState)([]),{team:N,teams:q,user:L}=(0,Y.useAccount)(),w=(0,s.useMemo)(()=>q?.find(e=>e.id===r)??N,[r,N,q]),O=w?.id,U=L?.uid,P=O??U,M=(0,p.useToasts)(),A=(0,h.getCookie)(S),R=!!U&&A?.includes(U),B=(0,s.useCallback)(()=>{U&&(A?R||(0,h.setCookie)(S,`${A},${U}`):(0,h.setCookie)(S,U))},[R,A,S,U]),G=(0,s.useCallback)(()=>{f.analytics.track(x.AnalyticsEvent.SURVEY_EXITED,{surveyName:m}),n()},[n,m]),W=(0,s.useCallback)(async()=>{if(!(k||c))return;C("submitting"),f.analytics.track(x.AnalyticsEvent.SURVEY_SUBMITTED,{surveyName:m});let e=I.some(e=>{switch(e.type){case"option":if(e.selected)return!0;return!1;case"text":if(e.value)return!0;return!1;default:return(0,g.exhaustivenessCheck)(e)}});e||f.analytics.track(x.AnalyticsEvent.SURVEY_SUBMITTED_EMPTY,{surveyName:m}),B();try{let t=function(e){let{fields:t,stepLookup:s,selectListLookup:i}=e,l=Object.values(s).map(e=>({title:e.title,description:e.description,fields:[]}));for(let e=0;e<t.length;e++){let s=t[e];switch(s.type){case"text":l[s.stepIndex].fields.push({...s,id:s.inputId});break;case"option":{let d=i[s.selectListId],{start:a,end:n}=d,o=t.slice(a,n).map(e=>{if("text"===e.type)throw Error("Somehow, a text field was added to an option list. This is likely a developer error.");let t={id:e.inputId,label:e.label,selected:e.selected};return e.reveals&&(t.reveals={id:e.reveals.inputId,...e.reveals}),t}),r={type:"select",id:s.selectListId,label:d.label,options:o};"checkbox"===d.as&&(r.selectMultiple=d.selectMultiple),l[s.stepIndex].fields.push(r),e=n-1}break;default:(0,g.exhaustivenessCheck)(s)}}return l}(y);await o({surveyName:m,surveySlug:S,user:L??void 0,team:w??void 0,surveySteps:t,hasResponses:e,get fields(){return t.flatMap(e=>e.fields)}})}finally{C("idle"),a&&M.success({text:"Thank you for your feedback."})}},[k,m,I,B,y,o,c,S,L,w,a,M]);return(0,t.jsx)(b.Provider,{value:{accountId:P,cancel:G,dataTestIdContext:d,dispatch:E,hasMultipleSteps:v,invalidFields:j,originalSteps:_,setInvalidFields:F,setStatus:C,status:T,submit:W,surveyState:y,team:w,updateCookie:B,user:L},children:i})}var J=e.i(9169214);function Z(e){let{onAction:s,title:i="Help Shape the Future of Vercel",ctaText:l="Get Started",description:d="Please help us better understand how we can improve your Vercel experience with this 2 minute survey."}=e;return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(c.Modal.Body,{children:(0,t.jsxs)(o.Stack,{gap:6,children:[(0,t.jsx)(c.Modal.Title,{children:i}),(0,t.jsx)(r.Text,{align:"left",className:J.default.text,size:16,children:d})]})}),(0,t.jsx)(c.Modal.Actions,{children:(0,t.jsx)(c.Modal.Action,{fullWidth:!0,onClick:s,children:l})})]})}function Q(e){let{isModal:n=!1,externalProps:u}=e,{dispatch:p,submit:h,surveyState:y,team:E,user:m,invalidFields:S}=(0,s.useContext)(b),{className:k,dataTestIdContext:T=[],enableSkip:g=!1,noPadding:j=!1,onSkip:D,onSubmitted:F,showInputLabels:N=!1,stackButtons:q=!1,submitButtonText:L="Submit"}=u,{currentStep:w,focusedField:O,focusedItem:U,isLastStep:P,previousStep:M,stepLookup:A,surveyName:R}=y,{surveySteps:B}=function(e,t){if(t&&1!==e.surveySteps.length)throw Error(`Can only stack buttons for single-step surveys. Your survey has ${e.surveySteps.length} steps.'`);return e}(u.surveyInfo,q),{title:G,description:W}=A[w];(0,s.useEffect)(()=>{p({type:"TOGGLE_SKIP_ENABLED",enableSkip:g})},[p,g]),(0,s.useEffect)(()=>{p({type:"RESET_SURVEY_INFO",surveyInfo:u.surveyInfo})},[p,u.surveyInfo]);let $=m?.uid,V=E?.id;(0,s.useEffect)(()=>{($||V)&&(f.analytics.track(x.AnalyticsEvent.SURVEY_STARTED,{surveyName:R,teamId:V,userId:$}),p({type:"SET_STEP",to:0}))},[p,R,V,$]);let z=(0,s.useRef)(null);(0,s.useEffect)(()=>{let e=e=>{z.current&&!z.current.contains(e.target)&&p({type:"SET_FOCUSED_FIELD",fqid:null})};return document.addEventListener("mousedown",e),()=>{document.removeEventListener("mousedown",e)}},[p]),(0,s.useEffect)(()=>{null===U?document.activeElement?.blur():"survey"===U.type&&z.current?.focus()},[U]);let[Y,K]=(0,s.useState)();(0,s.useEffect)(()=>{let e=new Set;B.forEach(t=>{t.fields.forEach(t=>{if(e.has(t.id)&&K(`Duplicate top-level field id: ${t.id}`),e.add(t.id),"options"in t){let e=new Set;t.options.forEach(t=>{e.has(t.id)&&K(`Duplicate option id: ${t.id}`),e.add(t.id)})}})})},[B]);let H=(0,s.useCallback)(function(e){if(z.current?.contains(e.target))switch(e.key){case"Enter":if(!(0,_.isModifierPressed)(e)||S.length>0)return;P?h():(e.preventDefault(),p({type:"INCREMENT_STEP"}));break;case"ArrowRight":O?.type!=="text"&&p({type:"INCREMENT_STEP"});break;case"ArrowLeft":O?.type!=="text"&&p({type:"DECREMENT_STEP"})}},[p,O?.type,S.length,P,h]);(0,s.useEffect)(()=>(window.addEventListener("keydown",H),()=>window.removeEventListener("keydown",H)),[H]),(0,s.useEffect)(()=>{null!==M&&f.analytics.track(x.AnalyticsEvent.SURVEY_MODAL_STEP_CHANGED,{startIndex:M,endIndex:w,surveyName:R})},[w,R]);let[J,{height:Z}]=(0,l.default)(),[Q,et]=(0,a.useSpring)(()=>({config:{...a.config.default,clamp:!0},height:void 0}),[w]);return(0,s.useEffect)(()=>{Z&&et.start({height:`${Z}px`})},[w,et,Z]),(0,t.jsxs)(o.Stack,{"aria-label":R,className:(0,i.clsx)(I.default.survey,k,{[I.default["no-padding"]]:j,[I.default.modal]:n}),"data-testid":C("wrapper",...T),gap:8,ref:z,tabIndex:-1,"data-survey-container":!0,children:[(0,t.jsx)(d.animated.div,{style:n?void 0:Q,children:(0,t.jsxs)("form",{"data-testid":C("form",...T),onSubmit:e=>{e.preventDefault()},title:R,children:[(0,t.jsx)("h1",{className:"geist-sr-only",children:R}),(0,t.jsxs)("fieldset",{children:[(0,t.jsxs)("legend",{className:"geist-sr-only",children:["Step ",w+1]}),(0,t.jsxs)(o.Stack,{gap:6,ref:J,children:[G||W?(0,t.jsx)(o.Stack,{gap:2,children:n?(0,t.jsxs)(t.Fragment,{children:[G?(0,t.jsx)(c.Modal.Title,{children:G}):void 0,W?(0,t.jsx)(c.Modal.Subtitle,{children:"string"==typeof W?v(W):W}):null]}):(0,t.jsxs)(t.Fragment,{children:[G?(0,t.jsx)(r.Text,{as:"h1",className:I.default.title,children:G}):void 0,W?(0,t.jsx)(r.Text,{children:"string"==typeof W?v(W):W}):null]})}):null,(0,t.jsx)(X,{dataTestIdContext:T,showInputLabels:N})]})]})]})}),null,n?null:(0,t.jsx)(ee,{onSkip:D,onSubmitted:F,stack:q,submitButtonText:L})]})}function ee(e){let{onSkip:l,onSubmitted:d,stack:a,submitButtonText:c}=e,{cancel:p,dataTestIdContext:f,dispatch:x,invalidFields:_,originalSteps:v,status:h,submit:y,surveyState:m,hasMultipleSteps:S}=(0,s.useContext)(b),{backButtonExists:k,currentStep:T,fields:g,focusedButton:j,focusedField:D,isLastStep:F,selectListLookup:N,skipButtonExists:q,stepLookup:L}=m,w=(0,s.useRef)(null),O=(0,s.useRef)(null),U=(0,s.useRef)(null);(0,s.useEffect)(()=>{switch(j){case"back":w.current?.focus();break;case"skip":O.current?.focus();break;case"submit":U.current?.focus()}},[j]);let P=D?.type==="option"&&"checkbox"===N[D.selectListId].as,M=S&&!P,A=(0,s.useMemo)(()=>v.map((e,t)=>({key:g[L[t].start].fqid})),[g,v,L]);return(0,t.jsxs)(o.Stack,{align:"center","aria-label":"Survey navigation controls",className:I.default.footer,direction:"row",gap:4,justify:k?"space-between":"flex-end",role:"group",children:[k?(0,t.jsx)(u.Button,{"aria-label":"Back to previous step",className:(0,i.clsx)(I.default["back-button"]),"data-testid":C("back-button",...f),onClick:()=>x({type:"DECREMENT_STEP"}),onFocus:()=>{"back"!==j&&x({type:"SET_FOCUSED_BUTTON",buttonId:"back"})},ref:w,svgOnly:!0,type:"tertiary",typeName:"button",children:(0,t.jsx)(n.ArrowLeft,{"aria-label":"left-facing arrow"})}):null,(0,t.jsxs)(o.Stack,{align:"center",className:(0,i.clsx)(I.default.info,{[I.default["align-left"]]:!S||q&&P}),justify:"center",children:[(0,t.jsx)(r.Text,{className:(0,i.clsx)(I.default.tip,{[I.default.hidden]:!P}),color:"gray-900",weight:500,children:"Press a key to select or ↑↓ to navigate"}),(0,t.jsx)(E,{className:(0,i.clsx)(I.default["step-indicator"],{[I.default.hidden]:!M,[I.default.single]:!S}),currentStep:T,steps:A})]}),(0,t.jsxs)(o.Stack,{className:(0,i.clsx)(I.default.buttons,{[I.default.stacked]:a&&!S}),gap:4,children:[q?(0,t.jsx)(u.Button,{className:(0,i.clsx)(I.default["skip-button"]),"data-testid":C("skip-button",...f),onClick:()=>{l?.(),p()},onFocus:()=>{"skip"!==j&&x({type:"SET_FOCUSED_BUTTON",buttonId:"skip"})},ref:O,type:"secondary",children:"Skip"}):null,(0,t.jsx)(u.Button,{"aria-label":F?"Submit survey":"Continue to next step",className:(0,i.clsx)(I.default["submit-button"]),"data-testid":C(F?"submit-button":"next-button",...f),disabled:_.length>0,loading:F?"submitting"===h:void 0,onClick:()=>{F?y().then(d):x({type:"INCREMENT_STEP"})},onFocus:()=>{"submit"!==j&&x({type:"SET_FOCUSED_BUTTON",buttonId:"submit"})},ref:U,children:F?c:"Next"})]})]})}function et(e){let{externalProps:i}=e,{active:l,dataTestIdContext:d=[],enableSkip:a=!1,hideIfAlreadySeen:n,prompt:o,setActive:r,surveyInfo:u,submitOnSkip:p}=i,{surveySlug:f}=u,{dispatch:x,user:_,cancel:v,submit:y}=(0,s.useContext)(b),[E,m]=(0,s.useState)(o),S=(0,h.getCookie)(f),k=!!_?.uid&&S?.includes(_.uid),I=(0,s.useCallback)(e=>{let t=e?.target;(!t||t.offsetParent?.id!=="cconsent-bar")&&a&&(p&&y(),r(!1),v())},[v,a,r,p,y]);return(0,t.jsxs)(c.Modal.Modal,{active:(!n||!k)&&l,"data-testid":C("modal",...d),drawerHeight:"auto",enableSkip:a,onAnimationDone:()=>{x({type:"SET_STEP",to:0})},onClickOutside:I,width:520,children:[l&&E?(0,t.jsx)(Z,{onAction:()=>m(!1)}):null,l&&!E?(0,t.jsx)(es,{externalProps:i,setShowPrompt:m}):null]})}function es(e){let{externalProps:i,setShowPrompt:l}=e,{onSkip:d,onSubmitted:a,prompt:n,promptWithToast:o,setActive:r,stackButtons:u=!1,submitButtonText:f="Submit",surveyInfo:x,submitOnSkip:_}=i,{surveySlug:v,surveyName:y}=x,{user:E,updateCookie:m,submit:S}=(0,s.useContext)(b),I=(0,p.useToasts)(),T=(0,h.getCookie)(v),g=!!E?.uid&&T?.includes(E.uid),C=(0,s.useCallback)(()=>{r(!0)},[r]);(0,s.useEffect)(()=>{o&&I.loaded&&!g&&I.message({preserve:!0,text:(0,t.jsx)(k,{id:v,onAction:C,surveyName:y,updateCookie:m}),key:v})},[T,o,y,v,I,g,C,m]);let j=()=>{void 0===d?r(!1):d(),_&&S()},D=()=>{void 0===a?(r(!1),l?.(n)):a()};return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(c.Modal.Body,{padding:!1,children:(0,t.jsx)(Q,{externalProps:{onSkip:j,onSubmitted:D,...i},isModal:!0})}),(0,t.jsx)(c.Modal.Actions,{children:(0,t.jsx)(ee,{onSkip:j,onSubmitted:D,stack:u,submitButtonText:f})})]})}function ei(e){return(0,t.jsx)(H,{...e,children:(0,t.jsx)(et,{externalProps:e})})}function el(e){return(0,t.jsx)(H,{...e,children:(0,t.jsx)(es,{externalProps:e})})}e.s(["SurveyModal",()=>ei,"SurveyModalContent",()=>el],2066827),e.s([],1585898)}]);

//# sourceMappingURL=0e20d4b8c92fc8b5.js.map
//# debugId=ae79c909-856d-5bbe-8c97-4e3555e308d6
