
!function(){try{var e="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:{},n=(new e.Error).stack;n&&(e._sentryDebugIds=e._sentryDebugIds||{},e._sentryDebugIds[n]="f07c0fa4-3399-575c-bfa6-35fa48d82051")}catch(e){}}();
(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,2831393,e=>{"use strict";var t=e.i(3911483),r=e.i(5338940);function n(){let{team:e,isReady:n}=(0,r.useTeam)(),{data:a,isLoading:i,mutate:o}=(0,t.default)(e?.id&&n?`/api/ai/ai-credits-balance?teamId=${e.id}`:null,e=>fetch(e).then(e=>e.json()));return{balance:a?Number(a.cumulativeBalance):void 0,hasEverPaid:a?.hasEverPaid,hasVerifiedPaymentMethod:a?.hasVerifiedPaymentMethod,loading:!n||i,mutate:o}}e.s(["useAiCreditsBalance",()=>n])},6677203,e=>{"use strict";function t(e){var t,r;if(!e?.billing)return!1;let{awsMarketplace:n}=e.billing;return!!n&&("boolean"==typeof n?n:(t=e,r="vercel",!!t?.billing?.awsMarketplace&&!!Array.isArray(t.billing.awsMarketplace)&&t.billing.awsMarketplace.includes(r)))}e.s(["isAwsMarketplaceCustomer",()=>t])},7418514,e=>{"use strict";var t=e.i(6468255),r=e.i(5714623),n=e.i(6696646),a=e.i(3306538),i=e.i(2504781),o=e.i(7137884),s=e.i(779588),l=e.i(8161149),c=e.i(5063443),u=e.i(8517043),d=e.i(1232681),p=e.i(8459493),f=e.i(6891161),m=e.i(5255926),h=e.i(3895030),y=e.i(1344973),C=e.i(455575),v=e.i(4004502),g=e.i(9070994),b=e.i(4244280),x=e.i(9171423),j=e.i(3169345),S=e.i(4543703),w=e.i(5664412),E=e.i(3256866),T=e.i(9373142),k=e.i(8761240),A=e.i(5756088),P=e.i(9847832),N=e.i(5802506),O=e.i(7917902),M=e.i(1717203),I=e.i(7557283);e.i(5335102);var _=e.i(6764151),R=e.i(8158658),L=e.i(6446781),F=e.i(6482217),B=e.i(4787360),D=e.i(1877305),V=e.i(6677203);function Y(){let{team:e,mutate:f}=(0,O.useAccount)(),{can:m}=(0,M.default)(),y=m(I.Action.Update,I.Resource.PaymentMethod),S=m(I.Action.Read,I.Resource.PaymentMethod),w=(0,P.useIsMobile)(),E=(0,F.useStripeSources)({enabled:!0}),R=E.data?.defaultSource,Y=(0,n.useMemo)(()=>(E.data?.sources||[]).sort((e,t)=>e.id.localeCompare(t.id)),[E]),U=Y.length>0,[q,Z]=(0,n.useState)(!1),[W,K]=(0,n.useState)(!1),[J,z]=(0,n.useState)({active:!1,card:null,requiresNewCard:!1}),[H,Q]=(0,n.useState)(null),X=(0,V.isAwsMarketplaceCustomer)(e),ee=(0,C.useToasts)();async function et(e){let t=e?.id?`${b.API_BILLING}/validate-payment-method-removal?teamId=${e.id}`:`${b.API_BILLING}/validate-payment-method-removal`,r=await (0,x.fetchApi)(t,{method:"GET",throwOnHTTPError:!0});return r&&"string"!=typeof r?r:{result:!1,reasons:[]}}let er=(0,n.useMemo)(()=>async(e,t)=>{let r=1===e.length&&t?.billing?.plan!=="enterprise";if((t?.id&&t.billing?.plan==="hobby"||!t)&&1===e.length){let{reasons:e}=await et(t);if(e.length>0)switch(e[0]){case"not-hobby-plan":ee.error("You cannot remove your last payment method, because you are not on a hobby plan.");break;case"has-open-invoice":ee.error("You cannot remove your last payment method, because you have an open invoice.");break;case"has-domains":ee.error("You cannot remove your last payment method, because you have domains.");break;case"has-marketplace-integrations":ee.error("You cannot remove your last payment method, because you have billable marketplace integrations.");break;case"has-v0-premium-sub":ee.error("You cannot remove your last payment method, because you have a v0 subscription.");break;case"has-v0-team-seats":ee.error("You cannot remove your last payment method, because you have v0 team seats.");break;case"has-draft-invoice":ee.error("You cannot remove your last payment method, because you have a draft invoice.")}r=e.length>0}return r},[ee]),en=async t=>{z({active:!0,card:t,requiresNewCard:await er(Y,e)})},ea=async()=>{await Promise.all([f(),E.mutate()]),K(!1),J.card&&(ei(J.card.id,!0),z({...J,active:!1}))},ei=async(t,r)=>{let n=e?`?teamId=${encodeURIComponent(e.id)}`:"";Z(!0);try{let e=await (0,g.default)(`${b.API_STRIPE_PAYMENT_METHODS}${n}`,{method:r?"DELETE":"POST",body:JSON.stringify({paymentMethod:t,makeDefault:!r||void 0})});if(e.error)return Q(e.error.message);await E.mutate()}finally{Z(!1)}};return(0,t.jsxs)("div",{id:"payment-method",className:"jsx-efc69a07e34f3d23",children:[(0,t.jsxs)(u.Fieldset,{disabled:!y,children:[(0,t.jsxs)(o.FieldsetContent,{children:[(0,t.jsx)(D.FieldsetTitle,{id:B.PERSONAL_ACCOUNT_SETTINGS_NAVIGATION_TITLES.billing.paymentMethod,children:B.PERSONAL_ACCOUNT_SETTINGS_NAVIGATION_TITLES.billing.paymentMethod}),(0,t.jsxs)(h.FieldsetSubtitle,{children:[X?"A card will be used for purchases of items outside of your AWS Marketplace contract. ":null,"Payments for domains, add-ons, and other usage are made using the default card."]}),(0,t.jsx)("div",{className:"jsx-efc69a07e34f3d23 h-[159px]",children:U||!S?(0,t.jsx)(j.Table,{children:(0,t.jsx)(j.Table.Body,{children:S?Y.map(e=>{let{card:r}=e;if(!r)return null;let n=e.id===R;return(0,t.jsxs)(j.Table.Row,{className:"border-t",children:[(0,t.jsx)(j.Table.Cell,{className:"text-gray-1000",children:(0,t.jsxs)("span",{className:"jsx-efc69a07e34f3d23 flex items-center gap-x-2",children:[(0,t.jsx)($,{brand:r.brand}),w?`••••
                              ${r.last4}`:`${(0,L.cardBrand)(r.brand)} ${r.funding} ••••
                              ${r.last4}`,n?(0,t.jsx)(a.Badge,{icon:(0,t.jsx)(k.CheckCircleFill,{}),variant:y?"blue-subtle":"gray-subtle",children:"Default"}):null]})}),w?null:(0,t.jsxs)(j.Table.Cell,{className:"text-right text-gray-1000",children:["Valid until ",r.exp_month,"/",r.exp_year]}),(0,t.jsx)(j.Table.Cell,{className:"w-[3%]",children:(0,t.jsxs)(s.DotsMenu,{children:[n?null:(0,t.jsx)(p.MenuItem,{onClick:()=>{ei(e.id).catch(N.captureError)},children:"Make Default"}),(0,t.jsx)(p.MenuItem,{onClick:()=>{en(e)},type:"error",children:"Remove"})]})})]},e.id)}):(0,t.jsxs)(t.Fragment,{children:[(0,t.jsxs)(j.Table.Row,{className:"border-t",children:[(0,t.jsx)(j.Table.Cell,{children:(0,t.jsxs)("span",{className:"jsx-efc69a07e34f3d23 flex items-center gap-x-2",children:[(0,t.jsx)(T.CreditCard,{}),"••••"]})}),(0,t.jsx)(j.Table.Cell,{className:"text-right",children:"••/••••"}),(0,t.jsx)(j.Table.Cell,{className:"w-[3%]",children:(0,t.jsx)(A.LockClosed,{})})]}),(0,t.jsxs)(j.Table.Row,{className:"border-t",children:[(0,t.jsx)(j.Table.Cell,{children:(0,t.jsxs)("span",{className:"jsx-efc69a07e34f3d23 flex items-center gap-x-2",children:[(0,t.jsx)(T.CreditCard,{}),"••••"]})}),(0,t.jsx)(j.Table.Cell,{className:"text-right",children:"••/••••"}),(0,t.jsx)(j.Table.Cell,{className:"w-[3%]",children:(0,t.jsx)(A.LockClosed,{})})]})]})})}):(0,t.jsx)(l.EmptyState.Root,{description:"No payment methods added",icon:(0,t.jsx)(l.EmptyState.Icon,{icon:(0,t.jsx)(T.CreditCard,{size:32})}),paddingY:26})})]}),(0,t.jsxs)(d.FieldsetFooter,{disabled:!1,children:[(0,t.jsx)(d.FieldsetFooter.Status,{children:H?(0,t.jsxs)(c.ErrorText,{children:[H," – Please try again later."]}):y?"At most, three credit cards can be added.":"You need additional permissions to manage your team's payment method."}),y?(0,t.jsx)(d.FieldsetFooter.Actions,{children:(0,t.jsx)(i.Button,{className:"add-new-card","data-testid":(0,v.tid)("account-settings","billing","add-new-card"),disabled:Y.length>=3,loading:q,onClick:()=>{q||K(!0)},size:"small",children:"Add Card"})}):null]})]}),(0,t.jsx)(_.CreditCardModal,{isActive:W,onAbort:()=>{K(!1)},onContinue:()=>void ea(),paying:!1}),(0,t.jsx)(G,{cardToRemove:J.card,isActive:J.active,onCancel:()=>z({...J,active:!1}),onCancelDone:()=>z({...J,card:null}),onContinue:()=>{J.requiresNewCard?ea():(ei(J.card.id,!0),z({...J,active:!1}))},requiresNewCard:J.requiresNewCard}),(0,t.jsx)(r.default,{id:"efc69a07e34f3d23",children:".table th{text-transform:uppercase}@media (min-width:768px){.table .shown-on-mobile{display:none}}@media (max-width:768px){.table .column-brand,.table .column-type,.table .column-exp,.table .hidden-on-mobile{display:none}.table .shown-on-mobile{white-space:nowrap}}"})]})}function U(e){let{canUpdatePaymentMethod:r}=e;return(0,t.jsx)("div",{id:"payment-method",children:(0,t.jsxs)(u.Fieldset,{disabled:!r,children:[(0,t.jsxs)(o.FieldsetContent,{children:[(0,t.jsx)(D.FieldsetTitle,{id:B.PERSONAL_ACCOUNT_SETTINGS_NAVIGATION_TITLES.billing.paymentMethod,children:B.PERSONAL_ACCOUNT_SETTINGS_NAVIGATION_TITLES.billing.paymentMethod}),(0,t.jsx)(h.FieldsetSubtitle,{children:"Payments for domains, add-ons, and other usage are made using the default card."}),(0,t.jsx)("div",{className:"h-[159px]",children:(0,t.jsx)(j.Table,{children:(0,t.jsx)(j.Table.Body,{children:[,,].fill(null).map((e,r)=>(0,t.jsxs)(j.Table.Row,{className:"border-t border-t-gray-alpha-400",children:[(0,t.jsx)(j.Table.Cell,{children:(0,t.jsxs)("span",{className:"flex items-center gap-x-2",children:[(0,t.jsx)(m.Skeleton,{height:16,width:16}),(0,t.jsx)(m.Skeleton,{height:16,width:156})]})}),(0,t.jsx)(j.Table.Cell,{className:"flex justify-end text-right",children:(0,t.jsx)("span",{className:"flex h-8 items-center",children:(0,t.jsx)(m.Skeleton,{height:16,width:128})})}),(0,t.jsx)(j.Table.Cell,{className:"w-[3%]",children:(0,t.jsx)("span",{className:"flex h-8 items-center",children:(0,t.jsx)(m.Skeleton,{height:16,width:16})})})]},r))})})})]}),(0,t.jsx)(d.FieldsetFooter,{disabled:!1,children:void 0===r?(0,t.jsx)(m.Skeleton,{height:22,width:480}):r?"At most, three credit cards can be added.":"You need additional permissions to manage your team's payment method."})]})})}function G(e){let{isActive:r,cardToRemove:n,requiresNewCard:a,onCancel:i,onCancelDone:o,onContinue:s}=e,l=n?.card;return a?(0,t.jsx)(R.default,{active:r,description:(0,t.jsxs)(t.Fragment,{children:["You cannot remove"," ",(0,t.jsxs)(y.Text,{as:"span",weight:700,children:[(0,L.cardBrand)(l?.brand)," ****",l?.last4]})," ","without adding a new payment method first."]}),onAdded:s,onAnimationDone:o,onCancel:i,title:"Remove Payment Method"}):(0,t.jsxs)(f.Modal.Modal,{active:r,onAnimationDone:o,onClickOutside:i,children:[(0,t.jsxs)(f.Modal.Body,{children:[(0,t.jsx)(f.Modal.Title,{children:"Remove Payment Method"}),(0,t.jsxs)(f.Modal.Subtitle,{children:["You are about to remove"," ",(0,t.jsxs)(y.Text,{as:"span",weight:700,children:[(0,L.cardBrand)(l?.brand)," ****",l?.last4]})," ","from your account."]}),(0,t.jsx)(f.Modal.Subtitle,{children:"Are you sure you want to continue?"})]}),(0,t.jsxs)(f.Modal.Actions,{children:[(0,t.jsx)(f.Modal.Action,{onClick:i,type:"secondary",children:"Cancel"}),(0,t.jsx)(f.Modal.Action,{onClick:s,children:"Continue"})]})]})}function $(e){let{brand:r}=e;switch(r){case"visa":return(0,t.jsx)(w.LogoVisa,{});case"mastercard":return(0,t.jsx)(E.LogoMastercard,{});case"amex":return(0,t.jsx)(S.LogoAmex,{});default:return(0,t.jsx)(T.CreditCard,{})}}e.s(["BillingCardFieldset",()=>Y,"BillingCardSkeleton",()=>U,"CardIcon",()=>$])},4787360,e=>{"use strict";e.s(["PERSONAL_ACCOUNT_SETTINGS_NAVIGATION_TITLES",0,{general:{username:"Username",name:"Display Name",email:"Email",emailRouting:"Email Routing",avatar:"Avatar",id:"User ID",resetTips:"Reset Tips",delete:"Delete Account",transfer:"Transfer"},billing:{plan:"Plan",paymentMethod:"Payment Method",remoteCaching:"Remote Caching",spendManagement:"Spend Management"}},"PERSONAL_ACCOUNT_SETTINGS_TITLES",0,{general:"General",authentication:"Authentication",signInWithVercel:"Sign in with Vercel",teams:"Teams",domains:"Domains",billing:"Billing",invoices:"Invoices",tokens:"Tokens",notifications:"My Notifications",deploymentProtection:"Deployment Protection",activity:"Activity"}])},6347389,e=>{"use strict";let t=(0,e.i(9334638).withNewIcon)(`<g clip-path="url(#clip0_1529_2727)">
  <path fill-rule="evenodd" clip-rule="evenodd" d="M1.8627 7.61014C2.83103 7.22281 4.11733 7 5.5 7C6.88267 7 8.16897 7.22281 9.1373 7.61014C9.61938 7.80297 10.0598 8.05135 10.3921 8.36552C10.7258 8.68119 11 9.11499 11 9.65V13.35C11 13.8859 10.7347 14.3259 10.3979 14.6514C10.0646 14.9735 9.62194 15.226 9.1373 15.4199C8.1672 15.8079 6.88111 16.0199 5.5 16.0001C4.11889 16.0199 2.8328 15.8079 1.8627 15.4199C1.37806 15.226 0.935392 14.9735 0.602056 14.6514C0.265315 14.3259 0 13.8859 0 13.35V9.65C0 9.11499 0.274157 8.68119 0.607948 8.36552C0.940154 8.05135 1.38062 7.80297 1.8627 7.61014ZM1.5 9.65088V9.65L1.5 9.64998C1.49997 9.64935 1.49947 9.63747 1.5142 9.60866C1.53081 9.57621 1.56658 9.52347 1.63861 9.45535C1.78713 9.31489 2.04229 9.15385 2.41979 9.00285C3.17062 8.70252 4.25931 8.5 5.5 8.5C6.74069 8.5 7.82938 8.70252 8.58021 9.00285C8.95771 9.15385 9.21287 9.31489 9.36139 9.45535C9.43342 9.52347 9.46919 9.57621 9.4858 9.60866C9.50054 9.63747 9.50003 9.64935 9.5 9.64998L9.5 9.65C9.5 9.65002 9.50002 9.65031 9.5 9.65089M1.5 11.5298V13.35C1.5 13.3588 1.50052 13.4336 1.6445 13.5728C1.79189 13.7152 2.04485 13.8772 2.41979 14.0271C3.16618 14.3257 4.25066 14.519 5.48857 14.5001L5.5 14.4999L5.51143 14.5001C6.74934 14.519 7.83382 14.3257 8.58021 14.0271C8.95515 13.8772 9.20811 13.7152 9.3555 13.5728C9.49948 13.4336 9.5 13.3588 9.5 13.35V11.5298C9.38261 11.587 9.26133 11.6402 9.1373 11.6899C8.16897 12.0772 6.88267 12.3 5.5 12.3C4.11733 12.3 2.83103 12.0772 1.8627 11.6899C1.73867 11.6402 1.61739 11.587 1.5 11.5298ZM9.5 9.65089C9.49989 9.65411 9.49857 9.66636 9.4858 9.69134C9.46919 9.72379 9.43342 9.77653 9.36139 9.84465C9.21287 9.98511 8.95771 10.1461 8.58021 10.2971C7.82938 10.5975 6.74069 10.8 5.5 10.8C4.25931 10.8 3.17062 10.5975 2.41979 10.2971C2.04229 10.1461 1.78713 9.98511 1.63861 9.84465C1.56658 9.77653 1.53081 9.72379 1.5142 9.69134C1.50143 9.66636 1.50011 9.65411 1.5 9.65088" fill="currentColor" />
  <path fill-rule="evenodd" clip-rule="evenodd" d="M6.8627 0.61014C7.83103 0.222808 9.11733 0 10.5 0C11.8827 0 13.169 0.222808 14.1373 0.61014C14.6194 0.802973 15.0598 1.05135 15.3921 1.36552C15.7258 1.68119 16 2.11499 16 2.65V6.35C16 6.90413 15.746 7.35093 15.4245 7.67984C15.1106 8.00089 14.7088 8.23745 14.3171 8.41033C13.5387 8.75385 12.6231 8.92251 12 8.92251V7.42251C12.415 7.42251 13.1243 7.29715 13.7115 7.03804C14.0025 6.90961 14.2185 6.76769 14.3518 6.63129C14.4775 6.50275 14.5 6.41311 14.5 6.35V4.52982C14.3826 4.58696 14.2613 4.64025 14.1373 4.68986C13.169 5.07719 11.8827 5.3 10.5 5.3C9.11733 5.3 7.83103 5.07719 6.8627 4.68986C6.73867 4.64025 6.61739 4.58696 6.5 4.52982V5.5H5V2.65C5 2.11499 5.27416 1.68119 5.60795 1.36552C5.94015 1.05135 6.38062 0.802973 6.8627 0.61014ZM6.5 2.65088V2.65L6.5 2.64998C6.49997 2.64935 6.49947 2.63747 6.5142 2.60866C6.53081 2.57621 6.56658 2.52347 6.63861 2.45535C6.78713 2.31489 7.04229 2.15385 7.41979 2.00285C8.17062 1.70252 9.25931 1.5 10.5 1.5C11.7407 1.5 12.8294 1.70252 13.5802 2.00285C13.9577 2.15385 14.2129 2.31489 14.3614 2.45535C14.4334 2.52347 14.4692 2.57621 14.4858 2.60866C14.5005 2.63747 14.5 2.64935 14.5 2.64998L14.5 2.65C14.5 2.65002 14.5 2.65031 14.5 2.65089M6.5 2.65088C6.50011 2.65411 6.50143 2.66636 6.5142 2.69134C6.53081 2.72379 6.56658 2.77653 6.63861 2.84465C6.78713 2.98511 7.04229 3.14615 7.41979 3.29715C8.17062 3.59748 9.25931 3.8 10.5 3.8C11.7407 3.8 12.8294 3.59748 13.5802 3.29715C13.9577 3.14615 14.2129 2.98511 14.3614 2.84465C14.4334 2.77653 14.4692 2.72379 14.4858 2.69134C14.4986 2.66636 14.4999 2.65411 14.5 2.65089" fill="currentColor" />
  </g>
  <defs>
  <clipPath id="clip0_1529_2727">
  <rect width="16" height="16" fill="white" />
  </clipPath>
  </defs>`);e.s(["Coins",0,t])},2471070,e=>{"use strict";var t=e.i(3911483),r=e.i(5338940);function n(e){let{team:n}=(0,r.useTeam)(),{data:a,error:i,isLoading:o,mutate:s}=(0,t.default)(n?.id&&e?`/api/credit-topups?teamId=${n.id}&currency=${e}`:null,async e=>{let t=await fetch(e);if(!t.ok)throw Error(t.statusText);return t.json()});return{topups:a,error:i,loading:o,mutate:s}}function a(){return n("ai_gateway_credits")}function i(){return n("vercel_agent_credits")}e.s(["useAiGatewayCreditTopups",()=>a,"useCreditTopups",()=>n,"useVercelAgentCreditTopups",()=>i])},8297232,e=>{"use strict";var t=e.i(6696646),r=e.i(2304153);function n(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function a(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?n(Object(r),!0).forEach(function(t){o(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):n(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}function i(e){return(i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function o(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function s(e,t){if(null==e)return{};var r,n,a=function(e,t){if(null==e)return{};var r,n,a={},i=Object.keys(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)>=0||(a[r]=e[r]);return a}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)r=i[n],!(t.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(e,r)&&(a[r]=e[r])}return a}function l(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r,n,a=e&&("undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"]);if(null!=a){var i=[],o=!0,s=!1;try{for(a=a.call(e);!(o=(r=a.next()).done)&&(i.push(r.value),!t||i.length!==t);o=!0);}catch(e){s=!0,n=e}finally{try{o||null==a.return||a.return()}finally{if(s)throw n}}return i}}(e,t)||function(e,t){if(e){if("string"==typeof e)return c(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if("Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return c(e,t)}}(e,t)||function(){throw TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function c(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}var u=function(e){return null!==e&&"object"===i(e)},d="Invalid prop `stripe` supplied to `Elements`. We recommend using the `loadStripe` utility from `@stripe/stripe-js`. See https://stripe.com/docs/stripe-js/react#elements-props-stripe for details.",p=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:d;if(null===e||u(e)&&"function"==typeof e.elements&&"function"==typeof e.createToken&&"function"==typeof e.createPaymentMethod&&"function"==typeof e.confirmCardPayment)return e;throw Error(t)},f=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:d;if(u(e)&&"function"==typeof e.then)return{tag:"async",stripePromise:Promise.resolve(e).then(function(e){return p(e,t)})};var r=p(e,t);return null===r?{tag:"empty"}:{tag:"sync",stripe:r}},m=function(e){var r=t.default.useRef(e);return t.default.useEffect(function(){r.current=e},[e]),r.current},h="[object Object]",y=function e(t,r){if(!u(t)||!u(r))return t===r;var n=Array.isArray(t);if(n!==Array.isArray(r))return!1;var a=Object.prototype.toString.call(t)===h;if(a!==(Object.prototype.toString.call(r)===h))return!1;if(!a&&!n)return t===r;var i=Object.keys(t),o=Object.keys(r);if(i.length!==o.length)return!1;for(var s={},l=0;l<i.length;l+=1)s[i[l]]=!0;for(var c=0;c<o.length;c+=1)s[o[c]]=!0;var d=Object.keys(s);return d.length===i.length&&d.every(function(n){return e(t[n],r[n])})},C=function(e){e&&e._registerWrapper&&e.registerAppInfo&&(e._registerWrapper({name:"react-stripe-js",version:"4.0.2"}),e.registerAppInfo({name:"react-stripe-js",version:"4.0.2",url:"https://stripe.com/docs/stripe-js/react"}))},v=t.default.createContext(null);v.displayName="ElementsContext";var g=function(e,t){if(!e)throw Error("Could not find Elements context; You need to wrap the part of your app that ".concat(t," in an <Elements> provider."));return e};r.default.any,r.default.object,r.default.func.isRequired;var b=["on","session"],x=t.default.createContext(null);x.displayName="CheckoutContext";var j=function(e,t){if(!e)throw Error("Could not find CheckoutProvider context; You need to wrap the part of your app that ".concat(t," in a <CheckoutProvider> provider."));return e},S=function(e,t){if("success"!==t.type)return{stripe:e,checkoutState:t};var r=t.sdk,n=t.session;return r.on,r.session,{stripe:e,checkoutState:{type:"success",checkout:Object.assign({},n,s(r,b))}}},w=function(e){var r=e.stripe,n=e.options,a=e.children,i=t.default.useMemo(function(){return f(r,"Invalid prop `stripe` supplied to `CheckoutProvider`. We recommend using the `loadStripe` utility from `@stripe/stripe-js`. See https://stripe.com/docs/stripe-js/react#elements-props-stripe for details.")},[r]),o=l(t.default.useState({type:"loading"}),2),s=o[0],c=o[1],u=l(t.default.useState(null),2),d=u[0],p=u[1],h=t.default.useRef(!1);t.default.useEffect(function(){var e=!0,t=function(t){var r=t.stripe;r&&e&&!h.current&&(h.current=!0,r.initCheckout(n).then(function(e){c({type:"success",sdk:e,session:e.session()}),e.on("change",function(e){c(function(t){return"success"===t.type?{type:"success",sdk:t.sdk,session:e}:t})})},function(e){c({type:"error",error:e})}))};return"async"===i.tag?i.stripePromise.then(function(e){p(e),e&&t({stripe:e})}):"sync"===i.tag&&(p(i.stripe),t({stripe:i.stripe})),function(){e=!1}},[i,n,c]);var v=m(r);t.default.useEffect(function(){null!==v&&v!==r&&console.warn("Unsupported prop change on CheckoutProvider: You cannot change the `stripe` prop after setting it.")},[v,r]);var g="success"===s.type?s.sdk:null,b=m(n),j=m(g);t.default.useEffect(function(){if(g){var e,t,r,a,i=!!(!j&&g),o=null==b||null==(e=b.elementsOptions)?void 0:e.appearance,s=null==n||null==(t=n.elementsOptions)?void 0:t.appearance,l=!y(s,o);s&&(l||i)&&g.changeAppearance(s);var c=null==b||null==(r=b.elementsOptions)?void 0:r.fonts,u=null==n||null==(a=n.elementsOptions)?void 0:a.fonts,d=!y(c,u);u&&(d||i)&&g.loadFonts(u)}},[n,b,g,j]),t.default.useEffect(function(){C(d)},[d]);var w=t.default.useMemo(function(){return S(d,s)},[d,s]);return t.default.createElement(x.Provider,{value:w},a)};w.propTypes={stripe:r.default.any,options:r.default.shape({fetchClientSecret:r.default.func.isRequired,elementsOptions:r.default.object}).isRequired};var E=function(e){var r=t.default.useContext(x),n=t.default.useContext(v);if(!r)return g(n,e);if(!n)return r;throw Error("You cannot wrap the part of your app that ".concat(e," in both <CheckoutProvider> and <Elements> providers."))},T=function(){return j(t.default.useContext(x),"calls useCheckout()").checkoutState},k=function(e,r,n){var a=!!n,i=t.default.useRef(n);t.default.useEffect(function(){i.current=n},[n]),t.default.useEffect(function(){if(!a||!e)return function(){};var t=function(){i.current&&i.current.apply(i,arguments)};return e.on(r,t),function(){e.off(r,t)}},[a,r,e,i])},A=["mode"],P=function(e,n){var i="".concat(e.charAt(0).toUpperCase()+e.slice(1),"Element"),c=n?function(e){E("mounts <".concat(i,">"));var r=e.id,n=e.className;return t.default.createElement("div",{id:r,className:n})}:function(r){var n,c=r.id,d=r.className,p=r.options,f=void 0===p?{}:p,h=r.onBlur,C=r.onFocus,v=r.onReady,g=r.onChange,b=r.onEscape,x=r.onClick,j=r.onLoadError,S=r.onLoaderStart,w=r.onNetworksChange,T=r.onConfirm,P=r.onCancel,N=r.onShippingAddressChange,O=r.onShippingRateChange,M=r.onSavedPaymentMethodRemove,I=r.onSavedPaymentMethodUpdate,_=E("mounts <".concat(i,">")),R="elements"in _?_.elements:null,L="checkoutState"in _?_.checkoutState:null,F=(null==L?void 0:L.type)==="success"?L.checkout:null,B=l(t.default.useState(null),2),D=B[0],V=B[1],Y=t.default.useRef(null),U=t.default.useRef(null);k(D,"blur",h),k(D,"focus",C),k(D,"escape",b),k(D,"click",x),k(D,"loaderror",j),k(D,"loaderstart",S),k(D,"networkschange",w),k(D,"confirm",T),k(D,"cancel",P),k(D,"shippingaddresschange",N),k(D,"shippingratechange",O),k(D,"savedpaymentmethodremove",M),k(D,"savedpaymentmethodupdate",I),k(D,"change",g),v&&(n="expressCheckout"===e?v:function(){v(D)}),k(D,"ready",n),t.default.useLayoutEffect(function(){if(null===Y.current&&null!==U.current&&(R||F)){var t=null;if(F)switch(e){case"payment":t=F.createPaymentElement(f);break;case"address":if("mode"in f){var r=f.mode,n=s(f,A);if("shipping"===r)t=F.createShippingAddressElement(n);else if("billing"===r)t=F.createBillingAddressElement(n);else throw Error("Invalid options.mode. mode must be 'billing' or 'shipping'.")}else throw Error("You must supply options.mode. mode must be 'billing' or 'shipping'.");break;case"expressCheckout":t=F.createExpressCheckoutElement(f);break;case"currencySelector":t=F.createCurrencySelectorElement();break;case"taxId":t=F.createTaxIdElement(f);break;default:throw Error("Invalid Element type ".concat(i,". You must use either the <PaymentElement />, <AddressElement options={{mode: 'shipping'}} />, <AddressElement options={{mode: 'billing'}} />, or <ExpressCheckoutElement />."))}else R&&(t=R.create(e,f));Y.current=t,V(t),t&&t.mount(U.current)}},[R,F,f]);var G=m(f);return t.default.useEffect(function(){if(Y.current){var e,t=(e=["paymentRequest"],u(f)?Object.keys(f).reduce(function(t,r){var n=!u(G)||!y(f[r],G[r]);return e.includes(r)?(n&&console.warn("Unsupported prop change: options.".concat(r," is not a mutable property.")),t):n?a(a({},t||{}),{},o({},r,f[r])):t},null):null);t&&"update"in Y.current&&Y.current.update(t)}},[f,G]),t.default.useLayoutEffect(function(){return function(){if(Y.current&&"function"==typeof Y.current.destroy)try{Y.current.destroy(),Y.current=null}catch(e){}}},[]),t.default.createElement("div",{id:c,className:d,ref:U})};return c.propTypes={id:r.default.string,className:r.default.string,onChange:r.default.func,onBlur:r.default.func,onFocus:r.default.func,onReady:r.default.func,onEscape:r.default.func,onClick:r.default.func,onLoadError:r.default.func,onLoaderStart:r.default.func,onNetworksChange:r.default.func,onConfirm:r.default.func,onCancel:r.default.func,onShippingAddressChange:r.default.func,onShippingRateChange:r.default.func,onSavedPaymentMethodRemove:r.default.func,onSavedPaymentMethodUpdate:r.default.func,options:r.default.object},c.displayName=i,c.__elementType=e,c},N="undefined"==typeof window,O=["options"];P("currencySelector",N);var M=P("payment",N);P("expressCheckout",N),P("taxId",N);var I=P("address",N),_=function(e){var r=e.options,n=s(e,O),i=a(a({},r),{},{mode:"billing"});return t.default.createElement(I,a(a({},n),{},{options:i}))};e.s(["BillingAddressElement",()=>_,"CheckoutProvider",()=>w,"PaymentElement",()=>M,"useCheckout",()=>T])},4373123,5895979,5325056,5978870,2166755,e=>{"use strict";e.i(942336);var t=e.i(6468255),r=e.i(6696646),n=e.i(9781044),a=e.i(633201),i=e.i(5802506),o=e.i(7917902),s=e.i(3322724),l=e.i(287495);let c=new Map;function u(e){if(!e)return Promise.resolve(null);let t=c.get(e);return t||(t=(0,a.loadStripe)(e).catch(t=>((0,i.captureError)(t),c.delete(e),null)),c.set(e,t)),t}e.s(["getStripe",()=>u,"withBillingContext",0,e=>{function r(r){let{account:a}=(0,o.useAccount)(),i=(0,l.default)(),c=(0,s.useMediaQuery)(600),d=`${c?16:14}px`,p=a?.billing?.platform==="stripeTestMode";return(0,t.jsx)(n.Elements,{options:{loader:"always",payment_method_types:["card"],appearance:{theme:i?"stripe":"night",variables:{colorBackground:i?"#fff":"#000",colorPrimary:i?"#000":"#fff",fontSizeBase:d}},currency:"usd",mode:"setup"},stripe:u(p?"pk_test_51KWTJcBQYfoTMhVJkeKojfST4MsShve9XJ7Seqw7mgZaUCeO1DR4dR3EkrWFDqD0MG5IiZRYFygw6ZR8FnmZZKnn004vR9fkFq":"pk_live_alyEi3lN0kSwbdevK0nrGwTw"),children:(0,t.jsx)(e,{...r})})}return r.displayName=`WithBillingContext${e.displayName||e.name||"Component"}`,r}],5895979);let d=(0,r.createContext)(void 0);function p(){let e=(0,r.useContext)(d);if(!e)throw Error("useCopperStripe must be used within CopperProvider");return e}function f(){let e=(0,r.useContext)(d);if(!e)throw Error("useCopperClient must be used within CopperProvider");return{teamIdOrSlug:e.teamIdOrSlug,purchaseIntent:e.purchaseIntent,providerDetails:e.providerDetails,setPurchaseIntent:e.setPurchaseIntent,setProviderDetails:e.setProviderDetails,clearPaymentState:e.clearPaymentState}}function m(e){let{children:n,environment:a,teamIdOrSlug:i,clearPaymentStateRef:o}=e,[s,l]=(0,r.useState)(null),[c,p]=(0,r.useState)(null),f=(0,r.useMemo)(()=>u(function(e){switch(e){case"production_test":return"pk_test_51KWTJcBQYfoTMhVJkeKojfST4MsShve9XJ7Seqw7mgZaUCeO1DR4dR3EkrWFDqD0MG5IiZRYFygw6ZR8FnmZZKnn004vR9fkFq";case"production":return"pk_live_alyEi3lN0kSwbdevK0nrGwTw";default:throw Error(`Unsupported environment for Stripe key: ${e}`)}}(a)),[a]),m=(0,r.useCallback)(()=>{l(null),p(null)},[]);(0,r.useEffect)(()=>{o&&(o.current=m)},[m,o]);let h=(0,r.useMemo)(()=>({stripe:f,teamIdOrSlug:i??null,purchaseIntent:s,providerDetails:c,setPurchaseIntent:l,setProviderDetails:p,clearPaymentState:m}),[f,i,s,c,m]);return(0,t.jsx)(d.Provider,{value:h,children:n})}e.s(["CopperProvider",()=>m,"useCopperClient",()=>f,"useCopperStripe",()=>p],5325056);var h=e.i(8297232);let y=(0,r.createContext)(void 0);var C=e.i(7722264);let v={layout:{type:"tabs",defaultCollapsed:!1},terms:{card:"never",applePay:"never",googlePay:"never"}};function g(e){let{paymentElementOptions:n}=e,{confirmHandler:a,onReady:i}=function(){let e=(0,r.useContext)(y);if(!e)throw Error("useCopperCheckout must be used within CopperPaymentElement");return e}(),o=(0,h.useCheckout)(),s=(0,r.useCallback)(async()=>{try{if("success"!==o.type)return{success:!1,error:"error"===o.type?o.error.message:"Checkout session failed to load"};let e=await o.checkout.confirm({redirect:"if_required"});if("error"===e.type)return{success:!1,error:e.error.message};return{success:!0}}catch(e){return{success:!1,error:(0,C.isErrorLike)(e)?e.message:"An error occurred"}}},[o]);return(0,r.useEffect)(()=>(a.current=s,()=>{a.current=null}),[a,s]),(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(h.PaymentElement,{onReady:i,options:n??v}),(0,t.jsx)(h.BillingAddressElement,{})]})}function b(e){let{confirmHandler:n,clientSecret:a,options:i,onReady:o}=e,{stripe:s}=p(),l=(0,r.useMemo)(()=>({fetchClientSecret:()=>Promise.resolve(a),elementsOptions:i.elementsOptions}),[a,i.elementsOptions]);return(0,t.jsx)(y.Provider,{value:{confirmHandler:n,onReady:o},children:(0,t.jsx)(h.CheckoutProvider,{stripe:s,options:l,children:(0,t.jsx)(g,{paymentElementOptions:i.paymentElement})})})}function x(e){return(0,r.useMemo)(()=>e?.billing?.platform==="stripeTestMode"?"production_test":"production",[e])}e.s(["CopperPaymentElement",()=>b],5978870),e.s(["useEnvironment",()=>x],2166755),e.s([],4373123)}]);

//# sourceMappingURL=766191b4d969f04e.js.map
//# debugId=f07c0fa4-3399-575c-bfa6-35fa48d82051
