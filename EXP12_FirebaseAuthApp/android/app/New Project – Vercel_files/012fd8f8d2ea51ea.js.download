
!function(){try{var e="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:{},n=(new e.Error).stack;n&&(e._sentryDebugIds=e._sentryDebugIds||{},e._sentryDebugIds[n]="1bb65ed4-e4e5-5e42-b6b8-44bd9a5709cd")}catch(e){}}();
(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,2417508,e=>{"use strict";var t=e.i(7722264);let i=e=>(0,t.isErrorLike)(e)&&"code"in e;function n(e){return i(e)&&"account_needs_verify"===e.code}function r(e){return i(e)&&"2fa_required"===e.code}function o(e){return i(e)&&"2fa_validation_failed"===e.code}function a(e){return i(e)&&"2fa_invalid_token"===e.code}function s(e){return i(e)&&"2fa_max_attempts"===e.code}function l(e){return i(e)&&"user_does_not_need_to_request_access"===e.code}e.s(["isAccountNeedsVerifyError",()=>n,"isAuthError",0,i,"isNotAuthorizedForMfaScopeError",0,e=>i(e)&&"mfa_enforced"===e.code,"isNotAuthorizedForScopeError",0,e=>(0,t.isErrorLike)(e)&&"saml"in e,"isTwoFactorAuthFailed",()=>o,"isTwoFactorAuthRequired",()=>r,"isTwoFactorInvalidToken",()=>a,"isTwoFactorMaxAttempts",()=>s,"isUserDoesNotNeedToRequestAccessError",()=>l])},8128235,e=>{"use strict";let t={PLACEHOLDER:"placeholder",INPUT:"input",LOADING_EMAIL:"loading-email",LOADING_GOOGLE:"loading-google",LOADING_APPLE:"loading-apple",LOADING_GITHUB:"loading-github",LOADING_GITLAB:"loading-gitlab",LOADING_BITBUCKET:"loading-bitbucket",LOADING_SAML:"loading-saml",LOADING_TOTP:"loading-totp",LOADING_PASSKEY:"loading-passkey",LOADING_RECOVERY_CODE:"loading-recovery-code",VERIFYING_EMAIL:"verifying",VERIFYING_EMAIL_OTP:"verifying-otp",VERIFYING_2FA:"verifying-2fa",ERROR_MAX_2FA_ATTEMPTS:"error-max-2fa-attempts",ERROR_2FA_VERIFICATION_FAILED:"2fa-verification-failed",ERROR_2FA_INVALID_TOKEN:"2fa-invalid-token",LOADING_EMAIL_VERIFY_OTP:"loading-verify-otp",LOADING_EMAIL_CREATE_OTP:"loading-create-otp",ERROR_EMAIL_OTP:"error-otp",SUCCESS:"success",ERROR:"error",ACCOUNT_NEEDS_VERIFY_SMS:"account-needs-verify",SELF_SERVE_VERIFICATION:"self-serve-verification",SIGNING_IN_WITH_GOOGLE:"signing-in-with-google"},i=[t.LOADING_GOOGLE,t.LOADING_APPLE,t.LOADING_GITHUB,t.LOADING_GITLAB,t.LOADING_BITBUCKET,t.LOADING_SAML,t.LOADING_EMAIL,t.LOADING_TOTP,t.LOADING_PASSKEY,t.LOADING_EMAIL_VERIFY_OTP,t.LOADING_EMAIL_CREATE_OTP];e.s(["LOADING_STATES",0,i,"LOGIN_STATE",0,t,"NEW_PROJECT_LINK",0,"/new?onboarding=true","NEW_PROJECT_LINK_FOR_EXISTING_USER",0,"/new"])},1488180,(e,t,i)=>{"use strict";var n=/["'&<>]/;t.exports=function(e){var t,i=""+e,r=n.exec(i);if(!r)return i;var o="",a=0,s=0;for(a=r.index;a<i.length;a++){switch(i.charCodeAt(a)){case 34:t="&quot;";break;case 38:t="&amp;";break;case 39:t="&#39;";break;case 60:t="&lt;";break;case 62:t="&gt;";break;default:continue}s!==a&&(o+=i.substring(s,a)),s=a+1,o+=t}return s!==a?o+i.substring(s,a):o}},8046565,(e,t,i)=>{function n(e,t){"boolean"==typeof t&&(t={forever:t}),this._originalTimeouts=JSON.parse(JSON.stringify(e)),this._timeouts=e,this._options=t||{},this._maxRetryTime=t&&t.maxRetryTime||1/0,this._fn=null,this._errors=[],this._attempts=1,this._operationTimeout=null,this._operationTimeoutCb=null,this._timeout=null,this._operationStart=null,this._options.forever&&(this._cachedTimeouts=this._timeouts.slice(0))}t.exports=n,n.prototype.reset=function(){this._attempts=1,this._timeouts=this._originalTimeouts},n.prototype.stop=function(){this._timeout&&clearTimeout(this._timeout),this._timeouts=[],this._cachedTimeouts=null},n.prototype.retry=function(e){if(this._timeout&&clearTimeout(this._timeout),!e)return!1;var t=new Date().getTime();if(e&&t-this._operationStart>=this._maxRetryTime)return this._errors.unshift(Error("RetryOperation timeout occurred")),!1;this._errors.push(e);var i=this._timeouts.shift();if(void 0===i)if(!this._cachedTimeouts)return!1;else this._errors.splice(this._errors.length-1,this._errors.length),this._timeouts=this._cachedTimeouts.slice(0),i=this._timeouts.shift();var n=this,r=setTimeout(function(){n._attempts++,n._operationTimeoutCb&&(n._timeout=setTimeout(function(){n._operationTimeoutCb(n._attempts)},n._operationTimeout),n._options.unref&&n._timeout.unref()),n._fn(n._attempts)},i);return this._options.unref&&r.unref(),!0},n.prototype.attempt=function(e,t){this._fn=e,t&&(t.timeout&&(this._operationTimeout=t.timeout),t.cb&&(this._operationTimeoutCb=t.cb));var i=this;this._operationTimeoutCb&&(this._timeout=setTimeout(function(){i._operationTimeoutCb()},i._operationTimeout)),this._operationStart=new Date().getTime(),this._fn(this._attempts)},n.prototype.try=function(e){console.log("Using RetryOperation.try() is deprecated"),this.attempt(e)},n.prototype.start=function(e){console.log("Using RetryOperation.start() is deprecated"),this.attempt(e)},n.prototype.start=n.prototype.try,n.prototype.errors=function(){return this._errors},n.prototype.attempts=function(){return this._attempts},n.prototype.mainError=function(){if(0===this._errors.length)return null;for(var e={},t=null,i=0,n=0;n<this._errors.length;n++){var r=this._errors[n],o=r.message,a=(e[o]||0)+1;e[o]=a,a>=i&&(t=r,i=a)}return t}},8029179,(e,t,i)=>{var n=e.r(8046565);i.operation=function(e){return new n(i.timeouts(e),{forever:e&&e.forever,unref:e&&e.unref,maxRetryTime:e&&e.maxRetryTime})},i.timeouts=function(e){if(e instanceof Array)return[].concat(e);var t={retries:10,factor:2,minTimeout:1e3,maxTimeout:1/0,randomize:!1};for(var i in e)t[i]=e[i];if(t.minTimeout>t.maxTimeout)throw Error("minTimeout is greater than maxTimeout");for(var n=[],r=0;r<t.retries;r++)n.push(this.createTimeout(r,t));return e&&e.forever&&!n.length&&n.push(this.createTimeout(r,t)),n.sort(function(e,t){return e-t}),n},i.createTimeout=function(e,t){var i=Math.round((t.randomize?Math.random()+1:1)*t.minTimeout*Math.pow(t.factor,e));return Math.min(i,t.maxTimeout)},i.wrap=function(e,t,n){if(t instanceof Array&&(n=t,t=null),!n)for(var r in n=[],e)"function"==typeof e[r]&&n.push(r);for(var o=0;o<n.length;o++){var a=n[o],s=e[a];e[a]=(function(n){var r=i.operation(t),o=Array.prototype.slice.call(arguments,1),a=o.pop();o.push(function(e){r.retry(e)||(e&&(arguments[0]=r.mainError()),a.apply(this,arguments))}),r.attempt(function(){n.apply(e,o)})}).bind(e,s),e[a].options=t}}},4142933,(e,t,i)=>{t.exports=e.r(8029179)},4504830,(e,t,i)=>{var n=e.r(4142933);t.exports=function(e,t){return new Promise(function(i,r){var o=t||{},a=n.operation(o);function s(e){r(e||Error("Aborted"))}function l(e,t){e.bail?s(e):a.retry(e)?o.onRetry&&o.onRetry(e,t):r(a.mainError())}a.attempt(function(t){var n;try{n=e(s,t)}catch(e){l(e,t);return}Promise.resolve(n).then(i).catch(function(e){l(e,t)})})})}},9450258,e=>{"use strict";function t(e){let t=new Uint8Array(e),i="";for(let e of t)i+=String.fromCharCode(e);return btoa(i).replace(/\+/g,"-").replace(/\//g,"_").replace(/=/g,"")}function i(e){let t=e.replace(/-/g,"+").replace(/_/g,"/"),i=(4-t.length%4)%4,n=atob(t.padEnd(t.length+i,"=")),r=new ArrayBuffer(n.length),o=new Uint8Array(r);for(let e=0;e<n.length;e++)o[e]=n.charCodeAt(e);return r}function n(){return window?.PublicKeyCredential!==void 0&&"function"==typeof window.PublicKeyCredential}function r(e){let{id:t}=e;return{...e,id:i(t),transports:e.transports}}function o(e){return"localhost"===e||/^([a-z0-9]+(-[a-z0-9]+)*\.)+[a-z]{2,}$/i.test(e)}class a extends Error{constructor({message:e,code:t,cause:i,name:n}){super(e,{cause:i}),this.name=n??i.name,this.code=t}}let s=new class{createNewAbortSignal(){if(this.controller){let e=Error("Cancelling existing WebAuthn API call for new one");e.name="AbortError",this.controller.abort(e)}let e=new AbortController;return this.controller=e,e.signal}cancelCeremony(){if(this.controller){let e=Error("Manually cancelling existing WebAuthn API call");e.name="AbortError",this.controller.abort(e),this.controller=void 0}}},l=["cross-platform","platform"];function c(e){if(e&&!(0>l.indexOf(e)))return e}async function u(e){var l;let u,d,E,T,m;if(!n())throw Error("WebAuthn is not supported in this browser");let A={publicKey:{...e,challenge:i(e.challenge),user:{...e.user,id:(l=e.user.id,new TextEncoder().encode(l))},excludeCredentials:e.excludeCredentials?.map(r)}};A.signal=s.createNewAbortSignal();try{u=await navigator.credentials.create(A)}catch(e){throw function(e){let{error:t,options:i}=e,{publicKey:n}=i;if(!n)throw Error("options was missing required publicKey property");if("AbortError"===t.name){if(i.signal instanceof AbortSignal)return new a({message:"Registration ceremony was sent an abort signal",code:"ERROR_CEREMONY_ABORTED",cause:t})}else if("ConstraintError"===t.name){if(n.authenticatorSelection?.requireResidentKey===!0)return new a({message:"Discoverable credentials were required but no available authenticator supported it",code:"ERROR_AUTHENTICATOR_MISSING_DISCOVERABLE_CREDENTIAL_SUPPORT",cause:t});else if(n.authenticatorSelection?.userVerification==="required")return new a({message:"User verification was required but no available authenticator supported it",code:"ERROR_AUTHENTICATOR_MISSING_USER_VERIFICATION_SUPPORT",cause:t})}else if("InvalidStateError"===t.name)return new a({message:"The authenticator was previously registered",code:"ERROR_AUTHENTICATOR_PREVIOUSLY_REGISTERED",cause:t});else if("NotAllowedError"===t.name)return new a({message:t.message,code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:t});else if("NotSupportedError"===t.name)return new a(0===n.pubKeyCredParams.filter(e=>"public-key"===e.type).length?{message:'No entry in pubKeyCredParams was of type "public-key"',code:"ERROR_MALFORMED_PUBKEYCREDPARAMS",cause:t}:{message:"No available authenticator supported any of the specified pubKeyCredParams algorithms",code:"ERROR_AUTHENTICATOR_NO_SUPPORTED_PUBKEYCREDPARAMS_ALG",cause:t});else if("SecurityError"===t.name){let e=window.location.hostname;if(!o(e))return new a({message:`${window.location.hostname} is an invalid domain`,code:"ERROR_INVALID_DOMAIN",cause:t});if(n.rp.id!==e)return new a({message:`The RP ID "${n.rp.id}" is invalid for this domain`,code:"ERROR_INVALID_RP_ID",cause:t})}else if("TypeError"===t.name){if(n.user.id.byteLength<1||n.user.id.byteLength>64)return new a({message:"User ID was not between 1 and 64 characters",code:"ERROR_INVALID_USER_ID_LENGTH",cause:t})}else if("UnknownError"===t.name)return new a({message:"The authenticator was unable to process the specified options, or could not create a new credential",code:"ERROR_AUTHENTICATOR_GENERAL_ERROR",cause:t});return t}({error:e,options:A})}if(!u)throw Error("Registration was not completed");let{id:I,rawId:g,response:h,type:O}=u;if("function"==typeof h.getTransports&&(E=h.getTransports()),"function"==typeof h.getPublicKeyAlgorithm)try{T=h.getPublicKeyAlgorithm()}catch(e){_("getPublicKeyAlgorithm()",e)}if("function"==typeof h.getPublicKey)try{let e=h.getPublicKey();null!==e&&(m=t(e))}catch(e){_("getPublicKey()",e)}if("function"==typeof h.getAuthenticatorData)try{d=t(h.getAuthenticatorData())}catch(e){_("getAuthenticatorData()",e)}return{id:I,rawId:t(g),response:{attestationObject:t(h.attestationObject),clientDataJSON:t(h.clientDataJSON),transports:E,publicKeyAlgorithm:T,publicKey:m,authenticatorData:d},type:O,clientExtensionResults:u.getClientExtensionResults(),authenticatorAttachment:c(u.authenticatorAttachment)}}function _(e,t){console.warn(`The browser extension that intercepted this WebAuthn API call incorrectly implemented ${e}. You should report this error to them.
`,t)}async function d(e){var l;let u,_,d,E=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(!n())throw Error("WebAuthn is not supported in this browser");e.allowCredentials?.length!==0&&(_=e.allowCredentials?.map(r));let T={...e,challenge:i(e.challenge),allowCredentials:_},m={};if(E){let e;if(!await (void 0===(e=window.PublicKeyCredential).isConditionalMediationAvailable?new Promise(e=>e(!1)):e.isConditionalMediationAvailable()))throw Error("Browser does not support WebAuthn autofill");if(document.querySelectorAll("input[autocomplete$='webauthn']").length<1)throw Error('No <input> with "webauthn" as the only or last value in its `autocomplete` attribute was detected');m.mediation="conditional",T.allowCredentials=[]}m.publicKey=T,m.signal=s.createNewAbortSignal();try{d=await navigator.credentials.get(m)}catch(e){throw function(e){let{error:t,options:i}=e,{publicKey:n}=i;if(!n)throw Error("options was missing required publicKey property");if("AbortError"===t.name){if(i.signal instanceof AbortSignal)return new a({message:"Authentication ceremony was sent an abort signal",code:"ERROR_CEREMONY_ABORTED",cause:t})}else if("NotAllowedError"===t.name)return new a({message:t.message,code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:t});else if("SecurityError"===t.name){let e=window.location.hostname;if(!o(e))return new a({message:`${window.location.hostname} is an invalid domain`,code:"ERROR_INVALID_DOMAIN",cause:t});if(n.rpId!==e)return new a({message:`The RP ID "${n.rpId}" is invalid for this domain`,code:"ERROR_INVALID_RP_ID",cause:t})}else if("UnknownError"===t.name)return new a({message:"The authenticator was unable to process the specified options, or could not create a new assertion signature",code:"ERROR_AUTHENTICATOR_GENERAL_ERROR",cause:t});return t}({error:e,options:m})}if(!d)throw Error("Authentication was not completed");let{id:A,rawId:I,response:g,type:h}=d;return g.userHandle&&(l=g.userHandle,u=new TextDecoder("utf-8").decode(l)),{id:A,rawId:t(I),response:{authenticatorData:t(g.authenticatorData),clientDataJSON:t(g.clientDataJSON),signature:t(g.signature),userHandle:u},type:h,clientExtensionResults:d.getClientExtensionResults(),authenticatorAttachment:c(d.authenticatorAttachment)}}e.s(["browserSupportsWebAuthn",()=>n,"startAuthentication",()=>d,"startRegistration",()=>u])},460988,(e,t,i)=>{"use strict";var n,r=e.e&&e.e.__assign||function(){return(r=Object.assign||function(e){for(var t,i=1,n=arguments.length;i<n;i++)for(var r in t=arguments[i])Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e}).apply(this,arguments)};Object.defineProperty(i,"__esModule",{value:!0}),i.ERRORS=i.CODES=i.OTP_CODES=void 0,i.OTP_CODES={INVALID_USERNAME:"invalid_username",INVALID_EMAIL:"invalid_email",INVALID_EMAIL_CONTROL_CHARS:"invalid_email_control_chars",INVALID_EMAIL_DOMAIN:"invalid_email_domain",VERIFICATION_IN_PROGRESS:"verification_in_progress",ACCOUNT_NEEDS_VERIFY:"account_needs_verify",COULD_NOT_VERIFY:"could_not_verify",DIGITS_MISMATCH:"digits_mismatch",INVALID_JWT:"invalid_jwt",USED_OR_EXPIRED:"used_or_expired",ACCOUNT_NOT_FOUND:"account_not_found",TEAM_NOT_FOUND:"team_not_found",USER_BLOCKED:"user_blocked",DUPLICATED:"duplicated",FORBIDDEN_SSO:"forbidden_sso"},i.CODES=r(r({},i.OTP_CODES),{ACCOUNT_NOT_LINKED:"account_not_linked",GITHUB_PRIMARY_EMAIL_NOT_FOUND:"github_primary_email_not_found",GITHUB_ACCOUNT_NOT_LINKED:"github_account_not_linked",GITHUB_ACCOUNT_INVALID_ACCESS_TOKEN:"github_invalid_access_token",GITHUB_ACCOUNT_ALREADY_LINKED:"github_account_already_linked",GITHUB_BAD_CREDENTIALS:"github_bad_credentials",GOOGLE_BAD_CREDENTIALS:"google_bad_credentials",GOOGLE_API_ERROR:"google_api_error",GOOGLE_ACCOUNT_NOT_LINKED:"google_account_not_linked",GOOGLE_INVALID_ACCESS_TOKEN:"google_invalid_access_token",GOOGLE_EMAIL_NOT_VERIFIED:"google_email_not_verified",APPLE_BAD_CREDENTIALS:"apple_bad_credentials",APPLE_NO_EMAIL:"apple_no_email",APPLE_EMAIL_NOT_VERIFIED:"apple_email_not_verified",GITHUB_EMAIL_IN_USE:"github_email_in_use",GITHUB_INVITE_ACCOUNT_MISMATCH:"github_invite_account_mismatch",GITHUB_INVALID_HOST:"github_invalid_host",INCORRECT_CLIENT_CREDENTIALS:"incorrect_client_credentials",REDIRECT_URI_MISMATCH:"redirect_uri_mismatch",BAD_VERIFICATION_CODE:"bad_verification_code",USER_BLOCKED:"user_blocked",ACCOUNT_NOT_FOUND:"account_not_found",TEAM_NOT_FOUND:"team_not_found",TEAM_FORBIDDEN:"team_forbidden",USER_FORBIDDEN:"user_forbidden",EXISTING_ACCOUNT_FOUND:"existing_account_found",UNAUTHORIZED:"unauthorized",METHOD_UNKNOWN:"method_unknown",INTEGRATION_CONNECT_UNAUTHORIZED:"integration_connect_unauthorized",RESERVED:"reserved",DUPLICATED:"duplicated",DUPLICATED_BY_ALIAS:"duplicated_by_alias",GITLAB_ACCOUNT_NOT_LINKED:"gitlab_account_not_linked",GITLAB_INVALID_ACCESS_TOKEN:"gitlab_invalid_access_token",GITLAB_ACCOUNT_ALREADY_LINKED:"gitlab_account_already_linked",GITLAB_ACCOUNT_FLAGGED:"gitlab_account_flagged",GITLAB_LOGIN_ERROR:"gitlab_login_error",GITLAB_ACCEPT_TERMS:"gitlab_accept_terms",GITLAB_INVALID_MODE:"gitlab_invalid_mode",GITLAB_BAD_CREDENTIALS:"gitlab_bad_credentials",GITLAB_API_ERROR:"gitlab_api_error",GITLAB_EMAIL_IN_USE:"gitlab_email_in_use",GITLAB_INVITE_ACCOUNT_MISMATCH:"gitlab_invite_account_mismatch",BITBUCKET_ACCOUNT_NOT_LINKED:"bitbucket_account_not_linked",BITBUCKET_INVALID_ACCESS_TOKEN:"bitbucket_invalid_access_token",BITBUCKET_ACCOUNT_ALREADY_LINKED:"bitbucket_account_already_linked",BITBUCKET_ACCOUNT_FLAGGED:"bitbucket_account_flagged",BITBUCKET_LOGIN_ERROR:"bitbucket_login_error",BITBUCKET_ACCEPT_TERMS:"bitbucket_accept_terms",BITBUCKET_INVALID_MODE:"bitbucket_invalid_mode",BITBUCKET_BAD_CREDENTIALS:"bitbucket_bad_credentials",BITBUCKET_API_ERROR:"bitbucket_api_error",BITBUCKET_EMAIL_IN_USE:"bitbucket_email_in_use",BITBUCKET_INVITE_ACCOUNT_MISMATCH:"bitbucket_invite_account_mismatch",SAML_ENFORCED:"saml_enforced",SAML_NOT_ENABLED:"saml_not_enabled",IDENTITY_PROVIDER_ERROR:"service_provider_error",MFA_REQUIRED:"2fa_required",MFA_MAX_ATTEMPTS:"2fa_max_attempts",MFA_VALIDATION_FAILED:"2fa_validation_failed",MFA_INVALID_TOKEN:"2fa_invalid_token",INVALID_TOKEN:"invalid_token"}),(n={})[i.CODES.GITHUB_PRIMARY_EMAIL_NOT_FOUND]="No primary email found on the GitHub account.",n[i.CODES.GITHUB_ACCOUNT_NOT_LINKED]="There is already an account associated with your GitHub email address. Please login with your email then link your GitHub account.",n[i.CODES.GITHUB_ACCOUNT_INVALID_ACCESS_TOKEN]="There is no Vercel account linked with this GitHub account.",n[i.CODES.GITHUB_ACCOUNT_ALREADY_LINKED]="This GitHub account is already linked to another Vercel account.",n[i.CODES.GITHUB_BAD_CREDENTIALS]="Bad credentials.",n[i.CODES.GITHUB_EMAIL_IN_USE]="The GitHub email is already used by a Vercel account.",n[i.CODES.GITHUB_INVITE_ACCOUNT_MISMATCH]="The GitHub account did not match the invited account.",n[i.CODES.GITHUB_INVALID_HOST]="Invalid host provided.",n[i.CODES.GOOGLE_BAD_CREDENTIALS]="Bad credentials.",n[i.CODES.GOOGLE_API_ERROR]="Google API error.",n[i.CODES.GOOGLE_INVALID_ACCESS_TOKEN]="There is no Vercel account linked with this Google account.",n[i.CODES.GOOGLE_EMAIL_NOT_VERIFIED]="Google email not verified.",n[i.CODES.APPLE_BAD_CREDENTIALS]="Bad credentials.",n[i.CODES.APPLE_NO_EMAIL]="Sign in with Apple account lacks an email address.",n[i.CODES.APPLE_EMAIL_NOT_VERIFIED]="Sign in with Apple account's email is not verified.",n[i.CODES.INCORRECT_CLIENT_CREDENTIALS]="The client_id and/or client_secret passed are incorrect.",n[i.CODES.REDIRECT_URI_MISMATCH]="The redirect_uri MUST match the registered callback URL for this application.",n[i.CODES.BAD_VERIFICATION_CODE]="The code passed is incorrect or expired.",n[i.CODES.USER_BLOCKED]="Your account requires further verification.",n[i.CODES.ACCOUNT_NOT_FOUND]="Account not found.",n[i.CODES.TEAM_NOT_FOUND]="Team not found.",n[i.CODES.TEAM_FORBIDDEN]="You are not an owner of the team.",n[i.CODES.USER_FORBIDDEN]="You are not an owner of the account.",n[i.CODES.EXISTING_ACCOUNT_FOUND]="An existing account found with your email. Visit https://vercel.com/account and connect your GitHub account.",n[i.CODES.UNAUTHORIZED]="Unauthorized to access the given account.",n[i.CODES.METHOD_UNKNOWN]="Wrong request method for this endpoint.",n[i.CODES.INTEGRATION_CONNECT_UNAUTHORIZED]="You don't have the permission to connect the integration to the team.",n[i.CODES.RESERVED]="The username is a reserved word.",n[i.CODES.DUPLICATED]="The username is already in use.",n[i.CODES.DUPLICATED_BY_ALIAS]="The username is already in use.",n[i.CODES.INVALID_TOKEN]="Invalid token. Please sign in again.",n[i.CODES.ACCOUNT_NEEDS_VERIFY]="The account needs to be verified via SMS.",n[i.CODES.COULD_NOT_VERIFY]="Something went wrong with the link you used. Please go back and try again.",n[i.CODES.DIGITS_MISMATCH]="The entered code is incorrect. Please try again and check for typos.",n[i.CODES.INVALID_EMAIL_DOMAIN]="Invalid email domain. Please use a different mail provider.",n[i.CODES.INVALID_EMAIL]="Invalid email",n[i.CODES.INVALID_EMAIL_CONTROL_CHARS]="Email contains invisible control characters",n[i.CODES.INVALID_JWT]="Something went wrong with the link you used. Please go back and try again.",n[i.CODES.INVALID_USERNAME]="Usernames must be lowercase, begin with an alphanumeric character followed by more alphanumeric characters or dashes and ending with an alphanumeric character.",n[i.CODES.USED_OR_EXPIRED]="This code has been used or expired. Please go back to get a new code.",n[i.CODES.VERIFICATION_IN_PROGRESS]="Email verification in progress. Please check your inbox and spam folder.",n[i.CODES.FORBIDDEN_SSO]="Invalid SSO verification token.",n[i.CODES.SAML_ENFORCED]="The account must authenticate with SAML SSO.",n[i.CODES.SAML_NOT_ENABLED]="SAML Single Sign-On is not enabled for this Team",n[i.CODES.GITLAB_ACCOUNT_NOT_LINKED]="There is already an account associated with your GitLab email address. Please login with your email then link your GitLab account.",n[i.CODES.GITLAB_INVALID_ACCESS_TOKEN]="There is no Vercel account linked with this GitLab account.",n[i.CODES.GITLAB_ACCOUNT_ALREADY_LINKED]="This GitLab account is already linked to a Vercel account.",n[i.CODES.GITLAB_ACCOUNT_FLAGGED]="The GitLab account you selected has been flagged for moderation.",n[i.CODES.GITLAB_LOGIN_ERROR]="Runtime error when login with GitLab.",n[i.CODES.GITLAB_ACCEPT_TERMS]="Please visit https://gitlab.com/users to accept the terms and try again.",n[i.CODES.GITLAB_INVALID_MODE]="Supplied mode is invalid.",n[i.CODES.GITLAB_BAD_CREDENTIALS]="Bad credentials.",n[i.CODES.GITLAB_EMAIL_IN_USE]="The GitLab email is already used by a Vercel account.",n[i.CODES.GITLAB_INVITE_ACCOUNT_MISMATCH]="The GitLab account did not match the invited account.",n[i.CODES.GOOGLE_ACCOUNT_NOT_LINKED]="There is already an account associated with your Google email address. Please login with your email then link your Google account.",n[i.CODES.BITBUCKET_ACCOUNT_NOT_LINKED]="There is already an account associated with your Bitbucket email address. Please login with your email then link your Bitbucket account.",n[i.CODES.BITBUCKET_INVALID_ACCESS_TOKEN]="There is no Vercel account linked with this Bitbucket account.",n[i.CODES.BITBUCKET_ACCOUNT_ALREADY_LINKED]="This Bitbucket account is already linked to a Vercel account.",n[i.CODES.BITBUCKET_ACCOUNT_FLAGGED]="The Bitbucket account you selected has been flagged for moderation.",n[i.CODES.BITBUCKET_LOGIN_ERROR]="Runtime error when login with Bitbucket.",n[i.CODES.BITBUCKET_ACCEPT_TERMS]="Please visit https://bitbucket.org to accept the terms and try again.",n[i.CODES.BITBUCKET_INVALID_MODE]="Supplied mode is invalid.",n[i.CODES.BITBUCKET_BAD_CREDENTIALS]="Bad credentials.",n[i.CODES.BITBUCKET_EMAIL_IN_USE]="The Bitbucket email is already used by a Vercel account.",n[i.CODES.BITBUCKET_INVITE_ACCOUNT_MISMATCH]="The Bitbucket account did not match the invited account.",n[i.CODES.IDENTITY_PROVIDER_ERROR]="We are experiencing a problem with the identity provider, please try another authentication method or try again later.",n[i.CODES.MFA_REQUIRED]="Two-factor authentication is required for this account.",n[i.CODES.MFA_MAX_ATTEMPTS]="Maximum number of two-factor validation attempts reached.",n[i.CODES.MFA_INVALID_TOKEN]="Invalid or expired continuation token.",n[i.CODES.ACCOUNT_NOT_LINKED]="Account not linked.",i.ERRORS=n},618478,e=>{"use strict";var t=e.i(460988);function i(e){if(!e)return null;let i=e in t.CODES?t.CODES[e]:e;return i in t.ERRORS?t.ERRORS[i]:null}function n(e){let t;if("string"!=typeof e)return null;try{t=JSON.parse(decodeURIComponent(e))}catch(e){return null}return t.message=i(t.code)||"Unknown error.",t}e.s(["getErrorMessage",()=>i,"getLoginError",()=>n])},6243840,8740486,7734160,e=>{"use strict";var t=e.i(6468255),i=e.i(119294),n=e.i(6352514),r=e.i(6696646),o=e.i(8631221),a=e.i(3196486);let s=(0,r.createContext)(null);function l(e){let{variant:i,children:n}=e,o=(0,r.useMemo)(()=>Math.random().toString(36).slice(2),[]);return(0,t.jsx)(s.Provider,{value:(0,r.useMemo)(()=>({anonId:o,variant:i}),[i,o]),children:n})}s.displayName="ExperimentContext";let c=()=>(0,r.useContext)(s),u={[n.AnalyticsEvent.SIGNUP_VIEW_STATE]:{topic:o.Topic.LifecycleV0SignupViewState,action:"view"},[n.AnalyticsEvent.SIGNUP_VIEW_PAGE]:{topic:o.Topic.LifecycleV0SignupViewPage,action:"view"},[n.AnalyticsEvent.SIGNUP_PLAN_SELECTED]:{topic:o.Topic.LifecycleV0SignupPlanSelected,action:"select-plan"},[n.AnalyticsEvent.SIGNUP_CLICK_ELEMENT]:{topic:o.Topic.LifecycleV0SignupClickElement,action:"click"}};e.s(["ExperimentProvider",()=>l,"useSignupExperiment",0,c,"useTrackEvent",0,()=>{let e=c();return(0,r.useCallback)((t,n)=>{if(!e)return;let{variant:r,anonId:o}=e;i.analytics.track(t,{...n});let s=u[t];(0,a.sendToSnowflake)(s.topic,{metrics_object:{actor_id:o,actor_type:"visitor",action:s.action,object:"new"===r?"new-signup":"signup"},is_new_page:"new"===r,...n},"vercel-app")},[e])}],6243840);var _=e.i(1434448),d=e.i(2674895);function E(){let e=(0,d.getSessionReferrer)()||void 0,{pathname:t,utm:i}=(0,_.getSessionLandingPage)()||{},n=new URLSearchParams(window.location.search).get("gclid");if(!n){let e=localStorage?.getItem("gclid");if(e){let{value:t,expiration:i}=JSON.parse(e);new Date(i)>new Date&&(n=t)}}return{sessionReferrer:e,landingPage:t,pageBeforeConversionPage:document.referrer,utm:{utmSource:i?.utm_source,utmMedium:i?.utm_medium,utmCampaign:i?.utm_campaign,utmTerm:i?.utm_term},...n&&{gclid:n}}}e.s(["getAttributionForEventStreaming",()=>E],8740486);var T=e.i(4418317),m=e.i(1488180);function A(e,t){let i=(0,r.useRef)(null);(0,r.useEffect)(()=>()=>{i.current&&i.current.close(),i.current=null},[]);let n=(0,r.useCallback)((n,r)=>{!i.current&&(i.current=new T.default({id:e,url:n,callbacks:{onOpen:()=>{t.onOpen?.(r)},onAbort:()=>{i.current=null,t.onAbort?.(r)},onClose:()=>{i.current=null,t.onClose?.(r)},onBlocked:()=>{i.current=null,t.onBlocked?.(r)}},prerenderHtml:`<!DOCTYPE html>
<html lang="en">
  <meta charset="utf-8" />
  <meta
    name="viewport"
    content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no"
  />
  <style>
    /*!normalize.css v8.0.1 | MIT License | github.com/necolas/normalize.css*/
    html {
      -webkit-text-size-adjust: 100%;
      height: -webkit-fill-available;
    }
    *,
    *:before,
    *:after {
      box-sizing: border-box;
    }
    body {
      margin: 0;
      align-items: center;
      display: flex;
      font-family: 'Inter', -apple-system, BlinkMacSystemFont, 'Segoe UI',
        'Roboto', 'Oxygen', 'Ubuntu', 'Cantarell', 'Fira Sans', 'Droid Sans',
        'Helvetica Neue', sans-serif;
      height: 100vh;
      width: 100vw;
      height: -webkit-fill-available;
      width: -webkit-fill-available;
      justify-content: center;
      max-height: 100vh;
      max-height: -webkit-fill-available;
      min-height: 100vh;
      min-height: -webkit-fill-available;
      padding: 0;
      -webkit-font-smoothing: antialiased;
      position: fixed;
      top: 0;
    }
    h1 {
      font-size: 1.5em;
      color: rgba(0, 0, 9);
      font-weight: 600;
      line-height: 1.5rem;
      margin-top: 16px;
      margin-bottom: 4px;
      text-align: center;
      letter-spacing: -0.47px;
    }
    p {
      color: rgba(0, 0, 9);
      font-weight: 400;
      font-size: 1rem;
      line-height: 1.5rem;
      margin: 0 0 24px 0;
      text-align: center;
    }
    .container {
      display: flex;
      flex-direction: column;
      align-items: center;
      margin: 0 auto;
    }
    .backup-redirect {
      font-size: 14px;
      color: #666;
      position: absolute;
      bottom: 0;
      animation: 0.2s ease 4s 1 delay;
      animation-fill-mode: both;
    }
    a {
      color: #333;
      display: inline;
    }
    .spinner-wrapper {
      height: 24px;
      width: 24px;
    }
    .spinner {
      position: relative;
      top: 50%;
      left: 50%;
      height: 24px;
      width: 24px;
    }
    .spinner-bar {
      -webkit-animation: spinner-spin 1.2s linear infinite;
      animation: spinner-spin 1.2s linear infinite;
      background: rgba(0, 0, 56);
      border-radius: 5px;
      height: 8%;
      left: -10%;
      position: absolute;
      top: -3.9%;
      width: 24%;
    }
    .spinner-bar:nth-child(1) {
      animation-delay: -1.2s;
      transform: rotate(0.0001deg) translate(146%);
    }
    .spinner-bar:nth-child(2) {
      animation-delay: -1.1s;
      transform: rotate(30deg) translate(146%);
    }
    .spinner-bar:nth-child(3) {
      animation-delay: -1s;
      transform: rotate(60deg) translate(146%);
    }
    .spinner-bar:nth-child(4) {
      animation-delay: -0.9s;
      transform: rotate(90deg) translate(146%);
    }
    .spinner-bar:nth-child(5) {
      animation-delay: -0.8s;
      transform: rotate(120deg) translate(146%);
    }
    .spinner-bar:nth-child(6) {
      animation-delay: -0.7s;
      transform: rotate(150deg) translate(146%);
    }
    .spinner-bar:nth-child(7) {
      animation-delay: -0.6s;
      transform: rotate(180deg) translate(146%);
    }
    .spinner-bar:nth-child(8) {
      animation-delay: -0.5s;
      transform: rotate(210deg) translate(146%);
    }
    .spinner-bar:nth-child(9) {
      animation-delay: -0.4s;
      transform: rotate(240deg) translate(146%);
    }
    .spinner-bar:nth-child(10) {
      animation-delay: -0.3s;
      transform: rotate(270deg) translate(146%);
    }
    .spinner-bar:nth-child(11) {
      animation-delay: -0.2s;
      transform: rotate(300deg) translate(146%);
    }
    .spinner-bar:nth-child(12) {
      animation-delay: -0.1s;
      transform: rotate(330deg) translate(146%);
    }
    @keyframes spinner-spin {
      0% {
        opacity: 0.5;
      }
      100% {
        opacity: 0.1;
      }
    }
    @keyframes delay {
      from {
        transform: translateY(72px);
      }
      to {
        transform: none;
      }
    }
    @media (prefers-color-scheme: dark) {
      body {
        color: rgb(237, 237, 237);
        background: #000;
      }
      h1 {
        color: rgb(237, 237, 237);
      }
      p {
        color: #ddd;
      }
      .spinner-bar {
        background: #eee;
      }
    }
  </style>
  <body>
    <div class="container">
      <div class="spinner-wrapper">
        <div class="spinner">
          <div class="spinner-bar"></div>
          <div class="spinner-bar"></div>
          <div class="spinner-bar"></div>
          <div class="spinner-bar"></div>
          <div class="spinner-bar"></div>
          <div class="spinner-bar"></div>
          <div class="spinner-bar"></div>
          <div class="spinner-bar"></div>
          <div class="spinner-bar"></div>
          <div class="spinner-bar"></div>
          <div class="spinner-bar"></div>
          <div class="spinner-bar"></div>
        </div>
      </div>
      <h1>Authenticating</h1>
      <p class="backup-redirect">
        If you aren't automatically redirected,
        <a href="${(0,m.default)(n)}">click here</a>
      </p>
    </div>
  </body>
</html>`}),i.current.open())},[e,t]),o=(0,r.useCallback)(function(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];i.current&&i.current.close(e),i.current=null},[]);return{popup:i.current,openPopup:n,closePopup:o}}e.s(["useAuthPopup",()=>A],7734160)},8451453,7251426,e=>{"use strict";var t=e.i(6696646),i=e.i(8248823),n=e.i(4244280),r=e.i(1991452),o=e.i(9100551),a=e.i(9450258),s=e.i(5523169),l=e.i(8977282),c=e.i(5140444),u=e.i(277234),_=e.i(1434061),d=e.i(2814021),E=e.i(6243840),T=e.i(2417508),m=e.i(8740486),A=e.i(8128235),I=e.i(7734160),g=e.i(460988),h=e.i(618478);function O(e,t){return Object.keys(t).some(i=>t[i]!==e[i])?{...e,...t}:e}function p(e){if(!e)return!1;let t=e.split(".");if(3!==t.length)return!1;try{return JSON.parse(atob(t[1])),!0}catch{return!1}}function S(e){let t=e?.get("token")??void 0,i=!!e?.get("legacy");if(p(t)){let{email:e,error:n}=function(e){try{if(!e)throw Error();let t=JSON.parse(atob(e.split(".")[1])),i=Date.now()/1e3;if(t.exp<i)return{email:t.sub,error:{code:"used_or_expired",message:g.ERRORS.used_or_expired}};return{email:t.sub,error:null}}catch{return{email:void 0,error:{code:"invalid_jwt",message:g.ERRORS.invalid_jwt}}}}(t);return{token:t,email:e,loginState:n?A.LOGIN_STATE.ERROR_EMAIL_OTP:A.LOGIN_STATE.VERIFYING_EMAIL_OTP,loginError:n,isLoading:!1,isOtpLinkFlow:i,factorOne:"email"}}return{loginState:A.LOGIN_STATE.PLACEHOLDER,loginError:null,isLoading:!0,isOtpLinkFlow:i,factorOne:"email"}}function f(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},i=(0,o.useSearchParams)(),[n,r]=(0,t.useReducer)(O,{...S(i),...e.defaultState});return(0,t.useEffect)(()=>{let e=i?.get("loginError");e?r({loginState:A.LOGIN_STATE.ERROR,loginError:(0,h.getLoginError)(e)}):i?.has("token")&&r(S(i))},[i]),(0,t.useEffect)(()=>{let e=n.loginState===A.LOGIN_STATE.PLACEHOLDER||A.LOADING_STATES.includes(n.loginState);n.isLoading&&!e&&r({isLoading:e})},[n.loginState,n.isLoading]),{state:n,dispatch:r,saveInput:function(e,t){n.loginState===A.LOGIN_STATE.ERROR?r({[e]:t,loginError:null}):r({[e]:t})},verifySMS(e){n.email&&r({loginState:A.LOGIN_STATE.ACCOUNT_NEEDS_VERIFY_SMS,smsVerificationToken:e})}}}e.s(["isJWT",()=>p,"useAuthState",()=>f],7251426);var R=e.i(1488180),N=e.i(119294),C=e.i(6352514),L=e.i(8042625),D=e.i(7850781),b=e.i(6232213),y=e.i(7591419),v=e.i(4504830);async function w(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:3;return(0,v.default)(e,{randomize:!1,factor:1,minTimeout:t>=5?1e3:250,maxTimeout:t>=5?1001:251,retries:t})}var G=e.i(7628870);async function P(e,t){if("signup"===e&&t?.startsWith("/turborepo"))try{let e=await (0,D.getUser)();if(!e.user)return;if(!(await fetch("/api/turborepo-signup",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:e.user.email})})).ok)throw Error("An unexpected error. Please try again later.")}catch{}}async function U(e){e&&e.length>0&&await w(()=>(0,u.fetchAPI)(n.API_USER,{method:"PATCH",body:{name:(0,R.default)(e)}}))}async function k(e){["loading-github","loading-gitlab","loading-bitbucket"].includes(e)&&await (0,y.updatePreferredGitAccount)({provider:e.split("-")[1],namespaceId:null})}function M(e){let t=new URL("/oauth/git",window.location.origin);return t.search=(e instanceof URLSearchParams?e:new URLSearchParams((0,L.encode)(e))).toString(),t.toString()}function B(e){let{authType:t,baseUrl:i,mode:r,next:o,useRedirect:a=!1,params:s}=e,{next:l,ssoToken:c,...u}=s,_=o?.match(/^\/(?<scope>[^/]+)/)?.groups?.scope||null,d=M({next:a?l??o:l,scope:_,ssoToken:c}),E="saml"===t.toLowerCase()?n.API_SSO:n.API_REGISTRATION,T=function(e){if(!e)return{};let{sessionReferrer:t,landingPage:i,pageBeforeConversionPage:n,utm:r}=e,o={...r.utmSource&&{utmSource:r.utmSource},...r.utmMedium&&{utmMedium:r.utmMedium},...r.utmCampaign&&{utmCampaign:r.utmCampaign},...r.utmTerm&&{utmTerm:r.utmTerm}},a=Object.keys(o).length>0;return{...t&&{sessionReferrer:t},...i&&{landingPage:i},...n&&{pageBeforeConversionPage:n},...a&&{...o},...e.gclid&&{gclid:e.gclid}}}((0,m.getAttributionForEventStreaming)());return`${E}${i}${(0,L.encode)({mode:r,next:d,...u,..."saml"!==t?T:{},..."saml"!==t&&s.oppId?{opportunityId:s.oppId}:{}})}`}let x=Object.values(g.OTP_CODES);var V=e.i(6311495),F=e.i(3754279);e.s(["useAuth",0,function(){var e,g,h;let O,p,S,R,L,D=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"login",y=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},{state:v,dispatch:w,saveInput:K,verifySMS:H}=f(y),Y=(0,r.useRouter)(),$=(0,o.usePathname)(),j=(0,V.useTeamSlug)(),J=(0,o.useSearchParams)(),W=(0,d.validNextRedirect)(J?.get("next")),z=(0,E.useSignupExperiment)(),{query:q}=Y,X=Array.isArray(q.ssoToken)?q.ssoToken[0]:q.ssoToken,Z=(0,t.useRef)(s.default),Q=(0,t.useRef)(y);(0,t.useEffect)(()=>{Q.current=y},[y]);let{data:ee}=(0,c.useUser)(),et=ee?.user;e="next",g=e=>!!(0,d.validNextRedirect)(e),O=(0,r.useRouter)(),p=(0,o.usePathname)(),S=(0,o.useSearchParams)(),(0,t.useEffect)(()=>{if(!S)return;let t=S.get(e);if(t&&p&&t&&!g(t)){let t=new URLSearchParams(S);t.delete(e),O.replace(`${p}?${t.toString()}`,void 0,{shallow:!0})}},[p,S,e,g,O]);let{popup:ei,openPopup:en,closePopup:er}=(0,I.useAuthPopup)(`vercel-login-popup-${crypto.randomUUID()}`,{onOpen:e=>{let{authType:t}=e;w({loginState:A.LOGIN_STATE[`LOADING_${t.toUpperCase()}`]})},onAbort:()=>{w({loginState:A.LOGIN_STATE.INPUT})},onClose:()=>{w({loginState:A.LOGIN_STATE.INPUT})},onBlocked:e=>{let{authType:t,redirectUrl:i}=e;w({loginState:A.LOGIN_STATE[`LOADING_${t.toUpperCase()}`]}),window.location.assign(i)}});(0,t.useEffect)(()=>{if(!ei&&(!("isReady"in Y)||Y.isReady)){if(J?.get("loginType")==="saml"&&"1"===J.get("confirmed")){w({loginState:A.LOGIN_STATE.LOADING_SAML});let e=new URLSearchParams(J);j&&!e.has("teamSlug")&&e.set("teamSlug",j),!W&&(y.defaultNextUrl?e.set("next",y.defaultNextUrl):j&&e.set("next",`/${j}`));let t=`${M(e)}`;Y.push(t);return}if(J?.get("origin")==="saml"&&"/login"===$){w({loginState:A.LOGIN_STATE.LOADING_SAML}),Y.push(`/teams/connect?${J.toString()}`);return}Y.query.token||v.loginState!==A.LOGIN_STATE.PLACEHOLDER||w({loginState:A.LOGIN_STATE.INPUT})}},[j,J,Y,W,ei,w,$,y.defaultNextUrl,v.loginState]);let eo=(0,t.useRef)(void 0);function ea(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};eo.current=e,w({loginError:null,loginState:A.LOGIN_STATE[`LOADING_${e.toUpperCase()}`],factorOne:e});let i="github"===e?"/login-with-github":`/${e}/connect`;"saml"===e&&(i="");let n={authType:e,baseUrl:i,params:{...t,for:y.app||"vercel"},mode:D,next:W},r=B(n),o=B({...n,useRedirect:!0});if(!y.useRedirect){er(!0),en(r,{redirectUrl:o,authType:e});return}window.location.href=new URL(o,window.location.origin).href}async function es(e){let{response:t,params:i,factorOne:n,factorTwo:r}=e,o=await t.json();if(o&&"object"==typeof o&&"error"in o){if((0,T.isTwoFactorAuthFailed)(o.error))return void w({loginState:A.LOGIN_STATE.ERROR_2FA_VERIFICATION_FAILED,loginError:{message:"totp"===r?"6-digit code is incorrect. Please try again.":"Recovery code is incorrect. Please try again."},continuationToken:o.error.continuationToken});if((0,T.isTwoFactorMaxAttempts)(o.error))return void w({loginState:A.LOGIN_STATE.ERROR_MAX_2FA_ATTEMPTS,loginError:{message:"Two-factor maximum attempts reached. Please try again later."},continuationToken:null});if((0,T.isTwoFactorInvalidToken)(o.error))return void w({loginState:A.LOGIN_STATE.ERROR_2FA_INVALID_TOKEN,loginError:{message:"Session expired. Please try again."},continuationToken:null})}if(!o.verified)return void w({loginState:A.LOGIN_STATE.ERROR,loginError:{message:"totp"===r?"Login with time-based one time password failed. Please try again.":"Login with Recovery code failed. Please try again."}});if(i.next&&o.nextParams){let e=new URL(i.next);Object.entries(o.nextParams).forEach(t=>{let[i,n]=t;e.searchParams.append(i,n)}),i.next=e.toString()}v.isOtpLinkFlow?Y.push("/notifications/email-confirmed"):await el({...i,provider:n,showAuthSuccess:!1})}async function el(e){let t,{provider:i,showAuthSuccess:n,...r}=e;er(!0),r.mode??=D,r.teamSlug??=v.teamSlug??j??void 0,r.next??=W,function(e){let{source:t,variant:i}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};try{let n=t?`${G.ORIGINS[t]} login`:void 0;"signup"===e?(N.analytics.track(C.AnalyticsEvent.CREATE_ACCOUNT,{source:n,variant:i}),N.analytics.track(C.AnalyticsEvent.SIGN_UP,{source:n,variant:i}),(0,b.postToStatsigClient)({events:[{eventName:"create_account",metadata:{source:n||""}}]})):"login"===e&&N.analytics.track(C.AnalyticsEvent.LOGIN,{source:n})}catch{}}(r.mode,{source:i,variant:z?.variant}),delete globalThis.__loggedIn,i&&localStorage.setItem("lastUsedAuth",i),await (0,_.jwtKVStoreInitializeFetch)();let o=(t=(0,l.getScope)(),r.next?r.next:r.teamSlug?`/${r.teamSlug}`:t?`/${t}`:et?`/${et.username}`:"signup"===r.mode?A.NEW_PROJECT_LINK_FOR_EXISTING_USER:"/dashboard");if(P(r.mode,o),"signup"===r.mode&&await Promise.all([U(r.patchedSignupAccountName),k(v.loginState)]),Q.current.onAuthenticated){Q.current.onAuthenticated(),n&&w({loginState:A.LOGIN_STATE.SUCCESS});return}n&&w({loginState:A.LOGIN_STATE.SUCCESS}),y.skipDefaultRedirectOnSignup||("signup"===r.mode&&(o=A.NEW_PROJECT_LINK),setTimeout(()=>{window.location.href=new URL(o,window.location.href).href},300))}return h=async(e,t)=>{if(e.close)return(er(!0),t?.get("origin")==="saml")?void Y.push(`/teams/connect?${t.toString()}`):void await Q.current.onAuthenticated?.();if(e.loginError&&er(!0),e.loginState||e.loginError){let t={};e.loginState&&(t.loginState=e.loginState),e.loginError&&(t.loginError=e.loginError),w(t)}if(!e.success){w({loginState:e.loginState,loginError:e.loginError}),Q.current.onError?.();return}let i=t?.get("next");i=i?decodeURIComponent(i):null,await el({next:e.next??i,provider:eo.current??void 0,showAuthSuccess:!0})},R=(0,t.useRef)(h),(0,t.useEffect)(()=>{R.current=h},[h]),L=(0,t.useCallback)(e=>{if(!ei)return;let t=function(e,t){if(!t.source||t.source!==e?.popup||!t.data||"object"!=typeof t.data)return null;let i=t.data;return"vercel-verify-auth"!==i.source?null:i}(ei,e);if(!t)return;let i=ei.popup?.location.search,n=i?new URLSearchParams(i):null;R.current(t,n)},[ei]),(0,t.useEffect)(()=>(window.addEventListener("message",L),()=>{window.removeEventListener("message",L)}),[L]),{saveInput:K,cancelLogin:function(){if(Z.current(),w({loginState:A.LOGIN_STATE.INPUT,loginError:null}),y.skipRouterRedirectOnCancel||!$)return;let e=new URLSearchParams;W&&e.set("next",W);let t=J?.get("isRequestAccess");t&&e.set("isRequestAccess",t);let i=J?.get("teamName");i&&e.set("teamName",i),Y.replace(`${$}?${e.toString()}`)},async login(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};switch(X&&(t.ssoToken=X),e){case"passkey":{let e;w({loginState:A.LOGIN_STATE.LOADING_PASSKEY,loginError:null,factorOne:"passkey"});let n=await fetch("/api/auth/webauthn/options"),r=await n.json();if(!("challenge"in r))return void w({loginState:A.LOGIN_STATE.ERROR,loginError:(0,i.normalizeError)(r.error)});try{e=await (0,a.startAuthentication)(r)}catch(e){w({loginState:A.LOGIN_STATE.ERROR,loginError:{message:"Login with Passkey took too long or was cancelled. Please try again."}});return}let o=await fetch("/api/auth/webauthn/verify",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({ssoToken:t.ssoToken,...v.continuationToken?{continuationToken:v.continuationToken}:null,...e})}),s=await o.json();if(s&&"object"==typeof s&&"error"in s){if((0,T.isTwoFactorAuthFailed)(s.error))return void w({loginState:A.LOGIN_STATE.ERROR_2FA_VERIFICATION_FAILED,loginError:{message:"Two-factor validation failed."},continuationToken:s.error.continuationToken});if((0,T.isTwoFactorMaxAttempts)(s.error))return void w({loginState:A.LOGIN_STATE.ERROR_MAX_2FA_ATTEMPTS,loginError:{message:"Two-factor maximum attempts reached. Please try again later."},continuationToken:null});if((0,T.isTwoFactorInvalidToken)(s.error))return void w({loginState:A.LOGIN_STATE.ERROR_2FA_INVALID_TOKEN,loginError:{message:"Session expired. Please try again."},continuationToken:null})}if(!s.verified)return void w({loginState:A.LOGIN_STATE.ERROR,loginError:{message:"Login with Passkey failed. Please try again."}});if(t.next&&s.nextParams){let e=new URL(t.next);Object.entries(s.nextParams).forEach(t=>{let[i,n]=t;e.searchParams.append(i,n)}),t.next=e.toString()}if(v.isOtpLinkFlow)return void Y.push("/notifications/email-confirmed");return el({...t,provider:"passkey",showAuthSuccess:!1})}case"saml":{let e=t.teamSlug??v.teamSlug??j;if(!e)return w({loginState:A.LOGIN_STATE.ERROR,loginError:{code:"",message:"Please enter a Team slug."}});return ea("saml",{next:W||y.defaultNextUrl||`/${e}`,...t,teamId:e,mode:D})}case"github":case"google":{let i=(0,F.getTimeSinceLastLogout)();return ea(e,{...t,prompt:void 0!==i&&i<36e5?"select_account":void 0})}case"gitlab":case"apple":case"bitbucket":return ea(e,t);case"totp":if(!v.continuationToken)return;return w({loginState:A.LOGIN_STATE.LOADING_TOTP,loginError:null}),es({response:await fetch(`${n.API_REGISTRATION}/totp/verify`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({continuationToken:v.continuationToken,code:t.code})}),params:t,factorOne:v.factorOne,factorTwo:"totp"});case"recovery-code":if(!v.continuationToken)return;return w({loginState:A.LOGIN_STATE.LOADING_RECOVERY_CODE,loginError:null}),es({response:await fetch(`${n.API_REGISTRATION}/recovery-code/verify`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({continuationToken:v.continuationToken,code:t.recoveryCode})}),params:t,factorOne:v.factorOne,factorTwo:"recovery-code"})}},async createOTP(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};w({loginState:A.LOGIN_STATE.LOADING_EMAIL_CREATE_OTP,loginError:null,factorOne:"email"});let i=t.email??v.email;if(!i)return void w({loginState:A.LOGIN_STATE.ERROR,loginError:{code:"",message:"Please enter an email address."},factorOne:"email"});Z.current();let n=new AbortController;Z.current=()=>{n.abort()},W&&(t.next??=W),X&&(t.ssoToken=X);let r=await e({...t,email:i,mode:D,pathname:$??"/",attribution:(0,m.getAttributionForEventStreaming)()});if("string"==typeof r)!function(e,t){try{if("signup"!==e||"email"!==t)return;N.analytics.track(C.AnalyticsEvent.SIGN_UP_INTENT,{source:`${G.ORIGINS.email} login`})}catch{}}(D,"email"),w({loginState:A.LOGIN_STATE.VERIFYING_EMAIL_OTP,token:r,email:i});else{var o;w({loginState:(o=v.loginState,(0,T.isAuthError)(r)&&x.includes(r.code)&&o===A.LOGIN_STATE.VERIFYING_EMAIL_OTP?A.LOGIN_STATE.ERROR_EMAIL_OTP:A.LOGIN_STATE.ERROR),loginError:r})}},async verifyOTP(e){try{w({loginState:A.LOGIN_STATE.LOADING_EMAIL_VERIFY_OTP,loginError:null,factorOne:"email"});let t=await (0,u.fetchAPI)(`${n.API_REGISTRATION}/email/verify`,{body:JSON.stringify(e),headers:{"Content-Type":"application/json"},method:"POST",throwOnHTTPError:!0});delete globalThis.__loggedIn,await el({...t,provider:"email",showAuthSuccess:!0})}catch(t){if((0,T.isAccountNeedsVerifyError)(t))return H(t.smsVerificationToken);if((0,T.isTwoFactorAuthRequired)(t)&&403===t.status)return void w({loginState:A.LOGIN_STATE.VERIFYING_2FA,continuationToken:t.continuationToken});if((0,T.isTwoFactorMaxAttempts)(t)&&403===t.status)return void w({loginState:A.LOGIN_STATE.ERROR_MAX_2FA_ATTEMPTS,continuationToken:null});let e=(0,i.normalizeError)(t);"rate_limited"===e.code&&(e.message=e.message.replace(/ \(.*\)\.$/,".")),w({loginState:A.LOGIN_STATE.ERROR_EMAIL_OTP,loginError:e})}},state:v,dispatch:w,mode:D}}],8451453)}]);

//# sourceMappingURL=5bd9a61cc8777bcb.js.map
//# debugId=1bb65ed4-e4e5-5e42-b6b8-44bd9a5709cd
