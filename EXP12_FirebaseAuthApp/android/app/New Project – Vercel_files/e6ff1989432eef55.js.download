
!function(){try{var e="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:{},n=(new e.Error).stack;n&&(e._sentryDebugIds=e._sentryDebugIds||{},e._sentryDebugIds[n]="89b343c6-178d-5a11-8510-a21aac82ce54")}catch(e){}}();
(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,3538015,e=>{"use strict";let t={sys_dos_mitigation:{label:"DDoS Mitigation",groupBy:"System",rank:11},ip_blocking:{label:"IP Blocking",groupBy:"System",rank:12}},a={owasp_anomaly_detection:{label:"OWASP Anomaly Detection",groupBy:"System",rank:3,keys:["gen","java","ma","sd"]},owasp_xss_detection:{label:"OWASP XSS Detection",groupBy:"System",rank:4,keys:["xss"]},owasp_sqli_detection:{label:"OWASP SQL Injection Detection",groupBy:"System",rank:5,keys:["sqli"]},owasp_rfi_detection:{label:"OWASP RFI Detection",groupBy:"System",rank:6,keys:["rfi"]},owasp_lfi_detection:{label:"OWASP LFI Detection",groupBy:"System",rank:7,keys:["lfi"]},owasp_rce_detection:{label:"OWASP RCE Detection",groupBy:"System",rank:8,keys:["rce"]},owasp_php_detection:{label:"OWASP PHP Injection Detection",groupBy:"System",rank:9,keys:["php"]},owasp_session_fixation_detection:{label:"OWASP Session Fixation Detection",groupBy:"System",rank:10,keys:["sf"]}},l={default_web_traffic:{label:"Allowed Requests",groupBy:"System",rank:1},challenge_mode:{label:"Attack Mode",groupBy:"System",rank:2},...a,...t},i={hobby:{customRules:3,ipBlocks:10,ipBypass:0,rateLimit:1},pro:{customRules:40,ipBlocks:100,ipBypass:25,rateLimit:40},enterprise:{customRules:1e3,ipBlocks:1e3,ipBypass:100,rateLimit:1e3}},r={pro:{customRules:{title:"Need more custom rules?",description:"Upgrade to Enterprise Plan"},ipBlocks:{title:"Need to block more IPs?",description:"Upgrade to Enterprise Plan"},ipBypass:{title:"Need to allow more IPs?",description:"Upgrade to Enterprise Plan"},rateLimit:{title:"Need more rate limit rules?",description:"Upgrade to Enterprise Plan"}},hobby:{customRules:{title:"Need more custom rules?",description:`Upgrade to pro to add up to ${i.pro.customRules} custom rules`},ipBlocks:{title:"Need to block more IPs?",description:`Upgrade to pro to block up to ${i.pro.ipBlocks} IPs`},ipBypass:{title:"Need to setup an IP bypass?",description:`Upgrade to pro to allow up to ${i.pro.ipBypass} IPs`},rateLimit:{title:"Need more rate limit rules?",description:`Upgrade to pro to add up to ${i.pro.rateLimit} rate limit rules`}}},n=[{label:l.default_web_traffic.label,value:"default_web_traffic",action:"allow"},{label:l.challenge_mode.label,value:"challenge_mode",action:"challenge"},...Object.entries(t).map(e=>{let[t,a]=e;return{label:a.label,value:t,action:"deny"}})],s=Object.entries(l).reduce((e,t)=>{let[a,l]=t;return Object.assign(e,{[a]:l.rank})},{});function o(e,t){let[a]=e.split("$"),[l]=t.split("$"),i=s[a],r=s[l];return i&&r?i-r:i?-i:r||e.localeCompare(t)}function c(e){return e in t}function d(e){return Object.entries(a).reduce((t,a)=>{let[l,i]=a,r=e.filter(e=>i.keys.includes(e.id)&&e.active);if(r.length>0){let e=Array.from(r.reduce((e,t)=>(e.add(t.action),e),new Set));t.push({label:i.label,value:l,action:e.join(" / ")})}return t},[])}function u(e,t){let a=[{value:"log",label:"Log",subtext:"Log traffic and do nothing more"},{value:"deny",label:t?"Deny (403)":"Deny",subtext:"Block traffic from accessing your site"},{value:"challenge",label:"Challenge",subtext:"Verify traffic at a security checkpoint before allowing access to your site"}];return t||a.push({value:"bypass",label:"Bypass",subtext:"Bypass existing rules and allow traffic access to your site"}),e&&a.push({value:"rate_limit",label:t?"Too Many Requests (429)":"Rate Limit",subtext:"Enforce frequency limitations on traffic"}),t||a.push({value:"redirect",label:"Redirect",subtext:"Redirect traffic to a different page"}),a}e.s(["allowedFirewallActions",()=>u,"defaultFilter",0,[{label:"User Agent",value:"clientUserAgent"},{label:"Country",value:"clientIpCountry"},{label:"IP Address",value:"clientIp"},{label:"Request Path",value:"requestPath"},{label:"Vercel Region",value:"edgeNetworkRegion"},{label:"Route",value:"sourcePath"},{label:"JA4 Digest",value:"clientJa4Digest"},{label:"Host",value:"requestHostname"}],"defaultShowSystemRules",0,n,"firewallPlanLimits",0,i,"isLimitedSystemRule",()=>c,"owaspToCrsConfig",()=>d,"planLimitText",0,r,"ruleToMappings",0,l,"stableSort",()=>o,"systemFilter",0,[{label:"IP Address",value:"clientIp"},{label:"Country",value:"clientIpCountry"},{label:"JA4 Digest",value:"clientJa4Digest"},{label:"Host",value:"requestHostname"}]])},5963711,7212454,e=>{"use strict";var t=e.i(4708200),a=e.i(3863657),l=e.i(6493958),i=e.i(3538015);function r(e){return e?e.rules.filter(e=>"value"in e&&e.value.action?.mitigate?.action==="rate_limit"&&!!e.value.action.mitigate.rateLimit&&!!e.value.active).length:0}function n(e,l,i,r){let n=new Map,s=e=>{let i=[];for(let a of l){let l=e[a];if(null==l||("wafAction"===a?l=m(l||"allow"):"wafRuleId"===a&&(l||="default_web_traffic"),!l&&r.groupBy===a))return t.hideDataKey;i.push(l)}return i.join(a.SEPARATOR)},o=!0,c=new Set;for(let a of e){let e=s(a);e!==t.hideDataKey&&(o=!1),n.has(e)||e===t.hideDataKey||n.set(e,[]);let l=a.timestamp;c.add(l.toISOString()),n.get(e)?.push({...a,date:l,key:e})}if(l.every(e=>["wafRuleId","wafAction"].includes(e))){let e=Array.from(c.values()).map(e=>new Date(e));for(let t of i){let l=[t.value,t.action].join(a.SEPARATOR);n.has(l)||"all_rules"===t.value||n.set(l,e.map(e=>({date:e,timestamp:e,key:l,value:0})))}}return o?new Map:n}function s(e){return(0,l.countFormatter)(e,"short-precision").replace(/\s/g,"")}function o(e,t){let a=e.find(e=>e.value===t);return a?a.label:t}function c(e){let{teamPlan:t,config:a,bypassRules:l,type:n}=e;if(!t)return!0;let s=i.firewallPlanLimits[t][n];return"ipBypass"===n?"hobby"===t||!!l&&l.length>=s:null!==a&&(void 0===a||("ipBlocks"===n?a.currentConfig.ips.length>=s:"rateLimit"===n?r(a)>=s:a.rules.length>=s))}function d(e){switch(e){case"ip":case"ja4":return!0;default:return e.startsWith("header:")}}function u(e){let t=e,a=0;for(;t;)a+=t.offsetTop,t=t.offsetParent;return a}function m(e){return"rate-limit"===e?"rate_limit":e}function p(e){return"rate_limit"===e?"rate-limit":e}function h(e){return void 0===e?"":m(e).replace("_"," ")}function g(e){return RegExp(`(Others(${a.SEPARATOR})?)+`).test(e)}function x(e){return"string"==typeof e&&(e.startsWith("rule_")||"deployment_defined_rules"===e)}function f(e){return"default_web_traffic"===e?"":"managed_bot_filter"===e?"managed_bot_protection":e}e.s(["countRateLimitRules",()=>r],7212454),e.s(["denormalizeFirewallAction",()=>p,"formatFirewallActionForDisplay",()=>h,"formatShortPrecision",()=>s,"formatTableHeader",()=>o,"getOffsetTop",()=>u,"getSonarSeriesData",()=>n,"isCustomRuleId",()=>x,"isOthersAggregate",()=>g,"isPlanLimitReached",()=>c,"isValidEdgeRateLimitKey",()=>d,"normalizeFirewallAction",()=>m,"wafRuleId",()=>f],5963711)},8626589,e=>{"use strict";let t=(0,e.i(9334638).withNewIcon)('<path fill-rule="evenodd" clip-rule="evenodd" d="M7.24058 1.8685L7.35907 1.12792L5.87791 0.89093L5.75942 1.63151L5.22046 5H2.5H1.75V6.5H2.5H4.98046L4.42046 10H2.5H1.75V11.5H2.5H4.18046L3.75942 14.1315L3.64093 14.8721L5.12209 15.1091L5.24058 14.3685L5.69954 11.5H9.18046L8.75942 14.1315L8.64093 14.8721L10.1221 15.1091L10.2406 14.3685L10.6995 11.5H13.5H14.25V10H13.5H10.9395L11.4995 6.5H13.5H14.25V5H13.5H11.7395L12.2406 1.8685L12.3591 1.12792L10.8779 0.89093L10.7594 1.63151L10.2205 5H6.73954L7.24058 1.8685ZM9.98046 6.5H6.49954L5.93954 10H9.42046L9.98046 6.5Z" fill="currentColor"/>');e.s(["Hash",0,t])},9937599,e=>{"use strict";let t=(0,e.i(9334638).withNewIcon)('<path fill-rule="evenodd" clip-rule="evenodd" d="M11.5253 10.2634L8 13.8578L4.47471 10.2634C2.50843 8.25857 2.50843 4.99627 4.47471 2.99144C6.42507 1.00285 9.57493 1.00285 11.5253 2.99144C13.4916 4.99627 13.4916 8.25857 11.5253 10.2634ZM12.5962 11.3137L9.05051 14.9289L8 16L6.94949 14.9289L3.40381 11.3137C0.865397 8.72554 0.865399 4.52929 3.40381 1.94113C5.94222 -0.647042 10.0578 -0.647042 12.5962 1.94113C15.1346 4.52929 15.1346 8.72554 12.5962 11.3137ZM9 6.5C9 7.05228 8.55228 7.5 8 7.5C7.44772 7.5 7 7.05228 7 6.5C7 5.94772 7.44772 5.5 8 5.5C8.55228 5.5 9 5.94772 9 6.5ZM8 9C9.38071 9 10.5 7.88071 10.5 6.5C10.5 5.11929 9.38071 4 8 4C6.61929 4 5.5 5.11929 5.5 6.5C5.5 7.88071 6.61929 9 8 9Z" fill="currentColor"/>');e.s(["Location",0,t])},5812308,e=>{"use strict";e.i(3512434);var t=e.i(9835407),a=e.i(423255);let l=t.z.string().nullable(),i=t.z.string().min(1,"Requires a value"),r=t.z.string().min(1,"Requires a value").refine(e=>/^(?!-)[A-Za-z0-9-]{1,63}(?<!-)(?:\.(?!-)[A-Za-z0-9-]{1,63}(?<!-))*$/.test(e),{message:"Invalid host name provided"}),n=t.z.string().min(1,"Requires a value").refine(e=>{try{return new RegExp(e),!0}catch(e){return!1}},{message:"Invalid regular expression provided"}),s=t.z.string().min(1,"Requires a value").superRefine((e,l)=>{if(!a.default.isIP(e)){if(a.default.isIPRange(e)){let[a,i]=e.split("/"),r=Number.parseInt(i,10);return a.includes(".")?r<0?void l.addIssue({code:t.z.ZodIssueCode.custom,message:"IPv4 CIDR cannot have a net mask less than /0"}):{isValid:!0,errorMsg:""}:void(r>32&&l.addIssue({code:t.z.ZodIssueCode.custom,message:"IPv6 CIDR cannot have a net mask greater than /32"}))}l.addIssue({code:t.z.ZodIssueCode.custom,message:"Invalid IP address or CIDR"})}}),o=t.z.string().min(1,"Requires a value").refine(e=>e.startsWith("/"),'Path must start with a "/"').refine(e=>{try{return new URL(e,"https://example.com"),!0}catch{return!1}},"Path must be a valid URL path"),c=t.z.string().min(1,"Requires a value").refine(e=>/^\d+$/.test(e));e.s(["digitSchema",0,c,"hostnameSchema",0,r,"ipAndCidrsSchema",0,s,"optionalString",0,l,"pathSchema",0,o,"regexSchema",0,n,"stringSchema",0,i])},6284227,e=>{"use strict";var t=e.i(5812308);let a={value:"sub",label:"Contains",schema:t.stringSchema},l={value:"!sub",label:"Does not contain",schema:t.stringSchema},i={value:"pre",label:"Starts with",schema:t.stringSchema},r={value:"!pre",label:"Does not start with",schema:t.stringSchema},n={value:"suf",label:"Ends with",schema:t.stringSchema},s={value:"!suf",label:"Does not end with",schema:t.stringSchema},o={value:"re",label:"Matches expression",schema:t.regexSchema},c={value:"!re",label:"Does not match expression",schema:t.regexSchema},d={value:"ex",label:"Exists",schema:t.optionalString},u={value:"!ex",label:"Does not exist",schema:t.optionalString};e.s(["keyExistsOperator",0,[d,u],"stringMatchOperators",0,[a,l,i,r,n,s,o,c],"stringOperators",0,[{value:"eq",label:"Equals"},{value:"!eq",label:"Does not equal"},{value:"inc",label:"Is any of"},{value:"!inc",label:"Is not any of"}],"withIdOperator",0,{value:"eq",label:"with rate limit ID"}])},2627313,e=>{"use strict";var t=e.i(6468255),a=e.i(6696646);let l=(0,a.createContext)(null);function i(){let e=(0,a.useContext)(l);if(null===e)throw Error("Filter context should be wrapped in Provider");return e}function r(e){let{children:i,state:r,index:n,moduleConfig:s,groupId:o}=e,c=(0,a.useMemo)(()=>({state:r,moduleConfig:s,index:n,groupId:o}),[r,s,n,o]);return(0,t.jsx)(l.Provider,{value:c,children:i})}l.displayName="ItemStateContextProvider",e.s(["FilterItemStateProvider",()=>r,"useItemStateContext",()=>i])},467779,e=>{"use strict";var t=e.i(6468255),a=e.i(6696646),l=e.i(2692457),i=e.i(9544652);let r=(0,a.createContext)(null);function n(){let e=(0,a.useContext)(r);if(null===e)throw Error("Filter context should be wrapped in Provider");return(0,l.useStore)(e)}function s(e){let{children:a,disabled:l,store:n}=e;return(0,t.jsx)(r.Provider,{value:n,children:(0,t.jsx)(i.DisabledContext.Provider,{value:!!l,children:a})})}r.displayName="FilterContextProvider",s.displayName="FilterProvider",e.s(["FilterProvider",()=>s,"useFilterContext",()=>n])},3957279,e=>{"use strict";var t=e.i(6468255),a=e.i(9689002),l=e.i(1344973),i=e.i(3869281),r=e.i(3306538),n=e.i(9992248),s=e.i(5768355),o=e.i(9550268),c=e.i(5883567),d=e.i(6696646),u=e.i(9722978);let m={values:[],valueSet:new Set,initialSet:new Set,options:[]};function p(e,t){switch(t.type){case"INITIALIZE":return{...e,...t.payload};case"TOGGLE_VALUE":{let{item:a,allowMulti:l}=t.payload,i=new Set(e.valueSet);if(i.has(a.value))return i.delete(a.value),{...e,values:e.values.filter(e=>e.value!==a.value),valueSet:i,initialSet:l?e.initialSet:new Set([])};return i.add(a.value),{...e,values:l?[...e.values,a]:[a],valueSet:l?i:new Set([a.value]),initialSet:l?e.initialSet:new Set}}case"ADD_NEW":{let a=new Set(e.valueSet),l=new Set(e.initialSet),i=Array.isArray(t.payload.item)?t.payload.item.map(e=>({value:e,label:`"${e}"`})):[{value:t.payload.item,label:`"${t.payload.item}"`}];return i.forEach(e=>{l.add(e.value),a.add(e.value)}),{...e,values:t.payload.allowMulti?[...e.values,...i]:i,valueSet:t.payload.allowMulti?a:new Set(i.map(e=>e.value)),initialSet:t.payload.allowMulti?l:new Set(i.map(e=>e.value))}}case"CLOSE_SELECT":{let t=new Set(e.values.map(e=>e.value));return{...e,initialSet:t}}default:return e}}function h(e){let{errors:c,initialValue:h,allowAdd:x,allowMulti:f=!1,filterName:y,disabled:v,onChange:b,getOptions:w,labels:j,placeholder:C,updateOnChange:S}=e,[N,I]=(0,d.useReducer)(p,m),[_,A]=(0,d.useState)(!1),[k,L]=(0,d.useState)(""),T=(0,d.useRef)(null);(0,d.useEffect)(()=>{(async()=>{let e=Array.isArray(h)?h:[h],t=new Set(e.map(e=>`${e}`)),a=new Set(t),l=[],i=[];if(void 0===w)l=e.map(e=>({value:`${e}`,label:`"${e}"`}));else{if(i=await w(),x)for(let t of e.filter(Boolean))i.some(e=>e.value===`${t}`)||i.push({value:`${t}`,label:j?.[t]||`"${t}"`});l=i.filter(e=>t.has(e.value))}I({type:"INITIALIZE",payload:{values:l,valueSet:t,initialSet:a,options:i}})})()},[h,x,f,y,w,c,j]);let E=(0,d.useMemo)(()=>c?new Set(c.map(e=>e.value)):new Set,[c]),O=(0,d.useMemo)(()=>N.values.filter(e=>N.valueSet.has(e.value)),[N.values,N.valueSet]),P=N.values.filter(e=>N.initialSet.has(e.value)),R=(0,d.useCallback)(e=>{I({type:"TOGGLE_VALUE",payload:e})},[]),D=(0,d.useMemo)(()=>Array.from(new Set([...N.options,...N.values])),[N.options,N.values]),z=(0,d.useCallback)(e=>{b?.(e)},[b]);(0,d.useEffect)(()=>{S&&z([...N.valueSet])},[N.valueSet,z,S]);let M=D.filter(e=>N.initialSet.has(e.value)),B=N.options.filter(e=>!N.initialSet.has(e.value));return(0,t.jsxs)(n.Root,{onOpenChange:e=>{e||(I({type:"CLOSE_SELECT"}),L(""),b?.([...N.valueSet])),A(e)},open:_,children:[(0,t.jsx)(n.Anchor,{className:"flex w-full items-center",children:(0,t.jsx)(n.Trigger,{className:(0,u.clsx)("my-0 size-full min-h-[32px] items-center rounded border-gray-alpha-400 bg-background-100 px-3 py-0 outline outline-1 outline-gray-alpha-400 data-[state=open]:bg-gray-100 data-[state=open]:shadow-focus-border focus-visible:shadow-focus-ring disabled:border-gray-400 disabled:bg-gray-100 disabled:text-gray-700",{"data-[state=open]:shadow-focus-border data-[state=open]:border-gray-alpha-400 shadow-[0_0_0_1px_var(--ds-red-900),0_0_0_4px_var(--ds-red-300)]":c}),disabled:v,children:(0,t.jsxs)("div",{className:"flex h-full items-center gap-x-2",children:[(0,t.jsx)("span",{children:(0,t.jsx)(o.ListUnordered,{size:16})}),(0,t.jsx)("div",{className:"grid",children:(0,t.jsxs)(l.Text,{"aria-disabled":v,className:"text-inherit",size:14,truncate:!0,children:[f&&O.length>0?(0,t.jsx)("span",{className:"text-sm text-gray-900",children:`${O.length} ${1===O.length?y:function(e){for(let[t,a]of[[/ss$/,"sses"],[/s$/,"s"],[/s$/,"es"],[/(?![aeiou])y$/,"ies"]])if(t.test(e))return e.replace(t,a);return`${e}s`}(y)}: `}):null,O.length>0?O.map((e,a)=>E.has(e.value)?(0,t.jsxs)("span",{className:"text-red-900",children:[e.label.replaceAll('"',""),`${a<O.length-1?", ":""}`]},e.value):`${e.label.replaceAll('"',"")}${a<O.length-1?", ":""}`):(0,t.jsx)("span",{className:"text-gray-700",children:`Add option${f?"s":""}`})]})})]})})}),(0,t.jsx)(n.Portal,{children:(0,t.jsx)(n.Content,{className:"tailwind-preflight",side:"bottom",sideOffset:8,children:(0,t.jsxs)(s.Command,{className:"w-[var(--radix-popover-trigger-width)] min-w-[320px] justify-between rounded-lg border-gray-alpha-400 bg-background-100 shadow-menu",children:[(0,t.jsxs)("div",{className:(0,u.clsx)("-mb-px flex w-full items-center justify-between px-4 py-3",(P.length>0||k||N.options.length>0)&&"border-b"),children:[(0,t.jsx)(s.Command.Input,{className:"w-full border-none bg-transparent text-sm outline-none",onPaste:e=>{if(!x)return;e.preventDefault();let t=e.clipboardData.getData("text").split("\n").map(e=>e.trim());f?I({type:"ADD_NEW",payload:{item:t,allowMulti:f}}):I({type:"ADD_NEW",payload:{item:t[0],allowMulti:f}})},onValueChange:L,placeholder:C&&C.length>0?C:"Search…",ref:T,value:k}),(0,t.jsx)(a.Kbd,{small:!0,children:"Esc"})]}),(0,t.jsxs)(s.Command.List,{className:"flex max-h-[288px] flex-col gap-y-5 overflow-y-auto border-gray-alpha-400",children:[P.length>0?(0,t.jsx)(s.Command.Group,{className:"p-2",children:M.map(e=>(0,t.jsx)(s.Command.Item,{className:"w-full rounded *:aria-selected:bg-gray-100 data-[selected=true]:bg-gray-100 hover:bg-gray-100 focus-visible:bg-gray-100 active:bg-gray-100",onSelect:()=>R({item:e,allowMulti:f}),value:`${e.label}-${e.value}`,children:(0,t.jsxs)("div",{className:"flex w-full gap-2 rounded p-2",children:[(0,t.jsx)(i.Checkbox,{checked:N.valueSet.has(e.value),className:"pointer-events-none gap-1 text-sm",onChange:()=>{},tabIndex:-1,children:e.label}),E.has(e.value)?(0,t.jsx)(r.Badge,{size:"sm",variant:"red-subtle",children:"Invalid Option"}):null]})},e.value))}):null,B.length>0?(0,t.jsx)(s.Command.Group,{className:(0,u.clsx)("p-2",B.length&&"border-t"),children:B.map(e=>(0,t.jsx)(s.Command.Item,{className:"w-full rounded *:aria-selected:bg-gray-100 data-[selected=true]:bg-gray-100 hover:bg-gray-100 focus:bg-gray-100 active:bg-gray-100",onSelect:()=>R({item:e,allowMulti:f}),value:`${e.label}-${e.value}`,children:(0,t.jsx)("div",{className:"w-full rounded p-2",children:(0,t.jsx)(i.Checkbox,{checked:N.valueSet.has(e.value),className:"pointer-events-none gap-1 text-sm",onChange:()=>{},tabIndex:-1,children:e.label})})},`${e.value}-${e.label}`))}):[],(0,t.jsx)(s.Command.Group,{children:x?(0,t.jsx)(g,{onAddNew:e=>{I({type:"ADD_NEW",payload:{item:e,allowMulti:f}}),T.current?.focus(),L("")},search:k}):null}),k.length?(0,t.jsx)(s.Command.Empty,{className:"px-4 py-3 text-sm text-gray-900",children:`No results match "${k}"`}):null]}),(0,t.jsx)(s.Command.Group,{className:"border-t border-gray-alpha-400 p-2",children:(0,t.jsx)(s.Command.Item,{className:"cursor-default rounded p-2 aria-disabled:opacity-100",children:(0,t.jsxs)("span",{className:"text-xs text-gray-700",children:["Limits are calculated by the combination of"," ",(0,t.jsx)("strong",{children:"all"})," selected keys"]})})})]})})})]})}function g(e){let{search:a,onAddNew:i}=e;return 0===a.length?null:(0,t.jsx)("div",{className:"p-2",children:(0,t.jsx)(s.Command.Item,{"aria-label":`add ${a}`,className:"w-full rounded *:aria-selected:bg-gray-100 data-[selected=true]:bg-gray-100 hover:bg-gray-100 focus:bg-gray-100 active:bg-gray-100",onSelect:()=>i(a),children:(0,t.jsxs)("div",{className:"flex items-center  gap-x-2 rounded p-2 text-gray-900",children:[(0,t.jsx)(c.PlusCircle,{size:14}),(0,t.jsx)(l.Text,{className:"text-gray-900",size:14,children:`Add "${a}"`})]})})})}e.s(["FilterSelectComponent",()=>h])},1900286,e=>{"use strict";var t=e.i(364533);function a(e){return["inc","!inc","ninc"].includes(e)}function l(e){return["ex","!ex","nex"].includes(e)}function i(e,t){return e.moduleMap.get(t)}function r(e){let l=Array.from(Object.keys(e)),i=new Map(Object.entries(e)),r=l[0],n=i.get(r);return n?{defaultState:[{id:(0,t.v4)(),filters:[{filterId:r,value:n.allowMultiSelect||a(n.allowedOperators[0].value)?[]:"",operator:n.allowedOperators[0].value,fieldId:(0,t.v4)(),...n.allowKey?{key:""}:{}}]}],moduleKeys:l,moduleMap:i}:{moduleKeys:l,moduleMap:i}}function n(e,t){let a=[];for(;e.length;){let{path:l,message:i}=e[0];if(Array.isArray(t)){let e=t[Number(l[0])];a.push({value:e,error:i})}else a.push({value:t,error:i});e.shift()}return a}e.s(["getDefaultState",()=>r,"getFieldModule",()=>i,"isExistsOperator",()=>l,"isMultiOperator",()=>a,"isZodError",0,e=>Array.isArray(e?.errors),"mapZodErrorToValue",()=>n,"parseErrorSchema",0,e=>{let t={};for(;e.length;){let a=e[0],{code:l,message:i,path:r}=a,n=r.join(".");if(!t[n])if("unionErrors"in a){let e=a.unionErrors[0].errors[0];t[n]={message:e.message,type:e.code}}else t[n]={message:i,type:l};"unionErrors"in a&&a.unionErrors.forEach(t=>t.errors.forEach(t=>e.push(t))),e.shift()}return t}])},6783963,e=>{"use strict";var t=e.i(6696646);e.i(3512434);var a=e.i(9835407),l=e.i(6461317),i=e.i(1900286),r=e.i(5812308);let n={algo:"fixed_window",window:"60",limit:"100",keys:["ip"]};function s(e){return e.rateLimit.keys.includes("header:x-vercel-rate-limit-key")}function o(e,t){switch(t.type){case"INITIALIZE":case"INITIALIZE_TEAM_PLAN":return{...e,...t.payload};case"UPDATE_FILTER":{if(t.payload.some(e=>"rate_limit_api_id"===e.filterId))return{...e,rateLimit:{...e.rateLimit,keys:["header:x-vercel-rate-limit-key"]},type:"rate_limit",action:"rate_limit"};let a=e.rateLimit.keys.filter(e=>"header:x-vercel-rate-limit-key"!==e);if(0===a.length&&a.push("ip"),!e.wasActionSet)return{...e,type:"default",action:"log",rateLimit:{...e.rateLimit,keys:a}};return{...e,rateLimit:{...e.rateLimit,keys:a}}}case"UPDATE_ACTION":if("rate_limit"!==e.type&&"rate_limit"===t.payload.action)return{...e,action:t.payload.action,type:"rate_limit",showRateLimitModal:!1,wasActionSet:!0};return{...e,action:t.payload.action,wasActionSet:!0};case"UPDATE_NAME":return{...e,name:t.payload.name};case"UPDATE_DESCRIPTION":return{...e,description:t.payload.description};case"UPDATE_RATE_LIMIT":return{...e,rateLimit:t.payload.rateLimit};case"REMOVE_RATE_LIMIT":return{...e,type:"default",action:"rate_limit"!==e.action?e.action:"log"};case"UPDATE_REDIRECT":return{...e,redirectTo:t.payload.redirectTo};case"UPDATE_ACTION_DURACTION":return{...e,actionDuration:t.payload.actionDuration};case"VALIDATE":try{let t=u.parse(e);return{...e,...t,errors:{},isSubmitted:!0}}catch(a){if((0,i.isZodError)(a)){let r=(0,i.parseErrorSchema)(a.errors),n=t.payload?.fieldName;if(n){let t=(0,l.default)(r,n);return{...e,errors:{...e.errors||{},[n]:t}}}return{...e,errors:r,isSubmitted:!0}}}return e;default:return e}}let c={type:"default",action:"log",actionDuration:null,showRateLimitModal:!0,showUpgradeModal:!1,name:"",description:"",rateLimit:n,isSubmitted:!1,wasActionSet:!1};function d(e){let{selectedRule:a,teamPlan:l,showRateLimitModal:i,showUpgradeModal:r}=e,[s,d]=(0,t.useReducer)(o,{...c,showRateLimitModal:i,showUpgradeModal:r});(0,t.useEffect)(()=>{if(l&&!a)return void d({type:"INITIALIZE_TEAM_PLAN",payload:{teamPlan:l,showRateLimitModal:i}});if(!a)return;let e=a.action?.mitigate?.rateLimit,t=a.action?.mitigate?.action==="rate_limit"?a.action.mitigate.rateLimit?.action||"log":a.action?.mitigate?.action||"log";d({type:"INITIALIZE",payload:{teamPlan:l,showRateLimitModal:i,showUpgradeModal:r,type:a.action?.mitigate?.action==="rate_limit"?"rate_limit":"default",action:t,name:a.name,description:a.description||"",redirectTo:a.action?.mitigate?.redirect?.location,rateLimit:e?{algo:e.algo,limit:`${e.limit}`,window:`${e.window}`,keys:e.keys}:n,isSubmitted:!1,actionDuration:a.action?.mitigate?.actionDuration||null,wasActionSet:!0}})},[a,d,l,i,r]);let m=(0,t.useCallback)(()=>{try{return d({type:"VALIDATE"}),u.parse(s)}catch(e){return null}},[s]);return[s,d,m]}let u=a.z.object({teamPlan:a.z.enum(["pro","enterprise","hobby"]).optional(),type:a.z.enum(["rate_limit","default"]),action:a.z.enum(["challenge","deny","log","bypass","rate_limit","redirect"]),name:a.z.string().min(1,"Name is required"),description:a.z.string().optional(),rateLimit:a.z.object({algo:a.z.enum(["fixed_window","token_bucket"]),window:a.z.coerce.number().min(10),limit:a.z.coerce.number().min(1).max(1e7),keys:a.z.array(a.z.string().superRefine((e,t)=>{!["ip","ja4"].includes(e)&&(e.startsWith("header:")||t.addIssue({code:a.z.ZodIssueCode.custom,message:"Key must start with header:"}))}))}).passthrough().optional(),redirectTo:a.z.union([a.z.string().url(),r.pathSchema]).optional()}).passthrough().superRefine((e,t)=>{if("rate_limit"===e.type){let l="enterprise"===e.teamPlan?3600:600;e.rateLimit?e.rateLimit.window>l&&t.addIssue({code:a.z.ZodIssueCode.too_big,inclusive:!0,maximum:l,message:`Window must not exceed ${l} seconds`,path:["rateLimit","window"],type:"number"}):t.addIssue({code:a.z.ZodIssueCode.custom,message:"Rate limit is required",path:["rateLimit"]})}"redirect"!==e.action||e.redirectTo||t.addIssue({code:a.z.ZodIssueCode.custom,message:"Redirect to is required",path:["redirectTo"]})});e.s(["isApiControlledRateLimit",()=>s,"useRuleBuilderState",()=>d])},3771277,8229016,e=>{"use strict";var t=e.i(6468255),a=e.i(5714623),l=e.i(588428),i=e.i(9722978),r=e.i(3306538),n=e.i(2504781),s=e.i(6881349),o=e.i(3500331),c=e.i(8674454),d=e.i(6694387),u=e.i(4991687),m=e.i(5326905),p=e.i(8459493),h=e.i(5257834),g=e.i(2713868),x=e.i(9508212),f=e.i(1344973),y=e.i(5468328),v=e.i(5232300),b=e.i(455575),w=e.i(9544652),j=e.i(6318858),C=e.i(2560270),S=e.i(7749365),N=e.i(109803),I=e.i(923772),_=e.i(6696646),A=e.i(2627313),k=e.i(467779),L=e.i(3957279),T=e.i(1900286);e.i(6483798);var E=e.i(8287059),O=e.i(3538015),P=e.i(6783963),R=e.i(6891161);function D(e){let{isLoading:a,open:l,onClose:i,onConfirm:r}=e;return(0,t.jsxs)(R.Modal.Modal,{active:l,onClickOutside:i,children:[(0,t.jsxs)(R.Modal.Body,{className:"tailwind-preflight",children:[(0,t.jsx)(R.Modal.Header,{children:(0,t.jsx)(R.Modal.Title,{children:"Rate Limit Pricing"})}),(0,t.jsx)(R.Modal.P,{children:"Rate limiting is enforced at the network edge, adding less than 1ms of latency to requests. Only allowed requests are charged. Blocked requests based on your rule are free."}),(0,t.jsxs)("div",{className:"flex flex-col text-gray-900 divide-y",children:[(0,t.jsxs)("div",{className:"flex flex-row items-center justify-between py-2",children:[(0,t.jsx)("p",{children:"Allowed Request"}),(0,t.jsx)("p",{children:"$0.50 per 1M"})]}),(0,t.jsxs)("div",{className:"flex flex-row items-center justify-between py-2",children:[(0,t.jsx)("p",{children:"Blocked Requests"}),(0,t.jsx)("p",{children:"Free"})]})]})]}),(0,t.jsxs)(R.Modal.Actions,{children:[(0,t.jsx)(R.Modal.Action,{onClick:i,type:"secondary",children:"Cancel"}),(0,t.jsx)(R.Modal.Action,{loading:a,onClick:r,children:"Continue"})]})]})}e.s(["RateLimitModal",()=>D],8229016);var z=e.i(5963711),M=e.i(9386557);function B(e){var a,l;let r,{className:n,disabled:s,error:o,id:c,onChange:d,value:u,...m}=e,[p,h]=(0,_.useState)(u?.toString()??""),g=(0,_.useRef)(null),x=(0,_.useRef)(null),f=(0,_.useCallback)(()=>{let{current:e}=x,{current:t}=g,a=getComputedStyle(document.documentElement).getPropertyValue("--geist-form-small-height");e&&t&&(e.style.height=a||"40px",e.style.height=`${e.scrollHeight}px`,t.style.height=e.style.height)},[g,x]);a=x,l=f,r=(0,_.useRef)(null),(0,_.useEffect)(()=>{let e=a.current;if(e&&"undefined"!=typeof ResizeObserver)return r.current=new ResizeObserver(l),r.current.observe(e),()=>{r.current?.disconnect()}},[l,a]),(0,_.useEffect)(f,[p]);let v=(0,_.useMemo)(()=>{let e=p.startsWith(" "),t=p.endsWith(" ");return e&&t?"This value starts and ends with whitespace.":e?"This value starts with whitespace.":t?"This value ends with whitespace.":null},[p]),b=(0,_.useMemo)(()=>p.split(/( )/).filter(Boolean),[p]),w=(0,_.useMemo)(()=>s?"cursor-not-allowed text-gray-700 bg-gray-100 shadow-[0_0_0_1px_var(--ds-gray-400),_0_0_0_1px_var(--ds-background-200)]":o?"shadow-[0_0_0_1px_var(--ds-red-900),0_0_0_4px_var(--ds-red-300)] hover:shadow-[0_0_0_1px_var(--ds-red-900),0_0_0_4px_var(--ds-red-500)] focus-within:!shadow-[0_0_0_1px_var(--ds-red-900),0_0_0_4px_var(--ds-red-300)]":"shadow-[0_0_0_1px_var(--border-color,var(--ds-gray-alpha-400))] hover:shadow-[0_0_0_1px_var(--ds-gray-alpha-500)] focus-within:!shadow-[0_0_0_1px_var(--ds-gray-alpha-600),0px_0px_0px_4px_#00000029]",[o,s]);return(0,t.jsxs)("div",{className:(0,i.clsx)(`
      w-full grid grid-cols-1 grid-rows-1 items-center rounded px-2 transition-shadow
      *:text-sm *:font-mono relative *:p-0 *:py-2 *:rounded *:leading-none *:tracking-normal *:col-span-full *:row-span-full
      `,{[w]:!0,[n??""]:!!n}),id:c,children:[(0,t.jsx)("textarea",{ref:x,className:"text-transparent caret-foreground resize-none overflow-hidden outline-none z-10 bg-transparent",value:p,onChange:e=>{h(e.target.value),d?.(e)},disabled:s,...m,spellCheck:"false",autoComplete:"off"}),(0,t.jsx)("p",{ref:g,className:"text-foreground pointer-events-none wrap-break-word whitespace-pre-wrap",children:b.map((e,a)=>" "!==e?(0,t.jsx)("span",{children:e}):(0,t.jsx)("span",{className:(0,i.clsx)("relative after:content-['⎵'] after:absolute after:-left-[1px] after:top-1.5 after:text-[0.8rem]  text-gray-900",{"text-geist-warning bg-amber-100":0===a||a===b.length-1}),children:" "}))}),(0,t.jsx)("div",{className:(0,i.clsx)("absolute right-0 bottom-0 translate-y-1.5 translate-x-0.5 z-10 transition-opacity duration-75",v?"pointer-events-auto opacity-1":"opacity-0 pointer-events-none"),children:(0,t.jsx)(y.Tooltip,{position:"top",text:v,tabIndex:-1,children:(0,t.jsx)(M.WarningFill,{color:"amber-600"})})})]})}var $=e.i(57106);function H(){let e=(0,k.useFilterContext)(),{state:a,moduleConfig:l}=(0,A.useItemStateContext)(),i=(0,w.useDisabled)(),r=l.allowedOperators.find(e=>e.value===a.operator)?.label;return(0,t.jsx)(x.Stack,{className:"w-full @lg-page:max-w-[175px]",children:l.allowedOperators.length>1?(0,t.jsxs)(u.MenuContainer,{position:"bottom-start",children:[(0,t.jsx)(d.MenuButton,{align:"flex-grow","aria-label":`Operator ${r||""}`,disabled:i,size:"small",suffix:(0,t.jsx)(C.ChevronDown,{}),type:"secondary",width:"100%",children:(0,t.jsx)(x.Stack,{align:"center",className:"w-full",direction:"row",flex:1,children:(0,t.jsx)("span",{children:r??""})})}),(0,t.jsx)(c.Menu,{className:"w-full overflow-y-auto lg:min-w-[200px]",portalClassName:"tailwind-preflight",useNewListHeightBehavior:{maxHeight:240,numberOfChildren:l.allowedOperators.length},children:l.allowedOperators.map(l=>(0,t.jsx)(p.MenuItem,{onClick:()=>{e.updateCondition(a.fieldId,{type:"operator",value:l.value})},value:l.value,children:(0,t.jsxs)(x.Stack,{align:"center",direction:"row",flex:1,gap:3,justify:"space-between",children:[(0,t.jsx)(x.Stack,{align:"center",direction:"row",flex:1,children:(0,t.jsx)("span",{children:l.label})}),l.value===a.operator?(0,t.jsx)(j.Check,{}):null]})},l.value))})]}):(0,t.jsx)(d.MenuButton,{align:"flex-grow","aria-label":`Operator ${r||""}`,disabled:!0,size:"small",type:"secondary",width:"100%",children:(0,t.jsx)(x.Stack,{align:"center",className:"w-full",direction:"row",flex:1,children:(0,t.jsx)("span",{children:r??""})})})})}function U(){let e=(0,k.useFilterContext)(),{state:a,moduleConfig:l}=(0,A.useItemStateContext)(),i=(0,w.useDisabled)(),r=!!l.resolveValues,n=(0,T.isMultiOperator)(a.operator),s=(0,T.isExistsOperator)(a.operator),o=l.placeholder?.value||"";"re"===a.operator&&(o="Type a regular expression..");let c=e.allErrors[`${a.fieldId}-value`];if(r||n)return(0,t.jsx)(L.FilterSelectComponent,{allowAdd:l.allowCustomValue||n&&!r||!1,allowMulti:n,disabled:i,errors:c,filterName:l.title,getOptions:l.resolveValues,initialValue:a.value,onChange:t=>{n?e.updateCondition(a.fieldId,{type:"value",value:t}):e.updateCondition(a.fieldId,{type:"value",value:t[0]})},placeholder:o});let d=Array.isArray(a.value)?`${a.value.length>0?a.value[0]:""}`:`${a.value}`;return(0,t.jsx)(B,{className:"w-full",disabled:!!s||i,error:c?"errors":null,id:a.fieldId,name:`${a.filterId}-${a.fieldId}`,onChange:t=>e.updateCondition(a.fieldId,{type:"value",value:t.target.value}),placeholder:s?"Any value":o,value:s?"":d})}function F(e){let{initialState:a,onChange:l,teamPlan:r}=e,n=(0,w.useDisabled)(),s=(0,k.useFilterContext)(),o=s.state;return(0,t.jsxs)("div",{className:"mt-2 min-h-[320px] w-full rounded border border-gray-alpha-400 bg-background-200 p-10",children:[o.map((e,a,l)=>(0,t.jsxs)(_.Fragment,{children:[e.filters.map((a,l,r)=>(0,t.jsx)("div",{className:(0,i.clsx)("flex flex-col gap-2 @lg-page:flex-row @lg-page:items-center",{"mb-2":l!==r.length-1}),children:(0,t.jsx)(Z,{groupId:e.id,index:l,state:a})},a.fieldId)),a!==l.length-1?(0,t.jsxs)("div",{className:"relative flex w-full items-center justify-center",children:[(0,t.jsx)("div",{className:"h-[80px] w-px bg-gray-400"}),(0,t.jsx)(g.SplitButton,{buttonProps:{disabled:!0,size:"small",type:"secondary"},className:"absolute",menuButtonLabel:"Add a condition or condition group",menuItems:(0,t.jsx)(g.SplitButtonMenuItem,{description:"Add a condition",menuItemProps:{disabled:n,onClick:()=>s.addCondition(a)},title:"AND"}),menuProps:{width:230},children:"OR"})]}):null]},`group-${e.id}`)),(0,t.jsx)(ea,{isButton:!0}),"rate_limit"===a.type?(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(Q,{initialState:a,onChange:l,teamPlan:r}),(0,t.jsx)(ea,{})]}):null,(0,t.jsx)(G,{initialState:a,onChange:l,teamPlan:r})]})}function q(){let e=(0,k.useFilterContext)(),{state:a,moduleConfig:l}=(0,A.useItemStateContext)(),i=l.placeholder?.key||"",r=e.allErrors[`${a.fieldId}-key`],n=(0,w.useDisabled)();return(0,t.jsx)(t.Fragment,{children:l.allowKey?(0,t.jsx)("div",{className:"w-full @lg-page:max-w-[175px]",children:(0,t.jsx)(o.Input,{className:"w-full",disabled:n,error:r?"error":void 0,id:a.fieldId,name:`${a.filterId}-${a.fieldId}-key`,onChange:t=>e.updateCondition(a.fieldId,{type:"key",value:t.target.value}),placeholder:i,showErrorMessage:!1,size:"small",value:a.key,width:"100%"})}):null})}function V(){let e=(0,k.useFilterContext)(),{state:l,moduleConfig:i}=(0,A.useItemStateContext)(),r=(0,w.useDisabled)(),n=(0,_.useMemo)(()=>e.moduleKeys.map(t=>{let a=(0,T.getFieldModule)(e,t);return{label:a.title,value:t,icon:a.icon,description:a.description,deprecated:a.deprecated}}),[e]);return(0,t.jsxs)(x.Stack,{className:"w-full tailwind-preflight",children:[(0,t.jsx)(a.default,{id:"4f438cb26d60b0d9",children:".firewall-components-module-configuration-components-module-select-component [class*=combobox-module]>button{min-height:var(--geist-form-small-height,32px)!important;max-height:var(--geist-form-small-height,32px)!important;height:var(--geist-form-small-height,32px)!important}"}),(0,t.jsxs)(s.Combobox,{"aria-label":`rule type ${i.title}`,disabled:r,noRawSelectedValue:!0,onChange:t=>{t&&e.updateCondition(l.fieldId,{type:"filter",value:t})},placeholder:"Select attribute…",prefixIcon:i.icon,size:"small",value:l.filterId,width:"100%",className:"firewall-components-module-configuration-components-module-select-component",children:[(0,t.jsx)(s.Combobox.Input,{}),(0,t.jsx)(s.Combobox.List,{className:"overflow-x-hidden",children:(0,t.jsxs)(t.Fragment,{children:[n.filter(e=>!e.deprecated?.(l.filterId)).map(e=>{let{value:a,label:l,icon:i,description:r}=e;return(0,t.jsx)(s.Combobox.Option,{label:l,value:a,className:"!h-auto min-h-0 max-h-40 !p-2.5",children:(0,t.jsxs)("div",{className:"jsx-4f438cb26d60b0d9 flex flex-col gap-1",children:[(0,t.jsxs)("header",{className:"jsx-4f438cb26d60b0d9 flex gap-2",children:[i?(0,t.jsx)("span",{className:"jsx-4f438cb26d60b0d9",children:i}):null,(0,t.jsx)("p",{className:"jsx-4f438cb26d60b0d9 font-medium text-gray-1000",children:l})]}),r?(0,t.jsx)("p",{className:"jsx-4f438cb26d60b0d9 text-label-13 text-gray-900",children:r}):null]})},a)}),(0,t.jsx)("div",{className:"jsx-4f438cb26d60b0d9 sticky top-0",children:(0,t.jsx)($.Link,{className:"flex justify-between text-label-12 bg-background-200 hover:bg-gray-100 transition-colors text-gray-900 p-2.5 w-[calc(100%+20px)] -translate-x-2 -translate-y-2 rounded-t-md",external:!0,href:"/docs/vercel-firewall/vercel-waf/rule-configuration",children:"Rule Configuration Docs"})})]})})]})]})}function W(){let e=(0,k.useFilterContext)(),{state:a,index:l,groupId:i}=(0,A.useItemStateContext)(),r=(0,w.useDisabled)(),s=e.state.find(e=>e.id===i),o=e.state.length>1||(s?.filters??[]).length>1;return(0,t.jsxs)("div",{className:"min-h-[80px] w-full rounded-md border bg-white p-6 flex flex-col @lg-page:flex-row gap-3 items-start",children:[(0,t.jsxs)("div",{className:"flex gap-2 items-center w-full @lg-page:max-w-[240px]",children:[(0,t.jsx)(f.Text,{className:"text-left capitalize",children:0===l?"if":"and"}),(0,t.jsx)(V,{}),o?(0,t.jsx)(n.Button,{"aria-label":"remove rule",disabled:r,onClick:()=>{s?.filters.length===1?e.deleteConditionGroup(i):e.deleteCondition(a.fieldId)},shape:"square",size:"small",svgOnly:!0,type:"error",typeName:"button",className:"size-[30px]",children:(0,t.jsx)(I.Trash,{size:16})}):null]}),(0,t.jsx)(q,{}),(0,t.jsx)(H,{}),(0,t.jsx)(U,{})]})}function Z(e){let{index:a,state:l,groupId:i}=e,r=(0,k.useFilterContext)(),n=(0,T.getFieldModule)(r,l.filterId);return n?(0,t.jsx)(A.FilterItemStateProvider,{groupId:i,index:a,moduleConfig:n,state:l,children:(0,t.jsx)(n.Component,{})}):null}function G(e){let{initialState:a,onChange:r,teamPlan:n}=e,s=(0,w.useDisabled)(),m=(0,l.useFirewallRateLimitTeamFlag)(),h=(0,E.useOpenUpgradeModal)(),[g,y]=(0,_.useState)(!1),v=(0,b.useToasts)(),[S,N]=(0,_.useState)(!1),I=(0,_.useMemo)(()=>(0,O.allowedFirewallActions)(!0,"rate_limit"===a.type),[a.type]),A=I.find(e=>e.value===a.action)?.label;return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsxs)(x.Stack,{align:{sm:"start",md:"start",lg:"center"},className:"h-fit grow rounded-md border bg-white p-6 @lg-page:h-[80px]",direction:{sm:"column",md:"column",lg:"row"},gap:3,children:[(0,t.jsxs)("div",{className:"flex w-full flex-1 flex-row items-center gap-x-3",children:[(0,t.jsx)(f.Text,{className:"capitalize",children:"then"}),(0,t.jsx)("div",{className:"w-full",children:(0,t.jsxs)(u.MenuContainer,{position:"bottom-start",children:[(0,t.jsx)(d.MenuButton,{align:"flex-grow","aria-label":`Action to take based on created rules ${A||""}`,disabled:s,size:"small",suffix:(0,t.jsx)(C.ChevronDown,{}),type:"secondary",width:"100%",children:(0,t.jsx)(x.Stack,{align:"center",className:"w-full",direction:"row",flex:1,children:(0,t.jsx)("span",{children:A||""})})}),(0,t.jsx)(c.Menu,{className:"w-full min-w-[300px] lg:min-w-[400px]",portalClassName:"tailwind-preflight",children:I.map(e=>{let{value:l,label:s,subtext:o,badge:c}=e;return(0,t.jsxs)(p.MenuItem,{height:70,innerMenuItemClassName:(0,i.clsx)("min-h-[60px]"),onClick:()=>{"hobby"===n&&"rate_limit"===l&&a.showUpgradeModal?h({source:"firewall-rate-limit",onConversionSuccess:()=>{r({type:"UPDATE_ACTION",payload:{action:l}})}}):"rate_limit"!==a.type&&"rate_limit"===l&&a.showRateLimitModal&&!m.value?y(!0):r({type:"UPDATE_ACTION",payload:{action:l}})},value:l,children:[(0,t.jsx)(x.Stack,{align:"center",direction:"row",flex:1,gap:3,justify:"space-between",children:(0,t.jsx)("div",{className:"flex flex-col",children:(0,t.jsxs)("div",{className:"flex flex-col gap-y-1",children:[(0,t.jsxs)("div",{className:"flex items-center gap-x-2",children:[(0,t.jsx)("p",{className:"font-medium text-gray-1000",children:s}),c||null]}),(0,t.jsx)("p",{className:"text-[13px] font-normal text-gray-900",children:o})]})})}),l===a.action?(0,t.jsx)(j.Check,{}):null]},l)})})]})})]}),"hobby"!==n&&["deny","challenge","rate_limit"].includes(a.action)?(0,t.jsx)(K,{initialState:a,onChange:r}):null,"redirect"===a.action?(0,t.jsxs)("div",{className:"flex h-[80px] w-full flex-1 flex-row items-center gap-x-3",children:[(0,t.jsx)(f.Text,{className:"w-full max-w-[36px] @lg-page:max-w-[12px]",children:"to"}),(0,t.jsx)(o.Input,{"aria-label":"redirect location",className:"w-full @lg-page:min-w-[565px]",disabled:s,error:a.errors?.redirectTo?"error":void 0,onBlur:()=>r({type:"VALIDATE",payload:{fieldName:"redirectTo"}}),onChange:e=>r({type:"UPDATE_REDIRECT",payload:{redirectTo:e.target.value}}),placeholder:"https://",showErrorMessage:!1,size:"small",value:a.redirectTo||"",width:"100%"})]}):null]}),(0,t.jsx)(D,{isLoading:S,onClose:()=>y(!1),onConfirm:()=>{N(!0);try{r({type:"UPDATE_ACTION",payload:{action:"rate_limit"}})}catch(e){v.error(e.message)}finally{N(!1),y(!1)}},open:g})]})}function K(e){let{initialState:a,onChange:l}=e,r=(0,w.useDisabled)()||(0,P.isApiControlledRateLimit)(a),n=(0,_.useMemo)(()=>[{value:"1m",label:"1 minute"},{value:"5m",label:"5 minutes"},{value:"15m",label:"15 minutes"},{value:"30m",label:"30 minutes"},{value:"1h",label:"1 hour"}],[]),s=n.find(e=>e.value===a.actionDuration)?.label,o=null===a.actionDuration;return(0,t.jsxs)("div",{className:"flex w-full items-center gap-x-3 lg:w-fit",children:[o?null:(0,t.jsx)("p",{className:"w-full max-w-[36px] lg:max-w-4",children:"for"}),(0,t.jsx)("div",{className:"w-full lg:min-w-[190px] lg:max-w-[190px]",children:(0,t.jsxs)(u.MenuContainer,{position:"bottom-start",children:[(0,t.jsx)(J,{children:(0,t.jsx)(d.MenuButton,{align:"flex-grow","aria-label":"Timeframe for action",disabled:r,size:"small",suffix:o?null:(0,t.jsx)(C.ChevronDown,{}),type:"secondary",width:"100%",children:(0,t.jsx)(x.Stack,{align:"center",className:"w-full",direction:"row",flex:1,gap:2,justify:o?"center":void 0,children:o?(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(S.Clock,{size:16}),(0,t.jsx)("span",{children:"Add Persistent Action"})]}):(0,t.jsx)("span",{className:"text-left",children:s})})})}),(0,t.jsxs)(c.Menu,{className:"w-full min-w-[180px] lg:min-w-[180px]",portalClassName:"tailwind-preflight",children:[n.map(e=>{let{value:r,label:n}=e;return(0,t.jsx)(p.MenuItem,{height:40,innerMenuItemClassName:(0,i.clsx)("min-h-[40px]"),onClick:()=>{l({type:"UPDATE_ACTION_DURACTION",payload:{actionDuration:r}})},value:r,children:(0,t.jsxs)(x.Stack,{align:"center",direction:"row",flex:1,gap:3,justify:"space-between",children:[(0,t.jsx)(x.Stack,{align:"center",children:n}),r===a.actionDuration?(0,t.jsx)(j.Check,{}):null]})},r)}),o?null:(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(m.MenuDivider,{}),(0,t.jsx)(p.MenuItem,{height:40,innerMenuItemClassName:(0,i.clsx)("mt-1 min-h-[40px] text-red-800"),onClick:()=>{l({type:"UPDATE_ACTION_DURACTION",payload:{actionDuration:null}})},value:"",children:"Remove Timeframe"})]})]})]})})]})}function J(e){let{children:a}=e,{state:{open:l}}=(0,v.useMenu)();return(0,t.jsx)(y.Tooltip,{className:"w-full",delay:!1,desktopOnly:!0,forceHide:l,position:"top",text:(0,t.jsxs)("p",{className:"flex h-full flex-col justify-start text-left",children:[(0,t.jsx)("span",{className:"text-left text-gray-900",children:"Optional"}),"Prevent further activity from a client device generating requests that match this rule for a specified time"]}),tooltipStyle:{padding:"0 8px"},children:a})}function Q(e){let{initialState:a,onChange:l,teamPlan:i}=e,[r,s]=(0,_.useState)(a.rateLimit.algo),[c,d]=(0,_.useState)(`${a.rateLimit.window}`),[u,m]=(0,_.useState)(`${a.rateLimit.limit}`),[p,h]=(0,_.useState)([...a.rateLimit.keys]),g=(0,w.useDisabled)();(0,_.useEffect)(()=>{l({type:"UPDATE_RATE_LIMIT",payload:{rateLimit:{algo:r,window:c,limit:u,keys:p}}})},[r,p,u,l,c]);let[v,b]=(0,_.useMemo)(()=>"enterprise"===i?[10,3600]:[10,600],[i]);return(0,t.jsx)("div",{className:"flex w-full",children:(0,t.jsxs)(x.Stack,{align:"center",className:"w-full grow rounded-md border bg-white p-6 lg:h-[80px]",direction:{sm:"column",md:"column",lg:"row"},gap:3,children:[(0,t.jsx)("div",{className:"w-full lg:max-w-fit",children:(0,t.jsx)(f.Text,{className:"text-nowrap text-left",children:"Rate Limit"})}),(0,t.jsx)(x.Stack,{align:"flex-start",className:"w-full lg:max-w-[175px]",direction:"column",gap:1,children:(0,t.jsx)(X,{initialAlgorithm:r,onChangeAlgorithm:s,teamPlan:i})}),(0,t.jsx)(x.Stack,{align:"flex-start",className:"w-full lg:max-w-[132px]",direction:"column",gap:1,children:(0,t.jsx)(y.Tooltip,{className:"w-full",delay:!1,desktopOnly:!0,position:"top",text:`Time window for rate limit in seconds (min: ${v}, max: ${b})`,children:(0,t.jsx)(o.Input,{"aria-label":`time window for rate limit in seconds (min: ${v}, max: ${b})`,className:"w-full",disabled:g,error:a.errors?.["rateLimit.window"]?"error":void 0,id:"rate-limit-window",name:"Window",onBlur:()=>l({type:"VALIDATE",payload:{fieldName:"rateLimit.window"}}),onChange:e=>{d(e.target.value)},showErrorMessage:!1,size:"small",suffix:"seconds",value:c.toString(),width:"100%"})})}),(0,t.jsx)(x.Stack,{align:"flex-start",className:"w-full lg:max-w-[132px]",direction:"column",gap:1,children:(0,t.jsx)(y.Tooltip,{className:"w-full",delay:!1,desktopOnly:!0,position:"top",text:`Request Limit
(min: 1, max: 10,000,000)`,children:(0,t.jsx)(o.Input,{"aria-label":"request rate limit",className:"w-full",disabled:g,error:a.errors?.["rateLimit.limit"]?"error":void 0,id:"rate-limit-limit",name:"Limit",onBlur:()=>l({type:"VALIDATE",payload:{fieldName:"rateLimit.limit"}}),onChange:e=>{m(e.target.value)},showErrorMessage:!1,size:"small",suffix:"requests",value:u.toString(),width:"100%"})})}),(0,t.jsx)(x.Stack,{align:"flex-start",className:"w-full",direction:"column",gap:1,children:(0,t.jsx)(y.Tooltip,{className:"w-full",delay:!1,desktopOnly:!0,position:"top",text:"Rate Limit By",children:(0,t.jsx)(et,{apiControlled:(0,P.isApiControlledRateLimit)(a),initialKeys:a.rateLimit.keys,onChangeKeys:e=>{h(e)},readOnly:(0,P.isApiControlledRateLimit)(a)})})}),(0,t.jsx)(x.Stack,{children:(0,t.jsx)(n.Button,{"aria-label":"remove rule",className:"hidden min-w-[32px] lg:block",disabled:g||(0,P.isApiControlledRateLimit)(a),onClick:()=>l({type:"REMOVE_RATE_LIMIT"}),shape:"square",size:"small",svgOnly:!0,type:"error",children:(0,t.jsx)(I.Trash,{size:16})})})]})})}function X(e){let{initialAlgorithm:a,onChangeAlgorithm:l,teamPlan:n}=e,[s,o]=(0,_.useState)(a||"fixed_window"),g=(0,w.useDisabled)();(0,_.useEffect)(()=>{l(s)},[l,s]);let f=(0,_.useMemo)(()=>[{value:"fixed_window",label:"Fixed Window",disabled:!1,badge:null,subtext:"Use when strict limits are necessary and bursts at the time boundaries are okay"},{value:"token_bucket",label:"Token Bucket",disabled:"enterprise"!==n,badge:"enterprise"!==n?(0,t.jsx)(r.Badge,{size:"sm",variant:"purple-subtle",children:"Enterprise Only"}):null,subtext:"Use when occasional bursts need to be accommodated without exceeding average rate limits"}],[n]),v=f.find(e=>e.value===s)?.label;return(0,t.jsxs)(u.MenuContainer,{position:"bottom-start",children:[(0,t.jsx)(y.Tooltip,{className:"w-full",delay:!1,desktopOnly:!0,position:"top",text:"Algorithm",children:(0,t.jsx)(d.MenuButton,{align:"flex-grow","aria-label":`Rate limit algorithm ${v||""}`,disabled:g,size:"small",suffix:(0,t.jsx)(C.ChevronDown,{}),type:"secondary",width:"100%",children:(0,t.jsx)(x.Stack,{align:"center",className:"w-full",direction:"row",flex:1,children:(0,t.jsx)("span",{children:v||""})})})}),(0,t.jsxs)(c.Menu,{className:"w-full lg:min-w-[400px]",portalClassName:"tailwind-preflight",children:[f.map(e=>{let{value:a,label:l,subtext:r,disabled:n,badge:c}=e;return(0,t.jsx)(p.MenuItem,{disabled:n,innerMenuItemClassName:(0,i.clsx)("min-h-[78px] aria-disabled:bg-gray-100 aria-disabled:opacity-60"),onClick:()=>{o(a)},value:a,children:(0,t.jsxs)(x.Stack,{align:"center",direction:"row",flex:1,gap:3,justify:"space-between",children:[(0,t.jsxs)(x.Stack,{direction:"column",flex:1,gap:1,children:[(0,t.jsxs)("div",{className:"flex items-center gap-x-1",children:[(0,t.jsx)("p",{className:"font-medium text-gray-1000",children:l}),c||null]}),(0,t.jsx)("p",{className:"text-[13px] font-normal text-gray-900",children:r})]}),s===a?(0,t.jsx)(j.Check,{}):null]})},a)}),(0,t.jsx)(m.MenuDivider,{}),(0,t.jsx)(h.MenuLink,{href:"/docs/security/vercel-waf",innerMenuItemClassName:"min-h-[40px]",children:(0,t.jsxs)(x.Stack,{align:"center",direction:"row",flex:1,justify:"space-between",children:[(0,t.jsx)("p",{className:"font-medium text-gray-1000",children:"Learn more about rate limits"}),(0,t.jsx)("span",{children:(0,t.jsx)(N.External,{size:16})})]})})]})]})}let Y={"header:x-vercel-rate-limit-key":"API controlled"},ee=[{value:"ip",label:"IP Address"},{value:"ja4",label:"JA4 Digest"},{value:"header:user-agent",label:"User Agent"}];function et(e){let{apiControlled:a,initialKeys:l,onChangeKeys:i,readOnly:r}=e,[n,s]=(0,_.useState)(l||["ip"]),[o,c]=(0,_.useState)(a);(0,_.useEffect)(()=>{a!==o&&(s(l||["ip"]),c(a))},[a,o,l]);let d=(0,w.useDisabled)()||r;return(0,_.useEffect)(()=>{i(n)},[i,n]),(0,t.jsx)(L.FilterSelectComponent,{allowAdd:!0,allowMulti:!0,disabled:d,filterName:"Keys",getOptions:()=>ee,initialValue:n,labels:Y,onChange:e=>{let t=e.map(e=>e.trim().toLowerCase()).filter(z.isValidEdgeRateLimitKey);t.length||t.push("ip"),s(t)},placeholder:"e.g. header:authorization"})}function ea(e){let{isButton:a}=e,l=(0,w.useDisabled)(),r=(0,k.useFilterContext)();return(0,t.jsxs)("div",{className:"relative flex w-full items-center justify-center",children:[(0,t.jsx)("div",{className:(0,i.clsx)("w-px bg-gray-400",a?"h-[80px]":"h-[40px]")}),a?(0,t.jsx)(g.SplitButton,{buttonProps:{disabled:l,onClick:()=>r.addCondition(r.state.length-1),size:"small",type:"secondary"},className:"absolute",menuButtonLabel:"Add a condition or condition group",menuItems:(0,t.jsx)(g.SplitButtonMenuItem,{description:"Add a condition group",menuItemProps:{disabled:l,onClick:r.addConditionGroup},title:"OR"}),menuProps:{width:230},children:"AND"}):null]})}e.s(["BaseComponent",()=>W,"FilterBuilder",()=>F],3771277)},5120783,e=>{"use strict";var t=e.i(6468255),a=e.i(9937599),l=e.i(8626589),i=e.i(8486711),r=e.i(764581),n=e.i(2375916);e.i(3512434);var s=e.i(9835407),o=e.i(1637579),c=e.i(1361980),d=e.i(5812308),u=e.i(6284227),m=e.i(3771277);let p=[...u.stringOperators,...u.stringMatchOperators],h={title:"Country",icon:(0,t.jsx)(a.Location,{}),Component:m.BaseComponent,description:"Client country derived from IP address",schema:s.z.union([d.stringSchema,s.z.array(d.stringSchema).min(1,"Country cannot be empty")]),resolveValues:()=>c.default.getCountries().map(e=>({label:e.name,value:e.iso2.toUpperCase()})),allowedOperators:u.stringOperators,placeholder:{value:"Type a country name.."}},g={title:"Hostname",icon:(0,t.jsx)(r.WindowGlobe,{}),Component:m.BaseComponent,description:"Hostname of the incoming request",schema:s.z.union([d.hostnameSchema,s.z.array(d.hostnameSchema).min(1,"Hostname cannot be empty")]),allowedOperators:p,placeholder:{value:"Type a hostname.."}},x={title:"Request Header",icon:(0,t.jsx)(l.Hash,{}),Component:m.BaseComponent,description:"HTTP header key and value from request",schema:s.z.union([d.stringSchema,s.z.array(d.stringSchema).min(1,"Request header cannot be empty")]),allowedOperators:[...p,...u.keyExistsOperator],allowKey:!0,placeholder:{value:"Type a value..",key:"X-Request-Header"}},f={title:"IP Address",icon:(0,t.jsx)(r.WindowGlobe,{}),Component:m.BaseComponent,description:"Client IP address or CIDR block",schema:s.z.union([d.ipAndCidrsSchema,s.z.array(d.ipAndCidrsSchema).min(1,"IP address cannot be empty")]),allowedOperators:u.stringOperators,placeholder:{value:"e.g. 10.0.0.1, 10.0.0.1/32"}},y={title:"Method",icon:(0,t.jsx)(l.Hash,{}),Component:m.BaseComponent,description:"HTTP method of the incoming request",schema:s.z.union([d.stringSchema,s.z.array(d.stringSchema).min(1,"Method cannot be empty")]),resolveValues:()=>[{label:"GET",value:"GET"},{label:"HEAD",value:"HEAD"},{label:"POST",value:"POST"},{label:"DELETE",value:"DELETE"},{label:"PATCH",value:"PATCH"},{label:"PUT",value:"PUT"},{label:"CONNECT",value:"CONNECT"},{label:"OPTIONS",value:"OPTIONS"},{label:"TRACE",value:"TRACE"},{label:"DEBUG",value:"DEBUG"},{label:"QUERY",value:"QUERY"}],allowedOperators:u.stringOperators},v={title:"Environment",icon:(0,t.jsx)(r.WindowGlobe,{}),Component:m.BaseComponent,description:"Vercel deployment environment",schema:s.z.union([d.stringSchema,s.z.array(d.stringSchema).min(1,"Vercel environment cannot be empty")]),resolveValues:()=>[{label:"Preview",value:"preview"},{label:"Production",value:"production"}],allowedOperators:u.stringOperators},b={title:"Request Path",icon:(0,t.jsx)(i.Route,{}),Component:m.BaseComponent,description:"Normalized URL path of the request excluding query",schema:s.z.union([d.pathSchema,s.z.array(d.pathSchema).min(1,"Path cannot be empty")]),allowedOperators:p,placeholder:{value:"e.g. /api, /signup/new"}},w={title:"Route",icon:(0,t.jsx)(i.Route,{}),Component:m.BaseComponent,description:"Framework determined route pattern",schema:s.z.union([d.pathSchema,s.z.array(d.pathSchema).min(1,"Path cannot be empty")]),allowedOperators:p,placeholder:{value:"e.g. /blog/[slug]"}},j={title:"Server Action Name",icon:(0,t.jsx)(i.Route,{}),Component:m.BaseComponent,description:"Next.js server action invoked",schema:s.z.union([d.stringSchema,s.z.array(d.stringSchema).min(1,"Server action name cannot be empty")]),allowedOperators:p,placeholder:{value:"e.g. app/lib/action.ts#getLogin"}},C={title:"Raw Path",icon:(0,t.jsx)(i.Route,{}),Component:m.BaseComponent,description:"Raw URL path of the request excluding query",schema:s.z.union([d.pathSchema,s.z.array(d.pathSchema).min(1,"Path cannot be empty")]),allowedOperators:p,placeholder:{value:"e.g. /api/, /signup/new/"}},S={title:"User Agent",icon:(0,t.jsx)(l.Hash,{}),Component:m.BaseComponent,description:"HTTP User-Agent header from client",schema:s.z.union([d.stringSchema,s.z.array(d.stringSchema).min(1,"User Agent cannot be empty")]),allowedOperators:p,placeholder:{value:"e.g. curl"}},N={title:"Query",icon:(0,t.jsx)(l.Hash,{}),Component:m.BaseComponent,description:"Query parameter key and value",schema:s.z.union([d.stringSchema,s.z.array(d.stringSchema).min(1,"Query cannot be empty")]),allowedOperators:[...p,...u.keyExistsOperator],allowKey:!0,placeholder:{key:"e.g. id, postId",value:"Type a value.."}},I={title:"Cookie",icon:(0,t.jsx)(l.Hash,{}),Component:m.BaseComponent,description:"Cookie name and value from request",schema:s.z.union([d.stringSchema,s.z.array(d.stringSchema).min(1,"Cookie cannot be empty")]),allowedOperators:[...p,...u.keyExistsOperator],allowKey:!0,placeholder:{key:"Cookie-Name",value:"Type a value.."}},_={title:"Continent",icon:(0,t.jsx)(a.Location,{}),Component:m.BaseComponent,description:"Client continent derived from IP address",schema:s.z.union([d.stringSchema,s.z.array(d.stringSchema).min(1,"Continent cannot be empty")]),resolveValues:()=>[{label:"Africa",value:"AF"},{label:"Antarctica",value:"AN"},{label:"Asia",value:"AS"},{label:"Europe",value:"EU"},{label:"North America",value:"NA"},{label:"Oceania",value:"OC"},{label:"South America",value:"SA"}],allowedOperators:u.stringOperators},A={title:"City",icon:(0,t.jsx)(a.Location,{}),Component:m.BaseComponent,description:"Client city derived from IP address",schema:s.z.union([d.stringSchema,s.z.array(d.stringSchema).min(1,"City cannot be empty")]),allowedOperators:p,placeholder:{value:"Type a city name.."}},k={title:"State",icon:(0,t.jsx)(a.Location,{}),Component:m.BaseComponent,description:"Client state derived from IP address",schema:s.z.union([d.stringSchema,s.z.array(d.stringSchema).min(1,"State cannot be empty")]),allowedOperators:p,placeholder:{value:"Type a state abbreviation.."}},L={title:"AS Number",icon:(0,t.jsx)(a.Location,{}),Component:m.BaseComponent,description:"Autonomous System Number from client IP",schema:s.z.union([d.digitSchema,s.z.array(d.digitSchema).min(1,"AS Number cannot be empty")]),allowedOperators:p,placeholder:{value:"Digits only, ex. 12345"}},T={title:"Vercel Region",icon:(0,t.jsx)(a.Location,{}),Component:m.BaseComponent,description:"Vercel region that handled request",schema:s.z.union([d.stringSchema,s.z.array(d.stringSchema).min(1,"Vercel Region cannot be empty")]),resolveValues:()=>Object.values(o.regions).map(e=>({label:`${e.key} - ${e.name}`,value:e.key})),allowedOperators:u.stringOperators},E={title:"Protocol",icon:(0,t.jsx)(r.WindowGlobe,{}),Component:m.BaseComponent,description:"HTTP protocol version",schema:s.z.union([d.stringSchema,s.z.array(d.stringSchema).min(1,"Protocol cannot be empty")]),resolveValues:()=>[{label:"HTTP/1.1",value:"HTTP/1.1"},{label:"HTTP/2.0",value:"HTTP/2.0"}],allowedOperators:u.stringOperators},O={title:"JA3 Digest",icon:(0,t.jsx)(n.Shield,{}),Component:m.BaseComponent,description:"JA3 TLS fingerprint of client connection",schema:s.z.union([d.stringSchema,s.z.array(d.stringSchema).min(1,"JA3 cannot be empty")]),allowedOperators:p,placeholder:{value:"Type a value.."},allowedPlans:["enterprise"]},P={path:b,route:w,server_action:j,raw_path:C,method:y,user_agent:S,header:x,query:N,cookie:I,host:g,environment:v,ip_address:f,protocol:E,region:T,geo_continent:_,geo_country:h,geo_country_region:k,geo_city:A,geo_as_number:L,ja4_digest:{title:"JA4 Digest",icon:(0,t.jsx)(n.Shield,{}),Component:m.BaseComponent,description:"JA4 TLS fingerprint of client connection",schema:s.z.union([d.stringSchema,s.z.array(d.stringSchema).min(1,"JA4 cannot be empty")]),allowedOperators:p,placeholder:{value:"Type a value.."}},ja3_digest:O,rate_limit_api_id:{title:"@vercel/firewall",icon:(0,t.jsx)(n.Shield,{}),Component:m.BaseComponent,description:"Rate limit ID from @vercel/firewall package",schema:s.z.union([d.stringSchema,s.z.array(d.stringSchema).min(1,"Rate-limit ID cannot be empty")]),allowedOperators:[u.withIdOperator],placeholder:{value:"Rate limit ID"}},target_path:{...w,deprecated:e=>"target_path"!==e}};e.s(["baseModules",0,P])}]);

//# sourceMappingURL=4429feaf30cb3188.js.map
//# debugId=89b343c6-178d-5a11-8510-a21aac82ce54
