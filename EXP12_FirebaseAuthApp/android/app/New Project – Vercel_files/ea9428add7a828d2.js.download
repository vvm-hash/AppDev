
!function(){try{var e="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:{},n=(new e.Error).stack;n&&(e._sentryDebugIds=e._sentryDebugIds||{},e._sentryDebugIds[n]="f95dbdc9-38a2-52d7-90bc-39551ecf86ad")}catch(e){}}();
(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,5981884,e=>{"use strict";var s=e.i(6468255),a=e.i(57106),t=e.i(9100551);function i(e){let{active:t,title:i,href:l,external:r,onClick:n}=e;return(0,s.jsx)(a.Link,{className:"w-full select-none rounded px-3 py-2 text-left no-underline *:w-full md:hover:bg-gray-100 aria-[current=true]:bg-gray-200 aria-[current=true]:hover:bg-gray-200 text-gray-900 aria-[current=true]:text-gray-1000",href:l,target:r?"_blank":void 0,rel:r?"noopener noreferrer":void 0,onClick:n,"aria-current":t,children:(0,s.jsx)("p",{className:"font-medium",children:i})})}function l(e){let{teamSlug:a}=e,l=(0,t.usePathname)(),r=[{title:"Overview",href:`/${a}/~/agent`},{title:"Tasks",href:`/${a}/~/agent/tasks`}];return(0,s.jsx)("div",{className:"sticky top-16 hidden h-max w-full max-w-[240px] flex-col items-start justify-start md:flex",children:r.map(e=>{let{title:t,href:r,external:n}=e,d=r===l||r===`/${a}/~/agent/tasks`&&l?.startsWith(`/${a}/~/agent/tasks/`);return(0,s.jsx)(i,{title:t,href:r,external:n,active:!!d},r)})})}e.s(["SidebarTab",()=>i,"VercelAgentSidebar",()=>l])},5085130,e=>{"use strict";var s=e.i(6468255),a=e.i(5981884),t=e.i(2504781),i=e.i(1492947),l=e.i(9508212),r=e.i(7564085),n=e.i(6696646),d=e.i(9100551);function c(e){let{teamSlug:c}=e,[o,u]=(0,n.useState)(!1),x=(0,d.usePathname)(),m=[{title:"Overview",href:`/${c}/~/agent`},{title:"Tasks",href:`/${c}/~/agent/tasks`}];return(0,s.jsxs)("div",{className:"block md:hidden",children:[(0,s.jsx)(t.Button,{onClick:()=>u(!0),type:"secondary",shape:"square",children:(0,s.jsx)(r.AlignmentLeft,{size:16})}),(0,s.jsx)(i.Drawer,{onDismiss:()=>u(!1),show:o,children:(0,s.jsx)(l.Stack,{gap:0,padding:2,children:m.map(e=>{let{title:t,href:i,external:l}=e;return(0,s.jsx)(a.SidebarTab,{title:t,href:i,active:i===x,external:l,onClick:()=>u(!1)},i)})})})]})}e.s(["VercelAgentSidebarDrawer",()=>c])},8835542,3282299,e=>{"use strict";var s=e.i(6468255),a=e.i(2504781),t=e.i(5468328),i=e.i(87116),l=e.i(5255926),r=e.i(6696646),n=e.i(6347389),d=e.i(8863362),c=e.i(1717203),o=e.i(7557283),u=e.i(7608222);function x(e){let{type:x="inline"}=e,{can:m}=(0,c.default)(),p=m(o.Action.Update,o.Resource.PaymentMethod),{balance:h}=(0,i.useVercelAgentCreditsBalance)(),{openModal:g,modals:y}=(0,d.useAddCreditsModal)(),j=(0,r.useCallback)(e=>{if(void 0===e)return"";let s=Math.max(0,e);return s<100?s.toFixed(2):s<1e3?s.toFixed(0):`${(s/1e3).toFixed(0)}k`},[]);return(0,s.jsxs)("div",{className:"flex items-center gap-2",children:[void 0!==h?(0,s.jsx)(t.Tooltip,{position:"bottom",disableTriggers:p,boxAlign:"center",text:`You need additional permissions to manage your team's ${u.VERCEL_AGENT_NAME} credit.`,children:(0,s.jsx)(a.Button,{type:"on-demand"===x?"default":"secondary",size:"on-demand"===x?"small":void 0,disabled:!p,onClick:g,prefix:"inline"===x?(0,s.jsx)(n.Coins,{}):void 0,children:"inline"===x?`$${j(h)} Credit`:"Buy credit"})}):(0,s.jsx)(l.Skeleton,{children:(0,s.jsx)(a.Button,{type:"on-demand"===x?"default":"secondary",size:"on-demand"===x?"small":void 0,prefix:"inline"===x?(0,s.jsx)(n.Coins,{}):void 0,children:"inline"===x?"Loading credit":"Buy credit"})}),y]})}function m(){return(0,s.jsx)(x,{})}var p=e.i(5519837),h=e.i(6891161),g=e.i(5323212),y=e.i(1906681),j=e.i(3500331),f=e.i(455575),b=e.i(3306538),v=e.i(8522580),N=e.i(1136434),w=e.i(5338940),C=e.i(2596253),A=e.i(8248823),E=e.i(1249298),T=e.i(3041776),M=e.i(6130025),S=e.i(9598279),k=e.i(1230902),R=e.i(28552),_=e.i(1942008);function D(e){let{onClose:t,isFirstTimeUser:i,source:l,onConversion:d}=e,{team:x,mutate:m}=(0,w.useTeam)(),{can:D}=(0,c.default)(),V=(0,f.useToasts)(),{trigger:L,isMutating:P}=(0,E.useUpdateAIReviews)({source:`enable-modal${l?`-${l}`:""}`}),{trigger:U,isMutating:$}=(0,E.useUpdateAlertInvestigations)({source:`enable-modal${l?`-${l}`:""}`}),{autoRechargeConfig:F}=(0,C.useVercelAgentCreditsAutoRecharge)(),{createAutoRecharge:B,updateAutoRecharge:O}=(0,E.useAutoRechargeActions)(),I=D(o.Action.Update,o.Resource.Team),G=x?.vadeReview?.enabled??!1,z=x?.alertInvestigation?.enabled??!1,q=x?.vadeReview?.reviewDraftPRs??!1,H=x?.vadeReview?.repositoryVisibility??"all",[Y]=(0,r.useState)(!0),[K,Q]=(0,r.useState)(q),[W,J]=(0,r.useState)(H),[X,Z]=(0,r.useState)(z),[ee,es]=(0,r.useState)(null),[ea,et]=(0,r.useState)(!0),[ei,el]=(0,r.useState)(T.DEFAULT_AUTO_RECHARGE_MIN_BALANCE_USD.toString()),[er,en]=(0,r.useState)(T.DEFAULT_AUTO_RECHARGE_TARGET_BALANCE_USD.toString()),[ed,ec]=(0,r.useState)(""),{data:eo}=(0,R.useObservabilityConfiguration)(),{hasObservabilityPlusAccess:eu}=(0,_.hasObservabilityPlus)({team:x??null,observabilityConfiguration:eo}),ex=Y!==G||K!==q||W!==H,em=eu&&X!==z;async function ep(){if(x){es(null);try{let e=!Y&&G?new Date().toISOString():Y&&!G?null:void 0,s={enabled:Y};if(s.reviewDraftPRs=K,s.repositoryVisibility=W,void 0!==e&&(s.snoozedAt=e),await L(s),eu&&X!==z&&await U({enabled:X}),G||d?.({isFirstTimeUser:i,autoRechargeEnabled:ea}),ea)if(F)try{await O({updatedMinimumBalance:ei,updatedTargetBalance:er,updatedMaximumMonthlySpend:ed}),V.success(`${u.VERCEL_AGENT_NAME} enabled with auto-reload.`)}catch(e){V.success(`${u.VERCEL_AGENT_NAME} enabled. Set up auto-reload later in settings.`)}else try{await B({minimumBalance:ei,targetBalance:er,maximumMonthlySpend:ed}),V.success(`${u.VERCEL_AGENT_NAME} enabled with auto-reload.`)}catch(e){V.success(`${u.VERCEL_AGENT_NAME} enabled. Set up auto-reload later in settings.`)}else V.success(`${u.VERCEL_AGENT_NAME} settings updated.`);await m().catch(()=>{}),x.slug&&await (0,M.revalidateVercelAgentPage)(x.slug),t()}catch(e){es((0,A.errorToString)(e))}}}let eh=(0,S.addDays)(new Date,14);return(0,s.jsxs)(h.Modal.Modal,{active:!0,onClickOutside:t,overlayClassname:"bg-background-200/80",children:[(0,s.jsxs)(h.Modal.Body,{children:[(0,s.jsxs)(h.Modal.Header,{children:[(0,s.jsxs)(h.Modal.Title,{className:"flex flex-row gap-2 items-center",children:["Enable ",u.VERCEL_AGENT_NAME]}),i&&(0,s.jsxs)(v.Note,{type:"success",fill:!0,className:"mt-4 text-pretty",icon:(0,s.jsx)(n.Coins,{}),children:["You'll receive $100 in free credit which expires in 2 weeks on"," ",(0,s.jsx)("span",{dangerouslySetInnerHTML:{__html:(0,k.format)(eh,"MMM d, yyyy").split(" ").join("&nbsp;")}}),"."]})]}),(0,s.jsxs)("div",{className:"space-y-6",children:[(0,s.jsxs)("section",{className:"space-y-3",children:[(0,s.jsxs)("div",{className:"flex gap-1 items-center",children:[(0,s.jsx)("h3",{className:"text-heading-16",children:"Code Reviews"}),(0,s.jsx)(b.Badge,{variant:"pink",size:"sm",children:"Beta"})]}),(0,s.jsx)("p",{children:"Code reviews that catch bugs before they reach production."}),(0,s.jsxs)("div",{className:"flex flex-row gap-4",children:[(0,s.jsx)("div",{style:{flex:"1 0 0"},children:(0,s.jsxs)(g.Select,{label:"Repositories",value:Y?W:"all",disabled:!I||!Y,onChange:e=>{J(e.target.value)},children:[(0,s.jsx)("option",{value:"all",children:"All repositories"}),(0,s.jsx)("option",{value:"public",children:"Public repositories only"}),(0,s.jsx)("option",{value:"private",children:"Private repositories only"})]})}),(0,s.jsx)("div",{style:{flex:"1 0 0"},children:(0,s.jsxs)(g.Select,{label:"Review Draft PRs",value:Y&&!0===K?"review":"skip",disabled:!I||!Y,onChange:e=>{Q("review"===e.target.value)},children:[(0,s.jsx)("option",{value:"review",children:"Review draft PRs"}),(0,s.jsx)("option",{value:"skip",children:"Skip draft PRs"})]})})]})]}),eu&&(0,s.jsxs)("section",{className:"space-y-3",children:[(0,s.jsxs)("div",{className:"flex gap-1 items-center",children:[(0,s.jsx)("h3",{className:"text-heading-16",children:"Investigations"}),(0,s.jsx)(b.Badge,{variant:"pink",size:"sm",children:"Beta"})]}),(0,s.jsx)("p",{children:"Understand and fix anomalies quicker with automatic investigations."}),(0,s.jsx)("div",{className:"flex flex-row gap-2 items-center",children:(0,s.jsx)(y.Toggle,{checked:X,onChange:()=>Z(!X),size:"medium",disabled:!I,direction:"switch-first",children:(0,s.jsx)("span",{className:"text-gray-1000",children:X?"Enabled":"Disabled"})})})]}),(0,s.jsxs)("section",{className:"space-y-3 bg-background-200 border-t px-6 py-5 -mb-6 -mx-6",children:[(0,s.jsx)("h3",{className:"text-heading-16",children:"Auto-reload"}),(0,s.jsx)(p.Root,{children:(0,s.jsxs)("div",{className:"space-y-3",children:[(0,s.jsxs)("div",{className:"space-y-3",children:[(0,s.jsxs)("p",{children:["Keep ",u.VERCEL_AGENT_NAME," running by automatically adding credit when your balance falls below a certain amount."]}),(0,s.jsxs)("div",{className:"flex flex-row gap-2 items-center justify-between",children:[(0,s.jsx)(y.Toggle,{checked:ea,onChange:()=>et(!ea),size:"medium",disabled:!I,direction:"switch-first",children:(0,s.jsx)("span",{className:"text-gray-1000",children:ea?"Enabled":"Disabled"})}),ea&&(0,s.jsxs)(p.Trigger,{className:"text-xs font-medium hover:text-gray-1000 bg-transparent focus-visible:outline-focus focus-visible:outline-2 focus-visible:outline-offset-2 font-sans text-gray-900 flex items-center gap-0.5 group px-0 translate-x-1.5",children:[(0,s.jsx)("span",{children:"Configure"}),(0,s.jsx)(N.ChevronDownSmall,{className:"-rotate-90 group-aria-expanded:rotate-0"})]})]})]}),ea?(0,s.jsx)(p.Content,{children:(0,s.jsxs)("div",{className:"space-y-3",children:[(0,s.jsxs)("div",{className:"flex flex-row gap-3",children:[(0,s.jsx)(j.Input,{label:"When balance falls below",width:"100%",prefix:"$",suffix:"USD",value:ei,onChange:e=>el(e.target.value),disabled:!I,suffixStyling:!1}),(0,s.jsx)(j.Input,{label:"Reload to target balance",width:"100%",prefix:"$",suffix:"USD",value:er,onChange:e=>en(e.target.value),disabled:!I,suffixStyling:!1})]}),(0,s.jsx)("div",{children:(0,s.jsx)(j.Input,{label:"Monthly spending limit (optional)",width:"100%",prefix:"$",suffix:"USD",placeholder:"No limit",value:ed,onChange:e=>ec(e.target.value),disabled:!I,suffixStyling:!1})})]})}):(0,s.jsx)(v.Note,{type:"warning",fill:!0,children:"Your pull requests will stop being reviewed for problems when you run out of credits."})]})})]}),ee&&(0,s.jsx)("div",{className:"p-3 bg-red-100 rounded-md",children:(0,s.jsx)("p",{children:ee})}),I?null:(0,s.jsxs)(v.Note,{fill:!0,children:["You need additional permissions to manage your team's"," ",u.VERCEL_AGENT_NAME," settings."]})]})]}),(0,s.jsxs)(h.Modal.Actions,{children:[(0,s.jsx)(a.Button,{type:"secondary",onClick:t,children:"Cancel"}),(0,s.jsx)(a.Button,{onClick:ep,loading:P||$,disabled:!I||!(ex||em),children:i?"Enable with $100 Free Credit":"Enable"})]})]})}var V=e.i(7837522),L=e.i(7780974);function P(){let[e,a]=(0,r.useState)({isFirstTimeUser:!1,isActive:!1}),{track:t}=(0,V.useTrackActivity)(),i=()=>a({isActive:!1,isFirstTimeUser:!1,source:void 0}),l=e.isActive?(0,s.jsx)(D,{source:e.source,onClose:i,isFirstTimeUser:e.isFirstTimeUser,onConversion:s=>{t(L.VercelActivityAction.VercelAgentModalConverted,{source:e.source,isFirstTimeUser:e.isFirstTimeUser,autoRechargeEnabled:s.autoRechargeEnabled})}}):null;return{openModal:e=>{let{isFirstTimeUser:s,source:i}=e;a({isFirstTimeUser:s,isActive:!0,source:i}),t(L.VercelActivityAction.VercelAgentModalOpened,{source:i,isFirstTimeUser:s})},closeModal:i,modal:l}}e.s(["useAIReviewsConfigureModal",()=>P],3282299);var U=e.i(8761240),$=e.i(1781243),F=e.i(3738416),B=e.i(1174741),O=e.i(8119470),I=e.i(5481907),G=e.i(3911483);function z(e){let{onClose:t}=e,{team:i,mutate:l}=(0,w.useTeam)(),{can:n}=(0,c.default)(),d=(0,f.useToasts)(),{trigger:x,isMutating:m}=(0,E.useUpdateAIReviews)({source:"disable-modal"}),{data:p}=(0,R.useObservabilityConfiguration)(),{hasObservabilityPlusAccess:g}=(0,_.hasObservabilityPlus)({team:i??null,observabilityConfiguration:p}),{data:y}=(0,I.useSonarQuery)({event:"prReview",rollups:{value:{measure:"reviewComments",aggregation:"sum"}},reason:"agent",summaryOnly:!0,startTime:(0,F.startOfDay)((0,O.subDays)(new Date,30)),endTime:(0,B.endOfDay)(new Date)},{noEnvironmentFilter:!0}),j=(0,F.startOfDay)((0,O.subDays)(new Date,30)),b=(0,B.endOfDay)(new Date),{data:N}=(0,G.default)(i?.id?`/vercel-agent/api/activity?teamId=${i.id}&startTime=${j.toISOString()}&endTime=${b.toISOString()}`:null,async e=>{let s=await fetch(e);return s.ok?s.json():null},{revalidateIfStale:!1,refreshInterval:0}),C=n(o.Action.Update,o.Resource.Team),[T,S]=(0,r.useState)(null);async function k(){if(i){S(null);try{let e={enabled:!1,snoozedAt:new Date().toISOString()};await x(e);let s=[];s.push(l().catch(()=>{})),i.slug&&s.push((0,M.revalidateVercelAgentPage)(i.slug)),await Promise.all(s),d.success(`${u.VERCEL_AGENT_NAME} has been disabled.`),t()}catch(e){S((0,A.errorToString)(e))}}}let D=y?.summary.at(0),V=void 0!==D&&null!==D.value&&D.value>0,L=N?.activities?.length??0,P=g&&L>0;return(0,s.jsxs)(h.Modal.Modal,{active:!0,onClickOutside:t,children:[(0,s.jsxs)(h.Modal.Body,{children:[(0,s.jsx)(h.Modal.Header,{children:(0,s.jsxs)(h.Modal.Title,{children:["Disable ",u.VERCEL_AGENT_NAME]})}),(0,s.jsxs)("div",{className:"space-y-5",children:[(0,s.jsx)("p",{className:"text-copy-14",children:"Disabling means:"}),(0,s.jsxs)("div",{className:"pl-0.5 space-y-3 max-w-[400px]",children:[(0,s.jsxs)("div",{className:"flex items-baseline gap-1.5",children:[(0,s.jsx)($.CrossCircleFill,{className:"translate-y-0.5",size:14,color:"gray-900"}),(0,s.jsxs)("p",{className:"text-copy-14 text-gray-900 leading-relaxed",children:[(0,s.jsx)("span",{className:"text-gray-1000 font-medium",children:"Pull requests"})," ","won't be"," ",(0,s.jsx)("span",{className:"text-gray-1000 font-medium",children:"reviewed automatically"})]})]}),(0,s.jsxs)("div",{className:"flex items-baseline gap-1.5",children:[(0,s.jsx)($.CrossCircleFill,{className:"translate-y-0.5",size:14,color:"gray-900"}),(0,s.jsxs)("p",{className:"text-copy-14 text-gray-900 leading-relaxed text-pretty",children:[(0,s.jsx)("span",{className:"text-gray-1000 font-medium",children:"Code suggestions"})," ","won't be validated in"," ",(0,s.jsx)("span",{className:"text-gray-1000 font-medium",children:"sandboxes"})]})]}),g&&(0,s.jsxs)(s.Fragment,{children:[(0,s.jsxs)("div",{className:"flex items-baseline gap-1.5",children:[(0,s.jsx)($.CrossCircleFill,{className:"translate-y-0.5",size:14,color:"gray-900"}),(0,s.jsxs)("p",{className:"text-copy-14 text-gray-900 leading-relaxed text-pretty",children:[(0,s.jsx)("span",{className:"text-gray-1000 font-medium",children:"Production issues"})," ","won't get"," ",(0,s.jsx)("span",{className:"text-gray-1000 font-medium",children:"root-cause analysis"})]})]}),(0,s.jsxs)("div",{className:"flex items-baseline gap-1.5",children:[(0,s.jsx)($.CrossCircleFill,{className:"translate-y-0.5",size:14,color:"gray-900"}),(0,s.jsxs)("p",{className:"text-copy-14 text-gray-900 leading-relaxed",children:[(0,s.jsx)("span",{className:"text-gray-1000 font-medium",children:"Incidents"})," ","won't include"," ",(0,s.jsx)("span",{className:"text-gray-1000 font-medium",children:"actionable remediation steps"})]})]})]})]}),(0,s.jsx)("p",{className:"text-copy-14",children:"You can re-enable at any time."}),V&&(0,s.jsxs)(v.Note,{type:"success",fill:!0,icon:(0,s.jsx)(U.CheckCircleFill,{}),children:[D.value?.toLocaleString()," improvements suggested in the last ",30," days."]}),P&&(0,s.jsxs)(v.Note,{type:"success",fill:!0,icon:(0,s.jsx)(U.CheckCircleFill,{}),children:[L.toLocaleString()," investigations performed in the last ",30," days."]}),T&&(0,s.jsx)("div",{className:"p-3 bg-red-100 rounded-md",children:(0,s.jsx)("p",{children:T})})]})]}),(0,s.jsxs)(h.Modal.Actions,{children:[(0,s.jsx)(a.Button,{type:"secondary",onClick:t,children:"Cancel"}),(0,s.jsx)(a.Button,{onClick:k,loading:m,disabled:!C,type:"error",children:"Disable"})]})]})}var q=e.i(8674454),H=e.i(6694387),Y=e.i(4991687),K=e.i(8459493),Q=e.i(5756088),W=e.i(8876434),J=e.i(9100551),X=e.i(5033426),Z=e.i(1794286),ee=e.i(7432042),es=e.i(1192207),ea=e.i(8615881),et=e.i(8151845);function ei(){let[e,a]=(0,et.useSonarQueryState)(),{start:t,end:i}=(0,et.useRangeFromQueryState)(),l=Object.entries({"1h":{text:"Last hour",start:(0,es.subHours)(new Date,1),end:new Date},"12h":{text:"Last 12 hours",start:(0,es.subHours)(new Date,12),end:new Date},"1d":{text:"Last 24 hours",start:(0,O.subDays)(new Date,1),end:new Date},"7d":{text:"Last 7 days",start:(0,ea.subWeeks)(new Date,1),end:new Date}}).map(e=>{let[s,a]=e;return{key:s,...a}}),r=[{presets:l}],n=e.period?l.find(s=>s.key===e.period)?.key:void 0,d=(0,O.subDays)(new Date,30),c=(0,B.endOfDay)(new Date);return(0,s.jsx)(Z.Calendar,{allowClear:!1,compact:!0,minValue:d,maxValue:c,onChange:(e,s)=>{let t=new Date(e.start),i=new Date(e.end);s?((0,X.track)("Agent Changed Date Range Period",{period:s}),a({period:s})):((0,X.track)("Agent Changed Date Range Period",{period:(0,ee.default)(i.getTime()-t.getTime())}),a({from:t,to:i}))},popoverAlignment:"center",presetKey:n,presets:r,value:{start:t,end:i},width:"190px"},"date-range-select-agent")}var el=e.i(3089600);e.i(6483798);var er=e.i(8287059),en=e.i(7917902);let ed=e=>{let{isFirstTimeUser:t,onConfigure:i,isHobbyPlan:l,isProTrial:r,source:n}=e,{can:d}=(0,c.default)(),u=d(o.Action.Update,o.Resource.Team),{team:x}=(0,en.useAccount)(),m=(0,er.useOpenUpgradeModal)();return r?(0,s.jsx)(a.Button,{type:"default",onClick:()=>{m({teamHint:x?.id,source:"vercel-agent-pro-trial",disabledSteps:["team-members"],onConversionSuccess:()=>{i({isFirstTimeUser:t,source:"vercel-agent-pro-trial-modal"})}})},children:"Upgrade to Pro"}):t?l?null:(0,s.jsx)(a.Button,{type:"default",onClick:()=>i({isFirstTimeUser:t,source:n}),disabled:!u,children:"Enable with $100 Free Credit"}):(0,s.jsx)(a.Button,{type:"default",onClick:()=>i({isFirstTimeUser:t,source:n}),disabled:!u,children:"Enable"})},ec=e=>{let{openDisableModal:a,openBuyCreditsModal:i}=e,{can:l}=(0,c.default)(),r=l(o.Action.Update,o.Resource.Team),n=(0,J.useParams)(),d=n?.teamSlug;return(0,s.jsxs)(Y.MenuContainer,{children:[(0,s.jsx)(H.MenuButton,{"aria-label":"Menu",shape:"square",svgOnly:!0,type:"secondary",children:(0,s.jsx)(W.MoreHorizontal,{})}),(0,s.jsxs)(q.Menu,{width:"208px",children:[(0,s.jsx)(K.MenuItem,{innerMenuItemClassName:"!pointer-events-auto no-underline",disabled:!r,suffix:r?null:(0,s.jsx)(Q.LockClosed,{}),onClick:i,children:r?"Buy credit…":(0,s.jsx)(t.Tooltip,{text:"You need additional permissions to buy credit.",children:"Buy credit…"})}),(0,s.jsx)(K.MenuItem,{innerMenuItemClassName:"!pointer-events-auto no-underline",href:`/${d}/~/settings#${u.VERCEL_AGENT_NAME.toLowerCase().replaceAll(" ","-")}`,isLink:!0,children:"Settings"}),(0,s.jsx)(K.MenuItem,{innerMenuItemClassName:"!pointer-events-auto no-underline",disabled:!r,suffix:r?null:(0,s.jsx)(Q.LockClosed,{}),onClick:a,children:r?`Disable ${u.VERCEL_AGENT_NAME}…`:(0,s.jsxs)(t.Tooltip,{text:`You need additional permissions to disable ${u.VERCEL_AGENT_NAME}.`,children:["Disable ",u.VERCEL_AGENT_NAME,"…"]})})]})]})};e.s(["AgentSettingsCard",0,e=>{let{isAgentEnabled:a,isFirstTimeUser:t,isHobbyPlan:i,isProTrial:l,source:n="settings-card"}=e,{openModal:c,modal:o}=P(),{openModal:u,modal:x}=function(){let[e,a]=(0,r.useState)(!1),t=(0,r.useCallback)(()=>{a(!0)},[]),i=(0,r.useCallback)(()=>{a(!1)},[]);return{openModal:t,modal:e?(0,s.jsx)(z,{onClose:i}):null}}(),{openModal:p,modals:h}=(0,d.useAddCreditsModal)(),g=(0,J.usePathname)(),y=(0,J.useParams)(),j=y?.teamSlug,f=g===`/${j}/~/agent`;return(0,el.default)("enable",(e,s)=>{"1"!==e||a||i||l||c({isFirstTimeUser:t,source:s.source??"query-enable"})},["source"]),(0,s.jsxs)("div",{children:[a?(0,s.jsxs)("div",{className:"flex flex-row gap-2 flex-wrap md:flex-nowrap",children:[f&&(0,s.jsx)("div",{className:"w-fit",children:(0,s.jsx)(ei,{})}),(0,s.jsx)(m,{}),(0,s.jsx)(ec,{openDisableModal:u,openBuyCreditsModal:p})]}):(0,s.jsx)(ed,{isFirstTimeUser:t,onConfigure:e=>{c(e)},isHobbyPlan:i,isProTrial:l,source:n}),o,x,h]})}],8835542)},8498091,e=>{"use strict";var s=e.i(6468255),a=e.i(7608222),t=e.i(6347389),i=e.i(8522580),l=e.i(2504781);e.i(6483798);var r=e.i(8287059),n=e.i(9668517),d=e.i(5140444),c=e.i(6317369),o=e.i(8852425),u=e.i(1933683),x=(e.i(6318858),e.i(4148413),e.i(8761240)),m=e.i(3534033),p=e.i(3306538),h=e.i(8835542),g=e.i(1717203),y=e.i(7557283),j=e.i(7837522),f=e.i(7780974),b=e.i(6696646),v=e.i(5338940),N=e.i(4844919),w=e.i(794055),C=e.i(28552),A=e.i(1942008);let E=e=>{let{isFirstTimeUser:l,isProTrial:r}=e,n=(0,v.useTeam)(),d=n?.team?.billing?.plan||"pro",{can:c}=(0,g.default)(),o=c(y.Action.Update,y.Resource.Team),{track:u,isReady:E}=(0,j.useTrackActivity)(),T=(0,b.useRef)(!1),{data:M}=(0,C.useObservabilityConfiguration)(),{hasObservabilityPlusAccess:S}=(0,A.hasObservabilityPlus)({team:n?.team??null,observabilityConfiguration:M});return(0,b.useEffect)(()=>{!T.current&&E&&(T.current=!0,u(f.VercelActivityAction.VercelAgentUpsellImpression,{type:r?"pro-trial-upsell":"feature-upsell",isFirstTimeUser:l}))},[u,E,r,l]),(0,s.jsxs)("div",{className:"material-modal rounded-[16px] w-full md:w-[min(55vw,480px)] relative overflow-clip",children:[(0,s.jsx)(w.NorthernLights,{className:"hidden md:block",colors:["var(--ds-blue-700)","var(--ds-blue-700)","var(--ds-green-700)","var(--ds-green-700)","var(--ds-green-700)"]}),(0,s.jsxs)("div",{className:"space-y-8 px-8 pt-10 pb-6 relative",children:[(0,s.jsxs)("h2",{className:"text-heading-24",children:["Ship faster & safer with ",a.VERCEL_AGENT_NAME]}),(0,s.jsxs)("div",{className:"pl-0.5 space-y-3 max-w-[400px]",children:[(0,s.jsxs)("div",{className:"flex items-baseline gap-2",children:[(0,s.jsx)(x.CheckCircleFill,{className:"translate-y-0.5",size:14}),(0,s.jsxs)("p",{className:"text-copy-14 text-gray-900 leading-relaxed",children:[(0,s.jsx)("span",{className:"text-gray-1000 font-medium",children:"Code reviews"})," ","with full codebase context to catch"," ",(0,s.jsx)("span",{className:"text-gray-1000 font-medium",children:"hard-to-find bugs"}),"."]})]}),(0,s.jsxs)("div",{className:"flex items-baseline gap-1.5",children:[(0,s.jsx)(x.CheckCircleFill,{className:"translate-y-0.5",size:14}),(0,s.jsxs)("p",{className:"text-copy-14 text-gray-900 leading-relaxed text-pretty",children:[(0,s.jsx)("span",{className:"text-gray-1000 font-medium",children:"Code suggestions"})," ","validated in sandboxes before you merge."]})]}),(0,s.jsxs)("div",{className:"flex items-baseline gap-1.5",children:[(0,s.jsx)(x.CheckCircleFill,{className:"translate-y-0.5",size:14}),(0,s.jsxs)("p",{className:"text-copy-14 text-gray-900 leading-relaxed text-pretty",children:[(0,s.jsx)("span",{className:"text-gray-1000 font-medium",children:"Root-cause analysis"})," ","for production issues with deployment context.",!S&&(0,s.jsxs)(s.Fragment,{children:[" ","Requires"," ",(0,s.jsx)(p.Badge,{variant:"blue-subtle",size:"sm",children:"Observability Plus"})]})]})]}),(0,s.jsxs)("div",{className:"flex items-baseline gap-1.5",children:[(0,s.jsx)(x.CheckCircleFill,{className:"translate-y-0.5",size:14}),(0,s.jsxs)("p",{className:"text-copy-14 text-gray-900 leading-relaxed",children:[(0,s.jsx)("span",{className:"text-gray-1000 font-medium",children:"Actionable remediation steps"})," ","for faster incident resolution.",!S&&(0,s.jsxs)(s.Fragment,{children:[" ","Requires"," ",(0,s.jsx)(p.Badge,{variant:"blue-subtle",size:"sm",children:"Observability Plus"})]})]})]})]})]}),(0,s.jsxs)("div",{className:"pt-0 pb-5 px-8 space-y-3",children:[l&&(0,s.jsx)("div",{children:(0,s.jsxs)(i.Note,{type:"success",fill:!0,className:"text-pretty",icon:(0,s.jsx)(t.Coins,{}),children:[(0,N.default)(d)," teams get $100 in ",a.VERCEL_AGENT_NAME," trial credit for 2 weeks."]})}),r&&(0,s.jsx)("div",{children:(0,s.jsxs)(i.Note,{type:"success",fill:!0,className:"text-pretty",icon:(0,s.jsx)(t.Coins,{}),children:["Upgrade to Pro to enable ",a.VERCEL_AGENT_NAME," & claim your $100 credit."]})}),o&&(0,s.jsx)("div",{children:(0,s.jsxs)("p",{className:"text-gray-900 text-copy-14",children:["Your use is subject to Vercel's"," ",(0,s.jsx)(m.ExternalLink,{href:"https://vercel.com/docs/release-phases/public-beta-agreement",children:"Public Beta Agreement"})," ","and"," ",(0,s.jsx)(m.ExternalLink,{href:"https://vercel.com/legal/ai-product-terms",children:"AI Product Terms"}),"."]})})]}),(0,s.jsxs)("div",{className:"border-t bg-background-200 py-3 px-8 rounded-b-[16px] flex justify-between items-center",children:[!o&&(0,s.jsxs)("p",{className:"text-gray-900",children:["You need additional permissions to enable ",a.VERCEL_AGENT_NAME,"."]}),o&&(0,s.jsx)("div",{className:"flex justify-between w-full items-center",children:(0,s.jsx)("div",{className:"ml-auto",children:(0,s.jsx)(h.AgentSettingsCard,{isFirstTimeUser:l,isAgentEnabled:!1,isHobbyPlan:!1,isProTrial:r,source:"feature-enable-modal"})})})]})]})},T=e=>{let{username:t}=e;return(0,s.jsxs)("div",{className:"hidden lg:block",role:"img","aria-label":`A GitHub pull request with a suggestion made by ${a.VERCEL_AGENT_NAME}. The suggestion highlights a security vulnerability & proposes a fix.`,children:[(0,s.jsxs)("section",{className:"shadow-sm rounded-lg px-4 py-3 pb-6 space-y-0.5 mx-4 text-copy-14","aria-hidden":!0,children:[(0,s.jsxs)("p",{className:"text-heading-16 font-medium",children:["feat: Adding chat generation"," ",(0,s.jsx)("span",{className:"text-gray-900 pl-1 font-normal",children:"#53417"})]}),(0,s.jsxs)("div",{className:"flex items-baseline gap-1.5",children:[(0,s.jsxs)("div",{className:"text-green-100 bg-green-700 rounded-full px-2 py-0.5 w-fit flex items-center gap-0.5",children:[(0,s.jsx)(c.GitPullRequest,{width:12,height:12}),(0,s.jsx)("p",{className:"font-medium text-copy-13",children:"Open"})]}),(0,s.jsxs)("p",{className:"text-gray-900 -translate-y-0.5 text-copy-13",children:[(0,s.jsx)("span",{className:"font-medium",children:t})," wants to merge 2 commits into"," ",(0,s.jsx)("span",{className:"font-mono bg-blue-100 text-blue-900 rounded-sm px-1",children:"main"})," ","from"," ",(0,s.jsxs)("span",{className:"font-mono bg-blue-100 text-blue-900 rounded-sm px-1",children:[t,"/feature"]})]})]})]}),(0,s.jsxs)("section",{className:"shadow-sm rounded-lg px-4 py-4 bg-background-100 -translate-y-4 flex gap-2","aria-hidden":!0,children:[(0,s.jsx)("div",{children:(0,s.jsx)("div",{className:"bg-gray-1000 text-gray-100 w-fit rounded-sm aspect-square flex items-center justify-center size-7",children:(0,s.jsx)(o.LogoVercel,{className:"-translate-y-px",width:14,height:14})})}),(0,s.jsxs)("div",{className:"space-y-3 pt-1",children:[(0,s.jsx)("div",{children:(0,s.jsxs)("p",{className:"flex items-center gap-1 text-gray-900 text-copy-13",children:[(0,s.jsx)("span",{className:"bg-gray-100 text-gray-900 rounded-full p-0.5 aspect-square flex items-center justify-center",children:(0,s.jsx)(u.Eye,{width:12,height:12})}),(0,s.jsx)("span",{className:"font-medium",children:"Vercel"}),(0,s.jsx)("span",{className:"rounded-full shadow-border px-1.5 text-xs font-semibold py-0.5 translate-y-px text-gray-700",children:"bot"}),"reviewed",(0,s.jsx)("span",{className:"underline underline-offset-2",children:"2 minutes ago"})]})}),(0,s.jsxs)("div",{className:"shadow-border rounded-md text-copy-13-mono",children:[(0,s.jsx)("div",{className:"bg-background-200 rounded-t-md px-3 border-b border-b-gray-400 py-1",children:(0,s.jsx)("p",{className:"font-mono opacity-80",children:"api/chat/route.ts"})}),(0,s.jsxs)("div",{className:"font-mono grid grid-cols-[40px_1fr] leading-5",children:[(0,s.jsxs)("div",{className:"text-right pr-2 bg-green-300 text-gray-1000 py-0.5 opacity-70 rounded-bl-md",children:[(0,s.jsx)("p",{children:"27"}),(0,s.jsx)("p",{children:"28"}),(0,s.jsx)("p",{children:"29"}),(0,s.jsx)("p",{children:"30"}),(0,s.jsx)("p",{children:"31"})]}),(0,s.jsx)("div",{className:"py-0.5 bg-green-200 pl-2 whitespace-pre rounded-br-md",children:(0,s.jsx)("pre",{className:"m-0 p-0 bg-transparent border-0",style:{fontVariantLigatures:"none",fontFeatureSettings:'"liga" 0, "calt" 0'},children:`if (userId !== req.user.id) {
  return NextResponse.json(
    { error: 'Unauthorized' }, { status: 401 }
  );
}`})})]})]}),(0,s.jsx)("div",{children:(0,s.jsxs)("div",{className:"space-y-2",children:[(0,s.jsxs)("div",{className:"flex items-center gap-1.5",children:[(0,s.jsx)("div",{className:"bg-gray-1000 text-gray-100 w-fit rounded-[3px] flex items-center justify-center size-4.5 aspect-square",children:(0,s.jsx)(o.LogoVercel,{width:7,height:7})}),(0,s.jsxs)("p",{className:"flex items-center gap-1 text-gray-900 text-copy-13",children:[(0,s.jsx)("span",{className:"font-medium",children:"Vercel"}),(0,s.jsx)("span",{className:"rounded-full shadow-border px-1.5 text-xs font-semibold py-0.5 translate-y-px text-gray-700",children:"bot"}),(0,s.jsx)("span",{className:"underline underline-offset-2",children:"2 minutes ago"})]})]}),(0,s.jsx)("p",{className:"text-copy-13 pl-[22px]",children:"Missing authorization check allows user impersonation. Add a user ID validation before processing requests."}),(0,s.jsx)("div",{className:"pl-[22px] text-copy-13 text-gray-900",children:(0,s.jsxs)("p",{children:["► ",(0,s.jsx)("span",{className:"font-medium",children:"View Details"})]})}),!1]})})]})]})]})};var M=e.i(9100551);let S=e=>{let{openConfigureModal:c}=e,o=(0,r.useOpenUpgradeModal)(),u=(0,M.useSearchParams)(),x=(0,n.useTeamSlug)(),m=(0,d.useUser)(),{track:p,isReady:h}=(0,j.useTrackActivity)(),g=(0,b.useRef)(!1),y=u?.get("source"),v=(0,b.useCallback)(e=>`${e}${y?`.${y}`:""}`,[y]);return(0,b.useEffect)(()=>{!g.current&&h&&(g.current=!0,p(f.VercelActivityAction.VercelAgentUpsellImpression,{type:"hobby-upsell"}))},[p,h]),(0,s.jsxs)("div",{className:"material-modal rounded-[16px] w-full md:w-[min(60vw,600px)]",children:[(0,s.jsxs)("div",{className:"space-y-3 p-8 py-6",children:[(0,s.jsxs)("h2",{className:"text-heading-24",children:["Ship faster and safer with ",(0,s.jsx)("span",{className:"rounded-full text-heading-20 bg-blue-300 text-blue-700 px-3.5 py-1.5 align-baseline -translate-y-0.5 ml-0.5",children:"Pro"})]}),(0,s.jsxs)("div",{className:"space-y-4",children:[(0,s.jsxs)("p",{className:"text-copy-16 text-pretty",children:["Get your pull requests automatically reviewed by ",a.VERCEL_AGENT_NAME,"."]}),(0,s.jsx)(T,{username:m.data?.user?.username||m.data?.user?.name||"evilrabbit"}),(0,s.jsx)("ul",{className:"grid grid-cols-1 md:grid-cols-2 gap-6 mt-2",children:a.VERCEL_AGENT_FEATURES.map(e=>(0,s.jsxs)("li",{className:"space-y-1",children:[(0,s.jsxs)("div",{className:"flex items-baseline gap-2 flex-wrap",children:[(0,s.jsx)("div",{className:"text-gray-900 translate-y-0.5",children:(0,s.jsx)(e.Icon,{})}),(0,s.jsx)("h3",{className:"text-heading-16 font-medium",children:e.title})]}),(0,s.jsx)("p",{className:"text-copy-14 text-gray-900 text-pretty",children:e.description})]},e.title))}),(0,s.jsxs)(i.Note,{type:"success",fill:!0,className:"text-pretty",icon:(0,s.jsx)(t.Coins,{}),children:["Pro teams get $100 in ",a.VERCEL_AGENT_NAME," trial credit for 2 weeks."]})]})]}),(0,s.jsx)("div",{className:"border-t bg-background-200 py-3 px-8 rounded-b-[16px] flex justify-end",children:(0,s.jsx)(l.Button,{onClick:()=>{o({source:v("vercel-agent"),disabledSteps:["team-members"],teamHint:x??void 0,onConversionSuccess:()=>{c({isFirstTimeUser:!0,source:v("hobby-upsell-modal")})}})},children:"Upgrade to Pro"})})]})};var k=e.i(3282299),R=e.i(9722978),_=e.i(60582);function D(e){let{isVercelAgentEnabled:a,isHobbyPlan:t,isFirstTimeUser:i,isProTrial:l}=e,{openModal:r,modal:n}=(0,k.useAIReviewsConfigureModal)();return(0,s.jsxs)(s.Fragment,{children:[!a&&t&&(0,s.jsx)("div",{className:(0,R.clsx)("absolute inset-0 -inset-x-4 z-50 flex justify-center h-fit",{"-translate-y-36":!_.IS_DASH}),children:(0,s.jsx)(S,{openConfigureModal:r})}),!a&&!t&&(0,s.jsx)("div",{className:(0,R.clsx)("absolute inset-0 -inset-x-4 z-50 flex h-fit justify-center",{"-translate-y-12":!_.IS_DASH}),children:(0,s.jsx)(E,{isFirstTimeUser:i,isProTrial:l})}),n]})}e.s(["VercelAgentUpsellModals",()=>D],8498091)}]);

//# sourceMappingURL=ef88822d6eae02f9.js.map
//# debugId=f95dbdc9-38a2-52d7-90bc-39551ecf86ad
